"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["5761"],{56420:function(e,t,a){a.d(t,{Y:()=>T});var l=a(31085),r=a(95208),i=a(18139),n=a(54195),o=a(77125),s=a(64947),c=a(93453),d=a(29365),p=a(68804),u=a(5951),h=a(26343),g=a(28233),m=a(55197),x=a(58837),f=a(72501),b=a(5893),v=a(14041);a(45250);var j=a(70209),C=a(92483),A=a(75202),y=a(89475),k=a(10265);let S=(0,x.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),F=({icon:e})=>{let t=(0,r.n)(),a=e?t.getSystemIcon(e)??C.NT:C.NT;return(0,l.jsx)(a,{})},P=({link:e})=>(0,l.jsx)(A.N_,{to:e.url,children:e.title??e.url}),G=({item:e})=>(0,l.jsxs)(h.A,{button:!1,children:[(0,l.jsx)(p.A,{children:(0,l.jsx)(F,{icon:e.icon})}),(0,l.jsx)(u.A,{primary:e.title,secondary:e.links?.reduce((e,t,a)=>[...e,a>0&&(0,l.jsx)("br",{},a),(0,l.jsx)(P,{link:t},t.url)],[])})]});function T(e){let{t}=(0,k.i)(y.O),{title:a,items:r,children:p}=e,{items:u}=(0,j.l)(),[x,A]=(0,v.useState)(!1),[F,P]=(0,v.useState)(null),T=S(),R=(0,i.gf)(n.U).getOptionalConfig("app.support"),L=(0,b.A)(e=>e.breakpoints.down("sm")),N=e=>{P(e.currentTarget),A(!0)},z=()=>{A(!1)};return R?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{display:"flex",ml:1,children:L?(0,l.jsx)(d.A,{color:"primary",size:"small",onClick:N,"data-testid":"support-button","aria-label":"Support",children:(0,l.jsx)(C.NT,{})}):(0,l.jsx)(s.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:N,startIcon:(0,l.jsx)(C.NT,{}),children:t("supportButton.title")})}),(0,l.jsxs)(m.Ay,{"data-testid":"support-button-popover",open:x,anchorEl:F,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:z,children:[(0,l.jsxs)(g.A,{className:T.popoverList,autoFocusItem:!!F,children:[a&&(0,l.jsx)(h.A,{button:!1,alignItems:"flex-start",className:T.menuItem,children:(0,l.jsx)(f.A,{variant:"subtitle1",children:a})}),v.Children.map(p,(e,t)=>(0,l.jsx)(h.A,{button:!1,alignItems:"flex-start",className:T.menuItem,children:e},`child-${t}`)),(r??u).map((e,t)=>(0,l.jsx)(G,{item:e},`item-${t}`))]}),(0,l.jsx)(c.A,{children:(0,l.jsx)(s.A,{color:"primary",onClick:z,"aria-label":"Close",children:t("supportButton.close")})})]})]}):null}},57336:function(e,t,a){a.d(t,{CatalogGraphPage:()=>eo});var l=a(31085),r=a(78560),i=a(82326),n=a(79182),o=a(16454),s=a(17138),c=a(56420),d=a(72814),p=a(52262),u=a(20987),h=a(53318),g=a(42899),m=a(4321),x=a(72501),f=a(58837),b=a(65859),v=a(98984),j=a(15485),C=a(14041),A=a(18690),y=a(1666),k=a(79089),S=a(77125),F=a(22221),P=a(10265);let G=["curveMonotoneX","curveStepBefore"],T=({value:e,onChange:t})=>{let{t:a}=(0,P.i)(F.C),r={curveMonotoneX:a("catalogGraphPage.curveFilter.curveMonotoneX"),curveStepBefore:a("catalogGraphPage.curveFilter.curveStepBefore")},i=(0,C.useCallback)(e=>t(e),[t]);return(0,l.jsx)(S.A,{pb:1,pt:1,children:(0,l.jsx)(k.w,{label:a("catalogGraphPage.curveFilter.title"),selected:e,items:G.map(e=>({label:r[e],value:e})),onChange:i})})};var R=a(49904);let L=({value:e,onChange:t})=>{let{t:a}=(0,P.i)(F.C),r={[R.O.LEFT_RIGHT]:a("catalogGraphPage.directionFilter.leftToRight"),[R.O.RIGHT_LEFT]:a("catalogGraphPage.directionFilter.rightToLeft"),[R.O.TOP_BOTTOM]:a("catalogGraphPage.directionFilter.topToBottom"),[R.O.BOTTOM_TOP]:a("catalogGraphPage.directionFilter.bottomToTop")},i=(0,C.useCallback)(e=>t(e),[t]);return(0,l.jsx)(S.A,{pb:1,pt:1,children:(0,l.jsx)(k.w,{label:a("catalogGraphPage.directionFilter.title"),selected:e,items:Object.values(R.O).map(e=>({label:r[e],value:e})),onChange:i})})};var N=a(95061),z=a(29365),O=a(34839),w=a(6055),E=a(64704);let I=(0,f.A)({formControl:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphMaxDepthFilter"}),B=({value:e,onChange:t})=>{let a=I(),r=(0,C.useRef)(t),[i,n]=(0,C.useState)(e),{t:o}=(0,P.i)(F.C);(0,C.useEffect)(()=>{r.current=t},[t]),(0,C.useEffect)(()=>{n(e)},[e]);let s=(0,C.useCallback)(e=>{let t=Number(e.target.value),a=Number.isFinite(t)&&t>0?t:1/0;n(a),r.current(a)},[]),c=(0,C.useCallback)(()=>{n(1/0),r.current(1/0)},[r]);return(0,l.jsx)(S.A,{pb:1,pt:1,children:(0,l.jsxs)(N.A,{variant:"outlined",className:a.formControl,children:[(0,l.jsx)(x.A,{variant:"button",children:o("catalogGraphPage.maxDepthFilter.title")}),(0,l.jsx)(w.A,{type:"number",placeholder:o("catalogGraphPage.maxDepthFilter.inputPlaceholder"),value:Number.isFinite(i)?String(i):"",onChange:s,endAdornment:(0,l.jsx)(O.A,{position:"end",children:(0,l.jsx)(z.A,{"aria-label":o("catalogGraphPage.maxDepthFilter.clearButtonAriaLabel"),onClick:c,edge:"end",children:(0,l.jsx)(E.default,{})})}),inputProps:{"aria-label":"maxp"},labelWidth:0})]})})};var M=a(18139),H=a(34477),D=a(30043),U=a(98552),X=a(86901),K=a(16249),W=a(44148),_=a(41260),$=a(6924),V=a(98312),Y=a(73466);let Q=(0,f.A)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedKindsFilter"}),Z=({value:e,onChange:t})=>{let a=Q(),r=(0,M.gf)(H.k),i=(0,M.gf)(D.v),{t:n}=(0,P.i)(F.C),{error:o,value:s}=(0,Y.A)(async()=>await i.getEntityFacets({facets:["kind"]}).then(e=>e.facets.kind?.map(e=>e.value).sort()||[]));(0,C.useEffect)(()=>{o&&r.post({message:"Failed to load entity kinds",severity:"error"})},[o,r]);let c=(0,C.useMemo)(()=>s?s.map(e=>e.toLocaleLowerCase("en-US")):s,[s]),d=(0,C.useCallback)((e,a)=>{t(c&&c.every(e=>a.includes(e))?void 0:a)},[c,t]),p=(0,C.useCallback)(()=>{t(e?.length?e:void 0)},[e,t]);return s?.length&&c?.length&&!o?(0,l.jsxs)(S.A,{pb:1,pt:1,children:[(0,l.jsx)(x.A,{variant:"button",children:n("catalogGraphPage.selectedKindsFilter.title")}),(0,l.jsx)(V.Ay,{className:a.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":n("catalogGraphPage.selectedKindsFilter.title"),options:c,value:e??c,getOptionLabel:e=>s[c.indexOf(e)]??e,onChange:d,onBlur:p,renderOption:(e,{selected:t})=>(0,l.jsx)(X.A,{control:(0,l.jsx)(U.A,{icon:(0,l.jsx)(_.default,{fontSize:"small"}),checkedIcon:(0,l.jsx)(W.default,{fontSize:"small"}),checked:t}),label:s[c.indexOf(e)]??e}),size:"small",popupIcon:(0,l.jsx)($.default,{"data-testid":"selected-kinds-expand"}),renderInput:e=>(0,l.jsx)(K.A,{...e,variant:"outlined"})})]}):(0,l.jsx)(l.Fragment,{})};var q=a(13619);let J=(0,f.A)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedRelationsFilter"}),ee=e=>{let{relations:t,value:a,onChange:r}=e,i=J(),{relations:n,includeRelation:o}=(0,q.j)({relations:t}),s=(0,C.useMemo)(()=>n.filter(e=>o(e)),[n,o]),{t:c}=(0,P.i)(F.C),d=(0,C.useCallback)((e,t)=>{r(t)},[r]),p=(0,C.useCallback)(()=>{r(a?.length?a:void 0)},[a,r]);return(0,l.jsxs)(S.A,{pb:1,pt:1,children:[(0,l.jsx)(x.A,{variant:"button",children:c("catalogGraphPage.selectedRelationsFilter.title")}),(0,l.jsx)(V.Ay,{className:i.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":c("catalogGraphPage.selectedRelationsFilter.title"),options:n,value:a??s,onChange:d,onBlur:p,renderOption:(e,{selected:t})=>(0,l.jsx)(X.A,{control:(0,l.jsx)(U.A,{icon:(0,l.jsx)(_.default,{fontSize:"small"}),checkedIcon:(0,l.jsx)(W.default,{fontSize:"small"}),checked:t}),label:e}),size:"small",popupIcon:(0,l.jsx)($.default,{"data-testid":"selected-relations-expand"}),renderInput:e=>(0,l.jsx)(K.A,{...e,variant:"outlined"})})]})};var et=a(73643);let ea=(0,f.A)({root:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphSwitchFilter"}),el=({label:e,value:t,onChange:a})=>{let r=ea(),i=(0,C.useCallback)(e=>{a(e.target.checked)},[a]);return(0,l.jsx)(S.A,{pb:1,pt:1,children:(0,l.jsx)(X.A,{control:(0,l.jsx)(et.A,{checked:t,onChange:i,name:e,color:"primary"}),label:e,className:r.root})})};var er=a(45810),ei=a.n(er);let en=(0,f.A)(e=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:e.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:e.spacing(1),gridAutoRows:"auto",[e.breakpoints.up("lg")]:{display:"block"},[e.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[e.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[e.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}}),{name:"PluginCatalogGraphCatalogGraphPage"}),eo=e=>{let{relationPairs:t,initialState:a,entityFilter:f}=e,{t:k}=(0,P.i)(F.C),S=(0,A.Zp)(),G=en(),N=(0,d.S)(u.s),{maxDepth:z,setMaxDepth:O,selectedKinds:w,setSelectedKinds:E,selectedRelations:I,setSelectedRelations:M,unidirectional:H,setUnidirectional:D,mergeRelations:U,setMergeRelations:X,direction:K,setDirection:W,curve:_,setCurve:$,rootEntityNames:V,setRootEntityNames:Y,showFilters:Q,toggleShowFilters:q}=function({initialState:e={}}){let t=(0,A.zy)(),a=(0,A.Zp)(),l=(0,C.useMemo)(()=>ei().parse(t.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[t.search]),i=(0,C.useMemo)(()=>(Array.isArray(l.rootEntityRefs)?l.rootEntityRefs:e?.rootEntityRefs??[]).map(e=>(0,r.KU)(e)),[e?.rootEntityRefs,l.rootEntityRefs]),n=(0,C.useCallback)(e=>{i.length===e.length&&i.every((t,a)=>(0,r.U2)(t)===(0,r.U2)(e[a]))||a(ei().stringify({...l,rootEntityRefs:e.map(e=>(0,r.U2)(e))},{arrayFormat:"brackets",addQueryPrefix:!0}))},[i,a,l]),[o,s]=(0,C.useState)(()=>{var t;return"string"==typeof l.maxDepth?"∞"===(t=l.maxDepth)?1/0:Number(t):e?.maxDepth??1/0}),[c,d]=(0,C.useState)(()=>Array.isArray(l.selectedRelations)?l.selectedRelations:e?.selectedRelations),[p,u]=(0,C.useState)(()=>(Array.isArray(l.selectedKinds)?l.selectedKinds:e?.selectedKinds)?.map(e=>e.toLocaleLowerCase("en-US"))),[h,g]=(0,C.useState)(()=>"string"==typeof l.unidirectional?"true"===l.unidirectional:e?.unidirectional??!0),[m,x]=(0,C.useState)(()=>"string"==typeof l.mergeRelations?"true"===l.mergeRelations:e?.mergeRelations??!0),[f,b]=(0,C.useState)(()=>"string"==typeof l.direction?l.direction:e?.direction??R.O.LEFT_RIGHT),[v,j]=(0,C.useState)(()=>"string"==typeof l.curve?l.curve:e?.curve??"curveMonotoneX"),[y,k]=(0,C.useState)(()=>"string"==typeof l.showFilters?"true"===l.showFilters:e?.showFilters??!0),S=(0,C.useCallback)(()=>k(e=>!e),[k]);return(0,C.useEffect)(()=>{let e=ei().stringify({rootEntityRefs:i.map(r.U2),maxDepth:isFinite(o)?o:"∞",selectedKinds:p,selectedRelations:c,unidirectional:h,mergeRelations:m,direction:f,showFilters:y,curve:v},{arrayFormat:"brackets",addQueryPrefix:!0});a(e,{replace:!0})},[o,v,p,c,h,m,f,y,i,a]),{rootEntityNames:i,setRootEntityNames:n,maxDepth:o,setMaxDepth:s,selectedRelations:c,setSelectedRelations:d,selectedKinds:p,setSelectedKinds:u,unidirectional:h,setUnidirectional:g,mergeRelations:m,setMergeRelations:x,direction:f,setDirection:b,curve:v,setCurve:j,showFilters:y,toggleShowFilters:S}}({initialState:a}),J=(0,p.s)(),et=(0,C.useCallback)((e,t)=>{let a=(0,r.KU)(e.id);if(t.shiftKey){let t=N({kind:a.kind.toLocaleLowerCase("en-US"),namespace:a.namespace.toLocaleLowerCase("en-US"),name:a.name});J.captureEvent("click",e.entity.metadata.title??(0,h.S)(a),{attributes:{to:t}}),S(t)}else J.captureEvent("click",e.entity.metadata.title??(0,h.S)(a)),Y([a])},[N,S,Y,J]);return(0,l.jsxs)(i.Y,{themeId:"home",children:[(0,l.jsx)(n.Y,{title:k("catalogGraphPage.title"),subtitle:V.map(e=>(0,h.S)(e)).join(", ")}),(0,l.jsxs)(o.U,{stretch:!0,className:G.content,children:[(0,l.jsx)(s.d,{titleComponent:(0,l.jsxs)(j.A,{value:"show filters",selected:Q,onChange:()=>q(),children:[(0,l.jsx)(b.default,{})," ",k("catalogGraphPage.filterToggleButtonTitle")]}),children:(0,l.jsx)(c.Y,{children:k("catalogGraphPage.supportButtonDescription")})}),(0,l.jsxs)(g.A,{container:!0,alignItems:"stretch",className:G.container,children:[Q&&(0,l.jsxs)(g.A,{item:!0,xs:12,lg:2,className:G.filters,children:[(0,l.jsx)(B,{value:z,onChange:O}),(0,l.jsx)(Z,{value:w,onChange:E}),(0,l.jsx)(ee,{value:I,onChange:M}),(0,l.jsx)(L,{value:K,onChange:W}),(0,l.jsx)(T,{value:_,onChange:$}),(0,l.jsx)(el,{value:H,onChange:D,label:k("catalogGraphPage.simplifiedSwitchLabel")}),(0,l.jsx)(el,{value:U,onChange:X,label:k("catalogGraphPage.mergeRelationsSwitchLabel")})]}),(0,l.jsx)(g.A,{item:!0,xs:!0,className:G.fullHeight,children:(0,l.jsxs)(m.A,{className:G.graphWrapper,children:[(0,l.jsxs)(x.A,{variant:"caption",color:"textSecondary",display:"block",className:G.legend,children:[(0,l.jsx)(v.default,{className:"icon"})," ",k("catalogGraphPage.zoomOutDescription")]}),(0,l.jsx)(y.L,{...e,rootEntityNames:V,maxDepth:z,kinds:w&&w.length>0?w:void 0,relations:I&&I.length>0?I:void 0,mergeRelations:U,unidirectional:H,onNodeClick:et,direction:K,relationPairs:t,entityFilter:f,className:G.graph,zoom:"enabled",curve:_})]})})]})]})]})}},44148:function(e,t,a){var l=a(4293),r=a(78920);t.default=void 0;var i=r(a(14041));t.default=(0,l(a(74044)).default)(i.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox")},41260:function(e,t,a){var l=a(4293),r=a(78920);t.default=void 0;var i=r(a(14041));t.default=(0,l(a(74044)).default)(i.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank")},98984:function(e,t,a){var l=a(4293),r=a(78920);t.default=void 0;var i=r(a(14041));t.default=(0,l(a(74044)).default)(i.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap")},15485:function(e,t,a){a.d(t,{A:()=>u});var l=a(39850),r=a(89575),i=a(14041),n=a(9546),o=a(268),s=a(7031),c=a(20098),d=a(11192),p=i.forwardRef(function(e,t){var a=e.children,o=e.classes,s=e.className,p=e.disabled,u=void 0!==p&&p,h=e.disableFocusRipple,g=e.onChange,m=e.onClick,x=e.selected,f=e.size,b=void 0===f?"medium":f,v=e.value,j=(0,l.A)(e,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]);return i.createElement(c.A,(0,r.A)({className:(0,n.A)(o.root,s,u&&o.disabled,x&&o.selected,"medium"!==b&&o["size".concat((0,d.A)(b))]),disabled:u,focusRipple:!(void 0!==h&&h),ref:t,onClick:function(e){!(m&&(m(e,v),e.isDefaultPrevented()))&&g&&g(e,v)},onChange:g,value:v,"aria-pressed":x},j),i.createElement("span",{className:o.label},a))});let u=(0,s.A)(function(e){return{root:(0,r.A)({},e.typography.button,{boxSizing:"border-box",borderRadius:e.shape.borderRadius,padding:11,border:"1px solid ".concat((0,o.X4)(e.palette.action.active,.12)),color:(0,o.X4)(e.palette.action.active,.38),"&$selected":{color:e.palette.action.active,backgroundColor:(0,o.X4)(e.palette.action.active,.12),"&:hover":{backgroundColor:(0,o.X4)(e.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,o.X4)(e.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,o.X4)(e.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:e.typography.pxToRem(15)}}},{name:"MuiToggleButton"})(p)}}]);
//# sourceMappingURL=5761.a1cc0c01.chunk.js.map