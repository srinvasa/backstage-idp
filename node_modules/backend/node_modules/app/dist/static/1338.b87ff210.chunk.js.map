{"version":3,"file":"static/1338.b87ff210.chunk.js","sources":["webpack://app/../../node_modules/@backstage/plugin-search/dist/components/SearchPage/SearchPage.esm.js"],"sourcesContent":["import { jsxs, jsx } from 'react/jsx-runtime';\nimport { useEffect } from 'react';\nimport usePrevious from 'react-use/esm/usePrevious';\nimport qs from 'qs';\nimport { useOutlet, useLocation } from 'react-router-dom';\nimport { SearchContextProvider, useSearch } from '@backstage/plugin-search-react';\n\nconst UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters\n  } = useSearch();\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    if (location.search === prevQueryParams) {\n      return;\n    }\n    const query = qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n    if (query.filters) {\n      setFilters(query.filters);\n    }\n    if (query.query) {\n      setTerm(query.query);\n    }\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor);\n    }\n    if (query.types) {\n      setTypes(query.types);\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n  useEffect(() => {\n    const newParams = qs.stringify(\n      {\n        query: term,\n        types,\n        pageCursor,\n        filters\n      },\n      { arrayFormat: \"brackets\" }\n    );\n    const newUrl = `${window.location.pathname}?${newParams}`;\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n  return null;\n};\nconst SearchPage = () => {\n  const outlet = useOutlet();\n  return /* @__PURE__ */ jsxs(SearchContextProvider, { children: [\n    /* @__PURE__ */ jsx(UrlUpdater, {}),\n    outlet\n  ] });\n};\n\nexport { SearchPage, UrlUpdater };\n//# sourceMappingURL=SearchPage.esm.js.map\n"],"names":["p","u","window","document"],"mappings":"2MAOA,IAAM,EAAa,KACjB,IAAM,EAAW,WACX,CACJ,MAAI,CACJ,SAAO,CACP,OAAK,CACL,UAAQ,CACRA,WAAAA,CAAU,CACV,eAAa,CACb,SAAO,CACP,YAAU,CACX,CAAG,WACE,EAAkB,GAAAC,EAAA,GAAY,EAAS,MAAM,EAgCnD,MA/BA,gBAAU,KACR,GAAI,EAAS,MAAM,GAAK,EACtB,OAEF,IAAM,EAAQ,SAAQ,CAAC,EAAS,MAAM,CAAC,SAAS,CAAC,GAAI,CAAE,WAAY,CAAE,IAAM,CAAC,CACxE,GAAM,OAAO,EACf,EAAW,EAAM,OAAO,EAEtB,EAAM,KAAK,EACb,EAAQ,EAAM,KAAK,EAEjB,EAAM,UAAU,EAClB,EAAc,EAAM,UAAU,EAE5B,EAAM,KAAK,EACb,EAAS,EAAM,KAAK,CAExB,EAAG,CAAC,EAAiB,EAAU,EAAS,EAAU,EAAe,EAAW,EAC5E,gBAAU,KACR,IAAM,EAAY,aAAY,CAC5B,CACE,MAAO,EACP,QACAD,WAAAA,EACA,SACF,EACA,CAAE,YAAa,UAAW,GAEtB,EAAS,CAAC,EAAEE,OAAO,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAU,CAAC,CACzDA,OAAO,OAAO,CAAC,YAAY,CAAC,KAAMC,SAAS,KAAK,CAAE,EACpD,EAAG,CAAC,EAAM,EAAOH,EAAY,EAAQ,EAC9B,IACT,EACM,EAAa,KACjB,IAAM,EAAS,WACf,MAAuB,WAAK,IAAqB,CAAE,CAAE,SAAU,CAC7C,UAAI,EAAY,CAAC,GACjC,EACD,AAAC,EACJ,C"}