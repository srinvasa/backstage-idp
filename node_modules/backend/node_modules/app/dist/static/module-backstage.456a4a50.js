(self.webpackChunkapp=self.webpackChunkapp||[]).push([["789"],{89797:function(e,t,r){"use strict";r.d(t,{E:()=>rH});let i="Invalid discovery URL pattern,";class n{constructor(e){this.parts=e}static compile(e){let t,r=e.split(/\{\{\s*pluginId\s*\}\}/),a=r.join("pluginId");try{t=new URL(a)}catch{throw Error(`${i} URL '${a}' is invalid`)}if(t.hash)throw Error(`${i} URL must not have a hash`);if(t.search)throw Error(`${i} URL must not have a query`);if(a.endsWith("/"))throw Error(`${i} URL must not end with a slash`);return new n(r)}async getBaseUrl(e){return this.parts.join(encodeURIComponent(e))}}class a{static fromConfig(e,t){let r=t?.pathPattern??"/api/{{ pluginId }}",i=e.getString("backend.baseUrl");return new a(new Map(e.getOptionalConfigArray("discovery.endpoints")?.flatMap(e=>{let t="object"==typeof e.get("target")?e.getOptionalString("target.external"):e.getString("target");if(!t)return[];let r=n.compile(t);return e.getStringArray("plugins").map(e=>[e,r])})),n.compile(`${i}${r}`))}endpoints;defaultEndpoint;constructor(e,t){this.endpoints=e,this.defaultEndpoint=t}async getBaseUrl(e){let t=this.endpoints.get(e);return t?t.getBaseUrl(e):this.defaultEndpoint.getBaseUrl(e)}}var s=r(96403),o=r.n(s);class l{isClosed=!1;terminatingError;observable=new(o())(e=>this.isClosed?(this.terminatingError?e.error(this.terminatingError):e.complete(),()=>{}):(this.subscribers.add(e),()=>{this.subscribers.delete(e)}));subscribers=new Set;[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw Error("PublishSubject is closed");this.subscribers.forEach(t=>t.next(e))}error(e){if(this.isClosed)throw Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach(t=>t.error(e))}complete(){if(this.isClosed)throw Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(e=>e.complete())}subscribe(e,t,r){return this.observable.subscribe("function"==typeof e?{next:e,error:t,complete:r}:e)}}class c{isClosed;currentValue;terminatingError;observable;constructor(e){this.isClosed=!1,this.currentValue=e,this.terminatingError=void 0,this.observable=new(o())(e=>this.isClosed?(this.terminatingError?e.error(this.terminatingError):e.complete(),()=>{}):(e.next(this.currentValue),this.subscribers.add(e),()=>{this.subscribers.delete(e)}))}subscribers=new Set;[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw Error("BehaviorSubject is closed");this.currentValue=e,this.subscribers.forEach(t=>t.next(e))}error(e){if(this.isClosed)throw Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach(t=>t.error(e))}complete(){if(this.isClosed)throw Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(e=>e.complete())}subscribe(e,t,r){return this.observable.subscribe("function"==typeof e?{next:e,error:t,complete:r}:e)}}class d{subject=new l;post(e){this.subject.next(e)}alert$(){return this.subject}}class u{captureEvent(e){}}class p{alertApi;errorApi;constructor(e,t){this.alertApi=e,this.errorApi=t}post(e,t){return t?.hidden||this.alertApi.post({message:e.message,severity:"error"}),this.errorApi.post(e,t)}error$(){return this.errorApi.error$()}}class h{subject=new l;post(e,t){this.subject.next({error:e,context:t})}error$(){return this.subject}}class g{static forward(e,t){window.addEventListener("unhandledrejection",r=>{e.post(r.reason,t)})}}let m=new Map;class f{namespace;errorApi;constructor(e,t){this.namespace=e,this.errorApi=t}static hasSubscribed=!1;static create(e){return new f(e.namespace??"",e.errorApi)}static addStorageEventListener(){window.addEventListener("storage",e=>{for(let[t,r]of m.entries())e.key?.startsWith(t)&&r.handleStorageChange(e.key)})}get(e){return this.snapshot(e).value}snapshot(e){let t,r="absent";try{let i=localStorage.getItem(this.getKeyName(e));i&&(t=JSON.parse(i,(e,t)=>("object"==typeof t&&null!==t&&Object.freeze(t),t)),r="present")}catch(t){this.errorApi.post(Error(`Error when parsing JSON config from storage for: ${e}`))}return{key:e,value:t,presence:r}}forBucket(e){let t=`${this.namespace}/${e}`;return m.has(t)||m.set(t,new f(t,this.errorApi)),m.get(t)}async set(e,t){localStorage.setItem(this.getKeyName(e),JSON.stringify(t)),this.notifyChanges(e)}async remove(e){localStorage.removeItem(this.getKeyName(e)),this.notifyChanges(e)}observe$(e){return f.hasSubscribed||(f.addStorageEventListener(),f.hasSubscribed=!0),this.observable.filter(({key:t})=>t===e)}handleStorageChange(e){if(!e?.startsWith(this.namespace))return;let t=e?.slice(`${this.namespace}/`.length);t.includes("/")||this.notifyChanges(decodeURIComponent(t))}getKeyName(e){return`${this.namespace}/${encodeURIComponent(e)}`}notifyChanges(e){let t=this.snapshot(e);for(let e of this.subscribers)e.next(t)}subscribers=new Set;observable=new(o())(e=>(this.subscribers.add(e),()=>{this.subscribers.delete(e)}))}class y{static create(e){var t;let r=(t=e).allowUrl?t.allowUrl:t.urlPrefixAllowlist?x(t.urlPrefixAllowlist):t.config?x([t.config.getString("backend.baseUrl"),...y.getDiscoveryUrlPrefixes(t.config)]):()=>!1,i=e.header?.name||"authorization",n=e.header?.value||(e=>`Bearer ${e}`);return new y(e.identityApi,r,i,n)}static getDiscoveryUrlPrefixes(e){return(e.getOptionalConfigArray("discovery.endpoints")||[]).flatMap(e=>{let t="object"==typeof e.get("target")?e.getString("target.external"):e.getString("target");return e.getStringArray("plugins").map(e=>t.replace(/\{\{\s*pluginId\s*\}\}/g,e))})}identityApi;allowUrl;headerName;headerValue;constructor(e,t,r,i){this.identityApi=e,this.allowUrl=t,this.headerName=r,this.headerValue=i}apply(e){return async(t,r)=>{let i=new Request(t,r),{token:n}=await this.identityApi.getCredentials();return!i.headers.get(this.headerName)&&"string"==typeof n&&n&&this.allowUrl(i.url)?(i.headers.set(this.headerName,this.headerValue(n)),e(i)):e(t,r)}}}function x(e){let t=e.map(e=>e.replace(/\/$/,""));return e=>t.some(t=>e===t||e.startsWith(`${t}/`))}class b{constructor(e){this.discoveryApi=e}apply(e){return async(t,r)=>{var i,n;let a=new Request(t,r),s="plugin://";if(!a.url.startsWith(s))return e(t,r);let{hostname:o,pathname:l,search:c,hash:d,username:u,password:p}=new URL(`http://${a.url.substring(s.length)}`),h=await this.discoveryApi.getBaseUrl(o);if(u||p){let e=new URL(h),t=`${u}${p?`:${p}`:""}@`;h=`${e.protocol}//${t}${e.host}${e.pathname}`}return e(`${(i=h,!l||"/"===l?i:`${i.replace(/\/$/,"")}/${l.replace(/^\//,"")}`)}${c}${d}`,"string"==typeof t||"object"==typeof(n=t)&&n?.constructor===URL?r:t)}}}class v{static resolvePluginProtocol(e){return new b(e.discoveryApi)}static injectIdentityAuth(e){return y.create(e)}constructor(){}}class w{requests=[];subject=new c(this.getCurrentPending());request(e){return new Promise((t,r)=>{this.requests.push({scopes:e,resolve:t,reject:r}),this.subject.next(this.getCurrentPending())})}resolve(e,t){this.requests=this.requests.filter(r=>!function(e,t){for(let r of t)if(!e.has(r))return!1;return!0}(e,r.scopes)||(r.resolve(t),!1)),this.subject.next(this.getCurrentPending())}reject(e){this.requests.forEach(t=>t.reject(e)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){let e=0===this.requests.length?void 0:this.requests.slice(1).reduce((e,t)=>(function(e,...t){let r=new Set(e);for(let e of t)for(let t of e)r.add(t);return r})(e,t.scopes),this.requests[0].scopes);return{scopes:e,resolve:t=>{e&&this.resolve(e,t)},reject:t=>{e&&this.reject(t)}}}}class j{subject=new l;currentRequests=[];handlerCount=0;createAuthRequester(e){let t=new w,r=this.handlerCount;return this.handlerCount++,t.pending().subscribe({next:t=>{let i=this.currentRequests.slice(),n=this.makeAuthRequest(t,e);n?i[r]=n:delete i[r],this.currentRequests=i,this.subject.next(i.filter(Boolean))}}),e=>t.request(e)}makeAuthRequest(e,t){let{scopes:r}=e;if(r)return{provider:t.provider,trigger:async()=>{let i=await t.onAuthRequest(r);e.resolve(i)},reject:()=>{let t=Error("Login failed, rejected by user");t.name="RejectedError",e.reject(t)}}}authRequest$(){return this.subject}}let A=!1;function k(e){return[...e].join(" ")}class S{discoveryApi;environment;provider;joinScopesFunc;authRequester;sessionTransform;enableExperimentalRedirectFlow;popupOptions;constructor(e){const{configApi:t,discoveryApi:r,environment:i,provider:n,joinScopes:a=k,oauthRequestApi:s,sessionTransform:o=e=>e,popupOptions:l}=e;A||t||(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),A=!0),this.enableExperimentalRedirectFlow=!!t&&(t.getOptionalBoolean("enableExperimentalRedirectFlow")??!1),this.authRequester=s.createAuthRequester({provider:n,onAuthRequest:async e=>this.enableExperimentalRedirectFlow?this.executeRedirect(e):this.showPopup(e)}),this.discoveryApi=r,this.environment=i,this.provider=n,this.joinScopesFunc=a,this.sessionTransform=o,this.popupOptions=l}async createSession(e){return e.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(e.scopes):this.showPopup(e.scopes):this.authRequester(e.scopes)}async refreshSession(e){let t=await fetch(await this.buildUrl("/refresh",{optional:!0,...e&&{scope:this.joinScopesFunc(e.scopes)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(e=>{throw Error(`Auth refresh request failed, ${e}`)});if(!t.ok){let e=Error(`Auth refresh request failed, ${t.statusText}`);throw e.status=t.status,e}let r=await t.json();if(r.error){let e=Error(r.error.message);throw r.error.name&&(e.name=r.error.name),e}return await this.sessionTransform(r)}async removeSession(){let e=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(e=>{throw Error(`Logout request failed, ${e}`)});if(!e.ok){let t=Error(`Logout request failed, ${e.statusText}`);throw t.status=e.status,t}}async showPopup(e){var t;let r=this.joinScopesFunc(e),i=await this.buildUrl("/start",{scope:r,origin:window.location.origin,flow:"popup"}),n=this.popupOptions?.size?.fullscreen?window.screen.width:this.popupOptions?.size?.width||450,a=this.popupOptions?.size?.fullscreen?window.screen.height:this.popupOptions?.size?.height||730,s=await (t={url:i,name:`${this.provider.title} Login`,width:n,height:a},new Promise((e,r)=>{let i=t.width||500,n=t.height||700,a=window.screen.width/2-i/2,s=window.screen.height/2-n/2,o=new URL(t.url).origin,l=window.open(t.url,t.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${i},height=${n},top=${s},left=${a}`),c="";if(!l||void 0===l.closed||l.closed){let e=Error("Failed to open auth popup.");e.name="PopupRejectedError",r(e);return}let d=t=>{if(t.source!==l||t.origin!==o)return;let{data:i}=t;if("config_info"===i.type){c=i.targetOrigin;return}if("authorization_response"===i.type){if("error"in i){let e=Error(i.error.message);e.name=i.error.name,r(e)}else e(i.response);p()}},u=setInterval(()=>{if(l.closed){let e=Error(`Login failed, ${c&&c!==window.location.origin?`Incorrect app origin, expected ${c}`:"popup was closed"}`);e.name="PopupClosedError",r(e),p()}},100);function p(){window.removeEventListener("message",d),clearInterval(u)}window.addEventListener("message",d)}));return await this.sessionTransform(s)}async executeRedirect(e){let t=this.joinScopesFunc(e);return window.location.href=await this.buildUrl("/start",{scope:t,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(e,t){let r=await this.discoveryApi.getBaseUrl("auth"),i=this.buildQueryString({...t,env:this.environment});return`${r}/${this.provider.id}${e}${i}`}buildQueryString(e){if(!e)return"";let t=Object.entries(e).map(([e,t])=>"string"==typeof t?`${encodeURIComponent(e)}=${encodeURIComponent(t)}`:t?encodeURIComponent(e):void 0).filter(Boolean).join("&");return t?`?${t}`:""}}function C(e,t){for(let r of t)if(!e.has(r))return!1;return!0}class E{constructor(e){this.options=e}sessionExistsAndHasScope(e,t){return!!e&&(!t||void 0===this.options.sessionScopes||C(this.options.sessionScopes(e),t))}getExtendedScope(e,t){let r=new Set(this.options.defaultScopes);if(e&&void 0!==this.options.sessionScopes)for(let t of this.options.sessionScopes(e))r.add(t);if(t)for(let e of t)r.add(e);return r}}var T=r(33129);class ${subject=new c(T.Yj.SignedOut);signedIn=!1;setIsSignedIn(e){this.signedIn!==e&&(this.signedIn=e,this.subject.next(this.signedIn?T.Yj.SignedIn:T.Yj.SignedOut))}sessionState$(){return this.subject}}class R{connector;helper;sessionScopesFunc;sessionShouldRefreshFunc;stateTracker=new $;refreshPromise;currentSession;constructor(e){const{connector:t,defaultScopes:r=new Set,sessionScopes:i,sessionShouldRefresh:n}=e;this.connector=t,this.sessionScopesFunc=i,this.sessionShouldRefreshFunc=n,this.helper=new E({sessionScopes:i,defaultScopes:r})}async getSession(e){let t=!1;if(this.helper.sessionExistsAndHasScope(this.currentSession,e.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;t=!0;try{let t=await this.collapsedSessionRefresh(e.scopes),r=this.sessionScopesFunc(this.currentSession),i=this.sessionScopesFunc(t);return C(i,r)&&(this.currentSession=t),t}catch(t){if(this.removeLocalSession(),e.optional)return}}if(!t)try{let t=await this.collapsedSessionRefresh(e.scopes);return this.currentSession=t,this.getSession(e)}catch{this.removeLocalSession()}if(!e.optional)return this.currentSession=await this.connector.createSession({...e,scopes:this.helper.getExtendedScope(this.currentSession,e.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}removeLocalSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(e){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession({scopes:this.helper.getExtendedScope(this.currentSession,e)});try{let t=await this.refreshPromise;if(!this.helper.sessionExistsAndHasScope(t,e))throw Error("Refreshed session did not receive the required scopes");return this.stateTracker.setIsSignedIn(!0),t}finally{delete this.refreshPromise}}}let I={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class P{static createAuthConnector(e){if("authConnector"in e)return e.authConnector;let{scopeTransform:t=e=>e,configApi:r,discoveryApi:i,environment:n="development",provider:a=I,oauthRequestApi:s,popupOptions:o}=e;return new S({configApi:r,discoveryApi:i,environment:n,provider:a,oauthRequestApi:s,sessionTransform({backstageIdentity:e,...r}){let i={...r,providerInfo:{idToken:r.providerInfo.idToken,accessToken:r.providerInfo.accessToken,scopes:P.normalizeScopes(r.providerInfo.scope,{scopeTransform:t}),expiresAt:r.providerInfo.expiresInSeconds?new Date(Date.now()+1e3*r.providerInfo.expiresInSeconds):void 0}};return e&&(i.backstageIdentity={token:e.token,identity:e.identity,expiresAt:e.expiresInSeconds?new Date(Date.now()+1e3*e.expiresInSeconds):void 0}),i},popupOptions:o})}static create(e){let{defaultScopes:t=[],scopeTransform:r=e=>e}=e,i=new R({connector:P.createAuthConnector(e),defaultScopes:new Set(t),sessionScopes:e=>e.providerInfo.scopes,sessionShouldRefresh:e=>{let t=1/0;return e.providerInfo?.expiresAt&&(t=Math.min(t,(e.providerInfo.expiresAt.getTime()-Date.now())/1e3)),e.backstageIdentity?.expiresAt&&(t=Math.min(t,(e.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),t<180}});return new P({sessionManager:i,scopeTransform:r})}sessionManager;scopeTransform;constructor(e){this.sessionManager=e.sessionManager,this.scopeTransform=e.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(e,t){let r=P.normalizeScopes(e,{scopeTransform:this.scopeTransform}),i=await this.sessionManager.getSession({...t,scopes:r});return i?.providerInfo.accessToken??""}async getIdToken(e={}){let t=await this.sessionManager.getSession({...e,scopes:new Set(["openid"])});return t?.providerInfo.idToken??""}async getBackstageIdentity(e={}){let t=await this.sessionManager.getSession(e);return t?.backstageIdentity}async getProfile(e={}){let t=await this.sessionManager.getSession(e);return t?.profile}static normalizeScopes(e,t){if(!e)return new Set;let r=Array.isArray(e)?e:e.split(/[\s|,]/).filter(Boolean);return new Set(t?t.scopeTransform(r):r)}}let O={id:"google",title:"Google",icon:()=>null},N="https://www.googleapis.com/auth/";class B{static create(e){let{configApi:t,discoveryApi:r,oauthRequestApi:i,environment:n="development",provider:a=O,defaultScopes:s=["openid",`${N}userinfo.email`,`${N}userinfo.profile`]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:a,environment:n,defaultScopes:s,scopeTransform:e=>e.map(e=>"openid"===e?e:"profile"===e||"email"===e?`${N}userinfo.${e}`:e.startsWith(N)?e:`${N}${e}`)})}}let U={id:"microsoft",title:"Microsoft",icon:()=>null};class L{oauth2;configApi;environment;provider;oauthRequestApi;discoveryApi;scopeTransform;static MicrosoftGraphID="00000003-0000-0000-c000-000000000000";static create(e){return new L(e)}constructor(e){const{configApi:t,environment:r="development",provider:i=U,oauthRequestApi:n,discoveryApi:a,defaultScopes:s=["openid","offline_access","profile","email","User.Read"],scopeTransform:o=e=>e.concat("offline_access")}=e;this.configApi=t,this.environment=r,this.provider=i,this.oauthRequestApi=n,this.discoveryApi=a,this.scopeTransform=o,this.oauth2={[L.MicrosoftGraphID]:P.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:s})}}microsoftGraph(){return this.oauth2[L.MicrosoftGraphID]}static resourceForScopes(e){let t=[...new Set(e.split(" ").map(L.resourceForScope).filter(e=>"openid"!==e))];return t.length>1?Promise.reject(Error(`Requested access token with scopes from multiple Azure resources: ${t.join(", ")}. Access tokens can only have a single audience.`)):Promise.resolve(t[0]??L.MicrosoftGraphID)}static resourceForScope(e){let t=e.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/)?.groups;if(t){let{resourceURI:e}=t;return e.replace(/^api:\/\//,"")}switch(e){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return L.MicrosoftGraphID}}async getAccessToken(e,t){let r=void 0===e?L.MicrosoftGraphID:await L.resourceForScopes(Array.isArray(e)?e.join(" "):e);return r in this.oauth2||(this.oauth2[r]=P.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[r].getAccessToken(e,t)}getIdToken(e){return this.microsoftGraph().getIdToken(e)}getProfile(e){return this.microsoftGraph().getProfile(e)}getBackstageIdentity(e){return this.microsoftGraph().getBackstageIdentity(e)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}}let F={id:"github",title:"GitHub",icon:()=>null};class z{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=F,oauthRequestApi:a,defaultScopes:s=["read:user"]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i,defaultScopes:s})}}let M={id:"okta",title:"Okta",icon:()=>null},D=new Set(["openid","profile","email","phone","address","groups","offline_access"]),q="okta.";class W{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=M,oauthRequestApi:a,defaultScopes:s=["openid","email","profile","offline_access"]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i,defaultScopes:s,scopeTransform:e=>e.map(e=>D.has(e)||e.startsWith(q)?e:`${q}${e}`)})}}let H={id:"gitlab",title:"GitLab",icon:()=>null};class _{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=H,oauthRequestApi:a,defaultScopes:s=["read_user"]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i,defaultScopes:s})}}let G={id:"onelogin",title:"onelogin",icon:()=>null},K=new Set(["openid","profile","email","phone","address","groups","offline_access"]),V="onelogin.";class Y{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=G,oauthRequestApi:a}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i,defaultScopes:["openid","email","profile","offline_access"],scopeTransform:e=>e.map(e=>K.has(e)||e.startsWith(V)?e:`${V}${e}`)})}}let J={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Q{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=J,oauthRequestApi:a,defaultScopes:s=["account"]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i,defaultScopes:s})}}let Z={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class X{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=Z,oauthRequestApi:a,defaultScopes:s=["PROJECT_ADMIN"]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i,defaultScopes:s})}}let ee={id:"atlassian",title:"Atlassian",icon:()=>null};class et{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=ee,oauthRequestApi:a}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i})}}let er={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class ei{static create(e){let{configApi:t,discoveryApi:r,oauthRequestApi:i,environment:n="development",provider:a=er,defaultScopes:s=["openid"]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:a,environment:n,defaultScopes:s})}}let en={id:"openshift",title:"OpenShift",icon:()=>null};class ea{static create(e){let{configApi:t,discoveryApi:r,environment:i="development",provider:n=en,oauthRequestApi:a,defaultScopes:s=["user:info"]}=e;return P.create({configApi:t,discoveryApi:r,oauthRequestApi:a,provider:n,environment:i,defaultScopes:s})}}var es=r(45843),eo=r(61617),el=r(54195),ec=r(34477),ed=r(43327),eu=r(24453),ep=r(83392),eh=r(95159),eg=r(94223),em=r(35177),ef=r(40058),ey=r(53317),ex=r(10288),eb=r.n(ex),ev=r(8297),ew=r(60448),ej=r(3663),eA=r(45614);let ek=ew.RZ(()=>ew.Ik({rule:ew.Yj(),resourceType:ew.Yj(),params:ew.g1(ew.bz()).optional()}).or(ew.Ik({anyOf:ew.YO(ek).nonempty()})).or(ew.Ik({allOf:ew.YO(ek).nonempty()})).or(ew.Ik({not:ek}))),eS=ew.Ik({result:ew.eu(ej.b.ALLOW).or(ew.eu(ej.b.DENY))}),eC=ew.Ik({result:ew.YO(ew.KC([ew.eu(ej.b.ALLOW),ew.eu(ej.b.DENY)]))}).or(eS),eE=ew.KC([ew.Ik({result:ew.eu(ej.b.ALLOW).or(ew.eu(ej.b.DENY))}),ew.Ik({result:ew.eu(ej.b.CONDITIONAL),pluginId:ew.Yj(),resourceType:ew.Yj(),conditions:ek})]);class eT{enabled;discovery;enableBatchedRequests;constructor(e){this.discovery=e.discovery,this.enabled=e.config.getOptionalBoolean("permission.enabled")??!1,this.enableBatchedRequests=e.config.getOptionalBoolean("permission.EXPERIMENTAL_enableBatchedRequests")??!1}async authorize(e,t){return this.enabled?this.enableBatchedRequests?this.makeBatchedRequest(e,t):this.makeRequest(e,eS,t):e.map(e=>({result:ej.b.ALLOW}))}async authorizeConditional(e,t){return this.enabled?this.makeRequest(e,eE,t):e.map(e=>({result:ej.b.ALLOW}))}async makeRequest(e,t,r){let i={items:e.map(e=>({id:ev.A(),...e}))},n=(await this.makeRawRequest(i,t,r)).items.reduce((e,t)=>(e[t.id]=t,e),{});return i.items.map(e=>n[e.id])}async makeBatchedRequest(e,t){let r={};for(let t of e){let{permission:e,resourceRef:i}=t;(0,eA.OL)(e)?(r[e.name]||={permission:e,resourceRef:[],id:ev.A()},i&&r[e.name].resourceRef?.push(i)):r[e.name]||={permission:e,id:ev.A()}}let i=(await this.makeRawRequest({items:Object.values(r)},eC,t)).items.reduce((e,t)=>(e[t.id]=t,e),{});return e.map(e=>{let{id:t}=r[e.permission.name],n=i[t];return Array.isArray(n.result)?{result:e.resourceRef?n.result.shift():n.result[0]}:{result:n.result}})}async makeRawRequest(e,t,r){let i,n=await this.discovery.getBaseUrl("permission"),a=await eb()(`${n}/authorize`,{method:"POST",body:JSON.stringify(e),headers:{...this.getAuthorizationHeader(r?.token),"content-type":"application/json"}});if(!a.ok)throw await ey.o.fromResponse(a);let s=await a.json();return(i=new Set(e.items.map(({id:e})=>e)),ew.Ik({items:ew.YO(ew.E$(ew.Ik({id:ew.Yj()}),t)).refine(e=>e.length===i.size&&e.every(({id:e})=>i.has(e)),{message:"Items in response do not match request"})})).parse(s)}getAuthorizationHeader(e){return e?{Authorization:`Bearer ${e}`}:{}}}class e${permissionClient;identityApi;constructor(e,t){this.permissionClient=e,this.identityApi=t}static create(e){let{config:t,discovery:r,identity:i}=e;return new e$(new eT({discovery:r,config:t}),i)}async authorize(e){return(await this.permissionClient.authorize([e],await this.identityApi.getCredentials()))[0]}}let eR=[(0,es.b)({api:eo.I,deps:{configApi:el.U},factory:({configApi:e})=>a.fromConfig(e)}),(0,es.b)({api:ec.k,deps:{},factory:()=>new d}),(0,es.b)({api:ed.c,deps:{},factory:()=>new u}),(0,es.b)({api:eu.m,deps:{alertApi:ec.k},factory:({alertApi:e})=>{let t=new p(e,new h);return g.forward(t,{hidden:!1}),t}}),(0,es.b)({api:ep.F,deps:{errorApi:eu.m},factory:({errorApi:e})=>f.create({errorApi:e})}),(0,es.b)({api:eh.a,deps:{configApi:el.U,identityApi:eg.K,discoveryApi:eo.I},factory:({configApi:e,identityApi:t,discoveryApi:i})=>(function(e){let t=e.baseImplementation||r.g.fetch;for(let r of[e.middleware??[]].flat().reverse())t=r.apply(t);return{fetch:t}})({middleware:[v.resolvePluginProtocol({discoveryApi:i}),v.injectIdentityAuth({identityApi:t,config:e})]})}),(0,es.b)({api:em.s,deps:{},factory:()=>new j}),(0,es.b)({api:T.Vk,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>B.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.u0,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>L.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.py,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>z.create({configApi:r,discoveryApi:e,oauthRequestApi:t,defaultScopes:["read:user"],environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.Zj,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>W.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.$7,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>_.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.zk,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>Y.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.Hd,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>Q.create({configApi:r,discoveryApi:e,oauthRequestApi:t,defaultScopes:["account"],environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.GR,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>X.create({configApi:r,discoveryApi:e,oauthRequestApi:t,defaultScopes:["REPO_READ"],environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.cz,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>et.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.dM,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>ei.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:T.QX,deps:{discoveryApi:eo.I,oauthRequestApi:em.s,configApi:el.U},factory:({discoveryApi:e,oauthRequestApi:t,configApi:r})=>ea.create({configApi:r,discoveryApi:e,oauthRequestApi:t,environment:r.getOptionalString("auth.environment")})}),(0,es.b)({api:ef.x,deps:{discovery:eo.I,identity:eg.K,config:el.U},factory:({config:e,discovery:t,identity:r})=>e$.create({config:e,discovery:t,identity:r})})];var eI=r(31085),eP=r(64947),eO=r(90299),eN=r(12554),eB=r(96872),eU=r(18690),eL=r(73657);function eF({children:e}){return(0,eU.Ri)()?(0,eI.jsx)(eI.Fragment,{children:e}):(0,eI.jsx)(eU.fS,{children:e})}let ez={Progress:eB.k,Router:eL.Kd,NotFoundErrorPage:()=>(0,eI.jsx)(eO.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),BootErrorPage:({step:e,error:t})=>{let r="";return"load-config"===e?r=`The configuration failed to load, someone should have a look at this error: ${t.message}`:"load-chunk"===e&&(r=`Lazy loaded chunk failed to load, try to reload the page: ${t.message}`),(0,eI.jsx)(eF,{children:(0,eI.jsx)(eO.M,{statusMessage:r,stack:t.stack})})},ErrorBoundaryFallback:({error:e,resetError:t,plugin:r})=>(0,eI.jsx)(eN.b,{title:`Error in ${r?.getId()}`,defaultExpanded:!0,error:e,children:(0,eI.jsx)(eP.A,{variant:"outlined",onClick:t,children:"Retry"})})};var eM=r(14451),eD=r(27799),eq=r(94389),eW=r(20947),eH=r(20473),e_=r(45917),eG=r(39347),eK=r(63309),eV=r(4832),eY=r(85121),eJ=r(17400),eQ=r(42226),eZ=r(69550),eX=r(52755),e0=r(89350),e1=r(8911),e5=r(33602),e2=r(48108),e3=r(77225),e4=r(55700),e8=r(71865),e7=r(80109),e9=r(15303),e6=r(39330);let te={brokenImage:eD.default,catalog:e1.default,scaffolder:eW.default,techdocs:eH.default,search:e_.default,chat:eG.default,dashboard:eK.default,docs:eV.default,email:eY.default,github:eQ.default,group:e5.default,help:eZ.default,"kind:api":eJ.default,"kind:component":e0.default,"kind:domain":eM.default,"kind:group":e5.default,"kind:location":eX.default,"kind:system":eq.default,"kind:user":e2.default,"kind:resource":e4.default,"kind:template":e8.default,user:e2.default,warning:e3.default,star:e7.default,unstarred:e9.default,externalLink:e6.default};var tt=r(55288),tr=r(91360),ti=r(50868),tn=r(12285),ta=r(62554),ts=r(64636),to=r(14041);let tl="data-unified-theme-stack",tc="data-theme-mode",td="data-theme-name";function tu(e){let t=(()=>{let e=document.body.getAttribute(tl);if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}})();e(t),0===t.length?document.body.removeAttribute(tl):document.body.setAttribute(tl,JSON.stringify(t));let r=t[t.length-1];r?.mode?document.body.setAttribute(tc,String(r.mode)):document.body.removeAttribute(tc),r?.name?document.body.setAttribute(td,String(r.name)):document.body.removeAttribute(td)}ts.A.configure(e=>`v5-${e}`);let tp=(0,tt.A)({productionPrefix:"jss4-"});function th(e){var t;let{children:r,theme:i}=e,n=i.getTheme("v4"),a=i.getTheme("v5");t=n?n.palette.type:a?.palette.mode,(0,to.useEffect)(()=>(tu(e=>{e.push({mode:t,name:"backstage"})}),()=>{tu(e=>{e.pop()})}),[t,"backstage"]);let s=r;return n&&(s=(0,eI.jsx)(tr.Ay,{generateClassName:tp,children:(0,eI.jsx)(ti.A,{theme:n,children:s})})),a&&(s=(0,eI.jsx)(tn.A,{injectFirst:!0,children:(0,eI.jsx)(ta.A,{theme:a,children:s})})),s}var tg=r(41329),tm=r(53528);let tf="url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")",ty="url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")",tx=["#005B4B"];function tb(e){let{colors:t,shape:r,options:i}=e,n=1===t.length?[t[0],t[0]]:t,a=`linear-gradient(90deg, ${n.join(", ")})`,s=`${r},  ${a}`;return{colors:t,shape:r,backgroundImage:s,fontColor:i?.fontColor??"#FFFFFF"}}let tv={home:tb({colors:tx,shape:tf}),documentation:tb({colors:["#C8077A","#C2297D"],shape:ty}),tool:tb({colors:["#8912CA","#3E00EA"],shape:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")"}),service:tb({colors:["#006D8F","#0049A1"],shape:tf}),website:tb({colors:["#0027AF","#270094"],shape:tf}),library:tb({colors:["#98002B","#8D1134"],shape:tf}),other:tb({colors:["#171717","#383838"],shape:tf}),app:tb({colors:["#BE2200","#A41D00"],shape:tf}),apis:tb({colors:tx,shape:ty}),card:tb({colors:["#4BB8A5","#187656"],shape:tf})},tw='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',tj={htmlFontSize:16,fontFamily:tw,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};var tA=r(80012);let tk={MuiCssBaseline:{styleOverrides:e=>({html:{height:"100%",fontFamily:e.typography.fontFamily},body:{height:"100%",fontFamily:e.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:e.palette.background.paper,width:"1em"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:e.palette.textVerySubtle,border:`3px solid ${e.palette.background.paper}`},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:"dark"===e.palette.mode?(0,tA.a)(e.palette.textVerySubtle,.2):(0,tA.e$)(e.palette.textVerySubtle,.2)},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:"dark"===e.palette.mode?(0,tA.a)(e.palette.textVerySubtle,.2):(0,tA.e$)(e.palette.textVerySubtle,.2)}},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:e})=>({"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:e})=>({"&:nth-of-type(odd)":{backgroundColor:e.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:e})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:e.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:e})=>({padding:e.spacing(1.5,2,1.5,2.5)}),head:({theme:e})=>({wordBreak:"break-word",overflow:"hidden",color:e.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:e})=>({color:e.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,tA.e$)(e.palette.link,.3),background:(0,tA.a)(e.palette.link,.95)},[e.breakpoints.up("md")]:{minWidth:120,fontSize:e.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:e})=>({color:e.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&:focus svg":{opacity:.5},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:e})=>({marginRight:e.spacing(1),marginBottom:e.spacing(1)}),label:({theme:e})=>({lineHeight:e.spacing(2.5),fontWeight:e.typography.fontWeightMedium,fontSize:e.spacing(1.75)}),labelSmall:({theme:e})=>({fontSize:e.spacing(1.5)}),deleteIcon:({theme:e})=>({width:e.spacing(3),height:e.spacing(3),margin:e.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:e})=>({width:e.spacing(2),height:e.spacing(2),margin:e.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}},MuiMenuItem:{styleOverrides:{root:({theme:e})=>({"&:focus":{backgroundColor:e.palette.action.focus}})}}},tS=/^&.Mui-([\w-]+)$/;class tC{#e=new Map;constructor(e,t){this.#e=new Map,e&&this.#e.set("v4",e),t&&this.#e.set("v5",t)}getTheme(e){return this.#e.get(e)}}function tE(e){let t=function(e){let{palette:t,htmlFontSize:r=16,fontFamily:i=tw,defaultPageTheme:n="home",pageTheme:a=tv,typography:s}=e;if(!a[n])throw Error(`${n} is not defined in pageTheme.`);return tj.htmlFontSize=r,tj.fontFamily=i,{palette:t,typography:s??tj,page:a[n],getPageTheme:({themeId:e})=>a[e]??a[n]}}(e),r={...tk,...e.components},i=(0,tm.A)({...t,components:r}),n=function(e,t={}){let r={},i={};for(let n of Object.keys(t)){let a=t[n];a&&("styleOverrides"in a&&("MuiCssBaseline"===n?r[n]=function(e,t){if(!t||"string"==typeof t)return;let r="function"==typeof t?t(e):t;if(r)return{"@global":r}}(e,a.styleOverrides):r[n]=function(e){let t=e;if(!e||"object"!=typeof e)return t;for(let r of Object.keys(e)){let i=e[r];if(i&&"object"==typeof i)for(let e of Object.keys(i)){let n=e.match(tS);if(n){let[,a]=n,{[e]:s,...o}=i;s&&(t={...t,[r]:o,[a]:s})}}}return t}(function(e,t){if(t&&"string"!=typeof t){if("object"==typeof t){let r={...e},i=e.spacing(1);return"number"==typeof i&&(r.spacing=(...e)=>(0===e.length?[1]:e).map(e=>{let t="string"==typeof e?e:i*e;return"number"==typeof t?`${t}px`:t}).join(" ")),Object.fromEntries(Object.entries(t).map(([e,t])=>"function"==typeof t?[e,t({theme:r})]:[e,t]))}return t}}(e,a.styleOverrides))),"defaultProps"in a&&(i[n]=a.defaultProps))}return{overrides:r,props:i}}(i,r);return new tC({...(0,tg.A)(t),...n},i)}let tT={light:tE({palette:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}}),dark:tE({palette:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}})};var t$=r(75962),tR=r(87145);let tI=[{id:"light",title:"Light Theme",variant:"light",icon:(0,eI.jsx)(tR.default,{}),Provider:({children:e})=>(0,eI.jsx)(th,{theme:tT.light,children:e})},{id:"dark",title:"Dark Theme",variant:"dark",icon:(0,eI.jsx)(t$.default,{}),Provider:({children:e})=>(0,eI.jsx)(th,{theme:tT.dark,children:e})}];var tP=r(73466),tO=r(39067),tN=r.n(tO);class tB{holders;constructor(...e){this.holders=e}get(e){for(let t of this.holders){let r=t.get(e);if(r)return r}}}var tU=r(54852),tL=r(4790);let tF=(0,tU.tK)("api-context"),tz=e=>{let{apis:t,children:r}=e,i=(0,to.useContext)(tF)?.atVersion(1),n=i?new tB(t,i):t;return(0,eI.jsx)(tF.Provider,{value:(0,tL.B)({1:n}),children:r})};tz.propTypes={apis:tN().shape({get:tN().func.isRequired}).isRequired,children:tN().node};class tM{constructor(e){this.factories=e}static validateFactories(e,t){for(let r of t){let t=[r],i=new Set;for(;t.length;){let n=t.shift(),a=e.get(n);if(a)for(let e of Object.values(a.deps)){if(e.id===r.id)throw Error(`Circular dependency of api factory for ${r}`);i.has(e)||(i.add(e),t.push(e))}}}}apis=new Map;get(e){return this.load(e)}load(e,t=[]){let r=this.apis.get(e.id);if(r)return r;let i=this.factories.get(e);if(!i)return;if(t.includes(i.api))throw Error(`Circular dependency of api factory for ${i.api}`);let n=this.loadDeps(e,i.deps,[...t,i.api]),a=i.factory(n);return this.apis.set(e.id,a),a}loadDeps(e,t,r){let i={};for(let n in t)if(t.hasOwnProperty(n)){let a=t[n],s=this.load(a,r);if(!s)throw Error(`No API factory available for dependency ${a} of dependent ${e}`);i[n]=s}return i}}let tD={default:10,app:50,static:100};class tq{factories=new Map;register(e,t){let r=tD[e],i=this.factories.get(t.api.id);return(!i||!(i.priority>=r))&&(this.factories.set(t.api.id,{priority:r,factory:t}),!0)}get(e){let t=this.factories.get(e.id);if(t)return t.factory}getAllApis(){let e=new Set;for(let{factory:t}of this.factories.values())e.add(t.api);return e}}var tW=r(68541),tH=r(86702);let t_="theme";class tG{constructor(e){this.themes=e}static createWithStorage(e){let t=new tG(e);if(!window.localStorage)return t;let r=window.localStorage.getItem(t_)??void 0;return t.setActiveThemeId(r),t.activeThemeId$().subscribe(e=>{e?window.localStorage.setItem(t_,e):window.localStorage.removeItem(t_)}),window.addEventListener("storage",e=>{if(e.key===t_){let e=localStorage.getItem(t_)??void 0;t.setActiveThemeId(e)}}),t}activeThemeId;subject=new c(void 0);getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(e){this.activeThemeId=e,this.subject.next(e)}}let tK=/^[a-z][a-z0-9]*(?:[-_:][a-z0-9]+)*$/i;function tV(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function tY(e,t){if(null===e)return;if(void 0===e)return void 0===t?void 0:tY(t);if("object"!=typeof e||Array.isArray(e))return e;let r=tV(t)?t:{},i={};for(let t of new Set([...Object.keys(e),...Object.keys(r)])){let n=tY(e[t],r[t]);void 0!==n&&(i[t]=n)}return i}function tJ(e){if(null===e)return"null";if(Array.isArray(e))return"array";let t=typeof e;return"number"===t&&isNaN(e)?"nan":"string"===t&&""===e?"empty-string":t}let tQ=(e,t,r,i)=>`Invalid type in config for key '${e}' in '${t}', got ${r}, wanted ${i}`,tZ=(e,t)=>`Missing required config value at '${e}' in '${t}'`,tX=(e,t,r)=>`Unable to convert config value for key '${e}' in '${t}' to a ${r}`;class t0{filteredKeys;notifiedFilteredKeys=new Set;static fromConfigs(e){return 0===e.length?new t0(void 0):e.reduce((e,{data:t,context:r,filteredKeys:i,deprecatedKeys:n})=>{let a=new t0(t,r,e);if(a.filteredKeys=i,n)for(let{key:e,description:t}of n)console.warn(`The configuration key '${e}' of ${r} is deprecated and may be removed soon. ${t||""}`);return a},void 0)}data;context;fallback;prefix;constructor(e,t="mock-config",r,i=""){this.data=e,this.context=t,this.fallback=r,this.prefix=i}has(e){let t=this.readValue(e);return null!==t&&(void 0!==t||(this.fallback?.has(e)??!1))}keys(){return[...new Set([...this.data?Object.keys(this.data):[],...this.fallback?.keys()??[]])].filter(e=>this.data?.[e]!==null)}get(e){let t=this.getOptional(e);if(void 0===t)throw Error(tZ(this.fullKey(e??""),this.context));return t}getOptional(e){let t=function e(t){return"object"!=typeof t||null===t?t:Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(([t,r])=>[t,e(r)]))}(this.readValue(e)),r=this.fallback?.getOptional(e);if(null!==t)return void 0===t?tY(r):void 0===r?tY(t):tY(t,r)}getConfig(e){let t=this.getOptionalConfig(e);if(void 0===t)throw Error(tZ(this.fullKey(e),this.context));return t}getOptionalConfig(e){let t=this.readValue(e),r=this.fallback?.getOptionalConfig(e);if(tV(t))return this.copy(t,e,r);if(null!==t){if(void 0!==t)throw TypeError(tQ(this.fullKey(e),this.context,tJ(t),"object"));return r}}getConfigArray(e){let t=this.getOptionalConfigArray(e);if(void 0===t)throw Error(tZ(this.fullKey(e),this.context));return t}getOptionalConfigArray(e){let t=this.readConfigValue(e,t=>{if(!Array.isArray(t))return{expected:"object-array"};for(let[r,i]of t.entries())if(!tV(i))return{expected:"object-array",value:i,key:`${e}[${r}]`};return!0});return t?t.map((t,r)=>this.copy(t,`${e}[${r}]`)):void 0}getNumber(e){let t=this.getOptionalNumber(e);if(void 0===t)throw Error(tZ(this.fullKey(e),this.context));return t}getOptionalNumber(e){let t=this.readConfigValue(e,e=>"number"==typeof e||"string"==typeof e||{expected:"number"});if("number"==typeof t||void 0===t)return t;let r=Number(t);if(!Number.isFinite(r))throw Error(tX(this.fullKey(e),this.context,"number"));return r}getBoolean(e){let t=this.getOptionalBoolean(e);if(void 0===t)throw Error(tZ(this.fullKey(e),this.context));return t}getOptionalBoolean(e){let t=this.readConfigValue(e,e=>"boolean"==typeof e||"number"==typeof e||"string"==typeof e||{expected:"boolean"});if("boolean"==typeof t||void 0===t)return t;let r=String(t).trim();if(/^(?:y|yes|true|1|on)$/i.test(r))return!0;if(/^(?:n|no|false|0|off)$/i.test(r))return!1;throw Error(tX(this.fullKey(e),this.context,"boolean"))}getString(e){let t=this.getOptionalString(e);if(void 0===t)throw Error(tZ(this.fullKey(e),this.context));return t}getOptionalString(e){return this.readConfigValue(e,e=>"string"==typeof e&&""!==e||{expected:"string"})}getStringArray(e){let t=this.getOptionalStringArray(e);if(void 0===t)throw Error(tZ(this.fullKey(e),this.context));return t}getOptionalStringArray(e){return this.readConfigValue(e,t=>{if(!Array.isArray(t))return{expected:"string-array"};for(let[r,i]of t.entries())if("string"!=typeof i||""===i)return{expected:"string-array",value:i,key:`${e}[${r}]`};return!0})}fullKey(e){return`${this.prefix}${this.prefix?".":""}${e}`}copy(e,t,r){let i=new t0(e,this.context,r,this.fullKey(t));return i.filteredKeys=this.filteredKeys,i}readConfigValue(e,t){let r=this.readValue(e);if(void 0===r)return this.fallback?.readConfigValue(e,t);if(null===r)return;let i=t(r);if(!0!==i){let{key:t=e,value:n=r,expected:a}=i;throw TypeError(tQ(this.fullKey(t),this.context,tJ(n),a))}return r}readValue(e){let t=e?e.split("."):[];for(let r of t)if(!tK.test(r))throw TypeError(`Invalid config key '${e}'`);if(void 0===this.data)return;let r=this.data;for(let[e,i]of t.entries())if(tV(r))r=r[i];else if(null!=r)throw TypeError(tQ(this.fullKey(t.slice(0,e).join(".")),this.context,tJ(r),"object"));return r}}function t1(e){if(e.length<3)throw Error(`The '${e}' feature flag must have a minimum length of three characters.`);if(e.length>150)throw Error(`The '${e}' feature flag must not exceed 150 characters.`);if(!e.match(/^[a-z]+[a-z0-9-]+$/))throw Error(`The '${e}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class t5{registeredFeatureFlags=[];flags;registerFlag(e){t1(e.name),this.registeredFeatureFlags.push(e)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(e){return this.flags||(this.flags=this.load()),this.flags.get(e)===tH.S.Active}save(e){for(let[t,r]of(this.flags||(this.flags=this.load()),e.merge||this.flags.clear(),Object.entries(e.states)))this.flags.set(t,r);let t=Array.from(this.flags.entries()).filter(([,e])=>e===tH.S.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(t)))}load(){try{let e=window.localStorage.getItem("featureFlags");if(!e)return new Map;let t=JSON.parse(e);if("object"!=typeof t||null===t||Array.isArray(t))return new Map;let r=Object.entries(t).filter(([e,t])=>(t1(e),t===tH.S.Active));return new Map(r)}catch{return new Map}}}var t2=r(90608),t3=r(87350);function t4(e,t){return()=>({accumulator:e(),visit:t})}function t8(e){return e.props?.children}function t7(e){if(e.props?.path&&e.props?.element)return e.props?.element}var t9=r(85408);let t6=t4(()=>new Set,(e,t)=>{let r=(0,t9.E)(t,"core.plugin");r&&e.add(r)});var re=r(18139);let rt=e=>{let{children:t}=e,r=(0,re.gf)(tH.B),i="with"in e?r.isActive(e.with):!r.isActive(e.without);return(0,eI.jsx)(eI.Fragment,{children:i?t:null})};(0,t9.h)(rt,"core.featureFlagged",!0);let rr={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function ri(e){return e?.type?e.type.displayName??e.type.name??String(e.type):String(e)}let rn=e=>{let t=new Set;return e&&t.add(e),t},ra=t4(()=>({paths:new Map,parents:new Map,objects:[]}),(e,t,r,i)=>{if(i?.isElementAncestor)return i;if(r?.props.element===t)return{...i,isElementAncestor:!0};let n=t.props?.path,a=(0,t9.E)(t,"core.mountPoint");if(a&&n)throw Error(`Path property may not be set directly on a routable extension "${ri(t)}"`);let s=i?.obj?.children??e.objects;if(void 0!==n){if("string"!=typeof n)throw Error(`Element path must be a string at "${ri(t)}"`);let r=n.startsWith("/")?n.slice(1):n,a=t.props.element;if((0,t9.E)(t,"core.gatherMountPoints")){if(a)throw Error(`Mount point gatherers may not have an element prop "${ri(t)}"`);let e={path:r,element:"gathered",routeRefs:new Set,caseSensitive:!!t.props?.caseSensitive,children:[rr],plugins:new Set};return s.push(e),{obj:e,gatherPath:r,routeRef:i?.routeRef,gatherRouteRef:i?.routeRef}}if(a){let[o,...l]=function e(t,r=[]){return to.Children.forEach(t,t=>{if(!(0,to.isValidElement)(t))return;let i=(0,t9.E)(t,"core.mountPoint");if(i){let e=(0,t9.E)(t,"core.plugin");r.push({routeRef:i,plugin:e})}e(t.props.children,r)}),r}(a);if(l.length>0)throw Error(`Route element with path "${n}" may not contain multiple routable extensions`);if(!o)return i;let{routeRef:c,plugin:d}=o,u={path:r,element:"mounted",routeRefs:new Set([c]),caseSensitive:!!t.props?.caseSensitive,children:[rr],plugins:rn(d)};return s.push(u),e.paths.set(c,r),e.parents.set(c,i?.routeRef),{obj:u,routeRef:c??i?.routeRef,gatherPath:r,gatherRouteRef:i?.gatherRouteRef}}}if(a){if(i?.gatherPath===void 0)throw Error(`Routable extension "${ri(t)}" with mount point "${a}" must be assigned a path`);i?.obj?.routeRefs.add(a);let r=(0,t9.E)(t,"core.plugin");return r&&i?.obj?.plugins.add(r),e.paths.set(a,i.gatherPath),e.parents.set(a,i?.gatherRouteRef),{...i,routeRef:a}}return i}),rs=t4(()=>({paths:new Map,parents:new Map,objects:[]}),(e,t,r,i)=>{if(r?.props.element===t)return i;let n=i?.obj,a=i?.routeRef,s=i?.sticky,o=t.props?.path,l=n?.children??e.objects,c=!!t.props?.caseSensitive,d=i?.path;if((0,t9.E)(t,"core.gatherMountPoints")){if(!o)throw Error("Mount point gatherer must have a path");d=o}let u=t.props?.element,p=(0,t9.E)(t,"core.mountPoint");if(!p&&(0,to.isValidElement)(u)&&(p=(0,t9.E)(u,"core.mountPoint")),p){let r=o;if(d&&(r?d=void 0:r=d),!r)throw Error("Mounted routable extension must have a path");e.paths.set(p,r),a&&s?(e.parents.set(p,a),o&&(a=p,s=!1)):(e.parents.set(p,a),a=p),o?(n={caseSensitive:c,path:o,element:"mounted",routeRefs:new Set([p]),children:[rr],plugins:rn((0,t9.E)(t.props.element,"core.plugin"))},l.push(n)):n?.routeRefs.add(p)}if((0,t9.E)(t,"core.gatherMountPoints")&&(s=!0),(0,t9.E)(t,"core.gatherMountPoints")){if(!o)throw Error("Mount point gatherer must have a path");p||(n={caseSensitive:c,path:o,element:"gathered",routeRefs:new Set,children:[rr],plugins:i?.obj?.plugins||new Set},l.push(n))}return{obj:n,path:d,routeRef:a,sticky:s}}),ro=t4(()=>new Set,(e,t)=>{if(t.type===rt){let r=t.props;e.add("with"in r?r.with:r.without)}});var rl=r(21613);let rc=(0,r(1952).Q)("route-ref-type",()=>Symbol("route-ref-type"));function rd(e){return"absolute"===e[rc]}function ru(e){return"sub"===e[rc]}function rp(...e){let t=e.join("/").replace(/\/\/+/g,"/");return"/"!==t&&t.endsWith("/")?t.slice(0,-1):t}var rh=r(46155),rg=r.n(rh);class rm{routePaths;routeParents;routeObjects;routeBindings;appBasePath;constructor(e,t,r,i,n){this.routePaths=e,this.routeParents=t,this.routeObjects=r,this.routeBindings=i,this.appBasePath=n}resolve(e,t){let r,[i,n]=function(e,t,r){let i,n="";if(rd(e))i=e;else if(ru(e))i=e.parent,n=e.path;else if("external"===e[rc]){let t=r.get(e);if(!t)return[void 0,""];if(rd(t))i=t;else if(ru(t))i=t.parent,n=t.path;else throw Error(`ExternalRouteRef was bound to invalid target, ${t}`)}else if(e[rc])throw Error(`Unknown or invalid route ref type, ${e[rc]}`);else throw Error(`Unknown object passed to useRouteRef, got ${e}`);if(!i)return[void 0,""];let a=t.get(i);return void 0===a?[void 0,""]:[i,rp(a,n)]}(e,this.routePaths,this.routeBindings);if(!i)return;r="string"==typeof t?this.trimPath(t):t.pathname?{...t,pathname:this.trimPath(t.pathname)}:t;let a=this.appBasePath+function(e,t,r,i,n){let a=(0,rl.ue)(n,t)??[],s=[],o=-1;for(let t=e;t&&-1===(o=a.findIndex(e=>e.route.routeRefs.has(t)));t=i.get(t))s.unshift(t);0===s.length&&(o-=1);let l=-1===o?"":a[o].pathname,c=s.slice(0,-1).map(t=>{let i=r.get(t);if(void 0===i)throw Error(`No path for ${t}`);if(i.includes(":"))throw Error(`Cannot route to ${e} with parent ${t} as it has parameters`);return i});return`${rp(l,...c)}/`}(i,r,this.routePaths,this.routeParents,this.routeObjects);return(...[e])=>{let t=e&&rg()(e,e=>"string"==typeof e?e.replaceAll(/[&?#;\/]/g,e=>encodeURIComponent(e)):e);return rp(a,(0,rl.tW)(n,t))}}trimPath(e){return e&&e.startsWith(this.appBasePath)?e.slice(this.appBasePath.length):e}}let rf=(0,tU.tK)("routing-context"),ry=({routePaths:e,routeParents:t,routeObjects:r,routeBindings:i,basePath:n="",children:a})=>{let s=new rm(e,t,r,i,n),o=(0,tL.B)({1:s});return(0,eI.jsx)(rf.Provider,{value:o,children:a})},rx=(0,tU.tK)("app-context"),rb=({appContext:e,children:t})=>{let r=(0,tL.B)({1:e});return(0,eI.jsx)(rx.Provider,{value:r,children:t})},rv=5*6e4,rw=5*6e4;function rj(e){return Error(`Tried to access IdentityApi ${e} before app was loaded`)}function rA(e){console.warn(`WARNING: Call to ${e} is deprecated and will break in the future`)}class rk{target;waitForTarget;resolveTarget=()=>{};signOutTargetUrl="/";#t;constructor(){this.waitForTarget=new Promise(e=>{this.resolveTarget=e})}setTarget(e,t){this.target=e,this.signOutTargetUrl=t.signOutTargetUrl,this.resolveTarget(e)}getUserId(){if(!this.target)throw rj("getUserId");if(!this.target.getUserId)throw Error("IdentityApi does not implement getUserId");return rA("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw rj("getProfile");if(!this.target.getProfile)throw Error("IdentityApi does not implement getProfile");return rA("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(e=>e.getProfileInfo())}async getBackstageIdentity(){let e=await this.waitForTarget.then(e=>e.getBackstageIdentity());return e.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${e.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),e}async getCredentials(){return this.waitForTarget.then(e=>e.getCredentials())}async getIdToken(){return this.waitForTarget.then(e=>{if(!e.getIdToken)throw Error("IdentityApi does not implement getIdToken");return rA("getIdToken"),e.getIdToken()})}async signOut(){await this.waitForTarget.then(e=>e.signOut()),await this.#t?.(),window.location.href=this.signOutTargetUrl}enableCookieAuth(e){if(this.#t)return;let t=function({discoveryApi:e,fetchApi:t,errorApi:r}){let i,n=!1,a=!0,s=5e3,o="BroadcastChannel"in window?new BroadcastChannel("app-auth-cookie-expires-at"):void 0,l=e=>{let t=(1+3*Math.random())*6e4;return Math.max(e-Date.now(),rv)-t},c=async()=>{try{let r=await e.getBaseUrl("app"),i=`${r}/.backstage/auth/v1/cookie`,n=await t.fetch(i,{credentials:"include"});if(!n.ok)throw Error(`Request failed with status ${n.status} ${n.statusText}, see request towards ${i} for more details`);let s=await n.json();if(!s.expiresAt)throw Error("No expiration date in response");let c=Date.parse(s.expiresAt);if(Number.isNaN(c))throw Error("Invalid expiration date in response");a=!0,o?.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:{expiresAt:new Date(c).toISOString()}}),u(l(c))}catch(e){a?(a=!1,s=5e3):(s=Math.min(rw,2*s),console.error("Session cookie refresh failed",e),r.post(Error("Session refresh failed, see developer console for details"))),u(s)}},d=e=>{let{data:t}=e;if(null!==t&&"object"==typeof t&&"action"in t&&"COOKIE_REFRESH_SUCCESS"===t.action){let e=Date.parse(t.payload.expiresAt);if(Number.isNaN(e))return void console.warn("Received invalid expiration from session refresh channel");u(l(e))}};function u(e){n||(i&&clearTimeout(i),i=setTimeout(c,e))}return o?.addEventListener("message",d),c(),()=>{n=!0,i&&clearTimeout(i),o?.removeEventListener("message",d),o?.close()}}(e);this.#t=async()=>{t();let r=await e.discoveryApi.getBaseUrl("app");try{await fetch(`${r}/.backstage/auth/v1/cookie`,{method:"DELETE",credentials:"include"})}catch{}}}}var rS=r(10581);function rC({children:e}){let t=(0,re.gf)(tW.Q),r=function(e,t,r){if(void 0!==e){let t=r.find(t=>t.id===e);if(t)return t}if(t){let e=r.find(e=>"dark"===e.variant);if(e)return e}let i=r.find(e=>"light"===e.variant);return i||r[0]}((0,rS.A)(t.activeThemeId$(),t.getActiveThemeId()),!!window.matchMedia&&(()=>{let e=(0,to.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[t,r]=(0,to.useState)(e.matches);return(0,to.useEffect)(()=>{let t=e=>{r(e.matches)};return e.addListener(t),()=>{e.removeListener(t)}},[e]),t})(),t.getInstalledThemes());if(!r)throw Error("App has no themes");return(0,eI.jsx)(r.Provider,{children:e})}let rE=async()=>(function(e="__APP_INJECTED_RUNTIME_CONFIG__"){let t=[],r=[];if(r){if(!Array.isArray(r))throw Error("Static configuration has invalid format");t.push(...r)}let i=document.querySelectorAll('script[type="backstage.io/config"]');if(i.length>0)for(let e of i)try{let r,i=e.textContent;if(!i)throw Error("tag is empty");try{r=JSON.parse(i)}catch(e){throw Error(`failed to parse config; ${e}`)}if(!Array.isArray(r))throw Error("data is not an array");t.push(...r)}catch(e){throw Error(`Failed to load config from script tag, ${e.message}`)}else if(e!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{let r=JSON.parse(e);Array.isArray(r)?t.push(...r):t.push({data:r,context:"env"})}catch(e){throw Error(`Failed to load runtime configuration, ${e}`)}let n=window.__APP_CONFIG__;return n&&t.push({context:"window",data:n}),t})();class rT{apis=[];add(e,t){return this.apis.push([e.id,t]),t}build(){return new r$(new Map(this.apis))}}class r${constructor(e){this.apis=e}static builder(){return new rT}static from(e){return new r$(new Map(e.map(([e,t])=>[e.id,t])))}static with(e,t){return new r$(new Map([[e.id,t]]))}with(e,t){return new r$(new Map([...this.apis,[e.id,t]]))}get(e){return this.apis.get(e.id)}}var rR=r(51750),rI=r(45681),rP=r(33321);let rO="language";class rN{static create(e){let t=e?.availableLanguages??["en"];if(t.length!==new Set(t).size)throw Error(`Supported languages may not contain duplicates, got '${t.join("', '")}'`);let r=e?.defaultLanguage??"en";if(!t.includes(r))throw Error(`Initial language must be one of the supported languages, got '${r}'`);return new rN(t,r)}static createWithStorage(e){let t=rN.create(e);if(!window.localStorage)return t;let r=window.localStorage.getItem(rO),{languages:i}=t.getAvailableLanguages();return r&&i.includes(r)&&t.setLanguage(r),t.language$().subscribe(({language:e})=>{e!==window.localStorage.getItem(rO)&&window.localStorage.setItem(rO,e)}),window.addEventListener("storage",e=>{if(e.key===rO){let e=localStorage.getItem(rO)??void 0;e&&t.setLanguage(e)}}),t}#r;#i;#n;constructor(e,t){this.#r=e,this.#i=t,this.#n=new c({language:this.#i})}getAvailableLanguages(){return{languages:this.#r.slice()}}setLanguage(e){let t=e??"en";if(t!==this.#i){if(t&&!this.#r.includes(t))throw Error(`Failed to change language to '${t}', available languages are '${this.#r.join("', '")}'`);this.#i=t,this.#n.next({language:t})}}getLanguage(){return{language:this.#i}}language$(){return this.#n}}var rB=r(47304);function rU(e){if("@backstage/TranslationRef"!==e.$$type)throw Error(`Invalid translation ref, bad type '${e.$$type}'`);if("v1"!==e.version)throw Error(`Invalid translation ref, bad version '${e.version}'`);return e}function rL(e){return Object.fromEntries(Object.entries(e).filter(e=>null!==e[1]))}class rF{constructor(e){this.onLoad=e}#a=new Set;#s=new Map;#o=new Map;addTranslationResource(e){let t=function(e){if("@backstage/TranslationResource"!==e.$$type)throw Error(`Invalid translation resource, bad type '${e.$$type}'`);if("v1"!==e.version)throw Error(`Invalid translation resource, bad version '${e.version}'`);return e}(e);for(let e of t.resources){let r=this.#l(e.language,t.id);this.#o.has(r)||this.#o.set(r,e.loader)}}#l(e,t){return`${e}/${t}`}needsLoading(e,t){let r=this.#l(e,t);return!!this.#o.get(r)&&!this.#a.has(r)}async load(e,t){let r=this.#l(e,t),i=this.#o.get(r);if(!i||this.#a.has(r))return;let n=this.#s.get(r);if(n)return void await n;let a=i().then(i=>{this.onLoad({language:e,namespace:t,messages:i.messages}),this.#a.add(r)},e=>{throw this.#a.add(r),e});this.#s.set(r,a),await a}}class rz{#c;#d;#u;static fromI18n(e){let t,r=e.services.interpolator,i=r.format;return r.format=(e,r,n,a)=>r?i(e,r,n,a):t?.(e,r,n,a)??e,new rz(Math.random().toString(36).substring(2,8),e=>{t=e})}constructor(e,t){this.#c=t,this.#d=e,this.#u=RegExp(`\\$${e}\\(([^)]+)\\)`)}wrapT(e){return(t,r)=>{let i;this.#c(e=>{if((0,to.isValidElement)(e)){i||(i=new Map);let t=i.size.toString();return i.set(t,e),`$${this.#d}(${t})`}return e});let n=e(t,r);if(!i)return n;let a=n.split(this.#u);return(0,to.createElement)(to.Fragment,null,...a.map((e,t)=>t%2==0?e:i?.get(e)).filter(Boolean))}}}class rM{static create(e){let{languages:t}=e.languageApi.getAvailableLanguages(),r=(0,rB.Q_)({fallbackLng:"en",supportedLngs:t,interpolation:{escapeValue:!1,alwaysFormat:!0},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(r.init(),!r.isInitialized)throw Error("i18next was unexpectedly not initialized");let i=rz.fromI18n(r),{language:n}=e.languageApi.getLanguage();"en"!==n&&r.changeLanguage(n);let a=new rF(e=>{r.addResourceBundle(e.language,e.namespace,rL(e.messages),!1,!0)}),s=e?.resources||[];for(let e=s.length-1;e>=0;e--){let t=s[e];"@backstage/TranslationResource"===t.$$type?a.addTranslationResource(t):"@backstage/TranslationMessages"===t.$$type&&r.addResourceBundle("en",t.id,rL(t.messages),!0,!1)}let o=new rM(r,a,e.languageApi.getLanguage().language,i);return e.languageApi.language$().subscribe(({language:e})=>{o.#p(e)}),o}#h;#g;#i;#m;#f=new Set;#y=new Set;constructor(e,t,r,i){this.#h=e,this.#g=t,this.#i=r,this.#m=i}getTranslation(e){let t=rU(e);return this.#x(t),this.#b(t)}translation$(e){let t=rU(e);return this.#x(t),new(o())(e=>{let r={},i=()=>{let i=r={};this.#g.load(this.#i,t.id).then(()=>{if(i===r){let r=this.#b(t);r.ready&&e.next(r)}},t=>{i===r&&e.error(Array.isArray(t)?t[0]:t)})},n=()=>{let r=this.#b(t);r.ready?e.next(r):i()};return this.#g.needsLoading(this.#i,t.id)&&i(),this.#y.add(n),()=>{this.#y.delete(n)}})}#p(e){this.#i!==e&&(this.#i=e,this.#h.changeLanguage(e),this.#y.forEach(e=>e()))}#b(e){if(this.#g.needsLoading(this.#i,e.id))return{ready:!1};let t=this.#h.getFixedT(null,e.id);return{ready:!0,t:this.#m.wrapT(t)}}#x(e){if(this.#f.has(e.id))return;this.#f.add(e.id);let t=e.getDefaultMessages();this.#h.addResourceBundle("en",e.id,t,!0,!1);let r=e.getDefaultResource();r&&this.#g.addTranslationResource(r)}}function rD(e){let t=new URL(e);return t.protocol=document.location.protocol,t.hostname=document.location.hostname,t.port=document.location.port,t.toString().replace(/\/$/,"")}class rq{constructor(e){this.app=e}getPlugins(){return this.app.getPlugins()}getSystemIcon(e){return this.app.getSystemIcon(e)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class rW{apiHolder;configApi;apis;icons;plugins;featureFlags;components;themes;configLoader;defaultApis;bindRoutes;appLanguageApi;translationResources;appIdentityProxy=new rk;apiFactoryRegistry;constructor(e){this.apis=e.apis??[],this.icons=e.icons,this.plugins=new Set(e.plugins??[]),this.featureFlags=e.featureFlags??[],this.components=e.components,this.themes=e.themes,this.configLoader=e.configLoader??rE,this.defaultApis=e.defaultApis??[],this.bindRoutes=e.bindRoutes,this.apiFactoryRegistry=new tq,this.appLanguageApi=rN.createWithStorage({defaultLanguage:e.__experimentalTranslations?.defaultLanguage,availableLanguages:e.__experimentalTranslations?.availableLanguages}),this.translationResources=e.__experimentalTranslations?.resources??[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(e){return this.icons[e]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(e){let t=this.getProvider();return()=>(0,eI.jsx)(t,{children:e})}#v=!1;getProvider(){let e,t;if(this.#v)throw Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");this.#v=!0;let r=new rq(this);return({children:i})=>{let n,a=(0,to.useRef)(!0),s=(0,to.useMemo)(()=>tG.createWithStorage(this.themes),[]),{routing:o,featureFlags:l}=(0,to.useMemo)(()=>{let e=(0,rR.h)();e&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);let t=function(e){let t={};for(let r in e.collectors)e.collectors.hasOwnProperty(r)&&(t[r]=e.collectors[r]());let r=[{node:to.Children.toArray(e.root),parent:void 0,contexts:{}}];for(;0!==r.length;){let{node:i,parent:n,contexts:a}=r.shift();to.Children.forEach(i,i=>{if(!(0,to.isValidElement)(i))return;let s={};for(let e in t)if(t.hasOwnProperty(e)){let r=t[e];s[e]=r.visit(r.accumulator,i,n,a[e])}for(let t of e.discoverers){let e=t(i);e&&r.push({node:e,parent:i,contexts:s})}})}return Object.fromEntries(Object.entries(t).map(([e,t])=>[e,t.accumulator]))}({root:i,discoverers:[t8,t7],collectors:{routing:e?rs:ra,collectedPlugins:t6,featureFlags:ro}});return t.collectedPlugins.forEach(e=>this.plugins.add(e)),this.verifyPlugins(this.plugins),this.getApiHolder(),t},[i]),c=function(e,t,r){let i,n=!!e,a=(0,tP.A)(e||(()=>Promise.resolve([])));if(n&&a.loading){let{Progress:e}=t;i=(0,eI.jsx)(e,{})}else if(a.error){let{BootErrorPage:e}=t;i=(0,eI.jsx)(e,{step:"load-config",error:a.error})}let{ThemeProvider:s=rC}=t;return i?{node:(0,eI.jsx)(tz,{apis:r$.with(tW.Q,r),children:(0,eI.jsx)(s,{children:i})})}:{api:t0.fromConfigs(a.value?.length?function(e){let t,r,i=t0.fromConfigs(e),n=i.getOptionalString("app.baseUrl"),a=i.getOptionalString("backend.baseUrl"),s=e;if(n&&a&&new URL(n).origin===new URL(a).origin){let e=rD(a);a!==e&&(t=e)}if(n){let e=rD(n);n!==e&&(r=e)}return(r||t)&&(s=s.concat({data:{app:r&&{baseUrl:r},backend:t&&{baseUrl:t}},context:"relative-resolver"})),s}(a.value):[])}}(this.configLoader,this.components,s),d="api"in c;if(d){let{api:e}=c;this.configApi=e}if("node"in c)return c.node;if(t)throw t;if(!e)try{e=function(e,t,r){let i=function(e){let t=new Map,r=new Map;for(let i of e){for(let[e,r]of Object.entries(i.routes??{})){let n=`${i.getId()}.${e}`;if(t.has(n))throw Error(`Unexpected duplicate route '${n}'`);t.set(n,r)}for(let[e,t]of Object.entries(i.externalRoutes??{})){let n=`${i.getId()}.${e}`;if(r.has(n))throw Error(`Unexpected duplicate external route '${n}'`);r.set(n,t)}}return{routes:t,externalRoutes:r}}(r),n=new Map,a=new Set;e&&e({bind:(e,t)=>{for(let[r,i]of Object.entries(t)){let t=e[r];if(!t)throw Error(`Key ${r} is not an existing external route`);if(!i&&!t.optional)throw Error(`External route ${r} is required but was ${!1===i?"disabled":"not provided"}`);i?n.set(t,i):!1===i&&a.add(t)}}});let s=t.getOptionalConfig("app.routes.bindings")?.get();if(s)for(let[e,t]of Object.entries(s)){var o;if(o=t,!1!==o&&("string"!=typeof o||!o))throw Error(`Invalid config at app.routes.bindings['${e}'], value must be a non-empty string or false`);let r=i.externalRoutes.get(e);if(!r)throw Error(`Invalid config at app.routes.bindings, '${e}' is not a valid external route`);if(!(n.has(r)||a.has(r)))if(!1===t)a.add(r);else{let a=i.routes.get(t);if(!a)throw Error(`Invalid config at app.routes.bindings['${e}'], '${t}' is not a valid route`);n.set(r,a)}}for(let e of i.externalRoutes.values())if(!n.has(e)&&!a.has(e)){let t="getDefaultTarget"in e?e.getDefaultTarget():void 0;if(t){let r=i.routes.get(t);r&&n.set(e,r)}}return n}(this.bindRoutes,c.api,this.plugins),function(e,t){let r=new Set(t.values());for(let i of(r.delete(void 0),t.keys())){if(r.has(i))continue;let n=i,a="";for(;n;){let r=e.get(n);if(void 0===r)throw Error(`No path for ${n}`);a=rp(r,a),n=t.get(n)}let s=a.match(/:(\w+)/g);if(s){for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++)if(s[t]===s[e])throw Error(`Parameter ${s[t]} is duplicated in path ${a}`)}}}(o.paths,o.parents);var u=e;for(let e of this.plugins)if(e.externalRoutes){for(let[t,r]of Object.entries(e.externalRoutes))if(!r.optional&&!u.has(r))throw Error(`External route '${t}' of the '${e.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}catch(e){throw t=e,e}if(d&&a.current){a.current=!1;let e=this.getApiHolder().get(tH.B);if(e){for(let t of this.featureFlags)e.registerFlag({...t,pluginId:""});for(let t of this.plugins.values())if("getFeatureFlags"in t)for(let r of t.getFeatureFlags())e.registerFlag({name:r.name,pluginId:t.getId()});else for(let r of t.output())"feature-flag"===r.type&&e.registerFlag({name:r.name,pluginId:t.getId()});let t=new Set(e.getRegisteredFlags().map(e=>e.name));for(let r of l)t.has(r)||e.registerFlag({name:r,pluginId:""})}}let{ThemeProvider:p=rC,Progress:h}=this.components,g=this.getApiHolder();if(n=document.querySelector('meta[name="backstage-app-mode"]'),"protected"===(n?.getAttribute("content")??"public")){let e=g.get(eu.m),t=g.get(eh.a),r=g.get(eo.I);if(!e||!t||!r)throw Error("App is running in protected mode but missing required APIs");this.appIdentityProxy.enableCookieAuth({errorApi:e,fetchApi:t,discoveryApi:r})}return(0,eI.jsx)(tz,{apis:g,children:(0,eI.jsx)(rb,{appContext:r,children:(0,eI.jsx)(p,{children:(0,eI.jsx)(ry,{routePaths:o.paths,routeParents:o.parents,routeObjects:o.objects,routeBindings:e,basePath:(0,rP.D)(c.api),children:(0,eI.jsx)(rI.W.Provider,{value:{routeObjects:o.objects,appIdentityProxy:this.appIdentityProxy},children:(0,eI.jsx)(to.Suspense,{fallback:(0,eI.jsx)(h,{}),children:i})})})})})})}}getRouter(){return rP.L}getApiHolder(){if(this.apiHolder){for(let e of this.plugins)for(let t of e.getApis())this.apiFactoryRegistry.get(t.api)||this.apiFactoryRegistry.register("default",t);return tM.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}for(let e of(this.apiFactoryRegistry.register("static",{api:tW.Q,deps:{},factory:()=>tG.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:el.U,deps:{},factory:()=>{if(!this.configApi)throw Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:eg.K,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:t2.p,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:t3.J,deps:{languageApi:t2.p},factory:({languageApi:e})=>rM.create({languageApi:e,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:tH.B,deps:{},factory:()=>new t5}),this.defaultApis))this.apiFactoryRegistry.register("default",e);for(let e of this.plugins)for(let t of e.getApis())if(!this.apiFactoryRegistry.register("default",t))throw Error(`Plugin ${e.getId()} tried to register duplicate or forbidden API factory for ${t.api}`);for(let e of this.apis)if(!this.apiFactoryRegistry.register("app",e))throw Error(`Duplicate or forbidden API factory for ${e.api} in app`);return tM.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new tM(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(e){let t=new Set;for(let r of e){let e=r.getId();if(t.has(e))throw Error(`Duplicate plugin found '${e}'`);t.add(e)}}}function rH(e){return new rW({...e,apis:e?.apis??[],bindRoutes:e?.bindRoutes,components:{...ez,...e?.components},configLoader:e?.configLoader,defaultApis:eR,icons:{...te,...e?.icons},plugins:e?.plugins??[],featureFlags:e?.featureFlags??[],themes:e?.themes??tI})}},24259:function(e,t,r){"use strict";r.d(t,{c:()=>i});let i=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111")},55488:function(e,t,r){"use strict";r.d(t,{P:()=>a,_P:()=>n,oQ:()=>i});let i="default",n="backstage.io/view-url",a="backstage.io/edit-url"},78560:function(e,t,r){"use strict";r.d(t,{KU:()=>a,U2:()=>s,sM:()=>n});var i=r(55488);function n(e){return{kind:e.kind,namespace:e.metadata.namespace||i.oQ,name:e.metadata.name}}function a(e,t){let r,n,a;if(!e)throw Error("Entity reference must not be empty");let s=t?.defaultKind,o=t?.defaultNamespace||i.oQ;if("string"==typeof e){let t=function(e){let t=e.indexOf(":"),r=e.indexOf("/");-1!==r&&r<t&&(t=-1);let i=-1===t?void 0:e.slice(0,t),n=-1===r?void 0:e.slice(t+1,r),a=e.slice(Math.max(t+1,r+1));if(""===i||""===n||""===a)throw TypeError(`Entity reference "${e}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:i,namespace:n,name:a}}(e);r=t.kind??s,n=t.namespace??o,a=t.name}else r=e.kind??s,n=e.namespace??o,a=e.name;if(r)if(n){if(!a){let t=JSON.stringify(e);throw Error(`Entity reference ${t} had missing or empty name`)}}else{let t=JSON.stringify(e);throw Error(`Entity reference ${t} had missing or empty namespace`)}else{let t=JSON.stringify(e);throw Error(`Entity reference ${t} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:r,namespace:n,name:a}}function s(e){let t,r,n;return"metadata"in e?(t=e.kind,r=e.metadata.namespace??i.oQ,n=e.metadata.name):(t=e.kind,r=e.namespace??i.oQ,n=e.name),`${t.toLocaleLowerCase("en-US")}:${r.toLocaleLowerCase("en-US")}/${n.toLocaleLowerCase("en-US")}`}},97214:function(e,t,r){"use strict";r.d(t,{Ey:()=>a,IB:()=>l,Kx:()=>u,L8:()=>n,Qz:()=>p,ZD:()=>o,fO:()=>s,fT:()=>d,jn:()=>m,nC:()=>c,sA:()=>f,u0:()=>h,vv:()=>i,zj:()=>g});let i="ownedBy",n="ownerOf",a="consumesApi",s="apiConsumedBy",o="providesApi",l="apiProvidedBy",c="dependsOn",d="dependencyOf",u="parentOf",p="childOf",h="memberOf",g="hasMember",m="partOf",f="hasPart"},98890:function(e,t,r){"use strict";r.d(t,{Eo:()=>i,I4:()=>a,r2:()=>n});let i="backstage.io/managed-by-location",n="backstage.io/managed-by-origin-location",a="backstage.io/source-location"},79112:function(e,t,r){"use strict";r.d(t,{Cr:()=>l,KL:()=>o,aY:()=>s});var i=r(78560),n=r(98890);let a=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function s(e){if("string"!=typeof e)throw TypeError(`Unable to parse location ref '${e}', unexpected argument ${typeof e}`);let t=e.indexOf(":");if(t<0)throw TypeError(`Unable to parse location ref '${e}', expected '<type>:<target>', e.g. 'url:https://host/path'`);let r=e.substring(0,t).trim(),i=e.substring(t+1).trim();if(!r||!i)throw TypeError(`Unable to parse location ref '${e}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if("http"===r||"https"===r)throw TypeError(`Invalid location ref '${e}', please prefix it with 'url:', e.g. 'url:${e}'`);if(a.test(i))throw TypeError(`Invalid location ref '${e}', target is a javascript: URL`);return{type:r,target:i}}function o(e){let{type:t,target:r}=e;if(t){if(!r)throw TypeError("Unable to stringify location ref, empty target")}else throw TypeError("Unable to stringify location ref, empty type");if(a.test(r))throw TypeError(`Invalid location ref '${t}:${r}', target is a javascript: URL`);return`${t}:${r}`}function l(e){let t=e.metadata?.annotations?.[n.I4]??e.metadata?.annotations?.[n.Eo];if(!t)throw Error(`Entity '${(0,i.U2)(e)}' is missing location`);return s(t)}},68314:function(e,t,r){"use strict";r.d(t,{y:()=>s});var i=r(45250),n=r.n(i);class a{static isValidPrefixAndOrSuffix(e,t,r,i){if("string"!=typeof e)return!1;let n=e.split(t);return 1===n.length?i(n[0]):2===n.length&&r(n[0])&&i(n[1])}static isJsonSafe(e){try{return n().isEqual(e,JSON.parse(JSON.stringify(e)))}catch{return!1}}static isValidDnsSubdomain(e){return"string"==typeof e&&e.length>=1&&e.length<=253&&e.split(".").every(a.isValidDnsLabel)}static isValidDnsLabel(e){return"string"==typeof e&&e.length>=1&&e.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(e)}static isValidTag(e){return"string"==typeof e&&e.length>=1&&e.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(e)}static isValidUrl(e){if("string"!=typeof e)return!1;try{return new URL(e),!0}catch{return!1}}static isValidString(e){return"string"==typeof e&&e?.trim()?.length>=1}static isNonEmptyString(e){return"string"==typeof e&&e?.trim()?.length>=1}}class s{static isValidApiVersion(e){return a.isValidPrefixAndOrSuffix(e,"/",a.isValidDnsSubdomain,e=>e.length>=1&&e.length<=63&&/^[a-z0-9A-Z]+$/.test(e))}static isValidKind(e){return"string"==typeof e&&e.length>=1&&e.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(e)}static isValidObjectName(e){return"string"==typeof e&&e.length>=1&&e.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(e)}static isValidNamespace(e){return a.isValidDnsLabel(e)}static isValidLabelKey(e){return a.isValidPrefixAndOrSuffix(e,"/",a.isValidDnsSubdomain,s.isValidObjectName)}static isValidLabelValue(e){return""===e||s.isValidObjectName(e)}static isValidAnnotationKey(e){return a.isValidPrefixAndOrSuffix(e,"/",a.isValidDnsSubdomain,s.isValidObjectName)}static isValidAnnotationValue(e){return"string"==typeof e}}},10762:function(e,t,r){let i=document.querySelector('meta[name="backstage-public-path"]'),n=i?.getAttribute("content");n&&(r.p=n)},33321:function(e,t,r){"use strict";r.d(t,{L:()=>v,D:()=>y});var i=r(31085),n=r(14041),a=r(18139),s=r(54195),o=r(95208),l=r(85408),c=r(45681),d=r(51750),u=r(21613),p=r(18690),h=r(52262),g=r(19224);let m=({pathname:e,search:t,hash:r,attributes:i})=>{let a=(0,h.s)();return(0,n.useEffect)(()=>{a.captureEvent("navigate",`${e}${t}${r}`,{attributes:i})},[a,e,t,r,i]),null},f=({routeObjects:e})=>{let{pathname:t,search:r,hash:n}=(0,p.zy)(),{params:a,...s}=((e,t)=>{try{let r,i,n=(0,u.ue)(t,{pathname:e}),a=n?.filter(e=>e?.route.routeRefs?.size>0).pop(),s=a?.route;if(!s||""===s.path&&"/"!==e)return;1===s.routeRefs.size&&(r=s.routeRefs.values().next().value),1===s.plugins.size&&(i=s.plugins.values().next().value);let o=Object.entries(a?.params||{}).reduce((e,[t,r])=>(void 0!==r&&"*"!==t&&(e[t]=r),e),{});return{extension:"App",pluginId:i?.getId()||"root",...r?{routeRef:r.id}:{},_routeNodeType:s.element,params:o}}catch{return}})(t,e)||{params:{}};return(0,i.jsx)(g.I,{attributes:s,children:(0,i.jsx)(m,{pathname:t,search:r,hash:n,attributes:a})})};function y(e){return(0,d.h)()?x(e):""}function x(e){let{pathname:t}=new URL(e.getOptionalString("app.baseUrl")??"/","http://sample.dev");return t.replace(/\/*$/,"")}function b({component:e,appIdentityProxy:t,children:r}){let[o,l]=(0,n.useState)(),c=x((0,a.gf)(s.U));return o?(t.setTarget(o,{signOutTargetUrl:c||"/"}),(0,i.jsx)(i.Fragment,{children:r})):(0,i.jsx)(e,{onSignInSuccess:l})}function v(e){let{Router:t,SignInPage:r}=(0,o.n)().getComponents(),l=x((0,a.gf)(s.U)),u=`${l}/*`,h=(0,n.useContext)(c.W);if(!h)throw Error("AppRouter must be rendered within the AppProvider");let{routeObjects:g,appIdentityProxy:m}=h;return r?(0,d.h)()?(0,i.jsxs)(t,{children:[(0,i.jsx)(f,{routeObjects:g}),(0,i.jsx)(b,{component:r,appIdentityProxy:m,children:(0,i.jsx)(p.BV,{children:(0,i.jsx)(p.qh,{path:u,element:(0,i.jsx)(i.Fragment,{children:e.children})})})})]}):(0,i.jsxs)(t,{basename:l,children:[(0,i.jsx)(f,{routeObjects:g}),(0,i.jsx)(b,{component:r,appIdentityProxy:m,children:e.children})]}):(m.setTarget({getUserId:()=>"guest",getIdToken:async()=>void 0,getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:l||"/"}),(0,d.h)())?(0,i.jsxs)(t,{children:[(0,i.jsx)(f,{routeObjects:g}),(0,i.jsx)(p.BV,{children:(0,i.jsx)(p.qh,{path:u,element:(0,i.jsx)(i.Fragment,{children:e.children})})})]}):(0,i.jsxs)(t,{basename:l,children:[(0,i.jsx)(f,{routeObjects:g}),e.children]})}(0,l.h)(v,"core.type","AppRouter")},45681:function(e,t,r){"use strict";r.d(t,{W:()=>i});let i=(0,r(14041).createContext)(void 0)},51750:function(e,t,r){"use strict";r.d(t,{h:()=>a});var i=r(31085),n=r(18690);function a(){let[e]=(0,n.AV)((0,i.jsx)(n.qh,{index:!0,element:(0,i.jsx)("div",{})}));return!e.index}},60540:function(e,t,r){"use strict";r.d(t,{i:()=>u});var i=r(31085),n=r(14041),a=r(18690),s=r(95208),o=r(77026),l=r(85408),c=r(51750);let d=!1,u=e=>{let{NotFoundErrorPage:t}=(0,s.n)().getComponents(),r=(0,n.useMemo)(()=>(0,c.h)(),[]),l=[...(0,o.O)(e.children,e=>e.getElements().flatMap(e=>{let t=e.props.path;if(""===t)return[];t=t?.replace(/\/\*$/,"")??"/";let i=r?e:e.props.element;return r||i||(i=e,d||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),d=!0)),[{path:t,element:i,children:e.props.children?[{path:"/"===t?"/":"*",element:e.props.children}]:void 0}]}).sort((e,t)=>t.path.localeCompare(e.path)).map(e=>({...e,path:"/"===e.path?"/":`${e.path}/*`}))),{path:"*",element:(0,i.jsx)(t,{})}];return(0,a.Ye)(l)};(0,l.h)(u,"core.type","FlatRoutes")},77462:function(e,t,r){"use strict";r.d(t,{D:()=>g});var i=r(31085),n=r(18139),a=r(34477),s=r(10265),o=r(29365),l=r(38097),c=r(72501),d=r(32881),u=r(48209),p=r(14041),h=r(89475);function g(e){let[t,r]=(0,p.useState)([]),g=(0,n.gf)(a.k),{t:m}=(0,s.i)(h.O),{anchorOrigin:f={vertical:"top",horizontal:"center"},transientTimeoutMs:y}=e,x=y??5e3;(0,p.useEffect)(()=>{let e=g.alert$().subscribe(e=>r(t=>t.concat(e)));return()=>{e.unsubscribe()}},[g]);let[b]=t;return((0,p.useEffect)(()=>{if(b&&"transient"===b.display){let e=setTimeout(()=>{r(e=>{let t=e.filter(e=>e!==b);return t.length===e.length?e:t})},x);return()=>clearTimeout(e)}},[b,x]),0===t.length)?null:(0,i.jsx)(l.A,{open:!0,anchorOrigin:f,children:(0,i.jsx)(u.A,{action:(0,i.jsx)(o.A,{color:"inherit",size:"small",onClick:()=>{r(e=>e.filter(e=>e!==b))},"data-testid":"error-button-close",children:(0,i.jsx)(d.default,{})}),severity:b.severity,children:(0,i.jsxs)(c.A,{component:"span",children:[String(b.message),t.length>1&&(0,i.jsxs)("em",{children:[" ",m("alertDisplay.message",{count:t.length-1})]})]})})})}},62112:function(e,t,r){"use strict";r.d(t,{z:()=>d});var i=r(31085),n=r(77125),a=r(54917),s=r(11709),o=r(40697),l=r(25577),c=r(31994);function d(e){let{text:t,language:r,showLineNumbers:d=!1,highlightedNumbers:u,customStyle:p,showCopyCodeButton:h=!1}=e,g=(0,a.A)(),m="dark"===g.palette.type?o.A:l.A,f="dark"===g.palette.type?"#256bf3":"#e6ffed";return(0,i.jsxs)(n.A,{position:"relative",children:[(0,i.jsx)(s.A,{customStyle:p,language:r,style:m,showLineNumbers:d,wrapLines:!0,lineNumberStyle:{color:g.palette.textVerySubtle},lineProps:e=>u?.includes(e)?{style:{backgroundColor:f}}:{},children:t}),h&&(0,i.jsx)(n.A,{position:"absolute",top:0,right:0,children:(0,i.jsx)(c.l,{text:t})})]})}},31994:function(e,t,r){"use strict";r.d(t,{l:()=>h});var i=r(31085),n=r(18139),a=r(24453),s=r(29365),o=r(71677),l=r(99594),c=r(14041),d=r(11688),u=r(89475),p=r(10265);function h(e){let{t}=(0,p.i)(u.O),{text:r,tooltipDelay:h=1e3,tooltipText:g=t("copyTextButton.tooltipText"),"aria-label":m="Copy text"}=e,f=(0,n.gf)(a.m),[y,x]=(0,c.useState)(!1),[{error:b},v]=(0,d.A)();return(0,c.useEffect)(()=>{b&&f.post(b)},[b,f]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.Ay,{id:"copy-test-tooltip",title:g,placement:"top",leaveDelay:h,onClose:()=>x(!1),open:y,children:(0,i.jsx)(s.A,{onClick:e=>{e.stopPropagation(),x(!0),v(r)},"aria-label":m,children:(0,i.jsx)(l.default,{})})})})}},39371:function(e,t,r){"use strict";r.d(t,{w:()=>H});var i=r(31085),n=r(14041),a=r(37238),s=r(53373),o=r.n(s),l=r(45250),c=r(68510),d=r(67566),u=r(41809),p=r(57586),h=r.n(p),g=r(12784),m=r.n(g),f=r(47090),y=r(22249),x=r(58837);let b=(0,x.A)(e=>({node:{fill:e.palette.primary.light,stroke:e.palette.primary.light},text:{fill:e.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function v({node:{id:e}}){let t=b(),[r,a]=(0,n.useState)(0),[s,o]=(0,n.useState)(0),l=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{if(l.current){let{height:e,width:t}=l.current.getBBox();e=Math.round(e),t=Math.round(t),(e!==s||t!==r)&&(a(t),o(e))}},[r,s]);let c=r+20,d=s+20;return(0,i.jsxs)("g",{children:[(0,i.jsx)("rect",{className:t.node,width:c,height:d,rx:10}),(0,i.jsx)("text",{ref:l,className:t.text,y:d/2,x:c/2,textAnchor:"middle",alignmentBaseline:"middle",children:e})]})}let w="arrow-marker",j=(0,y.default)(e=>({node:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),A=e=>(0,i.jsx)(v,{...e});function k({render:e=A,setNode:t,node:r}){let{width:a,height:s,x:o=0,y:l=0}=r,c=j(),d=(0,n.useRef)(null);return(0,n.useLayoutEffect)(()=>{if(d.current){let{height:e,width:i}=d.current.getBBox();e=Math.round(e),i=Math.round(i),(e!==s||i!==a)&&t(r.id,{...r,height:e,width:i})}},[r,a,s,t]),(0,i.jsx)("g",{ref:d,"data-testid":"node",className:c.node,transform:`translate(${o-a/2},${l-s/2})`,children:e({node:r})})}var S=r(1121),C=r(12895),E=r(20644),T=r.n(E);let $=(0,y.default)(e=>({text:{fill:e.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function R({edge:{label:e}}){let t=$();return(0,i.jsx)("text",{className:t.text,textAnchor:"middle",children:e})}let I=(0,y.default)(e=>({path:{strokeWidth:1.3,stroke:e.palette.textSubtle,fill:"none",transition:`${e.transitions.duration.shortest}ms`},label:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),P=e=>(0,i.jsx)(R,{...e});function O({render:e=P,setEdge:t,id:r,edge:a,curve:s,showArrowHeads:o}){let{x:l=0,y:c=0,width:d,height:u,points:p}=a,h=I(),g=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{if(g.current){let{height:e,width:i}=g.current.getBBox();e=Math.round(e),i=Math.round(i),(e!==u||i!==d)&&t(r,{...a,height:e,width:i})}},[a,u,d,t,r]);let m="",f=(0,n.useMemo)(()=>S.A().x(e=>e.x).y(e=>e.y).curve(C[s]),[s]);return p&&(m=f(p.filter(e=>T()(e.x)&&T()(e.y)))||""),(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)("path",{"data-testid":"edge",className:h.path,markerEnd:o?`url(#${w})`:void 0,d:m}),a.label?(0,i.jsx)("g",{ref:g,"data-testid":"label",className:h.label,transform:`translate(${l},${c})`,children:e({edge:a})}):null]})}var N=r(29365),B=r(25828),U=r(63988),L=r(14112),F=r(71677),z=r(10265),M=r(89475);let D=(0,x.A)(e=>({fullscreenButton:{position:"absolute",right:0},root:{overflow:"hidden",minHeight:"100%",minWidth:"100%"},fixedHeight:{maxHeight:"100%"},fullscreen:{backgroundColor:e.palette.background.paper}})),q="workspace",W="dependency-graph";function H(e){let{edges:t,nodes:r,renderNode:s,direction:p=f.D.Direction.TOP_BOTTOM,align:g,nodeMargin:y=50,edgeMargin:x=10,rankMargin:b=50,paddingX:v=0,paddingY:j=0,acyclicer:A,ranker:S=f.D.Ranker.NETWORK_SIMPLEX,labelPosition:C=f.D.LabelPosition.RIGHT,labelOffset:E=10,edgeRanks:T=1,edgeWeight:$=1,renderEdge:R,renderLabel:I,defs:P,zoom:H="enabled",curve:_="curveMonotoneX",showArrowHeads:G=!1,fit:K="grow",allowFullscreen:V=!0,...Y}=e,J=(0,u.default)(),[Q,Z]=(0,n.useState)(100),[X,ee]=(0,n.useState)(100),et=(0,L.V)(),er=D(),{t:ei}=(0,z.i)(M.O),en=(0,n.useRef)(new(h()).graphlib.Graph),[ea,es]=(0,n.useState)(en.current.graph()?.width||0),[eo,el]=(0,n.useState)(en.current.graph()?.height||0),[ec,ed]=(0,n.useState)([]),[eu,ep]=(0,n.useState)([]),eh=Math.max(ea,Q),eg=Math.max(eo,X),[em]=(0,a.A)(),ef=(0,l.once)(em),ey="grow"!==K||et.active?"100%":eg,ex=(0,n.useMemo)(()=>m()(e=>{if(!e)return;ef(e);let t=e.querySelector(`svg#${W}`);if(!t)return;let r=d.A(t),i=d.A(t.getElementById(q));function n(){r.call(c.s_().scaleExtent([1,1/0]).on("zoom",e=>{e.transform.x=Math.min(0,Math.max(e.transform.x,eh-eh*e.transform.k)),e.transform.y=Math.min(0,Math.max(e.transform.y,eg-eg*e.transform.k)),i.attr("transform",e.transform)}))}"enabled"===H?n():"enable-on-click"===H&&r.on("click",()=>n());let{width:a,height:s}=e.getBoundingClientRect();Q!==a&&a<=eh&&Z(a),X!==s&&s<=eg&&ee(s)},100),[ef,X,Q,eh,eg,H]),eb=(0,n.useCallback)(()=>{let e=en.current.nodes(),i=en.current.edges();e.forEach(e=>{r.some(t=>t.id===e)||en.current.removeNode(e)}),i.forEach(e=>{t.some(t=>t.from===e.v&&t.to===e.w)||en.current.removeEdge(e.v,e.w)}),r.forEach(e=>{let t=en.current.nodes().find(t=>e.id===t);if(t&&en.current.node(t)){let{width:r,height:i,x:n,y:a}=en.current.node(t);en.current.setNode(t,{...e,width:r,height:i,x:n,y:a})}else en.current.setNode(e.id,{...e,width:0,height:0})}),t.forEach(e=>{en.current.setEdge(e.from,e.to,{...e,label:e.label,width:0,height:0,labelpos:C,labeloffset:E,weight:$,minlen:T})})},[t,r,C,E,$,T]),ev=(0,n.useMemo)(()=>m()(()=>{h().layout(en.current);let{height:e,width:t}=en.current.graph(),r=Math.max(0,e||0);es(Math.max(0,t||0)),el(r),ed(en.current.nodes()),ep(en.current.edges())},250,{leading:!0}),[]);(0,n.useEffect)(()=>(en.current.setGraph({rankdir:p,align:g,nodesep:y,edgesep:x,ranksep:b,marginx:v,marginy:j,acyclicer:A,ranker:S}),eb(),ev(),ev.cancel),[A,g,p,x,v,j,y,b,S,eb,ev]);let ew=(0,n.useCallback)((e,t)=>(en.current.setNode(e,t),ev(),en.current),[ev]),ej=(0,n.useCallback)((e,t)=>(en.current.setEdge(e,t),ev(),en.current),[ev]);return(0,i.jsxs)(L.m,{handle:et,className:o()(et.active?er.fullscreen:er.root),children:[V&&(0,i.jsx)(F.Ay,{title:ei("dependencyGraph.fullscreenTooltip"),children:(0,i.jsx)(N.A,{className:er.fullscreenButton,onClick:et.active?et.exit:et.enter,children:et.active?(0,i.jsx)(U.default,{}):(0,i.jsx)(B.default,{})})}),(0,i.jsx)("div",{ref:ex,style:{width:"100%",height:"100%"},children:(0,i.jsxs)("svg",{...Y,width:"100%",height:ey,viewBox:`0 0 ${eh} ${eg}`,id:W,children:[(0,i.jsxs)("defs",{children:[(0,i.jsx)("marker",{id:w,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth",children:(0,i.jsx)("path",{fill:J.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})}),P]}),(0,i.jsx)("g",{id:q,children:(0,i.jsxs)("svg",{width:ea,height:eo,y:eg/2-eo/2,x:eh/2-ea/2,viewBox:`0 0 ${ea} ${eo}`,children:[eu.map(e=>{let t=en.current.edge(e);return t?R?R({edge:t,id:e}):(0,i.jsx)(O,{id:e,setEdge:ej,render:I,edge:t,curve:_,showArrowHeads:G},`${e.v}-${e.w}`):null}),ec.map(e=>{let t=en.current.node(e);return t?(0,i.jsx)(k,{setNode:ew,render:s,node:t},e):null})]})})]})})]})}},47090:function(e,t,r){"use strict";var i,n;r.d(t,{D:()=>i}),(n=i||(i={})).Direction={TOP_BOTTOM:"TB",BOTTOM_TOP:"BT",LEFT_RIGHT:"LR",RIGHT_LEFT:"RL"},n.Alignment={UP_LEFT:"UL",UP_RIGHT:"UR",DOWN_LEFT:"DL",DOWN_RIGHT:"DR"},n.Ranker={NETWORK_SIMPLEX:"network-simplex",TIGHT_TREE:"tight-tree",LONGEST_PATH:"longest-path"},n.LabelPosition={LEFT:"l",RIGHT:"r",CENTER:"c"}},56711:function(e,t,r){"use strict";r.d(t,{p:()=>g});var i=r(31085),n=r(42899),a=r(58837),s=r(72501);let o=r.p+"static/missingAnnotation.5df688e7.svg",l=r.p+"static/noInformation.acf1ccf4.svg",c=r.p+"static/createComponent.7c188d7f.svg",d=r.p+"static/noBuild.169833d0.svg",u=(0,a.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),p=({missing:e})=>{let t=u();switch(e){case"field":return(0,i.jsx)("img",{src:o,className:t.generalImg,alt:"annotation is missing"});case"info":return(0,i.jsx)("img",{src:l,alt:"no Information",className:t.generalImg});case"content":return(0,i.jsx)("img",{src:c,alt:"create Component",className:t.generalImg});case"data":return(0,i.jsx)("img",{src:d,alt:"no Build",className:t.generalImg});default:return null}},h=(0,a.A)(e=>({root:{backgroundColor:e.palette.background.default,padding:e.spacing(2,0,0,0)},action:{marginTop:e.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function g(e){let{title:t,description:r,missing:a,action:o}=e,l=h();return(0,i.jsxs)(n.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:l.root,spacing:2,children:[(0,i.jsx)(n.A,{item:!0,xs:12,md:6,children:(0,i.jsxs)(n.A,{container:!0,direction:"column",children:[(0,i.jsx)(n.A,{item:!0,xs:!0,children:(0,i.jsx)(s.A,{variant:"h5",children:t})}),(0,i.jsx)(n.A,{item:!0,xs:!0,children:(0,i.jsx)(s.A,{variant:"body1",children:r})}),(0,i.jsx)(n.A,{item:!0,xs:!0,className:l.action,children:o})]})}),(0,i.jsx)(n.A,{item:!0,xs:12,md:6,className:l.imageContainer,children:"string"==typeof a?(0,i.jsx)(p,{missing:a}):a.customImage})]})}},12554:function(e,t,r){"use strict";r.d(t,{b:()=>p});var i=r(31085),n=r(58837),a=r(58007),s=r(8109),o=r(5951),l=r(31994),c=r(99338);let d=(0,n.A)(e=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:e.spacing(2)},divider:{margin:e.spacing(2)}}),{name:"BackstageErrorPanel"}),u=({error:e,message:t,stack:r,children:n})=>{let c=d();return(0,i.jsxs)(a.A,{dense:!0,children:[(0,i.jsxs)(s.A,{alignItems:"flex-start",children:[(0,i.jsx)(o.A,{classes:{secondary:c.text},primary:"Error",secondary:e}),(0,i.jsx)(l.l,{text:e})]}),(0,i.jsxs)(s.A,{alignItems:"flex-start",children:[(0,i.jsx)(o.A,{classes:{secondary:c.text},primary:"Message",secondary:t}),(0,i.jsx)(l.l,{text:t})]}),r&&(0,i.jsxs)(s.A,{alignItems:"flex-start",children:[(0,i.jsx)(o.A,{classes:{secondary:c.text},primary:"Stack Trace",secondary:r}),(0,i.jsx)(l.l,{text:r})]}),n]})};function p(e){let{title:t,error:r,defaultExpanded:n,titleFormat:a,children:s}=e;return(0,i.jsx)(c.B,{severity:"error",title:t??r.message,defaultExpanded:n,titleFormat:a,children:(0,i.jsx)(u,{error:r.name,message:r.message,stack:r.stack,children:s})})}},23730:function(e,t,r){"use strict";r.d(t,{m:()=>d,v:()=>u});var i=r(31085),n=r(29365),a=r(71677),s=r(72501),o=r(58837),l=r(92483);let c=(0,o.A)(()=>({icon:{color:"#f3ba37",cursor:"pointer",display:"inline-flex"},iconBorder:{color:"inherit",cursor:"pointer",display:"inline-flex"}}),{name:"BackstageFavoriteToggleIcon"});function d(e){let{isFavorite:t}=e,r=c();return(0,i.jsx)(s.A,{component:"span",className:t?r.icon:r.iconBorder,children:t?(0,i.jsx)(l.Gg,{}):(0,i.jsx)(l.KG,{})})}function u(e){let{id:t,title:r,isFavorite:s,onToggle:o,...l}=e;return(0,i.jsx)(a.Ay,{id:t,title:r,children:(0,i.jsx)(n.A,{"aria-label":r,id:t,onClick:()=>o(!s),color:"inherit",...l,children:(0,i.jsx)(d,{isFavorite:s})})})}},75202:function(e,t,r){"use strict";r.d(t,{N_:()=>A});var i=r(31085),n=r(95208),a=r(18139),s=r(54195),o=r(52262),l=r(49203),c=r(58837),d=r(72501),u=r(53373),p=r.n(u),h=r(45250),g=r(14041),m=r(18690),f=r(73657),y=r(39330);let x=(0,c.A)(e=>({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"},externalLinkIcon:{verticalAlign:"bottom",marginLeft:e.spacing(.5)}}),{name:"Link"}),b=()=>{let e=(0,n.n)().getSystemIcon("externalLink")||y.default,t=x();return(0,i.jsx)(e,{className:t.externalLinkIcon})},v=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,w=window.open;if(w&&!w.__backstage){let e=function(...e){let t=String(e[0]);if(v.test(t))throw Error("Rejected window.open() with a javascript: URL as a security precaution");return w.apply(this,e)};e.__backstage=!0,window.open=e}let j=e=>e instanceof Array?e.map(j).join(" ").trim():"object"==typeof e&&e?j(e?.props?.children):["string","number"].includes(typeof e)?String(e):"",A=(0,g.forwardRef)(({onClick:e,noTrack:t,externalLinkIcon:r,...n},c)=>{let u,g,y,w,A,k=x(),S=(0,o.s)(),C=!function(){let[e]=(0,m.AV)((0,i.jsx)(m.qh,{index:!0,element:(0,i.jsx)("div",{})}));return!e.index}()?n.to:(u=String(n.to),g=(()=>{let{pathname:e}=new URL((()=>{try{return(0,a.gf)(s.U).getOptionalString("app.baseUrl")}catch{return}})()??"/","http://sample.dev");return(0,h.trimEnd)(e,"/")})(),y=u,w=/^([a-z+.-]+):/.test(y),A=u.startsWith(g),w||A||(u=g.concat(u)),u),E=j(n.children)||C,T=/^([a-z+.-]+):/.test(C),$=T&&!!/^https?:/.exec(C);if(v.test(C))throw Error("Link component rejected javascript: URL as a security precaution");let R=r=>{e?.(r),t||S.captureEvent("click",E,{attributes:{to:C}})};return T?(0,i.jsxs)(l.A,{...$?{target:"_blank",rel:"noopener"}:{},...n,...n["aria-label"]?{"aria-label":`${n["aria-label"]}, Opens in a new window`}:{},ref:c,href:C,onClick:R,className:p()(k.externalLink,n.className),children:[n.children,r&&(0,i.jsx)(b,{}),(0,i.jsx)(d.A,{component:"span",className:k.visuallyHidden,children:", Opens in a new window"})]}):(0,i.jsx)(l.A,{...n,ref:c,component:f.N_,to:C,onClick:R})})},87318:function(e,t,r){"use strict";r.d(t,{z:()=>l});var i=r(31085),n=r(64947),a=r(14041),s=r(75202);let o=(0,a.forwardRef)((e,t)=>(0,i.jsx)(s.N_,{ref:t,...e,color:"initial"})),l=(0,a.forwardRef)((e,t)=>(0,i.jsx)(n.A,{ref:t,component:o,...e}))},67296:function(e,t,r){"use strict";r.d(t,{r:()=>o});var i=r(31085),n=r(14041),a=r(95208);let s=(0,n.lazy)(()=>r.e("613").then(r.bind(r,41620)).then(e=>({default:e.RealLogViewer})));function o(e){let{Progress:t}=(0,a.n)().getComponents();return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)(t,{}),children:(0,i.jsx)(s,{...e})})}},28364:function(e,t,r){"use strict";r.d(t,{h:()=>h});var i=r(31085),n=r(58837),a=r(72959),s=r(9510),o=r(14041),l=r(62112);let c=(0,n.A)(e=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${e.palette.border}`},"& th, & td":{border:`1px solid ${e.palette.border}`,padding:e.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:e.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:e.palette.background.paper},"& tr":{backgroundColor:e.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:e.palette.background.default},"& a":{color:e.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),d=(e,t)=>t?"string"==typeof t?e+t:o.Children.toArray(t.props.children).reduce(d,e):e,u=({level:e,children:t})=>{let r=o.Children.toArray(t).reduce(d,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return(0,o.createElement)(`h${e}`,{id:r},t)},p={code:({inline:e,className:t,children:r,...n})=>{let a=String(r).replace(/\n+$/,""),s=/language-(\w+)/.exec(t||"");return!e&&s?(0,i.jsx)(l.z,{language:s[1],text:a}):(0,i.jsx)("code",{className:t,...n,children:r})},h1:u,h2:u,h3:u,h4:u,h5:u,h6:u};function h(e){let{content:t,dialect:r="gfm",linkTarget:n,transformLinkUri:o,transformImageUri:l,className:d}=e,u=c();return(0,i.jsx)(a.$,{remarkPlugins:"gfm"===r?[s.A]:[],className:`${u.markdown} ${d??""}`.trim(),children:t,components:p,linkTarget:n,transformLinkUri:o,transformImageUri:l})}},1523:function(e,t,r){"use strict";r.d(t,{z:()=>E});var i=r(31085),n=r(58837),a=r(76891),s=r(93453),o=r(46805),l=r(61477),c=r(58007),d=r(64947),u=r(14041),p=r(10581),h=r(8109),g=r(91467),m=r(5951),f=r(72501),y=r(67457),x=r(18139),b=r(54195),v=r(89475),w=r(10265),j=r(77125);let A=(0,n.A)(e=>({root:{paddingLeft:e.spacing(2)},button:{marginLeft:e.spacing(2)}}),{name:"BackstageLoginRequestListItem"}),k=({request:e,busy:t,setBusy:r})=>{let n=A(),[a,s]=(0,u.useState)(),{t:o}=(0,w.i)(v.O),l=(0,x.gf)(b.U),c=async()=>{r(!0);try{await e.trigger()}catch(e){s((0,y.b)(e)?e.message:"An unspecified error occurred")}finally{r(!1)}},p=e.provider.icon,k=e.provider.message??o("oauthRequestDialog.message",{appTitle:l.getString("app.title"),provider:e.provider.title});return(0,i.jsxs)(h.A,{disabled:t,classes:{root:n.root},children:[(0,i.jsx)(g.A,{children:(0,i.jsx)(p,{fontSize:"large"})}),(0,i.jsxs)(j.A,{display:"flex",alignItems:"center",flex:1,children:[(0,i.jsx)(j.A,{flex:1,children:(0,i.jsx)(m.A,{primary:e.provider.title,secondary:(0,i.jsxs)(i.Fragment,{children:[k&&(0,i.jsx)(f.A,{variant:"subtitle2",color:"textSecondary",children:k}),a&&(0,i.jsx)(f.A,{color:"error",children:a})]})})}),(0,i.jsx)(d.A,{color:"primary",variant:"contained",onClick:c,className:n.button,children:o("oauthRequestDialog.login")})]})]})};var S=r(35177);let C=(0,n.A)(e=>({dialog:{paddingTop:e.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:e.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:e.spacing(2,0)}}),{name:"OAuthRequestDialog"});function E(e){let t=C(),[r,n]=(0,u.useState)(!1),h=(0,x.gf)(S.s),g=(0,x.gf)(b.U),{t:m}=(0,w.i)(v.O),y=g.getOptionalBoolean("enableExperimentalRedirectFlow")??!1,j=(0,p.A)((0,u.useMemo)(()=>h.authRequest$(),[h]),[]);return(0,i.jsxs)(a.A,{open:!!j.length,fullWidth:!0,maxWidth:"xs",classes:{paper:t.dialog},"aria-labelledby":"oauth-req-dialog-title",children:[(0,i.jsxs)("main",{children:[(0,i.jsxs)(l.A,{classes:{root:t.title},id:"oauth-req-dialog-title",children:[(0,i.jsx)(f.A,{className:t.titleHeading,variant:"h1",variantMapping:{h1:"span"},children:m("oauthRequestDialog.title")}),y?(0,i.jsx)(f.A,{children:m("oauthRequestDialog.authRedirectTitle")}):null]}),(0,i.jsx)(o.A,{dividers:!0,classes:{root:t.contentList},children:(0,i.jsx)(c.A,{children:j.map(e=>(0,i.jsx)(k,{request:e,busy:r,setBusy:n},e.provider.title))})})]}),(0,i.jsx)(s.A,{classes:{root:t.actionButtons},children:(0,i.jsx)(d.A,{onClick:()=>{j.forEach(e=>e.reject())},children:m("oauthRequestDialog.rejectAll")})})]})}},96872:function(e,t,r){"use strict";r.d(t,{k:()=>l});var i=r(31085),n=r(77125),a=r(88951),s=r(54917),o=r(14041);function l(e){let t=(0,s.A)(),[r,l]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=setTimeout(()=>l(!0),t.transitions.duration.short);return()=>clearTimeout(e)},[t.transitions.duration.short]),r?(0,i.jsx)(a.A,{...e,"data-testid":"progress"}):(0,i.jsx)(n.A,{display:"none","data-testid":"progress"})}},99424:function(e,t,r){"use strict";r.d(t,{_:()=>p});var i=r(31085),n=r(58837),a=r(37197),s=r(8109),o=r(5951),l=r(62112),c=r(31994),d=r(12554);let u=(0,n.A)(e=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:e.spacing(2)},divider:{margin:e.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function p(e){let{title:t,error:r,defaultExpanded:n}=e,p=u();if("ResponseError"!==r.name)return(0,i.jsx)(d.b,{title:t??r.message,defaultExpanded:n,error:r});let{body:h,cause:g}=r,{request:m,response:f}=h,y=`${f.statusCode}: ${g.name}`,x=m&&`${m.method} ${m.url}`,b=g.message.replace(/\\n/g,"\n"),v=g.stack?.replace(/\\n/g,"\n"),w=JSON.stringify(h,void 0,2);return(0,i.jsxs)(d.b,{title:t??r.message,defaultExpanded:n,error:{name:y,message:b,stack:v},children:[x&&(0,i.jsxs)(s.A,{alignItems:"flex-start",children:[(0,i.jsx)(o.A,{classes:{secondary:p.text},primary:"Request",secondary:m?`${x}`:void 0}),(0,i.jsx)(c.l,{text:x})]}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{component:"li",className:p.divider}),(0,i.jsx)(s.A,{alignItems:"flex-start",children:(0,i.jsx)(o.A,{classes:{secondary:p.text},primary:"Full Error as JSON"})}),(0,i.jsx)(l.z,{language:"json",text:w,showCopyCodeButton:!0})]})]})}},79089:function(e,t,r){"use strict";r.d(t,{w:()=>S});var i=r(31085),n=r(77125),a=r(98552),s=r(94390),o=r(95061),l=r(41857),c=r(48543),d=r(26343),u=r(99489),p=r(7031),h=r(99703),g=r(58837),m=r(72501),f=r(92399),y=r(14041),x=r(10437);let b=(0,g.A)(e=>(0,h.A)({icon:{position:"absolute",right:e.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),v=()=>{let e=b();return(0,i.jsx)(x.A,{className:e.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"})})},w=(0,g.A)(e=>(0,h.A)({icon:{position:"absolute",right:e.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),j=()=>{let e=w();return(0,i.jsx)(x.A,{className:e.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"})})},A=(0,p.A)(e=>(0,h.A)({root:{"label + &":{marginTop:e.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:e.palette.primary.main}},input:{borderRadius:e.shape.borderRadius,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:e.typography.body1.fontSize,padding:e.spacing(1.25,3.25,1.25,1.5),transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{background:e.palette.background.paper,borderRadius:e.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(l.A),k=(0,g.A)(e=>(0,h.A)({formControl:{margin:e.spacing(1,0)},label:{transform:"initial",fontWeight:"bold",fontSize:e.typography.body2.fontSize,fontFamily:e.typography.fontFamily,color:e.palette.text.primary,"&.Mui-focused":{color:e.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:e.typography.body2.fontSize,fontFamily:e.typography.fontFamily,color:e.palette.text.primary,"&.Mui-focused":{color:e.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function S(e){let{multiple:t,items:r,label:l,placeholder:p,selected:h,onChange:g,triggerReset:x,native:b=!1,disabled:w=!1,margin:S,"data-testid":C="select"}=e,E=k(),[T,$]=(0,y.useState)(h||(t?[]:"")),[R,I]=(0,y.useState)(!1);return(0,y.useEffect)(()=>{$(t?[]:"")},[x,t]),(0,y.useEffect)(()=>{$(h||(t?[]:""))},[h,t]),(0,i.jsx)(n.A,{className:E.root,children:(0,i.jsxs)(o.A,{className:E.formControl,children:[(0,i.jsx)(c.A,{className:E.formLabel,children:l}),(0,i.jsxs)(u.A,{"aria-label":l,value:T,native:b,disabled:w,"data-testid":C,displayEmpty:!0,multiple:t,margin:S,onChange:e=>{$(e.target.value),g(e.target.value)},open:R,onOpen:e=>{w?e.preventDefault():I(r=>!(!t||e.target instanceof HTMLElement)||!r)},onClose:()=>{I(!1)},input:(0,i.jsx)(A,{}),label:l,renderValue:e=>t&&0!==T.length?(0,i.jsx)(n.A,{className:E.chips,children:e.map(e=>{let t=r.find(t=>t.value===e);return!!t&&(0,i.jsx)(s.A,{"data-testid":"chip",label:t?.label,clickable:!0,deleteIcon:(0,i.jsx)(f.default,{"data-testid":"cancel-icon",onMouseDown:e=>e.stopPropagation()}),onDelete:()=>{let t=T.filter(t=>t!==e);$(t),g(t)},className:E.chip},t?.value)})}):(0,i.jsx)(m.A,{children:0===T.length?p||"":r.find(t=>t.value===e)?.label}),IconComponent:()=>R?(0,i.jsx)(j,{}):(0,i.jsx)(v,{}),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},children:[!!p&&!t&&(0,i.jsx)(d.A,{value:[],children:p}),b?r&&r.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value)):r&&r.map(e=>(0,i.jsxs)(d.A,{value:e.value,children:[t&&(0,i.jsx)(a.A,{color:"primary",checked:T.includes(e.value)||!1,className:E.checkbox}),e.label]},e.value))]})]})})}},12714:function(e,t,r){"use strict";r.d(t,{Ek:()=>y,Xs:()=>f,c_:()=>x,ly:()=>m,z3:()=>g});var i=r(31085),n=r(58837),a=r(72501),s=r(7707),o=r(35726),l=r(9181),c=r(53373),d=r.n(c);let u=({className:e,dataTestId:t})=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:e,"data-testid":t,children:(0,i.jsx)("path",{d:"M280-420q25 0 42.5-17.5T340-480q0-25-17.5-42.5T280-540q-25 0-42.5 17.5T220-480q0 25 17.5 42.5T280-420Zm200 0q25 0 42.5-17.5T540-480q0-25-17.5-42.5T480-540q-25 0-42.5 17.5T420-480q0 25 17.5 42.5T480-420Zm200 0q25 0 42.5-17.5T740-480q0-25-17.5-42.5T680-540q-25 0-42.5 17.5T620-480q0 25 17.5 42.5T680-420ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})}),p=({className:e,dataTestId:t})=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:e,"data-testid":t,children:(0,i.jsx)("path",{d:"M140-440q-25 0-42.5-17.5T80-500q0-25 17.5-42.5T140-560h240q25 0 42.5 17.5T440-500q0 25-17.5 42.5T380-440H140Zm440 0q-25 0-42.5-17.5T520-500q0-25 17.5-42.5T580-560h240q25 0 42.5 17.5T880-500q0 25-17.5 42.5T820-440H580Z"})}),h=(0,n.A)(e=>({status:{fontWeight:e.typography.fontWeightMedium,alignItems:"baseline",display:"flex"},statusIcon:{flexShrink:0,position:"relative",top:"0.125em",marginRight:e.spacing(1)},statusIconSize:{width:"0.8em",height:"0.8em"},statusIconSizeForImg:{width:"1.2em",height:"1.2em"},ok:{fill:e.palette.status.ok||"#3E8635"},warning:{fill:e.palette.status.warning||"#F0AB00"},error:{fill:e.palette.status.error||"#C9190B"},pending:{fill:e.palette.status.aborted||"#6A6E73"},running:{fill:e.palette.status.aborted||"#6A6E73"},aborted:{fill:e.palette.status.aborted||"#6A6E73"}}),{name:"BackstageStatus"});function g(e){let{children:t,...r}=e,n=h(r);return(0,i.jsxs)(a.A,{component:"span",className:d()(n.status),"aria-label":"Status ok","aria-hidden":"true",...r,children:[(0,i.jsx)(s.default,{"data-testid":"status-ok",className:d()(n.ok,n.statusIconSize,n.statusIcon)}),t]})}function m(e){let{children:t,...r}=e,n=h(r);return(0,i.jsxs)(a.A,{component:"span",className:d()(n.status),"aria-label":"Status warning","aria-hidden":"true",...r,children:[(0,i.jsx)(o.default,{"data-testid":"status-warning",className:d()(n.warning,n.statusIconSize,n.statusIcon)}),t]})}function f(e){let{children:t,...r}=e,n=h(r);return(0,i.jsxs)(a.A,{component:"span",className:d()(n.status),"aria-label":"Status error","aria-hidden":"true",...r,children:[(0,i.jsx)(l.default,{"data-testid":"status-error",className:d()(n.error,n.statusIconSize,n.statusIcon)}),t]})}function y(e){let{children:t,...r}=e,n=h(r);return(0,i.jsxs)(a.A,{component:"span",className:d()(n.status),"aria-label":"Status pending","aria-hidden":"true",...r,children:[(0,i.jsx)(u,{dataTestId:"status-pending",className:d()(n.pending,n.statusIconSizeForImg,n.statusIcon)}),t]})}function x(e){let{children:t,...r}=e,n=h(r);return(0,i.jsxs)(a.A,{component:"span",className:d()(n.status),"aria-label":"Status aborted","aria-hidden":"true",...r,children:[(0,i.jsx)(p,{dataTestId:"status-aborted",className:d()(n.aborted,n.statusIcon,n.statusIconSizeForImg)}),t]})}},92881:function(e,t,r){"use strict";r.d(t,{t:()=>$});var i=r(31085),n=r(14041),a=r(95479),s=r.n(a),o=r(72501),l=r(58007),c=r(8109),d=r(99703),u=r(7031),p=r(61009),h=r(13677),g=r(54801),m=r(9719);let f=(0,u.A)(e=>(0,d.A)({root:{fontWeight:e.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:e.spacing(4),border:"0",verticalAlign:"top"}}),{name:"BackstageMetadataTableTitleCell"})(g.A),y=(0,u.A)({root:{border:"0",verticalAlign:"top"}},{name:"BackstageMetadataTableCell"})(g.A),x=({dense:e,children:t})=>(0,i.jsx)(p.A,{size:e?"small":"medium",children:(0,i.jsx)(h.A,{children:t})}),b=({title:e,children:t,...r})=>(0,i.jsxs)(m.A,{children:[e&&(0,i.jsx)(f,{children:e}),(0,i.jsx)(y,{colSpan:e?1:2,...r,children:t})]}),v=(0,u.A)(e=>(0,d.A)({root:{margin:e.spacing(0,0,-1,0)}}),{name:"BackstageMetadataTableList"})(({classes:e,children:t})=>(0,i.jsx)(l.A,{disablePadding:!0,className:e.root,children:t})),w=(0,u.A)(e=>(0,d.A)({root:{padding:e.spacing(0,0,1,0)},random:{}}),{name:"BackstageMetadataTableListItem"})(({classes:e,children:t})=>(0,i.jsx)(c.A,{className:e.root,children:t}));var j=r(62112),A=r(9911);let k=(0,d.A)({root:{margin:"0 0",listStyleType:"none"}}),S=(0,u.A)(k,{name:"BackstageStructuredMetadataTableList"})(({classes:e,children:t})=>(0,i.jsx)(v,{classes:e,children:t})),C=(0,u.A)(e=>(0,d.A)({root:{...k.root,paddingLeft:e.spacing(1)}}),{name:"BackstageStructuredMetadataTableNestedList"})(({classes:e,children:t})=>(0,i.jsx)(v,{classes:e,children:t})),E=({value:e,options:t})=>(0,i.jsx)(n.Fragment,{children:function e(t,r,a){if((0,n.isValidElement)(t))return(0,i.jsx)(n.Fragment,{children:t});if(null!==t&&"object"==typeof t){if(r.nestedValuesAsYaml)return(0,i.jsx)(j.z,{language:"yaml",text:A.Ay.dump(t),customStyle:{background:"transparent",lineHeight:"1.4",padding:"0",margin:0}});if(!Array.isArray(t)){let n;return n=Object.keys(t).map(n=>{let a=e(t[n],r,!0);return(0,i.jsxs)(w,{children:[(0,i.jsx)(o.A,{variant:"body2",component:"span",children:`${r.titleFormat(n)}: `}),a]},n)}),a?(0,i.jsx)(C,{children:n}):(0,i.jsx)(S,{children:n})}}if(Array.isArray(t)){let n;return n=t.map((t,n)=>(0,i.jsx)(w,{children:e(t,r,a)},n)),a?(0,i.jsx)(C,{children:n}):(0,i.jsx)(S,{children:n})}return"boolean"==typeof t?(0,i.jsx)(n.Fragment,{children:t?"":""}):(0,i.jsx)(o.A,{variant:"body2",component:"span",children:t})}(e,t,!1)}),T=({title:e,value:t,options:r})=>(0,i.jsx)(b,{title:r.titleFormat(e),children:(0,i.jsx)(E,{value:t,options:r})});function $(e){var t;let{metadata:r,dense:n=!0,options:a}=e,o=(t={titleFormat:s(),nestedValuesAsYaml:a?.nestedValuesAsYaml??!1,...a},Object.keys(r).map(e=>(0,i.jsx)(T,{title:e,value:r[e],options:t},e)));return(0,i.jsx)(x,{dense:n,children:o})}},62905:function(e,t,r){"use strict";r.d(t,{k:()=>u});var i=r(31085),n=r(14041),a=r(93285),s=r(18690),o=r(21613),l=r(16454),c=r(44390),d=r(75202);function u(e){let{routes:t}=e,{index:r,route:u,element:p}=function(e){let t=(0,s.g)(),r=e.map(({path:e,children:t})=>({caseSensitive:!1,path:`${e}/*`,element:t})).sort((e,t)=>t.path.replace(/\/\*$/,"").localeCompare(e.path.replace(/\/\*$/,""))),i=(0,s.Ye)(r)??e[0]?.children,n=t["*"]??"";n.startsWith("/")||(n=`/${n}`);let[a]=(0,o.ue)(r,n)??[],l=a?e.findIndex(e=>`${e.path}/*`===a.route.path):0;return{index:-1===l?0:l,element:i,route:e[l]??e[0]}}(t),h=(0,n.useMemo)(()=>t.map(e=>{let{path:t,title:r,tabProps:i}=e,n=t;return n=(n=n.replace(/\/\*$/,"")).replace(/^\//,""),{id:t,label:r,tabProps:{component:d.N_,to:n,...i}}}),[t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.o,{tabs:h,selectedIndex:r}),(0,i.jsxs)(l.U,{children:[(0,i.jsx)(a.m,{title:u?.title}),p]})]})}},49907:function(e,t,r){"use strict";r.d(t,{m:()=>s});var i=r(31085),n=r(77125);let a=(0,r(58837).A)(e=>({value:{marginBottom:e.spacing(.75)},subvalue:{color:e.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function s(e){let{value:t,subvalue:r}=e,s=a();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.A,{className:s.value,children:t}),(0,i.jsx)(n.A,{className:s.subvalue,children:r})]})}},3571:function(e,t,r){"use strict";r.d(t,{X:()=>H});var i=r(31085),n=r(10265),a=r(25301),s=r(77125),o=r(29365),l=r(7031),c=r(58837),d=r(54917),u=r(72501),p=r(83313),h=r(89019),g=r(62461),m=r(68887),f=r(63798),y=r(64704),x=r(6774),b=r(75625),v=r(65859),w=r(45917),j=r(5416),A=r(33494),k=r(80113),S=r(26229),C=r(46802),E=r(45250),T=r(14041),$=r(89475),R=r(64947),I=r(79089);let P=(0,c.A)(e=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:e.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:e.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${e.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:e.spacing(2)}}}),{name:"BackstageTableFilters"}),O=e=>{let t=P(),{onChangeFilters:r}=e,{t:a}=(0,n.i)($.O),[o,l]=(0,T.useState)({...e.selectedFilters}),[c,d]=(0,T.useState)(!1);return(0,T.useEffect)(()=>{r(o)},[o,r]),(0,i.jsxs)(s.A,{className:t.root,children:[(0,i.jsxs)(s.A,{className:t.header,children:[(0,i.jsx)(s.A,{className:t.value,children:a("table.filter.title")}),(0,i.jsx)(R.A,{color:"primary",onClick:()=>{l({}),d(e=>!e)},children:a("table.filter.clearAll")})]}),(0,i.jsx)(s.A,{className:t.filters,children:e.filters?.length&&e.filters.map(e=>(0,i.jsx)(I.w,{triggerReset:c,...e.element,selected:o[e.element.label],onChange:t=>l({...o,[e.element.label]:t})},e.element.label))})]})};var N=r(78467);function B(e){return(0,i.jsx)("tbody",{"data-testid":"loading-indicator",children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:e.colSpan,children:(0,i.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"},children:(0,i.jsx)(N.A,{size:"5rem"})})})})})}let U={Add:(0,T.forwardRef)((e,t)=>(0,i.jsx)(p.default,{...e,ref:t})),Check:(0,T.forwardRef)((e,t)=>(0,i.jsx)(g.default,{...e,ref:t})),Clear:(0,T.forwardRef)((e,t)=>(0,i.jsx)(y.default,{...e,ref:t})),Delete:(0,T.forwardRef)((e,t)=>(0,i.jsx)(x.default,{...e,ref:t})),DetailPanel:(0,T.forwardRef)((e,t)=>(0,i.jsx)(f.default,{...e,ref:t})),Edit:(0,T.forwardRef)((e,t)=>(0,i.jsx)(b.default,{...e,ref:t})),Export:(0,T.forwardRef)((e,t)=>(0,i.jsx)(S.default,{...e,ref:t})),Filter:(0,T.forwardRef)((e,t)=>(0,i.jsx)(v.default,{...e,ref:t})),FirstPage:(0,T.forwardRef)((e,t)=>(0,i.jsx)(j.default,{...e,ref:t})),LastPage:(0,T.forwardRef)((e,t)=>(0,i.jsx)(A.default,{...e,ref:t})),NextPage:(0,T.forwardRef)((e,t)=>(0,i.jsx)(f.default,{...e,ref:t})),PreviousPage:(0,T.forwardRef)((e,t)=>(0,i.jsx)(m.default,{...e,ref:t})),ResetSearch:(0,T.forwardRef)((e,t)=>(0,i.jsx)(y.default,{...e,ref:t})),Search:(0,T.forwardRef)((e,t)=>(0,i.jsx)(w.default,{...e,ref:t})),SortArrow:(0,T.forwardRef)((e,t)=>(0,i.jsx)(h.default,{...e,ref:t})),ThirdStateCheck:(0,T.forwardRef)((e,t)=>(0,i.jsx)(k.default,{...e,ref:t})),ViewColumn:(0,T.forwardRef)((e,t)=>(0,i.jsx)(C.default,{...e,ref:t}))};function L(e,t){let r=t.split("."),i=e[r[0]];for(let e=1;e<r.length&&void 0!==i;++e)i=i[r[e]];return i}let F=(0,l.A)(e=>({header:{padding:e.spacing(1,2,1,2.5),borderTop:`1px solid ${e.palette.grey.A100}`,borderBottom:`1px solid ${e.palette.grey.A100}`,fontWeight:e.typography.fontWeightBold,position:"static",wordBreak:"normal",textTransform:"uppercase"}}),{name:"BackstageTableHeader"})(a.MTableHeader),z=(0,l.A)(e=>({root:{padding:e.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:e.typography.fontWeightBold}},searchField:{paddingRight:e.spacing(2)}}),{name:"BackstageTableToolbar"})(a.MTableToolbar),M=(0,c.A)(e=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:e.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),D=(0,c.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"}),q={search:"",filtersOpen:!1,filters:{}};function W(e){let{toolbarRef:t,setSearch:r,hasFilters:a,selectedFiltersLength:l,toggleFilters:c}=e,{t:d}=(0,n.i)($.O),p=M(),h=(0,T.useCallback)(t=>{e.onSearchChanged(t),r(t)},[e,r]);return a?(0,i.jsxs)(s.A,{className:p.root,children:[(0,i.jsxs)(s.A,{className:p.root,children:[(0,i.jsx)(o.A,{onClick:c,"aria-label":"filter list",children:(0,i.jsx)(v.default,{})}),(0,i.jsxs)(u.A,{className:p.title,children:[d("table.filter.title")," (",l,")"]})]}),(0,i.jsx)(z,{...e,ref:t,onSearchChanged:h})]}):(0,i.jsx)(z,{...e,ref:t,onSearchChanged:h})}function H(e){var t,r,o,l;let{data:c,columns:p,emptyContent:h,options:g,title:m,subtitle:f,localization:y,filters:x,initialState:b,onStateChange:v,components:w,isLoading:j,style:A,...k}=e,{t:S}=(0,n.i)($.O),C=D(),R=(0,d.A)(),I={...q,...b},[P,N]=(0,T.useState)(I.filtersOpen),z=(0,T.useCallback)(()=>N(e=>!e),[N]),[M,H]=(0,T.useState)(I.filters),[_,G]=(0,T.useState)(I.search);(0,T.useEffect)(()=>{if(v){var e;v((e={search:_,filtersOpen:P,filters:M},(0,E.transform)(e,(e,t,r)=>{(0,E.isEqual)(t,q[r])||(e[r]=t)})))}},[_,P,M,v]);let K=(0,T.useCallback)(e=>p.find(t=>t.title===e)?.field,[p]),V=(0,T.useMemo)(()=>{if("function"==typeof c||!M)return c;let e=Object.values(M);return c&&e.flat().length?c.filter(e=>!!Object.entries(M).filter(([,e])=>!!e.length).every(([t,r])=>{let i=L(e,K(t));return Array.isArray(i)&&Array.isArray(r)?i.some(e=>r.includes(e)):Array.isArray(i)?i.includes(r):Array.isArray(r)?r.includes(i):i===r})):c},[c,M,K]),Y=Object.values(M).flat().length,J=!!x?.length,Q=(0,T.useCallback)(e=>(0,i.jsx)(W,{setSearch:G,hasFilters:J,selectedFiltersLength:Y,toggleFilters:z,...e}),[z,J,Y,G]),Z="function"!=typeof c&&0===c.length,X=p.length,ee=(0,T.useMemo)(()=>(function({columnCount:e,emptyContent:t,hasNoRows:r,loading:n}){return s=>n?(0,i.jsx)(B,{colSpan:e}):t&&r?(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:e,children:t})})}):(0,i.jsx)(a.MTableBody,{...s})})({hasNoRows:Z,emptyContent:h,columnCount:X,loading:j}),[Z,h,X,j]);return(0,i.jsxs)(s.A,{className:C.root,children:[P&&c&&"function"!=typeof c&&x?.length&&(0,i.jsx)(O,{filters:(t=x,r=c,o=p,l=S,t.map(e=>{var t;let i,n;return{type:e.type,element:{placeholder:l("table.filter.placeholder"),label:e.column,multiple:"multiple-select"===e.type,items:[...(t=e.column,i=new Set,n=e=>{null!=e&&i.add(e)},r&&r.forEach(e=>{let r=L(e,o.find(e=>e.title===t)?.field);Array.isArray(r)?r.forEach(n):n(r)}),i)].sort().map(e=>({label:e,value:e}))}}})),selectedFilters:M,onChangeFilters:H}),(0,i.jsx)(a.default,{components:{Header:F,Body:ee,Toolbar:Q,...w},options:g,columns:p.map(e=>{let t=e.headerStyle??{},r=e.cellStyle||{};if(e.highlight)if(t.color=R.palette.textContrast,"object"==typeof r)r.fontWeight=R.typography.fontWeightBold;else{let e=r;r=(t,r,i)=>({...e(t,r,i),fontWeight:R.typography.fontWeightBold})}return{...e,headerStyle:t,cellStyle:r}}),icons:U,title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{variant:"h5",component:"h2",children:m}),f&&(0,i.jsx)(u.A,{color:"textSecondary",variant:"body1",children:f})]}),data:V,style:{width:"100%",...A},localization:{...y,body:{emptyDataSourceMessage:S("table.body.emptyDataSourceMessage"),...y?.body},pagination:{firstTooltip:S("table.pagination.firstTooltip"),labelDisplayedRows:S("table.pagination.labelDisplayedRows"),labelRowsSelect:S("table.pagination.labelRowsSelect"),lastTooltip:S("table.pagination.lastTooltip"),nextTooltip:S("table.pagination.nextTooltip"),previousTooltip:S("table.pagination.previousTooltip"),...y?.pagination},header:{actions:S("table.header.actions"),...y?.header},toolbar:{searchPlaceholder:S("table.toolbar.search"),searchTooltip:S("table.toolbar.search"),...y?.toolbar}},...k})]})}H.icons=Object.freeze(U)},99338:function(e,t,r){"use strict";r.d(t,{B:()=>v});var i=r(31085),n=r(268),a=r(58837),s=r(8973),o=r(29655),l=r(91567),c=r(42899),d=r(72501),u=r(9181),p=r(6924),h=r(28364);let g=(e,t)=>("light"===t.palette.type?n.e$:n.a)(t.palette[e].light,.6),m=(e,t)=>("light"===t.palette.type?n.a:n.e$)(t.palette[e].light,.9),f=(0,a.A)(e=>({root:{marginRight:e.spacing(1),fill:({severity:t})=>g(t,e)}})),y=({severity:e})=>{let t=f({severity:e});return(0,i.jsx)(u.default,{classes:t})},x=({severity:e})=>{let t=f({severity:e});return(0,i.jsx)(p.default,{classes:t})},b=(0,a.A)(e=>({panel:{backgroundColor:({severity:t})=>m(t,e),color:({severity:t})=>g(t,e),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:t})=>g(t,e),fontWeight:e.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:t})=>g(t,e),backgroundColor:({severity:t})=>m(t,e)},details:{width:"100%",display:"block",color:e.palette.textContrast,backgroundColor:e.palette.background.default,border:`1px solid ${e.palette.border}`,padding:e.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"});function v(e){let{severity:t="warning",title:r,titleFormat:n,message:a,children:u,defaultExpanded:p}=e,g=b({severity:t}),m=t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1)+(r?`: ${r}`:"");return(0,i.jsxs)(s.A,{defaultExpanded:p??!1,className:g.panel,role:"alert",children:[(0,i.jsxs)(o.A,{expandIcon:(0,i.jsx)(x,{severity:t}),className:g.summary,children:[(0,i.jsx)(y,{severity:t}),(0,i.jsx)(d.A,{className:g.summaryText,variant:"subtitle1",children:"markdown"===n?(0,i.jsx)(h.h,{content:m,className:g.markdownContent}):m})]}),(a||u)&&(0,i.jsx)(l.A,{children:(0,i.jsxs)(c.A,{container:!0,children:[a&&(0,i.jsx)(c.A,{item:!0,xs:12,children:(0,i.jsx)(d.A,{className:g.message,variant:"body1",children:a})}),u&&(0,i.jsx)(c.A,{item:!0,xs:12,className:g.details,children:u})]})})]})}},70209:function(e,t,r){"use strict";r.d(t,{l:()=>o});var i=r(18139),n=r(54195),a=r(89475),s=r(10265);function o(){let e=(0,i.Q2)().get(n.U),t=e?.getOptionalConfig("app.support"),r=(()=>{let{t:e}=(0,s.i)(a.O);return{url:"https://github.com/backstage/backstage/issues",items:[{title:e("supportConfig.default.title"),icon:"warning",links:[{title:e("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}})();return t?{url:t.getString("url"),items:t.getConfigArray("items").flatMap(e=>({title:e.getString("title"),icon:e.getOptionalString("icon"),links:(e.getOptionalConfigArray("links")??[]).flatMap(e=>({url:e.getString("url"),title:e.getOptionalString("title")??""}))}))}:r}},92483:function(e,t,r){"use strict";r.d(t,{Gg:()=>p,Hk:()=>c,KG:()=>h,NT:()=>d,Vf:()=>l,fX:()=>o,ny:()=>u,z9:()=>s});var i=r(31085),n=r(95208),a=r(27799);function s(e){let{id:t,Fallback:r=a.default,...s}=e,o=(0,n.n)().getSystemIcon(t)??r;return(0,i.jsx)(o,{...s})}function o(e){return(0,i.jsx)(s,{id:"catalog",...e})}function l(e){return(0,i.jsx)(s,{id:"docs",...e})}function c(e){return(0,i.jsx)(s,{id:"github",...e})}function d(e){return(0,i.jsx)(s,{id:"help",...e})}function u(e){return(0,i.jsx)(s,{id:"user",...e})}function p(e){return(0,i.jsx)(s,{id:"star",...e})}function h(e){return(0,i.jsx)(s,{id:"unstarred",...e})}},25646:function(e,t,r){"use strict";r.d(t,{O:()=>u});var i=r(31085),n=r(77125),a=r(37197),s=r(58837),o=r(72501),l=r(52235),c=r(75202);let d=(0,s.A)(e=>({root:{maxWidth:"fit-content",padding:e.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:e.palette.textSubtle},arrow:{color:e.palette.textSubtle}}),{name:"BackstageBottomLink"});function u(e){let{link:t,title:r,onClick:s}=e,u=d();return(0,i.jsxs)(n.A,{children:[(0,i.jsx)(a.A,{}),(0,i.jsx)(c.N_,{to:t,onClick:s,underline:"none",children:(0,i.jsxs)(n.A,{display:"flex",alignItems:"center",className:u.root,children:[(0,i.jsx)(n.A,{className:u.boxTitle,fontWeight:"fontWeightBold",m:1,children:(0,i.jsx)(o.A,{children:(0,i.jsx)("strong",{children:r})})}),(0,i.jsx)(l.default,{className:u.arrow})]})})]})}},14150:function(e,t,r){"use strict";r.d(t,{B:()=>m});var i=r(31085),n=r(77125),a=r(38311),s=r(58007),o=r(8109),l=r(55197),c=r(7031),d=r(72501),u=r(14041);let p=(0,c.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(d.A),h=(0,c.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(n.A),g=(0,c.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(n.A);function m(e){let{children:t,...r}=e,[n,c]=(0,u.useState)(null),d=u.Children.toArray(t),[m,f,...y]=d,x=y.length?y.pop():d[d.length-1],b=d.length>3;return(0,i.jsxs)(u.Fragment,{children:[(0,i.jsxs)(a.A,{"aria-label":"breadcrumb",...r,children:[d.length>1&&(0,i.jsx)(h,{clone:!0,children:m}),d.length>2&&(0,i.jsx)(h,{clone:!0,children:f}),b&&(0,i.jsx)(p,{onClick:e=>{c(e.currentTarget)},children:"..."}),(0,i.jsx)(g,{children:x})]}),(0,i.jsx)(l.Ay,{open:!!n,anchorEl:n,onClose:()=>{c(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,i.jsx)(s.A,{children:y.map((e,t)=>(0,i.jsx)(o.A,{button:!0,children:(0,i.jsx)(h,{clone:!0,children:e})},t))})})]})}},16454:function(e,t,r){"use strict";r.d(t,{U:()=>l});var i=r(31085),n=r(58837),a=r(53373),s=r.n(a);let o=(0,n.A)(e=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:e.spacing(3),paddingBottom:e.spacing(3),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function l(e){let{className:t,stretch:r,noPadding:n,children:a,...l}=e,c=o();return(0,i.jsx)("article",{...l,className:s()(c.root,t,{[c.stretch]:r,[c.noPadding]:n}),children:a})}},17138:function(e,t,r){"use strict";r.d(t,{d:()=>d});var i=r(31085),n=r(77125),a=r(58837),s=r(72501),o=r(93285);let l=({title:e,className:t})=>(0,i.jsx)(s.A,{variant:"h4",component:"h2",className:t,"data-testid":"header-title",children:e}),c=({description:e,className:t})=>e?(0,i.jsx)(s.A,{variant:"body2",className:t,"data-testid":"header-description",children:e}):null;function d(e){let t,{description:r,title:s,titleComponent:d,children:u,descriptionComponent:p,textAlign:h="left"}=e,g=(t={textAlign:h},(0,a.A)(e=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:e.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:e.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}))(),m=d||(0,i.jsx)(l,{title:s,className:g.title}),f=p||(0,i.jsx)(c,{description:r,className:g.description});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.m,{title:s}),(0,i.jsxs)(n.A,{className:g.container,children:[(0,i.jsxs)(n.A,{className:g.leftItemsBox,children:[m,f]}),(0,i.jsx)(n.A,{className:g.rightItemsBox,children:u})]})]})}},66670:function(e,t,r){"use strict";r.d(t,{t:()=>u});var i=r(31085),n=r(72501),a=r(14041),s=r(87318),o=r(12554),l=r(89475),c=r(10265);let d=e=>{let{slackChannel:t}=e,{t:r}=(0,c.i)(l.O);return t?"string"==typeof t?(0,i.jsx)(n.A,{children:r("errorBoundary.title",{slackChannel:t})}):t.href?(0,i.jsx)(s.z,{to:t.href,variant:"contained",children:t.name}):(0,i.jsx)(n.A,{children:r("errorBoundary.title",{slackChannel:t.name})}):null},u=class extends a.Component{constructor(e){super(e),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(e,t){console.error(`ErrorBoundary, error: ${e}`,{error:e,errorInfo:t}),this.setState({error:e,errorInfo:t})}render(){let{slackChannel:e,children:t}=this.props,{error:r}=this.state;return r?(0,i.jsx)(o.b,{title:"Something Went Wrong",error:r,children:(0,i.jsx)(d,{slackChannel:e})}):t}}},90299:function(e,t,r){"use strict";r.d(t,{M:()=>v});var i=r(31085),n=r(42899),a=r(58837),s=r(72501),o=r(18690),l=r(75202);r(45250);var c=r(14041),d=r(70209);let u=r.p+"static/mic-drop.f832115f.svg",p=(0,a.A)(e=>({micDrop:{maxWidth:"60%",bottom:e.spacing(2),right:e.spacing(2),[e.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:e.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),h=()=>{let e=p();return(0,i.jsx)("img",{src:u,className:e.micDrop,alt:"Girl dropping mic from her hands"})};var g=r(10265),m=r(89475);r(18846);var f=r(62112);r(58695),r(93285),r(16975);let y=(0,a.A)(e=>({title:{paddingBottom:e.spacing(5),[e.breakpoints.down("xs")]:{paddingBottom:e.spacing(4),fontSize:e.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function x(e){let{stack:t}=e,r=y(),{t:n}=(0,g.i)(m.O),[a,o]=(0,c.useState)(!1);return a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.A,{variant:"h6",className:r.title,children:(0,i.jsx)(l.N_,{to:"#",onClick:()=>o(!1),children:n("errorPage.showLessDetails")})}),(0,i.jsx)(f.z,{text:t,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})]}):(0,i.jsx)(s.A,{variant:"h6",className:r.title,children:(0,i.jsx)(l.N_,{to:"#",onClick:()=>o(!0),children:n("errorPage.showMoreDetails")})})}let b=(0,a.A)(e=>({container:{padding:e.spacing(8),[e.breakpoints.down("xs")]:{padding:e.spacing(2)}},title:{paddingBottom:e.spacing(5),[e.breakpoints.down("xs")]:{paddingBottom:e.spacing(4),fontSize:e.typography.h3.fontSize}},subtitle:{color:e.palette.textSubtle}}),{name:"BackstageErrorPage"});function v(e){let{status:t="",statusMessage:r,additionalInfo:a,supportUrl:c,stack:u}=e,p=b(),f=(0,o.Zp)(),y=(0,d.l)(),{t:v}=(0,g.i)(m.O);return(0,i.jsxs)(n.A,{container:!0,className:p.container,children:[(0,i.jsxs)(n.A,{item:!0,xs:12,sm:8,md:4,children:[(0,i.jsx)(s.A,{"data-testid":"error",variant:"body1",className:p.subtitle,children:v("errorPage.subtitle",{status:t,statusMessage:r})}),(0,i.jsx)(s.A,{variant:"body1",className:p.subtitle,children:a}),(0,i.jsx)(s.A,{variant:"h2",className:p.title,children:v("errorPage.title")}),(0,i.jsxs)(s.A,{variant:"h6",className:p.title,children:[(0,i.jsx)(l.N_,{to:"#","data-testid":"go-back-link",onClick:()=>f(-1),children:v("errorPage.goBack")}),"... or please"," ",(0,i.jsx)(l.N_,{to:c||y.url,children:"contact support"})," if you think this is a bug."]}),u&&(0,i.jsx)(x,{stack:u})]}),(0,i.jsx)(h,{})]})}},79182:function(e,t,r){"use strict";r.d(t,{Y:()=>b});var i=r(31085),n=r(18139),a=r(54195),s=r(77125),o=r(42899),l=r(58837),c=r(71677),d=r(72501),u=r(93285),p=r(75202),h=r(14150),g=r(7467);let m=(0,l.A)(e=>({header:{gridArea:"pageHeader",padding:e.spacing(3),width:"100%",boxShadow:e.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:e.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[e.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:e.page.fontColor,wordBreak:"break-word",fontSize:e.typography.h3.fontSize,marginBottom:0},subtitle:{color:e.page.fontColor,opacity:.8,display:"inline-block",marginTop:e.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:e.spacing(1),color:e.page.fontColor},breadcrumb:{color:e.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-e.spacing(.3),marginBottom:e.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-e.spacing(.3),marginBottom:e.spacing(.3)}}),{name:"BackstageHeader"}),f=({type:e,typeLink:t,classes:r,pageTitle:n})=>e?t?(0,i.jsxs)(h.B,{className:r.breadcrumb,children:[(0,i.jsx)(p.N_,{to:t,children:e}),(0,i.jsx)(d.A,{children:n})]}):(0,i.jsx)(d.A,{className:r.type,children:e}):null,y=({pageTitle:e,classes:t,tooltip:r})=>{let{contentRef:n}=(0,g.H)(),a=(0,i.jsx)(d.A,{ref:n,tabIndex:-1,className:t.title,variant:"h1",children:e});return r?(0,i.jsx)(c.Ay,{title:r,placement:"top-start",children:a}):a},x=({classes:e,subtitle:t})=>t?"string"!=typeof t?(0,i.jsx)(i.Fragment,{children:t}):(0,i.jsx)(d.A,{className:e.subtitle,variant:"subtitle2",component:"span",children:t}):null;function b(e){let{children:t,pageTitleOverride:r,style:l,subtitle:c,title:d,tooltip:p,type:h,typeLink:g}=e,b=m(),v=(0,n.gf)(a.U).getOptionalString("app.title")||"Backstage",w=r||d,j=d||r,A=`${w} | %s | ${v}`,k=`${w} | ${v}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.m,{titleTemplate:A,defaultTitle:k}),(0,i.jsxs)("header",{style:l,className:b.header,children:[(0,i.jsxs)(s.A,{className:b.leftItemsBox,children:[(0,i.jsx)(f,{classes:b,type:h,typeLink:g,pageTitle:j}),(0,i.jsx)(y,{classes:b,pageTitle:j,tooltip:p}),(0,i.jsx)(x,{classes:b,subtitle:c})]}),(0,i.jsx)(o.A,{container:!0,className:b.rightItemsBox,spacing:4,children:t})]})]})}},64398:function(e,t,r){"use strict";r.d(t,{S:()=>u});var i=r(31085),n=r(42899),a=r(58837),s=r(268),o=r(72501),l=r(75202);let c=(0,a.A)(e=>({root:{textAlign:"left"},label:{color:e.page.fontColor,fontWeight:e.typography.fontWeightBold,letterSpacing:0,fontSize:e.typography.fontSize,marginBottom:e.spacing(1)/2,lineHeight:1},value:{color:(0,s.X4)(e.page.fontColor,.8),fontSize:e.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),d=({value:e,className:t,typographyRootComponent:r})=>(0,i.jsx)(o.A,{component:r??("string"==typeof e?"p":"span"),className:t,children:e});function u(e){let{label:t,value:r,url:a,contentTypograpyRootComponent:s}=e,u=c(),p=(0,i.jsx)(d,{className:u.value,value:r||"<Unknown>",typographyRootComponent:s});return(0,i.jsx)(n.A,{item:!0,children:(0,i.jsxs)(o.A,{component:"span",className:u.root,children:[(0,i.jsx)(o.A,{className:u.label,children:t}),a?(0,i.jsx)(l.N_,{to:a,children:p}):p]})})}},44390:function(e,t,r){"use strict";r.d(t,{o:()=>d});var i=r(31085),n=r(77125),a=r(58837),s=r(38605),o=r(74953),l=r(14041);let c=(0,a.A)(e=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:e.palette.background.paper,paddingLeft:e.spacing(3),minWidth:0},defaultTab:{...e.typography.caption,padding:e.spacing(3,3),textTransform:"uppercase",fontWeight:e.typography.fontWeightBold,color:e.palette.text.secondary},selected:{color:e.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:e.palette.background.default,color:e.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function d(e){let{tabs:t,onChange:r,selectedIndex:a}=e,[d,u]=(0,l.useState)(a??0),p=c(),h=(0,l.useCallback)((e,t)=>{void 0===a&&u(t),r&&r(t)},[a,r]);return(0,l.useEffect)(()=>{void 0!==a&&u(a)},[a]),(0,i.jsx)(n.A,{className:p.tabsWrapper,children:(0,i.jsx)(o.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:h,value:d,children:t.map((e,t)=>(0,i.jsx)(s.A,{"data-testid":`header-tab-${t}`,label:e.label,value:t,className:p.defaultTab,classes:{selected:p.selected,root:p.tabRoot},...e.tabProps},e.id))})})}},21332:function(e,t,r){"use strict";r.d(t,{n:()=>b});var i=r(31085),n=r(40703),a=r(59469),s=r(48653),o=r(45685),l=r(37197),c=r(58837),d=r(7031),u=r(53373),p=r.n(u),h=r(25646),g=r(66670);let m=(0,c.A)(e=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},contentAlignBottom:{display:"flex",alignItems:"self-end"},header:{padding:e.spacing(2,2,2,2.5)},headerTitle:{fontWeight:e.typography.fontWeightBold},headerSubheader:{paddingTop:e.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),f=(0,d.A)(e=>({root:{display:"inline-block",padding:e.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(a.A),y={flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},x={fullHeight:{flex:1},gridItem:{flex:1}};function b(e){let{title:t,subheader:r,divider:c=!0,deepLink:d,slackChannel:u,errorBoundaryProps:b,variant:v,alignContent:w="normal",children:j,headerStyle:A,headerProps:k,icon:S,action:C,actionsClassName:E,actions:T,cardClassName:$,actionsTopRight:R,className:I,noPadding:P,titleTypographyProps:O,subheaderTypographyProps:N}=e,B=m(),U={},L={};return v&&v.split(/[\s]+/g).forEach(e=>{U={...U,...y[e]},L={...L,...x[e]}}),(0,i.jsx)(n.A,{style:U,className:I,children:(0,i.jsxs)(g.t,{...b||(u?{slackChannel:u}:{}),children:[t&&(0,i.jsx)(o.A,{classes:{root:p()(B.header),title:B.headerTitle,subheader:B.headerSubheader,avatar:B.headerAvatar,action:B.headerAction,content:B.headerContent},title:t,subheader:r||S?(0,i.jsxs)("div",{"data-testid":"info-card-subheader",children:[r&&(0,i.jsx)("div",{className:B.subheader,children:r}),S]}):null,action:C,style:{...A},titleTypographyProps:O,subheaderTypographyProps:N,...k}),R&&(0,i.jsx)(f,{children:R}),c&&(0,i.jsx)(l.A,{}),(0,i.jsx)(s.A,{className:p()($,{[B.noPadding]:P,[B.contentAlignBottom]:"bottom"===w}),style:L,children:j}),T&&(0,i.jsx)(a.A,{className:E,children:T}),d&&(0,i.jsx)(h.O,{...d})]})})}},17174:function(e,t,r){"use strict";r.d(t,{s:()=>o});var i=r(31085),n=r(77125),a=r(99703);let s=(0,r(58837).A)(e=>(0,a.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:e.spacing(2)}}),{name:"BackstageItemCardGrid"});function o(e){let{children:t,...r}=e,a=s(r);return(0,i.jsx)(n.A,{className:a.root,...r,children:t})}},82326:function(e,t,r){"use strict";r.d(t,{Y:()=>c});var i=r(31085),n=r(58837),a=r(50868),s=r(53373),o=r.n(s);let l=(0,n.A)(e=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[e.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function c(e){let{themeId:t,className:r,children:n}=e,s=l();return(0,i.jsx)(a.A,{theme:e=>({...e,page:e.getPageTheme({themeId:t})}),children:(0,i.jsx)("main",{className:o()(s.root,r),children:n})})}},60258:function(e,t,r){"use strict";r.d(t,{B:()=>N});var i=r(31085),n=r(77125),a=r(64947),s=r(58837),o=r(5893),l=r(53373),c=r.n(l),d=r(14041),u=r(31072),p=r(77026),h=r(1125),g=r(29365),m=r(73845),f=r(72501),y=r(32881),x=r(27326),b=r(45250),v=r(18690),w=r(77366),j=r(58269),A=r(88835);let k=(0,s.A)(e=>({root:{position:"fixed",backgroundColor:e.palette.navigation.background,color:e.palette.navigation.color,bottom:0,left:0,right:0,zIndex:e.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:t=>({background:e.palette.navigation.background,width:"100%",bottom:`${t.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${t.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:e.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:e.spacing(2,3)},overlayHeaderClose:{color:e.palette.navigation.color},marginMobileSidebar:e=>({marginBottom:`${e.sidebarConfig.mobileSidebarHeight}px`})})),S=(0,d.createElement)(j.C).type,C=({children:e,label:t="Menu",open:r,onClose:a})=>{let{sidebarConfig:s}=(0,d.useContext)(u.yY),o=k({sidebarConfig:s});return(0,i.jsxs)(m.Ay,{anchor:"bottom",open:r,onClose:a,ModalProps:{BackdropProps:{classes:{root:o.marginMobileSidebar}}},classes:{root:o.marginMobileSidebar,paperAnchorBottom:o.overlay},children:[(0,i.jsxs)(n.A,{className:o.overlayHeader,children:[(0,i.jsx)(f.A,{variant:"h3",children:t}),(0,i.jsx)(g.A,{onClick:a,classes:{root:o.overlayHeaderClose},children:(0,i.jsx)(y.default,{})})]}),(0,i.jsx)(n.A,{component:"nav",children:e})]})},E=e=>{let{sidebarConfig:t}=(0,d.useContext)(u.yY),{children:r}=e,n=k({sidebarConfig:t}),a=(0,v.zy)(),[s,o]=(0,d.useState)(-1);(0,d.useEffect)(()=>{o(-1)},[a.pathname]);let l=(0,p.O)(r,e=>e.getElements().filter(e=>e.type===S));if(!r)return null;if(l.length){let e;e=l,l=(0,b.orderBy)(e,({props:{priority:e}})=>Number.isInteger(e)?e:-1,"desc")}else l.push((0,i.jsx)(j.C,{icon:(0,i.jsx)(x.default,{}),children:r},"default_menu"));let c=s>=0&&!l[s].props.to;return(0,i.jsx)(w.T9,{value:{isOpen:!0,setOpen:()=>{}},children:(0,i.jsxs)(A.k.Provider,{value:{selectedMenuItemIndex:s,setSelectedMenuItemIndex:o},children:[(0,i.jsx)(C,{label:l[s]&&l[s].props.label,open:c,onClose:()=>o(-1),children:l[s]&&l[s].props.children}),(0,i.jsx)(h.A,{className:n.root,"data-testid":"mobile-sidebar-root",component:"nav",children:l})]})})};var T=r(7467),$=r(65901),R=r(10265),I=r(89475);let P=(0,s.A)(e=>({root:{left:0,top:0,bottom:0,zIndex:e.zIndex.appBar,position:"fixed"},drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",left:0,top:0,bottom:0,position:"absolute",background:e.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:e=>({width:e.sidebarConfig.drawerWidthClosed}),drawerOpen:t=>({width:t.sidebarConfig.drawerWidthOpen,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),O=e=>{let{sidebarConfig:t}=(0,d.useContext)(u.yY),{openDelayMs:r=t.defaultOpenDelayMs,closeDelayMs:a=t.defaultCloseDelayMs,disableExpandOnHover:s,children:l}=e,p=P({sidebarConfig:t}),h=(0,o.A)(e=>e.breakpoints.down("md"),{noSsr:!0}),[g,m]=(0,d.useState)(0),f=(0,d.useRef)(),{isPinned:y,toggleSidebarPinState:x}=(0,$.Ut)(),b=()=>{y||s||(f.current&&(clearTimeout(f.current),f.current=void 0),2===g||h||(f.current=window.setTimeout(()=>{f.current=void 0,m(2)},r),m(1)))},v=()=>{y||s||(f.current&&(clearTimeout(f.current),f.current=void 0),1===g?m(0):2===g&&(f.current=window.setTimeout(()=>{f.current=void 0,m(0)},a)))},j=2===g&&!h||y;return(0,i.jsxs)("nav",{style:{},"aria-label":"sidebar nav",children:[(0,i.jsx)(B,{}),(0,i.jsx)(w.T9,{value:{isOpen:j,setOpen:e=>{e?m(2):m(0),x()}},children:(0,i.jsx)(n.A,{className:p.root,"data-testid":"sidebar-root",onMouseEnter:s?()=>{}:b,onFocus:s?()=>{}:b,onMouseLeave:s?()=>{}:v,onBlur:s?()=>{}:v,children:(0,i.jsx)(n.A,{className:c()(p.drawer,p.drawerWidth,{[p.drawerOpen]:j}),children:l})})})]})},N=e=>{let t=(0,u.Rv)(e.sidebarOptions??{}),r=(0,u.i8)(e.submenuOptions??{}),{children:n,disableExpandOnHover:a,openDelayMs:s,closeDelayMs:o}=e,{isMobile:l}=(0,$.Ut)();return l?(0,i.jsx)(E,{children:n}):(0,i.jsx)(u.yY.Provider,{value:{sidebarConfig:t,submenuConfig:r},children:(0,i.jsx)(O,{openDelayMs:s,closeDelayMs:o,disableExpandOnHover:a,children:n})})};function B(){let{sidebarConfig:e}=(0,d.useContext)(u.yY),{focusContent:t,contentRef:r}=(0,T.H)(),n=P({sidebarConfig:e}),{t:s}=(0,R.i)(I.O);return r?.current?(0,i.jsx)(a.A,{onClick:t,variant:"contained",className:c()(n.visuallyHidden),children:s("skipToContent")}):null}},7370:function(e,t,r){"use strict";r.d(t,{Ds:()=>O,Mj:()=>N,tW:()=>B,uk:()=>P});var i=r(31085),n=r(77026),a=r(52262),s=r(94509),o=r(77125),l=r(58837),c=r(60882),d=r(72501),u=r(5893),p=r(79065),h=r(55704),g=r(62248),m=r(53373),f=r.n(m),y=r(14041),x=r(21613),b=r(18690),v=r(73657),w=r(31072),j=r(77366),A=r(76059),k=r(82775),S=r(64947);function C(e){return(0,y.useMemo)(()=>(0,l.A)(t=>({root:{color:t.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:e.drawerWidthClosed,justifyContent:"center"},open:{[t.breakpoints.up("sm")]:{width:e.drawerWidthOpen}},highlightable:{"&:hover":{background:t.palette.navigation.navItem?.hoverBackground??"#404040"}},highlighted:{background:t.palette.navigation.navItem?.hoverBackground??"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:e.iconContainerWidth,marginRight:-t.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:t.typography.fontWeightBold,fontSize:t.typography.fontSize},searchFieldHTMLInput:{padding:t.spacing(2,0,2)},searchContainer:{width:e.drawerWidthOpen-e.iconContainerWidth},secondaryAction:{width:t.spacing(6),textAlign:"center",marginRight:t.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:t.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${e.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,color:t.palette.navigation.selectedColor},"&$closed":{width:e.drawerWidthClosed},"& $closedItemIcon":{paddingRight:e.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-e.selectedIndicatorWidth}}}),{name:"BackstageSidebarItem"}),[e])()}function E(e){return void 0===e.to}let T=(0,y.createElement)(A.O).type,$=(0,y.forwardRef)(function({to:e,end:t,style:r,className:n,activeStyle:a,caseSensitive:s,activeClassName:o="active","aria-current":l="page",...c},d){let{pathname:u}=(0,b.zy)(),{pathname:p}=(0,b.x$)(e);s||(u=u.toLocaleLowerCase("en-US"),p=p.toLocaleLowerCase("en-US"));let h=u===p;h||t||(h=u.startsWith(`${p}/`));let g=h?l:void 0;return(0,i.jsx)(v.N_,{...c,to:e,ref:d,"aria-current":g,style:{...r,...h?a:void 0},className:f()(["function"!=typeof n?n:void 0,h?o:void 0])})}),R=(0,y.forwardRef)((e,t)=>{let{icon:r,text:n,hasNotifications:l=!1,hasSubmenu:c=!1,disableHighlight:u=!1,onClick:p,noTrack:h,children:m,className:x,...v}=e,{sidebarConfig:A}=(0,y.useContext)(w.yY),k=C(A),{isOpen:T}=(0,j.FS)(),R=(0,i.jsxs)(o.A,{style:!T&&c?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},children:[(0,i.jsx)(r,{fontSize:"small"}),!T&&c?(0,i.jsx)(g.default,{fontSize:"small"}):(0,i.jsx)(i.Fragment,{})]}),I=(0,i.jsx)(s.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!l,className:f()({[k.closedItemIcon]:!T}),children:R}),P=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A,{"data-testid":"login-button",className:k.iconContainer,children:I}),n&&(0,i.jsx)(d.A,{variant:"subtitle2",component:"span",className:k.label,children:n}),(0,i.jsx)("div",{className:k.secondaryAction,children:m})]}),O=T?P:I,N={onClick:p,className:f()(x,k.root,T?k.open:k.closed,E(e)&&k.buttonItem,{[k.highlightable]:!u})},B=(0,a.s)(),{pathname:U}=(0,b.x$)(!E(e)&&e.to?e.to:""),L=(0,y.useCallback)(e=>{if(!h){let e=n??"Sidebar Item",t=U?{attributes:{to:U}}:void 0;B.captureEvent("click",e,t)}p?.(e)},[B,n,U,h,p]);return E(e)?(0,i.jsx)(S.A,{role:"button","aria-label":n,...N,ref:t,onClick:L,children:O}):(0,i.jsx)($,{...N,activeClassName:k.selected,to:e.to?e.to:"",ref:t,"aria-label":n||e.to,...v,onClick:L,children:O})}),I=({children:e,...t})=>{let{sidebarConfig:r}=(0,y.useContext)(w.yY),a=C(r),[s,o]=(0,y.useState)(!1),l=(0,b.zy)(),c=(0,n.O)(e.props.children,e=>{let t=!1;return e.getElements().forEach(({props:{to:e,dropdownItems:r}})=>{if(!t){if(r?.length)return void r.forEach(({to:e})=>t=t||(0,k.z)(l,(0,x.o1)(e)));e&&(t=(0,k.z)(l,(0,x.o1)(e)))}}),t},[l.pathname]),d=(0,u.A)(e=>e.breakpoints.down("sm")),m=()=>{o(!0)},v=()=>{o(!1)};return(0,i.jsx)(w.U1.Provider,{value:{isHoveredOn:s,setIsHoveredOn:o},children:(0,i.jsxs)("div",{"data-testid":"item-with-submenu",onMouseLeave:v,onTouchStart:s?v:m,onMouseEnter:m,className:f()(s&&a.highlighted),children:[(0,i.jsx)(R,{hasSubmenu:!0,className:c?a.selected:"",...t,children:d?s?(0,i.jsx)(h.default,{fontSize:"small",className:a.submenuArrow}):(0,i.jsx)(p.default,{fontSize:"small",className:a.submenuArrow}):!s&&(0,i.jsx)(g.default,{fontSize:"small",className:a.submenuArrow})}),s&&e]})})},P=(0,y.forwardRef)((e,t)=>{let[r]=(0,n.O)(e.children,e=>e.getElements().filter(e=>e.type===T));return r?(0,i.jsx)(I,{...e,children:r}):(0,i.jsx)(R,{...e,ref:t})}),O=(0,c.A)("div")({flex:1},{name:"BackstageSidebarSpace"});(0,c.A)("div")({height:8},{name:"BackstageSidebarSpacer"});let N=(0,c.A)("hr")(({theme:e})=>({height:1,width:"100%",background:"#383838",border:"none",margin:e.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),B=(0,c.A)("div")(({theme:e})=>{let t={overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:e.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.palette.text.secondary,borderRadius:"5px"}};return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":t,"&:hover":t}})},88835:function(e,t,r){"use strict";r.d(t,{k:()=>i});let i=(0,r(14041).createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}})},7467:function(e,t,r){"use strict";r.d(t,{G:()=>g,H:()=>m});var i=r(31085),n=r(77125),a=r(58837),s=r(5893),o=r(14041),l=r(31072);let c="sidebarPinState",d={getSidebarPinState(){let e;try{e=JSON.parse(window.localStorage.getItem(c)||"true")}catch{return!0}return!!e},setSidebarPinState:e=>window.localStorage.setItem(c,JSON.stringify(e))};var u=r(65901);let p=(0,a.A)(e=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[e.breakpoints.up("sm")]:{paddingLeft:e=>e.isPinned?e.sidebarConfig.drawerWidthOpen:e.sidebarConfig.drawerWidthClosed},[e.breakpoints.down("xs")]:{paddingBottom:e=>e.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),h=(0,o.createContext)({content:{contentRef:void 0}});function g(e){let[t,r]=(0,o.useState)(()=>d.getSidebarPinState()),{sidebarConfig:a}=(0,o.useContext)(l.yY),c=(0,o.useRef)(null),g=(0,o.useMemo)(()=>({content:{contentRef:c}}),[c]);(0,o.useEffect)(()=>{d.setSidebarPinState(t)},[t]);let m=(0,s.A)(e=>e.breakpoints.down("xs"),{noSsr:!0}),f=p({isPinned:t,sidebarConfig:a});return(0,i.jsx)(u.qj,{value:{isPinned:t,toggleSidebarPinState:()=>r(!t),isMobile:m},children:(0,i.jsx)(h.Provider,{value:g,children:(0,i.jsx)(n.A,{className:f.root,children:e.children})})})}function m(){let{content:e}=(0,o.useContext)(h);return{focusContent:(0,o.useCallback)(()=>{e?.contentRef?.current?.focus()},[e]),contentRef:e?.contentRef}}},58269:function(e,t,r){"use strict";r.d(t,{C:()=>g});var i=r(31085),n=r(13085),a=r(58837),s=r(14041),o=r(18690),l=r(75202),c=r(31072),d=r(88835),u=r(65901);let p=(0,a.A)(e=>({root:{flexGrow:0,margin:e.spacing(0,2),color:e.palette.navigation.color},selected:t=>({color:`${e.palette.navigation.selectedColor}!important`,borderTop:`solid ${t.sidebarConfig.selectedIndicatorWidth}px ${e.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),h=e=>{let{to:t,label:r,icon:a,value:u}=e,{sidebarConfig:h}=(0,s.useContext)(c.yY),g=p({sidebarConfig:h}),m=(0,o.zy)(),{selectedMenuItemIndex:f,setSelectedMenuItemIndex:y}=(0,s.useContext)(d.k),x=u===f&&f>=0||u!==f&&!(f>=0)&&t===m.pathname;return(0,i.jsx)(n.A,{"aria-label":r,label:r,icon:a,component:l.N_,to:t||m.pathname,onChange:(e,t)=>{t===f?y(-1):y(t)},value:u,selected:x,classes:g})},g=e=>{let{children:t,to:r,label:n,icon:a,value:s}=e,{isMobile:o}=(0,u.Ut)();return o?(0,i.jsx)(h,{to:r,label:n,icon:a,value:s}):(0,i.jsx)(i.Fragment,{children:t})}},77366:function(e,t,r){"use strict";r.d(t,{FS:()=>u,T9:()=>d});var i=r(31085),n=r(14041),a=r(54852),s=r(4790);let o={isOpen:!1,setOpen:()=>{}},l=(0,n.createContext)(o),c=(0,a.tK)("sidebar-open-state-context");function d(e){let{children:t,value:r}=e;return(0,i.jsx)(l.Provider,{value:r,children:(0,i.jsx)(c.Provider,{value:(0,s.B)({1:r}),children:t})})}let u=()=>{let e=(0,n.useContext)(c),t=(0,n.useContext)(l);if(void 0===e)return t||o;let r=e.atVersion(1);if(void 0===r)throw Error("No context found for version 1.");return r}},65901:function(e,t,r){"use strict";r.d(t,{Ut:()=>u,qj:()=>d});var i=r(31085),n=r(54852),a=r(4790),s=r(14041);let o={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},l=(0,s.createContext)(o),c=(0,n.tK)("sidebar-pin-state-context");function d(e){let{children:t,value:r}=e;return(0,i.jsx)(l.Provider,{value:r,children:(0,i.jsx)(c.Provider,{value:(0,a.B)({1:r}),children:t})})}let u=()=>{let e=(0,s.useContext)(c),t=(0,s.useContext)(l);if(void 0===e)return t||o;let r=e.atVersion(1);if(void 0===r)throw Error("No context found for version 1.");return r}},76059:function(e,t,r){"use strict";r.d(t,{O:()=>h});var i=r(31085),n=r(77125),a=r(58837),s=r(72501),o=r(53373),l=r.n(o),c=r(14041),d=r(31072),u=r(77366);let p=(0,a.A)(e=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:e.spacing(7)+1},drawer:t=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",opacity:0,[e.breakpoints.up("sm")]:{marginLeft:t.left,transition:e.transitions.create(["margin-left","opacity"],{easing:e.transitions.easing.sharp,duration:t.submenuConfig.defaultOpenDelayMs})},top:0,bottom:0,padding:0,background:e.palette.navigation.submenu?.background??"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:t.submenuConfig.drawerWidthClosed,transitionDelay:`${t.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:t=>({marginLeft:t.left,opacity:1,width:t.submenuConfig.drawerWidthOpen,[e.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:e.spacing(3),left:0,top:0}}),title:{fontSize:e.typography.h5.fontSize,fontWeight:e.typography.fontWeightMedium,color:e.palette.navigation.color,padding:e.spacing(2.5),[e.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),h=e=>{let{isOpen:t}=(0,u.FS)(),{sidebarConfig:r,submenuConfig:a}=(0,c.useContext)(d.yY),o=p({left:t?r.drawerWidthOpen:r.drawerWidthClosed,submenuConfig:a}),{isHoveredOn:h}=(0,c.useContext)(d.U1),[g,m]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{m(h)},[h]),(0,i.jsxs)(n.A,{className:l()(o.drawer,{[o.drawerOpen]:g}),children:[(0,i.jsx)(s.A,{variant:"h5",component:"span",className:o.title,children:e.title}),e.children]})}},31072:function(e,t,r){"use strict";r.d(t,{Rv:()=>a,U1:()=>c,hC:()=>n,i8:()=>o,yY:()=>l});var i=r(14041);let n={drawerWidthClosed:72,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:72,iconSize:24,iconPadding:24,selectedIndicatorWidth:3,userBadgePadding:18,userBadgeDiameter:36,mobileSidebarHeight:56},a=e=>({...n,...e,iconContainerWidth:n.drawerWidthClosed,iconSize:n.drawerWidthClosed-2*n.iconPadding,userBadgeDiameter:n.drawerWidthClosed-2*n.userBadgePadding}),s={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:n.defaultOpenDelayMs+200},o=e=>({...s,...e}),l=(0,i.createContext)({sidebarConfig:n,submenuConfig:s}),c=(0,i.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}})},82775:function(e,t,r){"use strict";r.d(t,{z:()=>s});var i=r(45250),n=r(45810),a=r.n(n);function s(e,t,r=!1){let n=new URLSearchParams(t.search).toString(),o=a().parse(n),l=new URLSearchParams(e.search).toString(),c=a().parse(l),d=r?i.isEqual:i.isMatch;return(0,i.isEqual)(t.pathname,e.pathname)&&d(c,o)}},47948:function(e,t,r){"use strict";r.d(t,{q4:()=>ee});var i=r(31085),n=r(18139),a=r(54195),s=r(52262);class o{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){let e="user:default/guest";return{type:"user",userEntityRef:e,ownershipEntityRefs:[e]}}async getCredentials(){return{}}async signOut(){}}class l{constructor(e){this.result=e}getUserId(){return this.result.userId}static fromResult(e){return new l(e)}async getIdToken(){return this.result.getIdToken?.()}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){let e=await this.getIdToken();if(!e){let e=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:e,ownershipEntityRefs:[e]}}let{sub:t,ent:r}=function(e){let[t,r,i]=e.split(".");return JSON.parse(window.atob(r))}(e);return{type:"user",userEntityRef:t,ownershipEntityRefs:r??[]}}async getCredentials(){return{token:await this.result.getIdToken?.()}}async signOut(){return this.result.signOut?.()}}class c{profilePromise;static createGuest(){return new o}static fromLegacy(e){return l.fromResult(e)}static create(e){return new c(e.identity,e.authApi,e.profile)}identity;authApi;profile;constructor(e,t,r){this.identity=e,this.authApi=t,this.profile=r}getUserId(){let e=this.identity.userEntityRef,t=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(e);if(!t)throw TypeError(`Invalid user entity reference "${e}"`);return t[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(e){throw this.profilePromise=void 0,e}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}var d=r(64947),u=r(42899),p=r(72501),h=r(14041),g=r(76842),m=r(96872),f=r(16454),y=r(17138),x=r(79182),b=r(21332),v=r(82326),w=r(24453),j=r(58837);let A=(0,j.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),k=({children:e})=>{let t=A();return(0,i.jsx)(u.A,{component:"li",item:!0,classes:t,children:e})};var S=r(57559),C=r(89475),E=r(10265);let T=async(e,t)=>{let r=e.get(t),i=await r.getBackstageIdentity({optional:!0});if(!i)return;let n=await r.getProfile();return c.create({identity:i.identity,profile:n,authApi:r})};var $=r(53317),R=r(60448);let I=R.Ik({providerInfo:R.Ik({}).catchall(R.L5()).optional(),profile:R.Ik({email:R.Yj().optional(),displayName:R.Yj().optional(),picture:R.Yj().optional()}),backstageIdentity:R.Ik({token:R.Yj(),identity:R.Ik({type:R.eu("user"),userEntityRef:R.Yj(),ownershipEntityRefs:R.YO(R.Yj())})})});class P{options;abortController;state;constructor(e){this.options=e,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){let{backstageIdentity:e}=this.getSessionSync(),t=e.identity.userEntityRef,r=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(t);if(!r)throw TypeError(`Invalid user entity reference "${t}"`);return r[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if("active"===this.state.type)return this.state.session;if("fetching"===this.state.type&&this.state.previous)return this.state.previous;throw Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if("fetching"===this.state.type)return this.state.promise;if("active"===this.state.type&&new Date<this.state.expiresAt)return this.state.session;let e="active"===this.state.type?this.state.session:void 0,t=this.fetchSession().then(e=>(this.state={type:"active",session:e,expiresAt:function(e){let t=new Date(Date.now()+3e5);if(!e)return t;let[r,i,n]=e.split("."),a=JSON.parse(window.atob(i));return"number"!=typeof a.exp?t:new Date(1e3*a.exp-3e5)}(e.backstageIdentity.token)},e),e=>{throw this.state={type:"failed",error:e},e});return this.state={type:"fetching",promise:t,previous:e},t}async fetchSession(){let e=await this.options.discoveryApi.getBaseUrl("auth"),t=new Headers("function"==typeof this.options.headers?await this.options.headers():this.options.headers);t.set("X-Requested-With","XMLHttpRequest");let r=await fetch(`${e}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:t,credentials:"include"});if(!r.ok)throw await $.o.fromResponse(r);return I.parse(await r.json())}}var O=r(61617),N=r(48472);let B=async e=>{try{return await e.getBackstageIdentity()}catch(e){if("ResponseError"===e.name&&"NotFoundError"===e.cause.name)return;throw e}},U=async e=>{let t="true"===localStorage.getItem("enableLegacyGuestToken"),r=new P({provider:"guest",discoveryApi:e.get(O.I)}),i=await B(r).catch(e=>{console.warn(`Failed to sign in as a guest, ${e}`)});if(i||t){if(i&&t){if(!confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))return new o;localStorage.removeItem("enableLegacyGuestToken")}else if(t)return new o;return r}};var L=r(80824),F=r(95061),z=r(16249),M=r(51253),D=r(3514),q=r.n(D);let W=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,H=(0,j.A)(e=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:e.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),_=e=>{let{ref:t,...r}=e;return{inputRef:t,...r}},G=async()=>void 0;class K{constructor(e){this.config=e}static from(e){return new K(e)}getUserId(){if(!this.config.identityApi.getUserId)throw Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}var V=r(73657);let Y="@backstage/core:SignInPage:provider",J={guest:{Component:({onSignInStarted:e,onSignInSuccess:t,onSignInFailure:r})=>{let a=(0,n.gf)(O.I),[s,l]=(0,N.A)("enableLegacyGuestToken"),{t:c}=(0,E.i)(C.O),u=async()=>{e();let i=new P({provider:"guest",discoveryApi:a});if(!await B(i).catch(e=>{console.warn(`Failed to sign in as a guest, ${e}`)})){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){l(!0),t(new o);return}throw r(),Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}t(i)};return(0,i.jsx)(k,{children:(0,i.jsx)(b.n,{title:"Guest",variant:"fullHeight",actions:(0,i.jsx)(d.A,{color:"primary",variant:"outlined",onClick:u,children:c("signIn.guestProvider.enter")}),children:(0,i.jsx)(p.A,{variant:"body1",style:{whiteSpace:"pre-line"},children:c("signIn.guestProvider.subtitle")})})})},loader:U},custom:{Component:({onSignInStarted:e,onSignInSuccess:t})=>{let r=H(),{t:n}=(0,E.i)(C.O),{register:a,handleSubmit:s,formState:o}=(0,L.mN)({mode:"onChange"}),{errors:l}=o;return(0,i.jsx)(k,{children:(0,i.jsxs)(b.n,{title:n("signIn.customProvider.title"),variant:"fullHeight",children:[(0,i.jsx)(p.A,{variant:"body1",className:r.subTitle,children:n("signIn.customProvider.subtitle")}),(0,i.jsxs)("form",{className:r.form,onSubmit:s(({userId:r,idToken:i})=>{e(),t(c.fromLegacy({userId:r,getIdToken:void 0!==i?async()=>i:void 0,profile:{email:`${r}@example.com`}}))}),children:[(0,i.jsxs)(F.A,{children:[(0,i.jsx)(z.A,{..._(a("userId",{required:!0})),label:n("signIn.customProvider.userId"),margin:"normal",error:!!l.userId}),l.userId&&(0,i.jsx)(M.A,{error:!0,children:l.userId.message})]}),(0,i.jsxs)(F.A,{children:[(0,i.jsx)(z.A,{..._(a("idToken",{required:!1,validate:e=>!e||W.test(e)||n("signIn.customProvider.tokenInvalid")})),label:n("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!l.idToken}),l.idToken&&(0,i.jsx)(M.A,{error:!0,children:l.idToken.message})]}),(0,i.jsx)(d.A,{type:"submit",color:"primary",variant:"outlined",className:r.button,disabled:!o?.isDirty||!q()(l),children:n("signIn.customProvider.continue")})]})]})})},loader:G},common:{Component:({config:e,onSignInStarted:t,onSignInSuccess:r,onSignInFailure:a})=>{let{apiRef:s,title:o,message:l}=e,u=(0,n.gf)(s),h=(0,n.gf)(w.m),{t:g}=(0,E.i)(C.O),m=async()=>{try{t();let e=await u.getBackstageIdentity({instantPopup:!0});if(!e)throw a(),Error(`The ${o} provider is not configured to support sign-in`);let i=await u.getProfile();r(c.create({identity:e.identity,profile:i,authApi:u}))}catch(e){a(),h.post(new S.HK(g("signIn.loginFailed"),e))}};return(0,i.jsx)(k,{children:(0,i.jsx)(b.n,{variant:"fullHeight",title:o,actions:(0,i.jsx)(d.A,{color:"primary",variant:"outlined",onClick:m,children:g("signIn.title")}),children:(0,i.jsx)(p.A,{variant:"body1",children:l})})})},loader:T}};function Q(e,t){if(e in t)throw Error(`"${e}" ID is duplicated. IDs of identity providers have to be unique.`)}let Z=({onSignInSuccess:e,providers:t=[],title:r,titleComponent:o,align:l="left"})=>{let c=(0,n.gf)(a.U),d=A(),[p,b]=((e,t)=>{let r=(0,n.gf)(w.m),a=(0,n.Q2)(),[o,l]=(0,h.useState)(!0),c=(0,s.s)(),{t:d}=(0,E.i)(C.O),[u,p]=(0,V.ok)();(0,g.u)(()=>{let e=u.get("error");e&&r.post(new S.HK(d("signIn.loginFailed"),Error(e)))});let m=(0,h.useCallback)(async e=>{t(K.from({identityApi:e,signOut:async()=>{localStorage.removeItem(Y),await e.signOut?.(),c.captureEvent("signOut","success")}})),c.captureEvent("signIn","success")},[t,c]);return(0,h.useLayoutEffect)(()=>{if(!o)return;let t=localStorage.getItem(Y);if(null===t)return void l(!1);let i=e[t];if(!i)return void l(!1);let n=!1;return i.components.loader(a,i.config?.apiRef).then(e=>{n?localStorage.removeItem(Y):e?m(e):l(!1)}).catch(e=>{localStorage.removeItem(Y),n||(r.post(e),l(!1))}),()=>{n=!0}},[o,r,t,a,e,m]),[o,(0,h.useMemo)(()=>Object.keys(e).map(t=>{let r=e[t],{Component:n}=r.components;return(0,i.jsx)(n,{config:r.config,onSignInStarted:()=>{localStorage.setItem(Y,r?.config?.id||r.id)},onSignInSuccess:e=>{m(e)},onSignInFailure:()=>{localStorage.removeItem(Y)}},r.id)}),[e,m])]})(t.reduce((e,t)=>{if("string"==typeof t)return Q(t,e),e[t]={components:J[t],id:t},e;let{id:r}=t;return Q(r,e),e[r]={components:J.common,id:r,config:t},e},{}),e);return p?(0,i.jsx)(m.k,{}):(0,i.jsxs)(v.Y,{themeId:"home",children:[(0,i.jsx)(x.Y,{title:c.getString("app.title")}),(0,i.jsxs)(f.U,{children:[(r||o)&&(0,i.jsx)(y.d,{title:r,titleComponent:o,textAlign:l}),(0,i.jsx)(u.A,{container:!0,justifyContent:"center"===l?l:"flex-start",spacing:2,component:"ul",classes:d,children:b})]})]})},X=({provider:e,auto:t,onSignInSuccess:r,ErrorComponent:o})=>{let l=A(),y=(0,n.gf)(e.apiRef),w=(0,n.gf)(a.U),{t:j}=(0,E.i)(C.O),S=(0,s.s)(),[T,$]=(0,h.useState)(),[R,I]=(0,h.useState)(!1),[P,O]=(0,V.ok)(),N=P.get("error"),B=async({checkExisting:i,showPopup:n})=>{try{let a;if(i&&(a=await y.getBackstageIdentity({optional:!0})),!a&&(n||t)&&!N&&(I(!0),!(a=await y.getBackstageIdentity({instantPopup:!0}))))throw Error(`The ${e.title} provider is not configured to support sign-in`);if(!a)return void I(!0);let s=await y.getProfile();r(c.create({identity:a.identity,authApi:y,profile:s})),S.captureEvent("signIn","success")}catch(e){$(e),I(!0)}};return(0,g.u)(()=>{N&&$(Error(N)),B({checkExisting:!0})}),R?(0,i.jsxs)(v.Y,{themeId:"home",children:[(0,i.jsx)(x.Y,{title:w.getString("app.title")}),(0,i.jsx)(f.U,{children:(0,i.jsx)(u.A,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:l,children:(0,i.jsx)(k,{children:(0,i.jsxs)(b.n,{variant:"fullHeight",title:e.title,actions:(0,i.jsx)(d.A,{color:"primary",variant:"outlined",onClick:()=>{B({showPopup:!0})},children:j("signIn.title")}),children:[(0,i.jsx)(p.A,{variant:"body1",children:e.message}),T&&"PopupRejectedError"!==T.name&&(o?(0,i.jsx)(o,{error:T}):(0,i.jsx)(p.A,{variant:"body1",color:"error",children:T.message}))]})})})})]}):(0,i.jsx)(m.k,{})};function ee(e){return"provider"in e?(0,i.jsx)(X,{...e}):(0,i.jsx)(Z,{...e})}},89475:function(e,t,r){"use strict";r.d(t,{O:()=>i});let i=(0,r(48870).h)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:"Enter your own User ID and credentials.\n This selection will not be stored.",userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:"Enter as a Guest User.\n You will not have a verified identity, meaning some features might be unavailable.",enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All",message:"Sign-in to allow {{appTitle}} access to {{provider}} APIs and identities."},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all",placeholder:"All results"},body:{emptyDataSourceMessage:"No records to display"},pagination:{firstTooltip:"First Page",labelDisplayedRows:"{from}-{to} of {count}",labelRowsSelect:"rows",lastTooltip:"Last Page",nextTooltip:"Next Page",previousTooltip:"Previous Page"},toolbar:{search:"Filter"},header:{actions:"Actions"}},alertDisplay:{message_one:"({{ count }} newer message)",message_other:"({{ count }} newer messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},dependencyGraph:{fullscreenTooltip:"Toggle fullscreen"},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}})},19224:function(e,t,r){"use strict";r.d(t,{I:()=>c,p:()=>l});var i=r(31085),n=r(54852),a=r(4790),s=r(14041);let o=(0,n.tK)("analytics-context"),l=()=>{let e=(0,s.useContext)(o);if(void 0===e)return{routeRef:"unknown",pluginId:"root",extension:"App"};let t=e.atVersion(1);if(void 0===t)throw Error("No context found for version 1.");return t},c=e=>{let{attributes:t,children:r}=e,n={...l(),...t},s=(0,a.B)({1:n});return(0,i.jsx)(o.Provider,{value:s,children:r})}},48813:function(e,t,r){"use strict";r.d(t,{J:()=>a,t:()=>n});let i=(0,r(1952).Q)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),n="_ROUTABLE-EXTENSION-RENDERED";class a{analyticsApi;context;constructor(e,t={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=e,this.context=t,i.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{i.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...i.mostRecentGatheredNavigation,...i.mostRecentRoutableExtensionRender}),i.mostRecentGatheredNavigation=void 0,i.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),i.beforeUnloadRegistered=!0)}setContext(e){this.context=e}captureEvent(e,t,{value:r,attributes:a}={}){let{_routeNodeType:s,...o}=this.context;if(e===n){i.mostRecentGatheredNavigation&&(i.mostRecentRoutableExtensionRender={context:{...o,extension:"App"}});return}if(i.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...i.mostRecentGatheredNavigation,...i.mostRecentRoutableExtensionRender})}catch(e){console.warn("Error during analytics event capture. %o",e)}i.mostRecentGatheredNavigation=void 0,i.mostRecentRoutableExtensionRender=void 0}if("navigate"===e&&"gathered"===s&&"root"===o.pluginId){i.mostRecentGatheredNavigation={action:e,subject:t,value:r,attributes:a,context:o};return}try{this.analyticsApi.captureEvent({action:e,subject:t,value:r,attributes:a,context:o})}catch(e){console.warn("Error during analytics event capture. %o",e)}}}},52262:function(e,t,r){"use strict";r.d(t,{s:()=>l});var i=r(19224),n=r(18139),a=r(43327),s=r(14041),o=r(48813);function l(){let e=(0,s.useRef)(null),t=(0,i.p)(),r=function(){try{return(0,n.gf)(a.c)}catch{return{captureEvent:()=>{}}}}(),l=(null===e.current&&(e.current=new o.J(r)),e.current);return l.setContext(t),l}},34477:function(e,t,r){"use strict";r.d(t,{k:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.alert"})},43327:function(e,t,r){"use strict";r.d(t,{c:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.analytics"})},90608:function(e,t,r){"use strict";r.d(t,{p:()=>i});let i=(0,r(28967).y)({id:"core.applanguage"})},68541:function(e,t,r){"use strict";r.d(t,{Q:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.apptheme"})},54195:function(e,t,r){"use strict";r.d(t,{U:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.config"})},61617:function(e,t,r){"use strict";r.d(t,{I:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.discovery"})},24453:function(e,t,r){"use strict";r.d(t,{m:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.error"})},86702:function(e,t,r){"use strict";r.d(t,{B:()=>a,S:()=>n}),r(31085);var i=r(28967);let n={None:0,Active:1},a=(0,i.y)({id:"core.featureflags"})},95159:function(e,t,r){"use strict";r.d(t,{a:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.fetch"})},94223:function(e,t,r){"use strict";r.d(t,{K:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.identity"})},35177:function(e,t,r){"use strict";r.d(t,{s:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.oauthrequest"})},83392:function(e,t,r){"use strict";r.d(t,{F:()=>i}),r(31085);let i=(0,r(28967).y)({id:"core.storage"})},87350:function(e,t,r){"use strict";r.d(t,{J:()=>i});let i=(0,r(28967).y)({id:"core.translation"})},33129:function(e,t,r){"use strict";r.d(t,{$7:()=>l,GR:()=>p,Hd:()=>u,QX:()=>m,Vk:()=>a,Yj:()=>n,Zj:()=>o,cz:()=>h,dM:()=>g,py:()=>s,u0:()=>c,zk:()=>d}),r(31085);var i=r(28967);let n={SignedIn:"SignedIn",SignedOut:"SignedOut"},a=(0,i.y)({id:"core.auth.google"}),s=(0,i.y)({id:"core.auth.github"}),o=(0,i.y)({id:"core.auth.okta"}),l=(0,i.y)({id:"core.auth.gitlab"}),c=(0,i.y)({id:"core.auth.microsoft"}),d=(0,i.y)({id:"core.auth.onelogin"}),u=(0,i.y)({id:"core.auth.bitbucket"}),p=(0,i.y)({id:"core.auth.bitbucket-server"}),h=(0,i.y)({id:"core.auth.atlassian"}),g=(0,i.y)({id:"core.auth.vmware-cloud"}),m=(0,i.y)({id:"core.auth.openshift"})},28967:function(e,t,r){"use strict";r.d(t,{y:()=>n});class i{constructor(e){if(this.config=e,!e.id.split(".").flatMap(e=>e.split("-")).every(e=>e.match(/^[a-z][a-z0-9]*$/)))throw Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${e.id}'`)}get id(){return this.config.id}get T(){throw Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function n(e){return new i(e)}},45843:function(e,t,r){"use strict";function i(e,t){return"id"in e?{api:e,deps:{},factory:()=>t}:e}r.d(t,{b:()=>i})},18139:function(e,t,r){"use strict";r.d(t,{Q2:()=>a,gf:()=>s}),r(31085);var i=r(54852),n=r(57559);function a(){let e=(0,i.qO)("api-context");if(!e)throw new n.EH("API context is not available");let t=e.atVersion(1);if(!t)throw new n.EH("ApiContext v1 not available");return t}function s(e){let t=a().get(e);if(!t)throw new n.EH(`No implementation available for ${e}`);return t}},95208:function(e,t,r){"use strict";r.d(t,{n:()=>n});var i=r(54852);let n=()=>{let e=(0,i.qO)("app-context");if(!e)throw Error("App context is not available");let t=e.atVersion(1);if(!t)throw Error("AppContext v1 not available");return t}},85408:function(e,t,r){"use strict";r.d(t,{E:()=>s,h:()=>a});let i=(0,r(1952).Q)("component-data-store",()=>new WeakMap),n="__backstage_data";function a(e,t,r){let a=e[n]??i.get(e);if(a||(Object.defineProperty(e,n,{enumerable:!1,configurable:!0,writable:!1,value:a={map:new Map}}),i.set(e,a)),a.map.has(t)){let r=e.displayName||e.name;throw Error(`Attempted to attach duplicate data "${t}" to component "${r}"`)}a.map.set(t,r)}function s(e,t){if(!e)return;let r=e.type;if(!r)return;let a=r[n]??i.get(r);if(a)return a.map.get(t)}},96504:function(e,t,r){"use strict";r.d(t,{NC:()=>g,QJ:()=>h,zZ:()=>m});var i=r(31085),n=r(14041),a=r(19224),s=r(52262),o=r(95208),l=r(72814),c=r(85408);class d extends n.Component{static getDerivedStateFromError(e){return{error:e}}state={error:void 0};handleErrorReset=()=>{this.setState({error:void 0})};render(){let{error:e}=this.state,{app:t,plugin:r}=this.props,{ErrorBoundaryFallback:n}=t.getComponents();return e?(0,i.jsx)(n,{error:e,resetError:this.handleErrorReset,plugin:r}):this.props.children}}var u=r(48813),p=r(57559);function h(e){let{component:t,mountPoint:r,name:a}=e;return m({component:{lazy:()=>t().then(e=>{let t=t=>{let a=(0,s.s)();try{(0,l.S)(r)}catch(e){if("object"==typeof e&&null!==e){let{message:t}=e;if("string"==typeof t&&t.startsWith("No path for "))throw Error(`Routable extension component with mount point ${r} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw e}return(0,n.useEffect)(()=>{a.captureEvent(u.t,"")},[a]),(0,i.jsx)(e,{...t})},o=a||e.displayName||e.name||"LazyComponent";return t.displayName=`RoutableExtension(${o})`,t})},data:{"core.mountPoint":r},name:a})}function g(e){let{component:t,name:r}=e;return m({component:t,name:r})}function m(e){let t,{data:r={},name:s}=e;if(s||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name."),"lazy"in e.component){let r=e.component.lazy;t=(0,n.lazy)(()=>r().then(e=>({default:e}),e=>{let t=s?` of the ${s} extension`:"";throw new p.HK(`Failed lazy loading${t}, try to reload the page`,e)}))}else t=e.component.sync;let l=s||t.displayName||t.name||"Component";return{expose(e){let u=l=>{let c=(0,o.n)(),{Progress:u}=c.getComponents(),p=r?.["core.mountPoint"];return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)(u,{}),children:(0,i.jsx)(d,{app:c,plugin:e,children:(0,i.jsx)(a.I,{attributes:{pluginId:e.getId(),...s&&{extension:s},...p&&{routeRef:p.id}},children:(0,i.jsx)(t,{...l})})})})};for(let[t,i]of((0,c.h)(u,"core.plugin",e),(0,c.h)(u,"core.extensionName",s),Object.entries(r)))(0,c.h)(u,t,i);return u.displayName=`Extension(${l})`,u}}}},77026:function(e,t,r){"use strict";r.d(t,{O:()=>c});var i=r(14041),n=r(85408),a=r(18139),s=r(86702);function o(e,t,r,a){return i.Children.toArray(e).flatMap(e=>{if(!(0,i.isValidElement)(e))return[];if(e.type===i.Fragment)return o(e.props.children,t,r,a);if((0,n.E)(e,"core.featureFlagged")){let i=e.props;return("with"in i?t.isActive(i.with):!t.isActive(i.without))?o(e.props.children,t,r,a):[]}if(void 0===r||r(e))return[e];if(a)throw Error(a);return o(e.props.children,t,r,a)})}class l{node;featureFlagsApi;constructor(e,t){this.node=e,this.featureFlagsApi=t}selectByComponentData(e){return new l(o(this.node,this.featureFlagsApi,t=>void 0!==(0,n.E)(t,e.key),e.withStrictError),this.featureFlagsApi)}findComponentData(e){return o(this.node,this.featureFlagsApi,t=>void 0!==(0,n.E)(t,e.key)).map(t=>(0,n.E)(t,e.key)).filter(e=>void 0!==e)}getElements(){return o(this.node,this.featureFlagsApi)}}function c(e,t,r=[]){let n=new l(e,(0,a.gf)(s.B));return(0,i.useMemo)(()=>t(n),[e,...r])}},50809:function(e,t,r){"use strict";r.d(t,{i:()=>n});class i{constructor(e){this.config=e}getId(){return this.config.id}getApis(){return this.config.apis??[]}getFeatureFlags(){return this.config.featureFlags?.slice()??[]}get routes(){return this.config.routes??{}}get externalRoutes(){return this.config.externalRoutes??{}}provide(e){return e.expose(this)}toString(){return`plugin{${this.config.id}}`}}function n(e){return new i(e)}},2488:function(e,t,r){"use strict";r.d(t,{I:()=>a});var i=r(13930);class n{[i.b]="external";id;params;optional;defaultTarget;constructor(e,t,r,i){this.id=e,this.params=t,this.optional=r,this.defaultTarget=i}toString(){return this.#w?`externalRouteRef{id=${this.#w},legacyId=${this.id}}`:`routeRef{type=external,id=${this.id}}`}getDefaultTarget(){return this.defaultTarget}$$type="@backstage/ExternalRouteRef";version="v1";T=void 0;#w=void 0;getParams(){return this.params}getDescription(){return this.#w?this.#w:this.id}setId(e){if(!e)throw Error("ExternalRouteRef id must be a non-empty string");if(this.#w&&this.#w!==e)throw Error(`ExternalRouteRef was referenced twice as both '${this.#w}' and '${e}'`);this.#w=e}}function a(e){return new n(e.id,e.params??[],!!e.optional,e?.defaultTarget)}},77555:function(e,t,r){"use strict";r.d(t,{H:()=>a});var i=r(13930);class n{[i.b]="absolute";id;params;constructor(e,t){this.id=e,this.params=t}get title(){return this.id}toString(){return this.#w?`routeRef{id=${this.#w},legacyId=${this.id}}`:`routeRef{type=absolute,id=${this.id}}`}$$type="@backstage/RouteRef";version="v1";T=void 0;alias=void 0;#w=void 0;getParams(){return this.params}getDescription(){return this.#w?this.#w:this.id}setId(e){if(!e)throw Error("RouteRef id must be a non-empty string");if(this.#w&&this.#w!==e)throw Error(`RouteRef was referenced twice as both '${this.#w}' and '${e}'`);this.#w=e}}function a(e){return new n(e.id,e.params??[])}},13930:function(e,t,r){"use strict";r.d(t,{b:()=>i});let i=(0,r(1952).Q)("route-ref-type",()=>Symbol("route-ref-type"))},72814:function(e,t,r){"use strict";r.d(t,{S:()=>s});var i=r(14041),n=r(18690),a=r(54852);function s(e){let{pathname:t}=(0,n.zy)(),r=(0,a.qO)("routing-context");if(!r)throw Error("Routing context is not available");let s=r.atVersion(1),o=(0,i.useMemo)(()=>s&&s.resolve(e,{pathname:t}),[s,e,t]);if(!r)throw Error("useRouteRef used outside of routing context");if(!s)throw Error("RoutingContext v1 not available");let l="optional"in e&&e.optional;if(!o&&!l)throw Error(`No path for ${e}`);return o}},76888:function(e,t,r){"use strict";r.d(t,{K:()=>n});var i=r(18690);function n(e){return(0,i.g)()}},48870:function(e,t,r){"use strict";r.d(t,{h:()=>n});class i{#j;#A;#k;constructor(e){this.#j=e.id,this.#A=function(e){let t=[];return!function e(r,i){for(let[n,a]of Object.entries(r))"string"==typeof a?t.push([i+n,a]):e(a,`${i}${n}.`)}(e,""),Object.fromEntries(t)}(e.messages)}$$type="@backstage/TranslationRef";version="v1";get id(){return this.#j}get T(){throw Error("Not implemented")}getDefaultMessages(){return this.#A}setDefaultResource(e){this.#k=e}getDefaultResource(){return this.#k}toString(){return`TranslationRef{id=${this.id}}`}}function n(e){var t;let r=new i(e);return e.translations&&r.setDefaultResource({$$type:"@backstage/TranslationResource",version:"v1",id:(t={ref:r,translations:e.translations}).ref.id,resources:Object.entries(t.translations).map(([e,t])=>({language:e,loader:()=>t().then(e=>{let t=e.default;return{messages:t?.$$type==="@backstage/TranslationMessages"?t.messages:t}})}))}),r}},10265:function(e,t,r){"use strict";r.d(t,{i:()=>l});var i=r(14041),n=r(18139),a=r(24453),s=r(87350);let o=new WeakSet,l=e=>{let t=(0,n.gf)(a.m),r=(0,n.gf)(s.J),[l,c]=(0,i.useState)(()=>r.getTranslation(e)),d=(0,i.useMemo)(()=>r.translation$(e),[r,e]),u=(0,i.useCallback)(r=>{if(!o.has(e)){let i=`Failed to load translation resource '${e.id}'; caused by ${r}`;console.error(i),t.post(Error(i)),o.add(e)}},[t,e]);(0,i.useEffect)(()=>{let e=d.subscribe({next(e){e.ready&&c(e)},error(e){u(e)}});return()=>{e.unsubscribe()}},[d,u]);let p=(0,i.useRef)(!0);if((0,i.useEffect)(()=>{p.current?p.current=!1:c(r.getTranslation(e))},[r,e]),!l.ready)throw new Promise(e=>{let t=d.subscribe({next(r){r.ready&&(t.unsubscribe(),e())},error(r){t.unsubscribe(),u(r),e()}})});return{t:l.t}}},53317:function(e,t,r){"use strict";r.d(t,{o:()=>a});var i=r(6442);async function n(e){try{let t=await e.text();if(t){if(e.headers.get("content-type")?.startsWith("application/json"))try{let e=JSON.parse(t);if(e.error&&e.response)return e}catch{}return{error:{name:"Error",message:`Request failed with status ${e.status} ${e.statusText}, ${t}`},response:{statusCode:e.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${e.status} ${e.statusText}`},response:{statusCode:e.status}}}class a extends Error{response;body;cause;statusCode;statusText;static async fromResponse(e){let t=await n(e),r=t.response.statusCode||e.status,s=e.statusText,o=`Request failed with ${r} ${s}`,l=(0,i.cy)(t.error);return new a({message:o,response:e,data:t,cause:l,statusCode:r,statusText:s})}constructor(e){super(e.message),this.name="ResponseError",this.response=e.response,this.body=e.data,this.cause=e.cause,this.statusCode=e.statusCode,this.statusText=e.statusText}}},67457:function(e,t,r){"use strict";function i(e){return!("object"!=typeof e||null===e||Array.isArray(e))&&"string"==typeof e.name&&""!==e.name&&"string"==typeof e.message}function n(e){if("object"!=typeof e||null===e||Array.isArray(e))throw Error(`Encountered invalid error, not an object, got '${e}'`);if("string"!=typeof e.name||""===e.name)throw Error(`Encountered error object without a name, got '${e}'`);if("string"!=typeof e.message)throw Error(`Encountered error object without a message, got '${e}'`)}r.d(t,{b:()=>i,t:()=>n})},57559:function(e,t,r){"use strict";r.d(t,{HK:()=>l,EH:()=>o,m_:()=>s});var i=r(67457),n=r(6442);class a extends Error{cause;constructor(e,t){let r=e;if(void 0!==t){const e=(0,n.M5)(t);r?r+=`; caused by ${e}`:r=`caused by ${e}`}super(r),Error.captureStackTrace?.(this,this.constructor),this.name&&"Error"!==this.name||"Error"!==this.constructor.name&&(this.name=this.constructor.name),this.cause=(0,i.b)(t)?t:void 0}}class s extends a{name="NotFoundError"}class o extends a{name="NotImplementedError"}class l extends a{constructor(e,t){super(e,t),this.name=(0,i.b)(t)?t.name:"Error"}}},6442:function(e,t,r){"use strict";r.d(t,{M5:()=>s,cy:()=>a});var i=r(69655),n=r(67457);function a(e){let t=(0,i.deserializeError)(e);return e.stack||(t.stack=void 0),t}function s(e){if((0,n.b)(e)){let t=String(e);return"[object Object]"!==t?t:`${e.name}: ${e.message}`}return`unknown error '${e}'`}},76242:function(e,t,r){"use strict";r.d(t,{g:()=>o});var i=r(45843),n=r(33129),a=r(14146);class s{#S;constructor(e){this.#S=e}async getCredentials(e){let t=new URL(e.url),r=this.#S.find(e=>e.isUrlSupported(t));if(!r)throw Error(`No auth provider available for '${e.url}', see https://backstage.io/link?scm-auth`);return r.getCredentials(e)}}class o{static createDefaultApiFactory(){return(0,i.b)({api:a.$,deps:{github:n.py,gitlab:n.$7,azure:n.u0,bitbucket:n.Hd},factory:({github:e,gitlab:t,azure:r,bitbucket:i})=>o.merge(o.forGithub(e),o.forGitlab(t),o.forAzure(r),o.forBitbucket(i))})}static forAuthApi(e,t){return new o("generic",e,t.host,t.scopeMapping)}static forGithub(e,t){return new o("github",e,t?.host??"github.com",{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(e,t){return new o("gitlab",e,t?.host??"gitlab.com",{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(e,t){return new o("azure",e,t?.host??"dev.azure.com",{default:["499b84ac-1321-427f-aa17-267ca6975798/vso.build","499b84ac-1321-427f-aa17-267ca6975798/vso.code","499b84ac-1321-427f-aa17-267ca6975798/vso.graph","499b84ac-1321-427f-aa17-267ca6975798/vso.project","499b84ac-1321-427f-aa17-267ca6975798/vso.profile"],repoWrite:["499b84ac-1321-427f-aa17-267ca6975798/vso.code_manage"]})}static forBitbucket(e,t){return new o("bitbucket",e,t?.host??"bitbucket.org",{default:t?.scopeMapping?.default??["account","team","pullrequest","snippet","issue","project"],repoWrite:t?.scopeMapping?.repoWrite??["pullrequest:write","snippet:write","issue:write"]})}static forBitbucketServer(e,t){return this.forBitbucket(e,{host:t.host,scopeMapping:{default:t.scopeMapping?.default??["PUBLIC_REPOS","REPO_READ"],repoWrite:t.scopeMapping?.repoWrite??["REPO_WRITE"]}})}static merge(...e){return new s(e)}#C;#E;#T;#$;constructor(e,t,r,i){this.#C=t,this.#E=r,this.#T=i,this.#$=e}isUrlSupported(e){return e.host===this.#E}getAdditionalScopesForProvider(e){return e?.customScopes&&"generic"!==this.#$?e.customScopes?.[this.#$]??[]:[]}async getCredentials(e){let{url:t,additionalScope:r,...i}=e,n=this.#T.default.slice();r?.repoWrite&&n.push(...this.#T.repoWrite);let a=this.getAdditionalScopesForProvider(r);a.length&&n.push(...a);let s=[...new Set(n)],o=await this.#C.getAccessToken(s,i);return{token:o,headers:{Authorization:`Bearer ${o}`}}}}},14146:function(e,t,r){"use strict";r.d(t,{$:()=>i});let i=(0,r(28967).y)({id:"core.scmauth"})},59059:function(e,t,r){"use strict";r.d(t,{L:()=>D,Y:()=>q});var i=r(21385);let n="amazonaws.com";function a(e){let t,r,i=e.getOptionalString("endpoint"),a=e.getOptionalBoolean("s3ForcePathStyle")??!1;if(i){try{let e=new URL(i);t=e.host,r=e.pathname}catch{throw Error(`invalid awsS3 integration config, endpoint '${i}' is not a valid URL`)}if("/"!==r)throw Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${i}'`)}else t=n;let s=e.getOptionalString("accessKeyId"),o=e.getOptionalString("secretAccessKey")?.trim();return{host:t,endpoint:i,s3ForcePathStyle:a,accessKeyId:s,secretAccessKey:o,roleArn:e.getOptionalString("roleArn"),externalId:e.getOptionalString("externalId")}}class s{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t,r=((t=(e.getOptionalConfigArray("integrations.awsS3")??[]).map(a)).some(e=>e.host===n)||t.push({host:n}),t);return(0,i.oS)(r.map(e=>new s(e)),e=>e.config.host)};get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){return(0,i.ku)(e)}resolveEditUrl(e){return e}}function o(e){let t=e.getOptionalString("accessKeyId"),r=e.getOptionalString("secretAccessKey")?.trim(),i=e.getOptionalString("roleArn"),n=e.getOptionalString("externalId"),a=e.getString("region");return{host:e.getOptionalString("host")||`${a}.console.aws.amazon.com`,accessKeyId:t,secretAccessKey:r,roleArn:i,externalId:n,region:a}}class l{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t=(e.getOptionalConfigArray("integrations.awsCodeCommit")??[]).map(o);return(0,i.oS)(t.map(e=>new l(e)),e=>e.config.host)};get type(){return"awsCodeCommit"}get config(){return this.integrationConfig}get title(){return this.integrationConfig.host}resolveUrl(e){return(0,i.ku)(e)}resolveEditUrl(e){var t,r;let i=new URL(e).pathname.match(/^\/codesuite\/codecommit\/repositories\/([^\/]+)\//);if(!i)throw Error("");let[,n]=i;return t=e,r=n,t.replace(RegExp(`/codesuite/codecommit/repositories/${r}/(browse|files/edit)/`),`/codesuite/codecommit/repositories/${r}/files/edit/`)}}class c{static fromRepoUrl(e){let t,r,i,n,a=new URL(e),s=a.pathname.split("/").map(e=>decodeURIComponent(e));if("_git"===s[2]?(t=s[1],r=i=s[3]):"_git"===s[3]?(t=s[1],r=s[2],i=s[4]):"_git"===s[4]&&(t=`${s[1]}/${s[2]}`,r=s[3],i=s[5]),!t||!r||!i)throw Error("Azure URL must point to a git repository");let o=a.searchParams.get("path")??void 0,l=a.searchParams.get("version");if(l){if("GB"!==l.slice(0,2))throw Error("Azure URL version must point to a git branch");n=l.slice(2)}return new c(a.origin,t,r,i,o,n)}#R;#I;#P;#O;#N;#B;constructor(e,t,r,i,n,a){this.#R=e,this.#I=t,this.#P=r,this.#O=i,this.#N=n,this.#B=a}#U=(...e)=>{let t=new URL(this.#R);return t.pathname=e.map(e=>encodeURIComponent(e)).join("/"),t};toRepoUrl(){let e;return e=this.#P===this.#O?this.#U(this.#I,"_git",this.#O):this.#U(this.#I,this.#P,"_git",this.#O),this.#N&&e.searchParams.set("path",this.#N),this.#B&&e.searchParams.set("version","GB"+this.#B),e.toString()}toFileUrl(){if(!this.#N)throw Error("Azure URL must point to a specific path to be able to download a file");let e=this.#U(this.#I,this.#P,"_apis","git","repositories",this.#O,"items");return e.searchParams.set("api-version","6.0"),e.searchParams.set("path",this.#N),this.#B&&e.searchParams.set("version",this.#B),e.toString()}toArchiveUrl(){let e=this.#U(this.#I,this.#P,"_apis","git","repositories",this.#O,"items");return e.searchParams.set("recursionLevel","full"),e.searchParams.set("download","true"),e.searchParams.set("api-version","6.0"),this.#N&&e.searchParams.set("scopePath",this.#N),this.#B&&e.searchParams.set("version",this.#B),e.toString()}toCommitsUrl(){let e=this.#U(this.#I,this.#P,"_apis","git","repositories",this.#O,"commits");return e.searchParams.set("api-version","6.0"),this.#B&&e.searchParams.set("searchCriteria.itemVersion.version",this.#B),e.toString()}getOwner(){return this.#I}getProject(){return this.#P}getRepo(){return this.#O}getPath(){return this.#N}getRef(){return this.#B}}let d="dev.azure.com",u=["clientId","clientSecret","managedIdentityClientId","tenantId","personalAccessToken"],p=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["ManagedIdentityClientAssertion",["clientId","managedIdentityClientId","tenantId"]],["PersonalAccessToken",["personalAccessToken"]]]);function h(e){for(let t of p.entries()){let[r,i]=t,n=u.filter(e=>!i.includes(e));if(i.every(t=>void 0!==e[t])&&n.every(t=>void 0===e[t]))return{kind:r,organizations:e.organizations,...i.reduce((t,r)=>(t[r]=e[r],t),{})}}throw Error("is not a valid credential")}function g(e){let t,r=e.getOptionalString("host")??d,n=e.getOptionalConfigArray("credentials")?.map(e=>({organizations:e.getOptionalStringArray("organizations"),personalAccessToken:e.getOptionalString("personalAccessToken")?.trim(),tenantId:e.getOptionalString("tenantId")?.trim(),clientId:e.getOptionalString("clientId")?.trim(),clientSecret:e.getOptionalString("clientSecret")?.trim(),managedIdentityClientId:e.getOptionalString("managedIdentityClientId")?.trim()})),a=e.getOptionalString("token")?.trim();if(void 0!==e.getOptional("credential")&&void 0!==e.getOptional("credentials"))throw Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(void 0!==e.getOptional("token")&&void 0!==e.getOptional("credentials"))throw Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(void 0!==a){let e=[{personalAccessToken:a}];n=n?.concat(e)??e}if(void 0!==e.getOptional("credential")){let t=[{organizations:e.getOptionalStringArray("credential.organizations"),token:e.getOptionalString("credential.token")?.trim(),tenantId:e.getOptionalString("credential.tenantId"),clientId:e.getOptionalString("credential.clientId"),clientSecret:e.getOptionalString("credential.clientSecret")?.trim()}];n=n?.concat(t)??t}if(!(0,i.HO)(r))throw Error(`Invalid Azure integration config, '${r}' is not a valid host`);if(void 0!==n){let e=n?.reduce((e,t,r)=>{let i;try{h(t)}catch(e){i=e.message}return void 0!==i&&e.push(`credential at position ${r+1} ${i}`),e},Array.of()).concat(Object.entries(n.filter(e=>void 0!==e.organizations&&e.organizations.length>0).reduce((e,t,r)=>(t.organizations?.forEach(t=>{e[t]||(e[t]=[]),e[t].push(r+1)}),e),{})).filter(([e,t])=>t.length>1).reduce((e,[t,r])=>(e.push(`organization ${t} is specified multiple times in credentials at positions ${r.slice(0,r.length-1).join(", ")} and ${r[r.length-1]}`),e),Array.of()));if(e?.length>0)throw Error(`Invalid Azure integration config for ${r}: ${e.join("; ")}`);if((t=n.map(e=>h(e))).some(e=>"PersonalAccessToken"!==e.kind)&&r!==d)throw Error(`Invalid Azure integration config for ${r}, only personal access tokens can be used with hosts other than ${d}`);if(t.filter(e=>void 0===e.organizations||0===e.organizations.length).length>1)throw Error(`Invalid Azure integration config for ${r}, you cannot specify multiple credentials without organizations`)}return{host:r,credentials:t,commitSigningKey:e.getOptionalString("commitSigningKey")}}class m{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t,r=((t=(e.getOptionalConfigArray("integrations.azure")??[]).map(g)).some(e=>e.host===d)||t.push({host:d}),t);return(0,i.oS)(r.map(e=>new m(e)),e=>e.config.host)};get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){let{url:t,base:r}=e;if((0,i.AY)(t))return t;try{let i=c.fromRepoUrl(r),n=new URL(r),a=new URL(`https://a.com${i.getPath()??""}`),s=new URL(t,a).pathname;return n.searchParams.set("path",s),e.lineNumber&&(n.searchParams.set("line",String(e.lineNumber)),n.searchParams.set("lineEnd",String(e.lineNumber+1)),n.searchParams.set("lineStartColumn","1"),n.searchParams.set("lineEndColumn","1")),n.toString()}catch{return new URL(t,r).toString()}}resolveEditUrl(e){return e}}var f=r(52536),y=r.n(f);let x="bitbucket.org",b="https://api.bitbucket.org/2.0";function v(e){let t=e.getString("username"),r=e.getOptionalString("appPassword")?.trim(),i=e.getOptionalString("token");if(!i&&!r)throw Error("Bitbucket Cloud integration must be configured with as username and either a token or an appPassword.");return{host:x,apiBaseUrl:b,username:t,appPassword:r,token:i,commitSigningKey:e.getOptionalString("commitSigningKey")}}class w{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t,r=(0===(t=(e.getOptionalConfigArray("integrations.bitbucketCloud")??[]).map(v)).length&&t.push({host:x,apiBaseUrl:b}),t);return(0,i.oS)(r.map(e=>new w(e)),e=>e.config.host)};get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){let t=(0,i.ku)(e);if(e.lineNumber){let r=new URL(t);return r.hash=`lines-${e.lineNumber}`,r.toString()}return t}resolveEditUrl(e){let t=y()(e),r=new URL(e);return r.searchParams.set("mode","edit"),r.searchParams.set("at",t.ref),r.toString()}}var j=r(45250);let A="bitbucket.org",k="https://api.bitbucket.org/2.0";function S(e){let t=e.getOptionalString("host")??A,r=e.getOptionalString("apiBaseUrl"),n=e.getOptionalString("token")?.trim(),a=e.getOptionalString("username"),s=e.getOptionalString("appPassword")?.trim();if(!(0,i.HO)(t))throw Error(`Invalid Bitbucket integration config, '${t}' is not a valid host`);return r=r?(0,j.trimEnd)(r,"/"):t===A?k:`https://${t}/rest/api/1.0`,{host:t,apiBaseUrl:r,token:n,username:a,appPassword:s,commitSigningKey:e.getOptionalString("commitSigningKey")}}class C{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t,r=((t=(e.getOptionalConfigArray("integrations.bitbucket")??[...e.getOptionalConfigArray("integrations.bitbucketCloud")??[],...e.getOptionalConfigArray("integrations.bitbucketServer")??[]]).map(S)).some(e=>e.host===A)||t.push({host:A,apiBaseUrl:k}),t);return(0,i.oS)(r.map(e=>new C(e)),e=>e.config.host)};get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){let t=(0,i.ku)(e);if(!e.lineNumber)return t;let r=new URL(t);return"bitbucket.org"===this.integrationConfig.host?r.hash=`lines-${e.lineNumber}`:r.hash=`${e.lineNumber}`,r.toString()}resolveEditUrl(e){let t=y()(e),r=new URL(e);return r.searchParams.set("mode","edit"),r.searchParams.set("spa","0"),r.searchParams.set("at",t.ref),r.toString()}}function E(e){let t=e.getString("host"),r=e.getOptionalString("apiBaseUrl"),n=e.getOptionalString("token")?.trim(),a=e.getOptionalString("username"),s=e.getOptionalString("password");if(!(0,i.HO)(t))throw Error(`Invalid Bitbucket Server integration config, '${t}' is not a valid host`);return r=r?(0,j.trimEnd)(r,"/"):`https://${t}/rest/api/1.0`,{host:t,apiBaseUrl:r,token:n,username:a,password:s,commitSigningKey:e.getOptionalString("commitSigningKey")}}class T{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t=(e.getOptionalConfigArray("integrations.bitbucketServer")??[]).map(E);return(0,i.oS)(t.map(e=>new T(e)),e=>e.config.host)};get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){let t=(0,i.ku)(e);if(e.lineNumber){let r=new URL(t);return r.hash=e.lineNumber.toString(),r.toString()}return t}resolveEditUrl(e){return e.includes("?")?e.substring(0,e.indexOf("?")):e}}function $(e){let t=e.getString("host"),r=e.getOptionalString("baseUrl"),n=e.getOptionalString("cloneUrl"),a=e.getOptionalBoolean("disableEditUrl"),s=e.getString("gitilesBaseUrl"),o=e.getOptionalString("username"),l=e.getOptionalString("password")?.trim();if((0,i.HO)(t)){if(r&&!(0,i.AY)(r))throw Error(`Invalid Gerrit integration config, '${r}' is not a valid baseUrl`);else if(n&&!(0,i.AY)(n))throw Error(`Invalid Gerrit integration config, '${n}' is not a valid cloneUrl`);else if(!(0,i.AY)(s))throw Error(`Invalid Gerrit integration config, '${s}' is not a valid gitilesBaseUrl`)}else throw Error(`Invalid Gerrit integration config, '${t}' is not a valid host`);return r=r?(0,j.trimEnd)(r,"/"):`https://${t}`,n=n?(0,j.trimEnd)(n,"/"):r,{host:t,baseUrl:r,cloneUrl:n,disableEditUrl:a,gitilesBaseUrl:s=(0,j.trimEnd)(s,"/"),username:o,password:l,commitSigningKey:e.getOptionalString("commitSigningKey")}}function R(e,t){let r=new URL(e.gitilesBaseUrl),i=new URL(t),n=(0,j.trimStart)(i.pathname.substring(2*!!i.pathname.startsWith("/a/")).replace(r.pathname,""),"/").split("/").filter(e=>!!e),a=(0,j.takeWhile)(n,e=>"+"!==e);if(0===a.length)throw Error(`Unable to parse gitiles url: ${t}`);let s=n.slice(a.length+1),o=(0,j.join)(a,"/");if(s.length>0&&"HEAD"===s[0]){let e=s.shift(),r=(0,j.join)(s,"/");return{project:o,ref:e,refType:"head",path:r||"/",basePath:(0,j.trimEnd)(t.replace(r,""),"/")}}if(s.length>0&&40===s[0].length){let e=s.shift(),r=(0,j.join)(s,"/");return{project:o,ref:e,refType:"sha",path:r||"/",basePath:(0,j.trimEnd)(t.replace(r,""),"/")}}let l=(0,j.join)(s,"/"),c=/^refs\/(?<refsReference>heads|tags)\/(?<ref>.*?)(\/|$)/.exec(l);if(c){let e,r=c[0],{refsReference:i,ref:n}=c.groups||{},a=l.replace(r,"");switch(i){case"heads":e="branch";break;case"tags":e="tag";break;default:throw Error(`Unable to parse gitiles url: ${t}`)}return{project:o,ref:n,refType:e,path:a||"/",basePath:(0,j.trimEnd)(t.replace(a,""),"/")}}throw Error(`Unable to parse gitiles : ${t}`)}r(1048).Buffer;class I{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t=(e.getOptionalConfigArray("integrations.gerrit")??[]).map($);return(0,i.oS)(t.map(e=>new I(e)),e=>e.config.host)};get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){let t,{url:r,base:i,lineNumber:n}=e;if(r.startsWith("/")){let{basePath:e}=R(this.config,i);return e+r}return t=r?new URL(r,i):new URL(i),n&&(t.hash=n.toString()),t.toString()}resolveEditUrl(e){var t,r,i,n;if(this.config.disableEditUrl)return e;let a=R(this.config,e);return t=this.config,r=a.project,i=a.ref,n=a.path,`${t.baseUrl}/admin/repos/edit/repo/${r}/branch/refs/heads/${i}/file/${(0,j.trimStart)(n,"/")}`}}var P=r(82619),O=r(64746);r(1048).Buffer;class N{constructor(e){this.config=e}static factory=({config:e})=>{let t=(e.getOptionalConfigArray("integrations.gitea")??[]).map(e=>(function(e){let t=e.getString("host"),r=e.getOptionalString("baseUrl"),n=e.getOptionalString("username"),a=e.getOptionalString("password")?.trim();if((0,i.HO)(t)){if(r&&!(0,i.AY)(r))throw Error(`Invalid Gitea integration config, '${r}' is not a valid baseUrl`)}else throw Error(`Invalid Gitea integration config, '${t}' is not a valid host`);return r=r?(0,j.trimEnd)(r,"/"):`https://${t}`,{host:t,baseUrl:r,username:n,password:a,commitSigningKey:e.getOptionalString("commitSigningKey")}})(e));return(0,i.oS)(t.map(e=>new N(e)),e=>e.config.host)};get type(){return"gitea"}get title(){return this.config.host}resolveUrl(e){return(0,i.ku)(e)}resolveEditUrl(e){let t;return t=function(e,t){let r=e.baseUrl??`https://${e.host}`;try{let[e,i,n,a,s,o,...l]=t.replace(r,"").split("/"),c=l.join("/").replace(/^\//,"");return{url:r,owner:i,name:n,ref:o,path:c}}catch(e){throw Error(`Incorrect URL: ${t}, ${e}`)}}(this.config,e),`${t.url}/${t.owner}/${t.name}/_edit/${t.ref}/${t.path}`}}class B{constructor(e){this.config=e}static factory=({config:e})=>{let t=(e.getOptionalConfigArray("integrations.harness")??[]).map(e=>(function(e){let t=e.getString("host"),r=e.getOptionalString("token"),n=e.getOptionalString("apiKey");if(!(0,i.HO)(t))throw Error(`Invalid Harness Code integration config, '${t}' is not a valid host`);return{host:t,apiKey:n,token:r}})(e));return(0,i.oS)(t.map(e=>new B(e)),e=>e.config.host)};get type(){return"harness"}get title(){return this.config.host}resolveUrl(e){return(0,i.ku)(e)}resolveEditUrl(e){let t;return t=function(e,t){let r=`https://${e.host}`;try{let e=new URL(t),i=e.pathname.split("/").filter(e=>""!==e),n=e.pathname.split("/"),a=i.findIndex(e=>"account"===e)+1,s=i[a],o=i.findIndex(e=>"orgs"===e),l=-1!==o?i[o+1]:"",c=i.findIndex(e=>"projects"===e),d=-1!==c?i[c+1]:"",u=i.findIndex((e,t)=>"repos"===e&&t>Math.max(a,o,c))+1,p=i[u],h=n.slice(n.findIndex(e=>"files"===e||"edit"===e)+1),g=h.findIndex(e=>"~"===e),m=h.slice(0,g).join("/"),f=-1!==g?h.slice(g+1).join("/").replace(/^\//,""):"";return{baseUrl:r,accountId:s,orgName:l,projectName:d,refString:m,path:f,repoName:p,refDashStr:h.slice(0,g).join("-"),branch:-1!==g?h.slice(0,g).join("/"):h.join("/")}}catch(e){throw Error(`Incorrect URL: ${t}, ${e}`)}}(this.config,e),`${t.baseUrl}/ng/account/${t.accountId}/module/code${""!==t.orgName?`/orgs/${t.orgName}`:""}${""!==t.projectName?`/projects/${t.projectName}`:""}/repos/${t.repoName}/files/${t.branch}/~/${t.path}`}}let U="blob.core.windows.net";function L(e){let t,r,i=e.getOptionalString("endpoint"),n=e.getString("accountName"),a=e.getOptionalString("accountKey")?.trim(),s=e.getOptionalString("sasToken")?.trim(),o=e.getOptionalString("connectionString")?.trim(),l=e.getOptionalString("endpointSuffix")?.trim();if(i){try{let e=new URL(i);t=e.host,r=e.pathname}catch{throw Error(`invalid azureBlobStorage integration config, endpoint '${i}' is not a valid URL`)}if("/"!==r)throw Error(`invalid azureBlobStorage integration config, endpoints cannot contain path, got '${i}'`)}else t=U;let c=e.has("aadCredential")?{clientId:e.getString("aadCredential.clientId"),tenantId:e.getString("aadCredential.tenantId"),clientSecret:e.getString("aadCredential.clientSecret")?.trim()}:void 0;if(a&&s)throw Error(`Invalid Azure Blob Storage config for ${n}: Both account key and SAS token cannot be used simultaneously.`);if(c&&(a||s))throw Error(`Invalid Azure Blob Storage config for ${n}: Cannot use both Azure AD credentials and account keys/SAS tokens for the same account.`);return{host:t,endpoint:i,accountName:n,accountKey:a,sasToken:s,connectionString:o,endpointSuffix:l,aadCredential:c}}class F{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t,r=((t=(e.getOptionalConfigArray("integrations.azureBlobStorage")??[]).map(L)).some(e=>e.host===U)||t.push({host:U}),t);return(0,i.oS)(r.map(e=>new F(e)),e=>e.config.host)};get type(){return"azureBlobStorage"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){return(0,i.ku)(e)}resolveEditUrl(e){return e}}r(33355);class z{byType;static fromConfig(e){return new z({awsS3:s.factory({config:e}),awsCodeCommit:l.factory({config:e}),azureBlobStorage:F.factory({config:e}),azure:m.factory({config:e}),bitbucket:C.factory({config:e}),bitbucketCloud:w.factory({config:e}),bitbucketServer:T.factory({config:e}),gerrit:I.factory({config:e}),github:P.U.factory({config:e}),gitlab:O._.factory({config:e}),gitea:N.factory({config:e}),harness:B.factory({config:e})})}constructor(e){this.byType=e}get awsS3(){return this.byType.awsS3}get awsCodeCommit(){return this.byType.awsCodeCommit}get azureBlobStorage(){return this.byType.azureBlobStorage}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}get harness(){return this.byType.harness}list(){return Object.values(this.byType).flatMap(e=>e.list())}byUrl(e){let t=Object.values(this.byType).map(t=>t.byUrl(e)).filter(Boolean);if(t.length>1){let e=t.filter(e=>!(e instanceof C));0!==e.length&&(t=e)}return t[0]}byHost(e){return Object.values(this.byType).map(t=>t.byHost(e)).find(Boolean)}resolveUrl(e){let t=this.byUrl(e.base);return t?t.resolveUrl(e):(0,i.ku)(e)}resolveEditUrl(e){let t=this.byUrl(e);return t?t.resolveEditUrl(e):e}}var M=r(28967);class D{static fromConfig(e){return z.fromConfig(e)}}let q=(0,M.y)({id:"integration.scmintegrations"})},82619:function(e,t,r){"use strict";r.d(t,{F:()=>d,U:()=>c});var i=r(21385),n=r(45250);let a="github.com",s="https://api.github.com",o="https://raw.githubusercontent.com";function l(e){let t=e.getOptionalString("host")??a,r=e.getOptionalString("apiBaseUrl"),l=e.getOptionalString("rawBaseUrl"),c=e.getOptionalString("token")?.trim(),d=e.getOptionalConfigArray("apps")?.map(e=>({appId:e.getNumber("appId"),clientId:e.getString("clientId"),clientSecret:e.getString("clientSecret"),webhookSecret:e.getOptionalString("webhookSecret"),privateKey:e.getString("privateKey"),allowedInstallationOwners:e.getOptionalStringArray("allowedInstallationOwners")}));if(!(0,i.HO)(t))throw Error(`Invalid GitHub integration config, '${t}' is not a valid host`);return r?r=(0,n.trimEnd)(r,"/"):t===a&&(r=s),l?l=(0,n.trimEnd)(l,"/"):t===a&&(l=o),{host:t,apiBaseUrl:r,rawBaseUrl:l,token:c,apps:d}}class c{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t,r=((t=(e.getOptionalConfigArray("integrations.github")??[]).map(l)).some(e=>e.host===a)||t.push({host:a,apiBaseUrl:s,rawBaseUrl:o}),t);return(0,i.oS)(r.map(e=>new c(e)),e=>e.config.host)};get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){return d((0,i.ku)(e),"tree")}resolveEditUrl(e){return d(e,"edit")}parseRateLimitInfo(e){return{isRateLimited:429===e.status||403===e.status&&"0"===e.headers.get("x-ratelimit-remaining")}}}function d(e,t){return e.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(e,r,i,n)=>`//${r}/${i}/${n}/${t}/`)}},64746:function(e,t,r){"use strict";r.d(t,{B:()=>c,_:()=>l});var i=r(21385),n=r(45250);let a="gitlab.com",s="https://gitlab.com/api/v4";function o(e){let t=e.getString("host"),r=e.getOptionalString("apiBaseUrl"),o=e.getOptionalString("token")?.trim(),l=e.getOptionalString("baseUrl");if(r?r=(0,n.trimEnd)(r,"/"):t===a&&(r=s),l=l?(0,n.trimEnd)(l,"/"):`https://${t}`,(0,i.HO)(t))if(r&&(0,i.AY)(r)){if(!(0,i.AY)(l))throw Error(`Invalid GitLab integration config, '${l}' is not a valid baseUrl`)}else throw Error(`Invalid GitLab integration config, '${r}' is not a valid apiBaseUrl`);else throw Error(`Invalid GitLab integration config, '${t}' is not a valid host`);return{host:t,token:o,apiBaseUrl:r,baseUrl:l,commitSigningKey:e.getOptionalString("commitSigningKey")}}class l{constructor(e){this.integrationConfig=e}static factory=({config:e})=>{let t,r=((t=(e.getOptionalConfigArray("integrations.gitlab")??[]).map(o)).some(e=>e.host===a)||t.push({host:a,apiBaseUrl:s,baseUrl:`https://${a}`}),t);return(0,i.oS)(r.map(e=>new l(e)),e=>e.config.host)};get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(e){return(0,i.ku)(e)}resolveEditUrl(e){return c(e,"edit")}}function c(e,t){return e.replace(/\/\-\/(blob|tree|edit)\//,`/-/${t}/`)}},21385:function(e,t,r){"use strict";r.d(t,{AY:()=>o,HO:()=>s,ku:()=>c,oS:()=>l});var i=r(52536),n=r.n(i),a=r(45250);function s(e){let t=new URL("http://example.com");return t.host=e,t.host===e}function o(e){try{return new URL(e),!0}catch{return!1}}function l(e,t){return{list:()=>e,byUrl(r){try{let i="string"==typeof r?new URL(r):r;return e.find(e=>t(e)===i.host)}catch{return}},byHost:r=>e.find(e=>t(e)===r)}}function c(e){let t,{url:r,base:i,lineNumber:s}=e;try{return new URL(r),r}catch{}if(r.startsWith("/")){let{href:e,filepath:s}=n()(i);t=new URL(e);let o=(0,a.trimEnd)(t.pathname.substring(0,t.pathname.length-s.length),"/");t.pathname=`${o}${r}`}else t=new URL(r,i);return t.search=new URL(i).search,s&&(t.hash=`L${s}`),t.toString()}},90338:function(e,t,r){"use strict";r.d(t,{P:()=>i});let i=(0,r(28967).y)({id:"plugin.api-docs.config"})},33346:function(e,t,r){"use strict";r.d(t,{Br:()=>k,pW:()=>S,Io:()=>E,l:()=>T,Rf:()=>j,hR:()=>w,aR:()=>C,Vw:()=>A});var i=r(31085),n=r(50809),a=r(45843),s=r(96504),o=r(90338),l=r(96872),c=r(14041);let d=(0,c.lazy)(()=>Promise.all([r.e("9866"),r.e("6937"),r.e("4484"),r.e("1694"),r.e("522"),r.e("5281")]).then(r.bind(r,38657)).then(e=>({default:e.AsyncApiDefinition}))),u=e=>(0,i.jsx)(c.Suspense,{fallback:(0,i.jsx)(l.k,{}),children:(0,i.jsx)(d,{...e})}),p=(0,c.lazy)(()=>r.e("2895").then(r.bind(r,98562)).then(e=>({default:e.GraphQlDefinition}))),h=e=>(0,i.jsx)(c.Suspense,{fallback:(0,i.jsx)(l.k,{}),children:(0,i.jsx)(p,{...e})}),g=(0,c.lazy)(()=>Promise.all([r.e("6937"),r.e("1694"),r.e("9339")]).then(r.bind(r,30838)).then(e=>({default:e.OpenApiDefinition}))),m=e=>{let t=e.supportedSubmitMethods?.map(e=>e.toLocaleLowerCase());return(0,i.jsx)(c.Suspense,{fallback:(0,i.jsx)(l.k,{}),children:(0,i.jsx)(g,{...e,supportedSubmitMethods:t})})};var f=r(62112),y=r(54917);let x=e=>{let t=(0,y.A)();return(0,i.jsx)(f.z,{customStyle:{backgroundColor:t.palette.background.default},text:e.definition,language:"protobuf",showCopyCodeButton:!0})},b=e=>{let{definition:t}=e,r=(0,y.A)();return(0,i.jsx)(f.z,{customStyle:{backgroundColor:r.palette.background.default},text:t,language:"typescript",showCopyCodeButton:!0})};var v=r(48534);let w=(0,n.i)({id:"api-docs",routes:{root:v.y},apis:[(0,a.b)({api:o.P,deps:{},factory:()=>{let e=[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:e=>(0,i.jsx)(m,{definition:e})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:e=>(0,i.jsx)(u,{definition:e})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:e=>(0,i.jsx)(h,{definition:e})},{type:"grpc",title:"gRPC",component:e=>(0,i.jsx)(x,{definition:e})},{type:"trpc",title:"tRPC",component:e=>(0,i.jsx)(b,{definition:e})}];return{getApiDefinitionWidget:t=>e.find(e=>e.type===t.spec.type)}}})],externalRoutes:{registerApi:v.J}}),j=w.provide((0,s.QJ)({name:"ApiExplorerPage",component:()=>Promise.all([r.e("4553"),r.e("9526"),r.e("9549")]).then(r.bind(r,21068)).then(e=>e.ApiExplorerIndexPage),mountPoint:v.y})),A=w.provide((0,s.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>r.e("231").then(r.bind(r,78682)).then(e=>e.ApiDefinitionCard)}})),k=w.provide((0,s.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>r.e("1702").then(r.bind(r,88293)).then(e=>e.ConsumedApisCard)}})),S=w.provide((0,s.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>r.e("9624").then(r.bind(r,71211)).then(e=>e.ConsumingComponentsCard)}})),C=w.provide((0,s.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>r.e("1702").then(r.bind(r,88293)).then(e=>e.ProvidedApisCard)}})),E=w.provide((0,s.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>r.e("9624").then(r.bind(r,71211)).then(e=>e.ProvidingComponentsCard)}})),T=w.provide((0,s.NC)({name:"EntityHasApisCard",component:{lazy:()=>r.e("1702").then(r.bind(r,88293)).then(e=>e.HasApisCard)}}))},48534:function(e,t,r){"use strict";r.d(t,{J:()=>s,y:()=>a});var i=r(77555),n=r(2488);let a=(0,i.H)({id:"api-docs"}),s=(0,n.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"})},71913:function(e,t,r){"use strict";r.d(t,{C4:()=>a,Nf:()=>s,tS:()=>o});var i=r(79701);let n="catalog-entity";(0,i.i)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:n});let a=(0,i.i)({name:"catalog.entity.create",attributes:{action:"create"}}),s=(0,i.i)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:n}),o=(0,i.i)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:n});(0,i.i)({name:"catalog.entity.validate",attributes:{}}),(0,i.i)({name:"catalog.location.read",attributes:{action:"read"}}),(0,i.i)({name:"catalog.location.create",attributes:{action:"create"}}),(0,i.i)({name:"catalog.location.analyze",attributes:{}}),(0,i.i)({name:"catalog.location.delete",attributes:{action:"delete"}})},81041:function(e,t,r){"use strict";r.d(t,{D:()=>i});let i=(0,r(28967).y)({id:"plugin.catalog-graph.service"})},76290:function(e,t,r){"use strict";r.d(t,{N:()=>g,e:()=>h});var i=r(96504),n=r(50809),a=r(45843),s=r(15496),o=r(81041),l=r(97214);let c=[l.fO,l.IB,l.Qz,l.Ey,l.fT,l.nC,l.zj,l.sA,l.u0,l.vv,l.L8,l.Kx,l.jn,l.ZD],d=[[l.L8,l.vv],[l.Ey,l.fO],[l.IB,l.ZD],[l.sA,l.jn],[l.Kx,l.Qz],[l.zj,l.u0],[l.nC,l.fT]];class u{knownRelations;knownRelationPairs;defaultRelations;constructor(e={knownRelations:c,knownRelationPairs:d,defaultRelationTypes:{exclude:[]}}){this.knownRelations=e.knownRelations??c,this.knownRelationPairs=e.knownRelationPairs??d;const t=e.defaultRelationTypes;Array.isArray(t.include)?this.defaultRelations=this.knownRelations.filter(e=>t.include.includes(e)):this.defaultRelations=this.knownRelations.filter(e=>!t.exclude.includes(e))}}let p=(0,n.i)({id:"catalog-graph",routes:{catalogGraph:s.c},externalRoutes:{catalogEntity:s.B},apis:[(0,a.b)({api:o.D,deps:{},factory:()=>new u})]}),h=p.provide((0,i.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>Promise.all([r.e("2557"),r.e("8338")]).then(r.bind(r,53113)).then(e=>e.CatalogGraphCard)}})),g=p.provide((0,i.QJ)({name:"CatalogGraphPage",component:()=>Promise.all([r.e("2557"),r.e("5761")]).then(r.bind(r,57336)).then(e=>e.CatalogGraphPage),mountPoint:s.c}))},49904:function(e,t,r){"use strict";r.d(t,{O:()=>i});let i={TOP_BOTTOM:"TB",BOTTOM_TOP:"BT",LEFT_RIGHT:"LR",RIGHT_LEFT:"RL"}},15496:function(e,t,r){"use strict";r.d(t,{B:()=>s,c:()=>a});var i=r(77555),n=r(2488);let a=(0,i.H)({id:"catalog-graph"}),s=(0,n.I)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0,defaultTarget:"catalog.catalogEntity"})},5336:function(e,t,r){"use strict";r.d(t,{g:()=>i});let i=(0,r(28967).y)({id:"plugin.catalog-import.service"})},3969:function(e,t,r){"use strict";function i(e){let{ref:t,...r}=e;return{inputRef:t,...r}}function n(e){return e.getOptionalString("catalog.import.entityFilename")??"catalog-info.yaml"}function a(e){return e.getOptionalString("catalog.import.pullRequestBranchName")??"backstage-integration"}r.d(t,{At:()=>a,J7:()=>n,eO:()=>i})},84815:function(e,t,r){"use strict";r.d(t,{Gn:()=>E,S5:()=>T});var i=r(77555),n=r(50809),a=r(45843),s=r(61617),o=r(95159),l=r(54195),c=r(96504),d=r(14146),u=r(59059),p=r(30043),h=r(5336),g=r(64402),m=r(52536),f=r.n(m),y=r(98813),x=r(3969),b=r(93584);async function v(e,t,r){let{owner:i,repo:n,title:a,body:s,fileContent:o,repositoryUrl:l,githubIntegrationConfig:c}=e,{token:d}=await t.getCredentials({url:l,additionalScope:{repoWrite:!0}}),u=new y.E({auth:d,baseUrl:c.apiBaseUrl}),p=(0,x.At)(r),h=(0,x.J7)(r),g=await u.repos.get({owner:i,repo:n}).catch(e=>{throw Error(w("Couldn't fetch repo data",e))}),m=await u.git.getRef({owner:i,repo:n,ref:`heads/${g.data.default_branch}`}).catch(e=>{throw Error(w("Couldn't fetch default branch data",e))});return await u.git.createRef({owner:i,repo:n,ref:`refs/heads/${p}`,sha:m.data.object.sha}).catch(e=>{throw Error(w(`Couldn't create a new branch with name '${p}'`,e))}),await u.repos.createOrUpdateFileContents({owner:i,repo:n,path:h,message:a,content:b.o4.encode(o),branch:p}).catch(e=>{throw Error(w(`Couldn't create a commit with ${h} file added`,e))}),{link:(await u.pulls.create({owner:i,repo:n,title:a,head:p,body:s,base:g.data.default_branch}).catch(e=>{throw Error(w(`Couldn't create a pull request for ${p} branch`,e))})).data.html_url,location:`https://${c.host}/${i}/${n}/blob/${g.data.default_branch}/${h}`}}function w(e,t){return`${e}, received http response status code ${t.status}: ${t.message}`}class j{createEndpoint=(e,t,r)=>{let i=new URL(`${this._options.tenantUrl}/${this._options.project}/_apis/git/repositories`);return i.pathname+=e,i.searchParams.set("api-version",t),Object.entries(r??{}).forEach(([e,t])=>i.searchParams.set(e,t)),i.toString()};_options;constructor(e){this._options=e}async get(e,t,r,i){let n=this.createEndpoint(e,t,r),a=await fetch(n,{headers:{Authorization:`Bearer ${i}`}});return a.ok?await a.json():a.json().then(e=>Promise.reject(Error(e.message)))}async post(e,t,r,i){let n=this.createEndpoint(e,t),a=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify(r)});return a.ok?await a.json():a.json().then(e=>Promise.reject(Error(e.message)))}async getRepository(e,t){return this.get(`/${e}`,"6.0",void 0,t)}async getDefaultBranch(e,t){let r=e.defaultBranch.replace("refs/",""),i=await this.get(`/${e.name}/refs`,"6.0",{filter:r},t);return i.value?.length?i.value[0]:Promise.reject(Error(`The requested ref '${r}' was not found`))}async pushNewBranch(e,t){let{sourceBranch:r,repoName:i}=e,n={refUpdates:[{name:`refs/heads/${e.branchName}`,oldObjectId:r.objectId}],commits:[{comment:e.title,changes:[{changeType:"add",item:{path:`/${e.fileName}`},newContent:{content:e.fileContent,contentType:"rawtext"}}]}]};return(await this.post(`/${i}/pushes`,"6.0",n,t)).refUpdates[0]}async createPullRequest(e,t){let{repoName:r,sourceName:i,targetName:n}=e,a={title:e.title,description:e.description,sourceRefName:i,targetRefName:n};return await this.post(`/${r}/pullrequests`,"6.0",a,t)}}async function A(e,t){let{title:r,repository:i,token:n,fileContent:a,fileName:s,branchName:o,description:l}=e,c=t??new j(e),d=await c.getRepository(i,n),u=await c.getDefaultBranch(d,n),p={title:r,repoName:d.name,sourceBranch:u,branchName:o,fileContent:a,fileName:s},h=await c.pushNewBranch(p,n),g={title:r,description:l,repoName:d.name,sourceName:h.name,targetName:u.name};return c.createPullRequest(g,n)}async function k(e,t,r){let{repositoryUrl:i,fileContent:n,title:a,body:s}=e,o=(0,x.At)(r),l=(0,x.J7)(r),{token:c}=await t.getCredentials({url:i,additionalScope:{repoWrite:!0}}),{tenantUrl:d,repoName:u,project:p}=function(e){let t,r,i,n,a,s,{org:o,repo:l,project:c,host:d}=(a=(n=new URL(e)).host,"_git"===(s=n.pathname.split("/").map(e=>decodeURIComponent(e)))[2]?(t=s[1],r=i=s[3]):"_git"===s[3]?(t=s[1],r=s[2],i=s[4]):"_git"===s[4]&&(a=`${a}/${s[1]}`,t=s[2],r=s[3],i=s[5]),{host:a,org:t,project:r,repo:i});if(!o||!l||!c)throw Error("Invalid AzureDevops Repository. Please use a valid repository url and try again ");return{tenantUrl:`https://${d}/${o}`,repoName:l,project:c}}(i),h=await A({token:c,fileContent:n,title:a,description:s,project:p,repository:u,branchName:o,tenantUrl:d,fileName:l}),g=`${h.repository.webUrl}?path=/${l}`;return{link:`${h.repository.webUrl}/pullrequest/${h.pullRequestId}`,location:g}}class S{discoveryApi;fetchApi;scmAuthApi;scmIntegrationsApi;catalogApi;configApi;constructor(e){this.discoveryApi=e.discoveryApi,this.scmAuthApi=e.scmAuthApi,this.fetchApi=e.fetchApi,this.scmIntegrationsApi=e.scmIntegrationsApi,this.catalogApi=e.catalogApi,this.configApi=e.configApi}async analyzeUrl(e){if(new URL(e).pathname.match(/\.ya?ml$/)||new URL(e).searchParams.get("path")?.match(/.ya?ml$/)){let t=await this.catalogApi.addLocation({type:"url",target:e,dryRun:!0});return{type:"locations",locations:[{exists:t.exists,target:t.location.target,entities:t.entities.map(e=>({kind:e.kind,namespace:e.metadata.namespace??"default",name:e.metadata.name}))}]}}let t=this.scmIntegrationsApi.byUrl(e);if(!(t&&["github","azure"].find(e=>e===t.type))){let e=(0,x.J7)(this.configApi);if(t)throw Error(`The ${t.title} integration only supports full URLs to ${e} files. Did you try to pass in the URL of a directory instead?`);throw Error(`This URL was not recognized as a valid git URL because there was no configured integration that matched the given host name. Currently GitHub and Azure DevOps are supported. You could try to paste the full URL to a ${e} file instead.`)}let r=await this.analyzeLocation({repo:e});return r.existingEntityFiles.length>0?{type:"locations",locations:Object.values(r.existingEntityFiles.reduce((e,t)=>(e[t.location.target]={target:t.location.target,exists:t.isRegistered,entities:[...t.location.target in e?e[t.location.target].entities:[],{name:t.entity.metadata.name,namespace:t.entity.metadata.namespace??"default",kind:t.entity.kind}]},e),{}))}:{type:"repository",integrationType:t.type,url:e,generatedEntities:r.generateEntities.map(e=>e.entity)}}async preparePullRequest(){let e=this.configApi.getOptionalString("app.title")??"Backstage",t=this.configApi.getString("app.baseUrl"),r=(0,x.J7)(this.configApi);return{title:`Add ${r} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${e} software catalog](${t}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(e){let{repositoryUrl:t,fileContent:r,title:i,body:n}=e;for(let e of g.Ay.parseAllDocuments(r)){let r=await this.catalogApi.validateEntity(e.toJS(),`url:${t}`);if(!r.valid)throw Error(r.errors[0].message)}let a=this.scmIntegrationsApi.byUrl(t);switch(a?.type){case"github":{let{config:e}=a,{name:s,owner:o}=f()(t);return v({githubIntegrationConfig:e,repo:s,owner:o,repositoryUrl:t,fileContent:r,title:i,body:n},this.scmAuthApi,this.configApi)}case"azure":return k({repositoryUrl:t,fileContent:r,title:i,body:n},this.scmAuthApi,this.configApi);default:throw Error("unimplemented!")}}async analyzeLocation(e){let t=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({location:{type:"url",target:e.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(e=>{throw Error(`Failed to generate entity definitions, ${e.message}`)});if(!t.ok)throw Error(`Failed to generate entity definitions. Received http response ${t.status}: ${t.statusText}`);return await t.json()}}let C=(0,i.H)({id:"catalog-import"}),E=(0,n.i)({id:"catalog-import",apis:[(0,a.b)({api:h.g,deps:{discoveryApi:s.I,scmAuthApi:d.$,fetchApi:o.a,scmIntegrationsApi:u.Y,catalogApi:p.v,configApi:l.U},factory:({discoveryApi:e,scmAuthApi:t,fetchApi:r,scmIntegrationsApi:i,catalogApi:n,configApi:a})=>new S({discoveryApi:e,scmAuthApi:t,scmIntegrationsApi:i,fetchApi:r,catalogApi:n,configApi:a})})],routes:{importPage:C}}),T=E.provide((0,c.QJ)({name:"CatalogImportPage",component:()=>r.e("8096").then(r.bind(r,20259)).then(e=>e.ImportPage),mountPoint:C}))},30043:function(e,t,r){"use strict";r.d(t,{v:()=>i});let i=(0,r(28967).y)({id:"plugin.catalog.service"})},91072:function(e,t,r){"use strict";r.d(t,{n:()=>i});let i=(0,r(28967).y)({id:"plugin.catalog.entity-presentation"})},96479:function(e,t,r){"use strict";r.d(t,{T:()=>o});var i=r(78560),n=r(55488),a=r(46123),s=r.n(a);function o(e,t){var r;let a,o,c,d,u,p,{kind:h,namespace:g,name:m,title:f,description:y,displayName:x,type:b}=function(e){if("string"==typeof e){let t=e.indexOf(":"),r=e.indexOf("/");-1!==r&&r<t&&(t=-1);let i=-1===t?void 0:e.slice(0,t);return{kind:i,namespace:-1===r?void 0:e.slice(t+1,r),name:e.slice(Math.max(t+1,r+1))}}if("object"==typeof e&&null!==e){let t=[s()(e,"kind")].find(l),r=[s()(e,"metadata.namespace"),s()(e,"namespace")].find(l),i=[s()(e,"metadata.name"),s()(e,"name")].find(l),n=[s()(e,"metadata.title")].find(l),a=[s()(e,"metadata.description")].find(l);return{kind:t,namespace:r,name:i,title:n,description:a,displayName:[s()(e,"spec.profile.displayName")].find(l),type:[s()(e,"spec.type")].find(l)}}return{}}(e),v=(0,i.U2)({kind:h||"unknown",namespace:g||n.oQ,name:m||"unknown"}),w=[x,f,(r={kind:h,namespace:g,name:m,context:t},a=r.kind?.toLocaleLowerCase("en-US")||"unknown",o=r.namespace||n.oQ,c=r.name||"unknown",d=r.context?.defaultKind?.toLocaleLowerCase("en-US"),u=r.context?.defaultNamespace?.toLocaleLowerCase("en-US"),p=c,(u&&o.toLocaleLowerCase("en-US")!==u||o!==n.oQ)&&(p=`${o}/${p}`),d&&a.toLocaleLowerCase("en-US")!==d&&(p=`${a}:${p}`),p)].find(e=>e&&"string"==typeof e),j=[w!==v?v:void 0,b,y].filter(e=>e&&"string"==typeof e).join(" | ");return{entityRef:v,primaryTitle:w,secondaryTitle:j||void 0,Icon:void 0}}let l=e=>!!e&&"string"==typeof e},27849:function(e,t,r){"use strict";r.d(t,{f:()=>l});var i=r(78560),n=r(18139),a=r(14041),s=r(91072),o=r(96479);function l(e,t){let r=(0,n.Q2)().get(s.n),l=[r,JSON.stringify(e),JSON.stringify(t||null)],c=(0,a.useMemo)(()=>{if(!r){let r=(0,o.T)(e,t);return{snapshot:r,promise:Promise.resolve(r)}}return r.forEntity("string"==typeof e||"metadata"in e?e:(0,i.U2)(e),t)},l);return function(e,t,r){let[i,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{n(e);let r=t?.subscribe({next:e=>{n(e)},complete:()=>{r?.unsubscribe()}});return()=>{r?.unsubscribe()}},r),i}(c.snapshot,c.update$,[c])}},9974:function(e,t,r){"use strict";r.d(t,{a:()=>i});let i=(0,r(28967).y)({id:"catalog-react.starred-entities"})},45809:function(e,t,r){"use strict";r.d(t,{d:()=>c});var i=r(31085),n=r(77125),a=r(71677),s=r(58837);r(46123);var o=r(27849);r(96403);let l=(0,s.A)(e=>({root:{display:"inline-flex",alignItems:"center",textDecoration:"inherit"},icon:{marginRight:e.spacing(.5),color:e.palette.text.secondary,"& svg":{verticalAlign:"middle"}}}),{name:"CatalogReactEntityDisplayName"}),c=e=>{let{entityRef:t,hideIcon:r,disableTooltip:s,defaultKind:c,defaultNamespace:d}=e,u=l(),{primaryTitle:p,secondaryTitle:h,Icon:g}=(0,o.f)(t,{defaultKind:c,defaultNamespace:d}),m=(0,i.jsx)(i.Fragment,{children:p});return m=(0,i.jsxs)(n.A,{component:"span",className:u.root,children:[g&&!r?(0,i.jsx)(n.A,{component:"span",className:u.icon,children:(0,i.jsx)(g,{fontSize:"inherit"})}):null,m]}),h&&!s&&(m=(0,i.jsx)(a.Ay,{enterDelay:1500,title:h,children:m})),m}},37281:function(e,t,r){"use strict";r.d(t,{z:()=>c});var i=r(31085),n=r(75202),a=r(72814),s=r(14041),o=r(20987),l=r(45809);let c=(0,s.forwardRef)((e,t)=>{var r;let{entityRef:s,defaultKind:c,defaultNamespace:d,title:u,children:p,hideIcon:h,disableTooltip:g,...m}=e,f=(r=e.entityRef,(0,a.S)(o.s)((0,o.$)(r,{encodeParams:!0}))),y=p??u??(0,i.jsx)(l.d,{entityRef:s,defaultKind:c,defaultNamespace:d,hideIcon:h,disableTooltip:g});return(0,i.jsx)(n.N_,{...m,ref:t,to:f,children:y})})},14158:function(e,t,r){"use strict";r.d(t,{i:()=>o});var i=r(31085),n=r(78560),a=r(14041),s=r(37281);function o(e){let{entityRefs:t,hideIcons:r,...o}=e;return(0,i.jsx)(i.Fragment,{children:t.map((e,t)=>{let l="string"==typeof e?e:(0,n.U2)(e);return(0,i.jsxs)(a.Fragment,{children:[t>0&&", ",(0,i.jsx)(s.z,{...o,entityRef:e,hideIcon:r})]},`${t}.${l}`)})})}},53318:function(e,t,r){"use strict";r.d(t,{S:()=>s,Z:()=>o});var i=r(55488),n=r(46123),a=r.n(n);function s(e,t){let r,n,a,s=t?.defaultKind;return"metadata"in e?(r=e.kind,n=e.metadata.namespace,a=e.metadata.name):(r=e.kind,n=e.namespace,a=e.name),(void 0===n||""===n)&&(n=i.oQ),t?.defaultNamespace!==void 0?t?.defaultNamespace===n&&(n=void 0):n===i.oQ&&(n=void 0),r=r.toLocaleLowerCase("en-US"),r=s&&s.toLocaleLowerCase("en-US")===r?void 0:r,`${r?`${r}:`:""}${n?`${n}/`:""}${a}`}function o(e,t){for(let t of["spec.profile.displayName","metadata.title"]){let r=a()(e,t);if(r&&"string"==typeof r)return r}return t}},86184:function(e,t,r){"use strict";r.d(t,{u:()=>p});var i=r(31085),n=r(78560),a=r(18139),s=r(14041);r(46123);var o=r(9974);function l(e){return"string"==typeof e?e:(0,n.U2)(e)}r(96403);var c=r(80084),d=r(10265),u=r(23730);let p=e=>{let{toggleStarredEntity:t,isStarredEntity:r}=function(e){let t=(0,a.gf)(o.a),[r,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let r=t.starredEntitie$().subscribe({next(t){i(t.has(l(e)))}});return()=>{r.unsubscribe()}},[e,t]),{toggleStarredEntity:(0,s.useCallback)(()=>t.toggleStarred(l(e)).then(),[e,t]),isStarredEntity:r}}(e.entity),{t:p}=(0,d.i)(c.j),h=p(r?"favoriteEntity.removeFromFavorites":"favoriteEntity.addToFavorites"),g=`favorite-${(0,n.U2)(e.entity).replace(/[^a-zA-Z0-9-_]/g,"-")}`;return(0,i.jsx)(u.v,{title:h,id:g,isFavorite:r,onToggle:t,...e})}},54674:function(e,t,r){"use strict";r.d(t,{o:()=>m});var i=r(31085),n=r(77125),a=r(64947),s=r(58837),o=r(72501),l=r(56711),c=r(62112),d=r(75202),u=r(10265),p=r(16400);r(14041),r(46343),r(40074),r(46123),r(96403);var h=r(80084);let g=(0,s.A)(e=>({code:{borderRadius:6,margin:e.spacing(2,0),background:"dark"===e.palette.type?"#444":e.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function m(e){var t;let r,s,m,f,y,x,b,v,{t:w}=(0,u.i)(h.j);try{r=(0,p.tN)().entity}catch(e){}let{annotation:j,readMoreUrl:A}=e,k=Array.isArray(j)?j:[j],S=g(),C=r?.kind||"Component",{yamlText:E,lineNumbers:T}=(t=r,s=t?.kind||"Component",m=t?.metadata.name||"example",f=t?.spec?.type||"website",y=t?.spec?.owner||"user:default/guest",x=`apiVersion: backstage.io/v1alpha1
kind: ${s}
metadata:
  name: ${m}
  annotations:${k.map(e=>`
    ${e}: value`).join("")}
spec:
  type: ${f}
  owner: ${y}`,b=6,v=[],k.forEach(()=>{v.push(b),b++}),{yamlText:x,lineNumbers:v});return(0,i.jsx)(l.p,{missing:"field",title:w("missingAnnotationEmptyState.title"),description:function(e,t="Component",r){let n=e.map(e=>(0,i.jsx)("code",{children:e},e)).reduce((e,t)=>(0,i.jsxs)(i.Fragment,{children:[e,", ",t]}));return r("missingAnnotationEmptyState.generateDescription",{count:e.length,entityKind:t,annotations:n})}(k,C,w),action:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A,{variant:"body1",children:w("missingAnnotationEmptyState.annotationYaml",{entityKind:C})}),(0,i.jsx)(n.A,{className:S.code,children:(0,i.jsx)(c.z,{text:E,language:"yaml",showLineNumbers:!0,highlightedNumbers:T,customStyle:{background:"inherit",fontSize:"115%"}})}),(0,i.jsx)(a.A,{color:"primary",component:d.N_,to:A||"https://backstage.io/docs/features/software-catalog/well-known-annotations",children:w("missingAnnotationEmptyState.readMore")})]})})}},16400:function(e,t,r){"use strict";r.d(t,{T7:()=>c,TY:()=>u,tN:()=>d});var i=r(31085),n=r(78560),a=r(19224),s=r(54852),o=r(4790);let l=(0,s.tK)("entity-context"),c=e=>{let{children:t,entity:r,loading:s,error:c,refresh:d}=e;return(0,i.jsx)(l.Provider,{value:(0,o.B)({1:{entity:r,loading:s,error:c,refresh:d}}),children:(0,i.jsx)(a.I,{attributes:{...r?{entityRef:(0,n.U2)(r)}:void 0},children:t})})};function d(){let e=(0,s.qO)("entity-context");if(!e)throw Error("Entity context is not available");let t=e.atVersion(1);if(!t)throw Error("EntityContext v1 not available");if(!t.entity)throw Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:t.entity}}function u(){let e=(0,s.qO)("entity-context");if(!e)throw Error("Entity context is not available");let t=e.atVersion(1);if(!t)throw Error("EntityContext v1 not available");let{entity:r,loading:i,error:n,refresh:a}=t;return{entity:r,loading:i,error:n,refresh:a}}},56299:function(e,t,r){"use strict";r.d(t,{A:()=>s});var i=r(78560),n=r(90712),a=r(16400);function s(e){let{entity:t,loading:r,error:s}=(0,a.TY)(),{allowed:o,loading:l,error:c}=(0,n.J)({permission:e,resourceRef:t?(0,i.U2)(t):void 0});return r||l?{loading:!0,allowed:!1}:s?{loading:!1,allowed:!1,error:s}:{loading:!1,allowed:o,error:c}}},20987:function(e,t,r){"use strict";r.d(t,{$:()=>o,s:()=>s});var i=r(78560),n=r(55488),a=r(77555);let s=(0,r(1952).Q)("catalog:entity-route-ref",()=>(0,a.H)({id:"catalog:entity",params:["namespace","kind","name"]}));function o(e,t){let r,a,s;if("string"==typeof e){let t=(0,i.KU)(e);r=t.kind,a=t.namespace,s=t.name}else"metadata"in e?(r=e.kind,a=e.metadata.namespace,s=e.metadata.name):(r=e.kind,a=e.namespace,s=e.name);r=r.toLocaleLowerCase("en-US"),a=a?.toLocaleLowerCase("en-US")??n.oQ;let{encodeParams:o=!1}=t||{};return o&&(r=encodeURIComponent(r),a=encodeURIComponent(a),s=encodeURIComponent(s)),{kind:r,namespace:a,name:s}}},80084:function(e,t,r){"use strict";r.d(t,{j:()=>i});let i=(0,r(48870).h)({id:"catalog-react",messages:{catalogFilter:{title:"Filters",buttonTitle:"Filters"},entityKindPicker:{title:"Kind",errorMessage:"Failed to load entity kinds"},entityLifecyclePicker:{title:"Lifecycle"},entityNamespacePicker:{title:"Namespace"},entityOwnerPicker:{title:"Owner"},entityProcessingStatusPicker:{title:"Processing Status"},entityTagPicker:{title:"Tags"},entityPeekAheadPopover:{title:"Drill into the entity to see all of the tags.",emailCardAction:{title:"Email {{email}}",subTitle:"mailto {{email}}",ariaLabel:"Email"},entityCardActionsAriaLabel:"Show",entityCardActionsTitle:"Show details"},entitySearchBar:{placeholder:"Search"},entityTypePicker:{title:"Type",errorMessage:"Failed to load entity types",optionAllTitle:"all"},favoriteEntity:{addToFavorites:"Add to favorites",removeFromFavorites:"Remove from favorites"},inspectEntityDialog:{title:"Entity Inspector",closeButtonTitle:"Close",ancestryPage:{title:"Ancestry",description:"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where {{processorsLink}} child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.",processorsLink:"processors emitted"},colocatedPage:{title:"Colocated",description:"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).",alertNoLocation:"Entity had no location information.",alertNoEntity:"There were no other entities on this location.",locationHeader:"At the same location",originHeader:"At the same origin"},jsonPage:{title:"Entity as JSON",description:"This is the raw entity data as received from the catalog, on JSON form."},overviewPage:{title:"Overview",relation:{title:"Relations"},status:{title:"Status"},identity:{title:"Identity"},metadata:{title:"Metadata"},annotations:"Annotations",labels:"Labels",tags:"Tags"},yamlPage:{title:"Entity as YAML",description:"This is the raw entity data as received from the catalog, on YAML form."},tabNames:{overview:"Overview",ancestry:"Ancestry",colocated:"Colocated",json:"Raw JSON",yaml:"Raw YAML"},tabsAriaLabel:"Inspector options"},unregisterEntityDialog:{title:"Are you sure you want to unregister this entity?",cancelButtonTitle:"Cancel",deleteButtonTitle:"Delete Entity",deleteEntitySuccessMessage:"Removed entity {{entityName}}",bootstrapState:{title:'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "{{location}}"). If you believe this is in error, please contact the {{appTitle}} integrator.',advancedDescription:"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.",advancedOptions:"Advanced Options"},onlyDeleteStateTitle:"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.",unregisterState:{title:"This action will unregister the following entities:",subTitle:"Located at the following location:",description:"To undo, just re-register the entity in {{appTitle}}.",unregisterButtonTitle:"Unregister Location",advancedOptions:"Advanced Options",advancedDescription:"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."},errorStateTitle:"Internal error: Unknown state"},userListPicker:{defaultOrgName:"Company",personalFilter:{title:"Personal",ownedLabel:"Owned",starredLabel:"Starred"},orgFilterAllLabel:"All"},entityTableColumnTitle:{name:"Name",system:"System",owner:"Owner",type:"Type",lifecycle:"Lifecycle",namespace:"Namespace",description:"Description",tags:"Tags",targets:"Targets",title:"Title",label:"Label",domain:"Domain"},missingAnnotationEmptyState:{title:"Missing Annotation",readMore:"Read more",annotationYaml:"Add the annotation to your {{entityKind}} YAML as shown in the highlighted example below:",generateDescription_one:"The annotation {{annotations}} is missing. You need to add the annotation to your {{entityKind}} if you want to enable this tool.",generateDescription_other:"The annotations {{annotations}} are missing. You need to add the annotations to your {{entityKind}} if you want to enable this tool."}}})},699:function(e,t,r){"use strict";r.d(t,{t:()=>n});var i=r(78560);function n(e,t,r){let n=e?.relations?.filter(e=>e.type===t).map(e=>(0,i.KU)(e.targetRef))||[];return r?.kind&&(n=n.filter(e=>e.kind.toLocaleLowerCase("en-US")===r.kind.toLocaleLowerCase("en-US"))),n}},58045:function(e,t,r){"use strict";r.d(t,{W:()=>i});let i=(0,r(48870).h)({id:"catalog",messages:{indexPage:{title:"{{orgName}} Catalog",createButtonTitle:"Create",supportButtonContent:"All your software catalog entities"},aboutCard:{title:"About",refreshButtonTitle:"Schedule entity refresh",editButtonTitle:"Edit Metadata",createSimilarButtonTitle:"Create something similar",refreshScheduledMessage:"Refresh scheduled",launchTemplate:"Launch Template",viewTechdocs:"View TechDocs",viewSource:"View Source",descriptionField:{label:"Description",value:"No description"},ownerField:{label:"Owner",value:"No Owner"},domainField:{label:"Domain",value:"No Domain"},systemField:{label:"System",value:"No System"},parentComponentField:{label:"Parent Component",value:"No Parent Component"},typeField:{label:"Type"},lifecycleField:{label:"Lifecycle"},tagsField:{label:"Tags",value:"No Tags"},targetsField:{label:"Targets"}},searchResultItem:{lifecycle:"Lifecycle",Owner:"Owner"},catalogTable:{warningPanelTitle:"Could not fetch catalog entities.",viewActionTitle:"View",editActionTitle:"Edit",starActionTitle:"Add to favorites",unStarActionTitle:"Remove from favorites"},dependencyOfComponentsCard:{title:"Dependency of components",emptyMessage:"No component depends on this component"},dependsOnComponentsCard:{title:"Depends on components",emptyMessage:"No component is a dependency of this component"},dependsOnResourcesCard:{title:"Depends on resources",emptyMessage:"No resource is a dependency of this component"},entityContextMenu:{copiedMessage:"Copied!",moreButtonTitle:"More",inspectMenuTitle:"Inspect entity",copyURLMenuTitle:"Copy entity URL",unregisterMenuTitle:"Unregister entity"},entityLabelsCard:{title:"Labels",emptyDescription:"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityLabels:{warningPanelTitle:"Entity not found",ownerLabel:"Owner",lifecycleLabel:"Lifecycle"},entityLinksCard:{title:"Links",emptyDescription:"No links defined for this entity. You can add links to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityNotFound:{title:"Entity was not found",description:"Want to help us build this? Check out our Getting Started documentation.",docButtonTitle:"DOCS"},deleteEntity:{dialogTitle:"Are you sure you want to delete this entity?",deleteButtonTitle:"Delete",cancelButtonTitle:"Cancel",description:"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."},entityProcessingErrorsDescription:"The error below originates from",entityRelationWarningDescription:"This entity has relations to other entities, which can't be found in the catalog.\n Entities not found are: ",hasComponentsCard:{title:"Has components",emptyMessage:"No component is part of this system"},hasResourcesCard:{title:"Has resources",emptyMessage:"No resource is part of this system"},hasSubcomponentsCard:{title:"Has subcomponents",emptyMessage:"No subcomponent is part of this component"},hasSubdomainsCard:{title:"Has subdomains",emptyMessage:"No subdomain is part of this domain"},hasSystemsCard:{title:"Has systems",emptyMessage:"No system is part of this domain"},relatedEntitiesCard:{emptyHelpLinkTitle:"Learn how to change this"},systemDiagramCard:{title:"System Diagram",description:"Use pinch & zoom to move around the diagram.",edgeLabels:{partOf:"part of",provides:"provides",dependsOn:"depends on"}}}})},88428:function(e,t,r){"use strict";r.d(t,{_:()=>tu});var i=r(31085),n=r(55488),a=r(97214),s=r(64398),o=r(82326),l=r(79182),c=r(14150),d=r(96872),u=r(62905),p=r(16454),h=r(99338),g=r(75202),m=r(85408),f=r(76888),y=r(77026),x=r(72814),b=r(18139),v=r(10265),w=r(45809),j=r(86184),A=r(699),k=r(14158),S=r(20987),C=r(16400),E=r(30043),T=r(37281),$=r(77125),R=r(64947),I=r(76891),P=r(93453),O=r(46805),N=r(61477),B=r(38605),U=r(74953),L=r(58837),F=r(14041),z=r(78560),M=r(99424),D=r(39371),q=r(47090),W=r(95208),H=r(59461),_=r(53373),G=r.n(_),K=r(18690),V=r(73466),Y=r(53318);let J=r(10437).A;function Q(e){let t,r,{kind:n,entityRef:a,...s}=e,o=(t=(0,W.n)(),(r=function(e,t){if(e)return e.toLocaleLowerCase("en-US");if(t)try{return(0,z.KU)(t).kind.toLocaleLowerCase("en-US")}catch{}}(n,a))&&t.getSystemIcon(`kind:${r}`)||J);return(0,i.jsx)(o,{...s})}var Z=r(80084);let X=(0,L.A)(e=>({node:{fill:e.palette.grey[300],stroke:e.palette.grey[300],"&.primary":{fill:e.palette.primary.light,stroke:e.palette.primary.light},"&.secondary":{fill:e.palette.secondary.light,stroke:e.palette.secondary.light}},text:{fill:e.palette.getContrastText(e.palette.grey[300]),"&.primary":{fill:e.palette.primary.contrastText},"&.secondary":{fill:e.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function ee({node:e}){let t=X(),r=(0,K.Zp)(),a=(0,x.S)(S.s),[s,o]=(0,F.useState)(0),[l,c]=(0,F.useState)(0),d=(0,W.n)(),u=(0,F.useRef)(null);(0,F.useLayoutEffect)(()=>{if(u.current){let{height:e,width:t}=u.current.getBBox();e=Math.round(e),t=Math.round(t),(e!==l||t!==s)&&(o(t),c(e))}},[s,l]);let p=d.getSystemIcon(`kind:${e.kind.toLocaleLowerCase("en-US")}`),h=p?l+10:0,g=l+20,m=e.metadata.title||(e.kind&&e.metadata.name&&e.metadata.namespace?(0,Y.S)({kind:e.kind,name:e.metadata.name,namespace:e.metadata.namespace||""}):e.id);return(0,i.jsxs)("g",{onClick:()=>{r(a({kind:e.kind,namespace:e.metadata.namespace||n.oQ,name:e.metadata.name}))},className:t.clickable,children:[(0,i.jsx)("rect",{className:G()(t.node,e.root?"secondary":"primary"),width:h+s+20,height:g,rx:10}),p&&(0,i.jsx)(Q,{kind:e.kind,y:10,x:10,width:l,height:l,className:G()(t.text,e.root?"secondary":"primary")}),(0,i.jsx)("text",{ref:u,className:G()(t.text,e.root?"secondary":"primary"),y:g/2,x:h+(s+20)/2,textAnchor:"middle",alignmentBaseline:"middle",children:m})]})}function et(e){let{loading:t,error:r,nodes:n,edges:a}=function(e){let t=(0,b.gf)(E.v),r=(0,z.U2)(e),{loading:i,error:n,value:a}=(0,V.A)(async()=>{let e=await t.getEntityAncestors({entityRef:r}),i=[],n=[];for(let t of e.items){let r=(0,z.U2)(t.entity),a=r===e.rootEntityRef;for(let e of(i.push({id:r,root:a,...t.entity}),t.parentEntityRefs))n.push({from:r,to:e})}return{nodes:i,edges:n}},[r]);return{loading:i,error:n,nodes:a?.nodes||[],edges:a?.edges||[]}}(e.entity),{t:s}=(0,v.i)(Z.j);return t?(0,i.jsx)(d.k,{}):r?(0,i.jsx)(M._,{error:r}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{variant:"h2",children:s("inspectEntityDialog.ancestryPage.title")}),(0,i.jsx)(H.A,{gutterBottom:!0,children:s("inspectEntityDialog.ancestryPage.description",{processorsLink:(0,i.jsx)(g.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity",children:s("inspectEntityDialog.ancestryPage.processorsLink")})})}),(0,i.jsx)($.A,{mt:4,children:(0,i.jsx)(D.w,{nodes:n,edges:a,renderNode:ee,direction:q.D.Direction.BOTTOM_TOP,zoom:"enable-on-click"})})]})}var er=r(98890),ei=r(58007),en=r(8109),ea=r(48209);r(46123);var es=r(40703),eo=r(48653),el=r(68804),ec=r(5951),ed=r(62261),eu=r(72501),ep=r(97262);let eh=(0,L.A)(e=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:e.spacing(2)},helpIcon:{marginLeft:e.spacing(1),color:e.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function eg(e){let t=eh();return(0,i.jsx)(ec.A,{...e,primaryTypographyProps:{className:t.monospace},secondaryTypographyProps:{className:t.monospace}})}function em(e){let t=eh();return(0,i.jsx)(ed.A,{className:t.monospace,children:e.children})}function ef(e){return(0,i.jsx)($.A,{mt:2,children:(0,i.jsx)(es.A,{variant:"outlined",children:(0,i.jsxs)(eo.A,{children:[(0,i.jsxs)(eu.A,{variant:"h6",gutterBottom:!0,children:[e.title,e.helpLink&&(0,i.jsx)(ex,{to:e.helpLink})]}),e.children]})})})}function ey(e){let[t,r]=e.entry,n=r.match(/^url:https?:\/\//)?r.slice(4):r.match(/^https?:\/\//)?r:void 0;return(0,i.jsxs)(en.A,{children:[e.indent&&(0,i.jsx)(el.A,{}),(0,i.jsx)(eg,{primary:t,secondary:n?(0,i.jsx)(g.N_,{to:n,children:r}):r})]})}function ex(e){let t=eh();return(0,i.jsx)(g.N_,{to:e.to,className:t.helpIcon,children:(0,i.jsx)(ep.default,{fontSize:"inherit"})})}let eb=(0,L.A)({root:{display:"flex",flexDirection:"column"}});function ev(e){return(0,i.jsxs)(ei.A,{dense:!0,children:[e.header&&(0,i.jsx)(ey,{entry:e.header},"header"),e.entities.map(e=>(0,i.jsx)(en.A,{children:(0,i.jsx)(eg,{primary:(0,i.jsx)(T.z,{entityRef:e})})},(0,z.U2)(e)))]})}function ew(e){let{entity:t}=e,{t:r}=(0,v.i)(Z.j),{loading:n,error:a,location:s,originLocation:o,colocatedEntities:l}=function(e){let t=(0,b.gf)(E.v),r=(0,z.U2)(e),i=e.metadata.annotations?.[er.Eo],n=e.metadata.annotations?.[er.r2],{loading:a,error:s,value:o}=(0,V.A)(async()=>i||n?(await t.getEntities({filter:[...i?[{[`metadata.annotations.${er.Eo}`]:i}]:[],...n?[{[`metadata.annotations.${er.r2}`]:n}]:[]]})).items:[],[i,n]);return{loading:a,error:s,location:i,originLocation:n,colocatedEntities:o?.filter(e=>(0,z.U2)(e)!==r)}}(t);if(n)return(0,i.jsx)(d.k,{});if(a)return(0,i.jsx)(M._,{error:a});if(!s&&!o)return(0,i.jsx)(ea.A,{severity:"warning",children:r("inspectEntityDialog.colocatedPage.alertNoLocation")});if(!l?.length)return(0,i.jsx)(ea.A,{severity:"info",children:r("inspectEntityDialog.colocatedPage.alertNoEntity")});if(s===o)return(0,i.jsx)(ev,{entities:l});let c=l.filter(e=>e.metadata.annotations?.[er.Eo]===s),u=l.filter(e=>e.metadata.annotations?.[er.r2]===o);return(0,i.jsxs)(i.Fragment,{children:[c.length>0&&(0,i.jsx)(ev,{entities:c,header:[r("inspectEntityDialog.colocatedPage.locationHeader"),s]}),u.length>0&&(0,i.jsx)(ev,{entities:u,header:[r("inspectEntityDialog.colocatedPage.originHeader"),o]})]})}function ej(e){let t=eb(),{t:r}=(0,v.i)(Z.j);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{variant:"h2",children:r("inspectEntityDialog.colocatedPage.title")}),(0,i.jsx)(H.A,{children:r("inspectEntityDialog.colocatedPage.description")}),(0,i.jsx)("div",{className:t.root,children:(0,i.jsx)(ew,{entity:e.entity})})]})}var eA=r(62112);function ek(e){return Object.fromEntries([...Object.entries(e)].sort((e,t)=>e[0]<t[0]?-1:1))}function eS(e){let{t}=(0,v.i)(Z.j);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{variant:"h2",children:t("inspectEntityDialog.jsonPage.title")}),(0,i.jsx)(H.A,{children:t("inspectEntityDialog.jsonPage.description")}),(0,i.jsx)(H.A,{children:(0,i.jsx)("div",{style:{fontSize:"75%"},"data-testid":"code-snippet",children:(0,i.jsx)(eA.z,{text:JSON.stringify(ek(e.entity),void 0,2),language:"json",showCopyCodeButton:!0})})})]})}var eC=r(65569),eE=r(87809),eT=r.n(eE),e$=r(40074),eR=r.n(e$),eI=r(31994);let eP=(0,L.A)({root:{display:"flex",flexDirection:"column"}});function eO(e){let t=eP(),{apiVersion:r,kind:n,metadata:a,spec:s,relations:o=[],status:l={}}=e.entity,c=eT()(eR()(o,e=>e.targetRef),"type"),{t:d}=(0,v.i)(Z.j),u=(0,z.U2)(e.entity);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{variant:"h2",children:d("inspectEntityDialog.overviewPage.title")}),(0,i.jsxs)("div",{className:t.root,children:[(0,i.jsx)(ef,{title:d("inspectEntityDialog.overviewPage.identity.title"),children:(0,i.jsxs)(ei.A,{dense:!0,children:[(0,i.jsx)(en.A,{children:(0,i.jsx)(eg,{primary:"apiVersion",secondary:r})}),(0,i.jsx)(en.A,{children:(0,i.jsx)(eg,{primary:"kind",secondary:n})}),s?.type&&(0,i.jsx)(en.A,{children:(0,i.jsx)(eg,{primary:"spec.type",secondary:s.type?.toString()})}),a.uid&&(0,i.jsxs)(en.A,{children:[(0,i.jsx)(eg,{primary:"uid",secondary:a.uid}),(0,i.jsx)(eC.A,{children:(0,i.jsx)(eI.l,{text:a.uid})})]}),a.etag&&(0,i.jsxs)(en.A,{children:[(0,i.jsx)(eg,{primary:"etag",secondary:a.etag}),(0,i.jsx)(eC.A,{children:(0,i.jsx)(eI.l,{text:a.etag})})]}),(0,i.jsxs)(en.A,{children:[(0,i.jsx)(eg,{primary:"entityRef",secondary:u}),(0,i.jsx)(eC.A,{children:(0,i.jsx)(eI.l,{text:u})})]})]})}),(0,i.jsxs)(ef,{title:d("inspectEntityDialog.overviewPage.metadata.title"),children:[!!Object.keys(a.annotations||{}).length&&(0,i.jsx)(ei.A,{dense:!0,subheader:(0,i.jsxs)(em,{children:[d("inspectEntityDialog.overviewPage.annotations"),(0,i.jsx)(ex,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"})]}),children:Object.entries(a.annotations).map(e=>(0,i.jsx)(ey,{indent:!0,entry:e},e[0]))}),!!Object.keys(a.labels||{}).length&&(0,i.jsx)(ei.A,{dense:!0,subheader:(0,i.jsx)(em,{children:d("inspectEntityDialog.overviewPage.labels")}),children:Object.entries(a.labels).map(e=>(0,i.jsx)(ey,{indent:!0,entry:e},e[0]))}),!!a.tags?.length&&(0,i.jsx)(ei.A,{dense:!0,subheader:(0,i.jsx)(em,{children:d("inspectEntityDialog.overviewPage.tags")}),children:a.tags.map((e,t)=>(0,i.jsxs)(en.A,{children:[(0,i.jsx)(el.A,{}),(0,i.jsx)(eg,{primary:e})]},`${e}-${t}`))})]}),!!o.length&&(0,i.jsx)(ef,{title:d("inspectEntityDialog.overviewPage.relation.title"),helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations",children:Object.entries(c).map(([e,t],r)=>(0,i.jsx)("div",{children:(0,i.jsx)(ei.A,{dense:!0,subheader:(0,i.jsx)(em,{children:e}),children:t.map(e=>(0,i.jsx)(en.A,{children:(0,i.jsx)(eg,{primary:(0,i.jsx)(T.z,{entityRef:e.targetRef})})},e.targetRef))})},r))}),!!l.items?.length&&(0,i.jsx)(ef,{title:d("inspectEntityDialog.overviewPage.status.title"),helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses",children:l.items.map((e,t)=>(0,i.jsxs)("div",{children:[(0,i.jsxs)(eu.A,{children:[e.level,": ",e.type]}),(0,i.jsx)($.A,{ml:2,children:e.message})]},t))})]})]})}var eN=r(64402);function eB(e){let{t}=(0,v.i)(Z.j);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{variant:"h2",children:t("inspectEntityDialog.yamlPage.title")}),(0,i.jsx)(H.A,{children:t("inspectEntityDialog.yamlPage.description")}),(0,i.jsx)(H.A,{children:(0,i.jsx)("div",{style:{fontSize:"75%"},"data-testid":"code-snippet",children:(0,i.jsx)(eA.z,{text:eN.Ay.stringify(ek(e.entity)),language:"yaml",showCopyCodeButton:!0})})})]})}let eU=(0,L.A)(e=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper},tabs:{borderRight:`1px solid ${e.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function eL(e){let{children:t,value:r,index:n,...a}=e,s=eU();return(0,i.jsx)("div",{role:"tabpanel",hidden:r!==n,id:`vertical-tabpanel-${n}`,"aria-labelledby":`vertical-tab-${n}`,className:s.tabContents,...a,children:r===n&&(0,i.jsx)($.A,{pl:3,pr:3,children:t})})}function eF(e){let t=eU(),{t:r}=(0,v.i)(Z.j),n=(0,F.useMemo)(()=>({overview:r("inspectEntityDialog.tabNames.overview"),ancestry:r("inspectEntityDialog.tabNames.ancestry"),colocated:r("inspectEntityDialog.tabNames.colocated"),json:r("inspectEntityDialog.tabNames.json"),yaml:r("inspectEntityDialog.tabNames.yaml")}),[r]),a=Object.keys(n),[s,o]=(0,F.useState)(ez(a,e.initialTab));return((0,F.useEffect)(()=>{ez(a,e.initialTab)},[e.open,e.initialTab,a]),e.entity)?(0,i.jsxs)(I.A,{fullWidth:!0,maxWidth:"xl",open:e.open,onClose:e.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:t.fullHeightDialog},children:[(0,i.jsx)(N.A,{id:"entity-inspector-dialog-title",children:r("inspectEntityDialog.title")}),(0,i.jsx)(O.A,{dividers:!0,children:(0,i.jsxs)("div",{className:t.root,children:[(0,i.jsx)(U.A,{orientation:"vertical",variant:"scrollable",value:s,onChange:(t,r)=>{o(r),e.onSelect?.(a[r])},"aria-label":r("inspectEntityDialog.tabsAriaLabel"),className:t.tabs,children:a.map((e,t)=>(0,i.jsx)(B.A,{label:n[e],...{id:`vertical-tab-${t}`,"aria-controls":`vertical-tabpanel-${t}`}},e))}),(0,i.jsx)(eL,{value:s,index:0,children:(0,i.jsx)(eO,{entity:e.entity})}),(0,i.jsx)(eL,{value:s,index:1,children:(0,i.jsx)(et,{entity:e.entity})}),(0,i.jsx)(eL,{value:s,index:2,children:(0,i.jsx)(ej,{entity:e.entity})}),(0,i.jsx)(eL,{value:s,index:3,children:(0,i.jsx)(eS,{entity:e.entity})}),(0,i.jsx)(eL,{value:s,index:4,children:(0,i.jsx)(eB,{entity:e.entity})})]})}),(0,i.jsx)(P.A,{children:(0,i.jsx)(R.A,{onClick:e.onClose,color:"primary",children:r("inspectEntityDialog.closeButtonTitle")})})]}):null}function ez(e,t){return t?e.indexOf(t):0}var eM=r(37197),eD=r(34477),eq=r(54195),eW=r(67457);let eH=(0,L.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),e_=({entity:e,onConfirm:t,onClose:r})=>{let n=(0,b.gf)(eD.k),a=(0,b.gf)(eq.U),s=eH(),o=function(e){let t=(0,b.gf)(E.v),r=e.metadata.annotations?.[er.r2],i=e.metadata.uid,n="bootstrap:bootstrap"===r,a=(0,V.A)(async()=>{let e,i=t.getLocationByRef(r);if(r){let i=`metadata.annotations.${er.r2}`;e=t.getEntities({filter:{[i]:r},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(e=>e.items)}else e=Promise.resolve([]);return Promise.all([i,e]).then(([e,t])=>({location:e,colocatedEntities:t}))},[t,e]),s=(0,F.useCallback)(async function(){let{location:e}=a.value;await t.removeLocationById(e.id)},[t,a]),o=(0,F.useCallback)(async function(){await t.removeEntityByUid(i)},[t,i]);if(n)return{type:"bootstrap",location:r,deleteEntity:o};let{loading:l,error:c,value:d}=a;if(l)return{type:"loading"};if(c)return{type:"error",error:c};let{location:u,colocatedEntities:p}=d;return u?{type:"unregister",location:r,colocatedEntities:p.map(z.sM),unregisterLocation:s,deleteEntity:o}:{type:"only-delete",deleteEntity:o}}(e),[l,c]=(0,F.useState)(!1),[u,p]=(0,F.useState)(!1),h=a.getOptionalString("app.title")??"Backstage",{t:g}=(0,v.i)(Z.j),m=(0,F.useCallback)(async function(){if("unregisterLocation"in o){p(!0);try{await o.unregisterLocation(),t()}catch(e){(0,eW.t)(e),n.post({message:e.message})}finally{p(!1)}}},[n,t,o]),f=(0,F.useCallback)(async function(){if("deleteEntity"in o){p(!0);try{await o.deleteEntity();let r=e.metadata.title??e.metadata.name;t(),n.post({message:g("unregisterEntityDialog.deleteEntitySuccessMessage",{entityName:r}),severity:"success",display:"transient"})}catch(e){(0,eW.t)(e),n.post({message:e.message})}finally{p(!1)}}},[n,t,o,e,g]),y=()=>(0,i.jsx)(P.A,{className:s.dialogActions,children:(0,i.jsx)(R.A,{onClick:r,color:"primary",children:g("unregisterEntityDialog.cancelButtonTitle")})});return"loading"===o.type?(0,i.jsx)(d.k,{}):"error"===o.type?(0,i.jsx)(M._,{error:o.error}):"bootstrap"===o.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ea.A,{severity:"info",children:g("unregisterEntityDialog.bootstrapState.title",{appTitle:h,location:o.location})}),(0,i.jsxs)($.A,{marginTop:2,children:[!l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.A,{variant:"text",size:"small",color:"primary",className:s.advancedButton,onClick:()=>c(!0),children:g("unregisterEntityDialog.bootstrapState.advancedOptions")}),(0,i.jsx)(y,{})]}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{children:g("unregisterEntityDialog.bootstrapState.advancedDescription")}),(0,i.jsx)(R.A,{variant:"contained",color:"secondary",disabled:u,onClick:f,children:g("unregisterEntityDialog.deleteButtonTitle")}),(0,i.jsx)(y,{})]})]})]}):"only-delete"===o.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{children:g("unregisterEntityDialog.onlyDeleteStateTitle")}),(0,i.jsx)(R.A,{variant:"contained",color:"secondary",disabled:u,onClick:f,children:g("unregisterEntityDialog.deleteButtonTitle")}),(0,i.jsx)(y,{})]}):"unregister"===o.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{children:g("unregisterEntityDialog.unregisterState.title")}),(0,i.jsx)(H.A,{component:"ul",children:o.colocatedEntities.map(e=>(0,i.jsx)("li",{children:(0,i.jsx)(T.z,{entityRef:e})},`${e.kind}:${e.namespace}/${e.name}`))}),(0,i.jsx)(H.A,{children:g("unregisterEntityDialog.unregisterState.subTitle")}),(0,i.jsx)(H.A,{component:"ul",children:(0,i.jsx)("li",{children:o.location})}),(0,i.jsx)(H.A,{children:g("unregisterEntityDialog.unregisterState.description",{appTitle:h})}),(0,i.jsxs)($.A,{marginTop:2,children:[(0,i.jsx)(R.A,{variant:"contained",color:"secondary",disabled:u,onClick:m,children:g("unregisterEntityDialog.unregisterState.unregisterButtonTitle")}),!l&&(0,i.jsx)($.A,{component:"span",marginLeft:2,children:(0,i.jsx)(R.A,{variant:"text",size:"small",color:"primary",className:s.advancedButton,onClick:()=>c(!0),children:g("unregisterEntityDialog.unregisterState.advancedOptions")})})]}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($.A,{paddingTop:4,paddingBottom:4,children:(0,i.jsx)(eM.A,{})}),(0,i.jsx)(H.A,{children:g("unregisterEntityDialog.unregisterState.advancedDescription")}),(0,i.jsx)(R.A,{variant:"contained",color:"secondary",disabled:u,onClick:f,children:g("unregisterEntityDialog.deleteButtonTitle")})]})]}):(0,i.jsx)(ea.A,{severity:"error",children:g("unregisterEntityDialog.errorStateTitle")})},eG=e=>{let{open:t,onConfirm:r,onClose:n,entity:a}=e,{t:s}=(0,v.i)(Z.j);return(0,i.jsxs)(I.A,{open:t,onClose:n,children:[(0,i.jsx)(N.A,{id:"responsive-dialog-title",children:s("unregisterEntityDialog.title")}),(0,i.jsx)(O.A,{children:(0,i.jsx)(e_,{entity:a,onConfirm:r,onClose:n})})]})};var eK=r(73657),eV=r(58045),eY=r(88549),eJ=r(26314),eQ=r(29365),eZ=r(26343),eX=r(28233),e0=r(55197),e1=r(71677),e5=r(85005),e2=r(71407),e3=r(56299),e4=r(71913),e8=r(92399);let e7=(0,F.forwardRef)((e,t)=>{let{unregisterEntityOptions:r,isUnregisterAllowed:n,onUnregisterEntity:a,onClose:s}=e,{t:o}=(0,v.i)(eV.W),l="boolean"==typeof r?.disableUnregister,c=(!n||(l?!!r?.disableUnregister:r?.disableUnregister==="disable"))??!1;return r?.disableUnregister!=="hidden"?(0,i.jsxs)(eZ.A,{ref:t,onClick:()=>{s(),a()},disabled:c,...e,children:[(0,i.jsx)(el.A,{children:(0,i.jsx)(e8.default,{fontSize:"small"})}),(0,i.jsx)(ec.A,{primary:o("entityContextMenu.unregisterMenuTitle")})]}):null});var e9=r(11688),e6=r(54852),te=r(4790);let tt=(0,e6.tK)("entity-context-menu-context"),tr=e=>{let{children:t,onMenuClose:r}=e;return(0,i.jsx)(tt.Provider,{value:(0,te.B)({1:{onMenuClose:r}}),children:t})},ti=(0,L.A)(e=>({button:{color:e.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function tn(e){let{UNSTABLE_extraContextMenuItems:t,UNSTABLE_contextMenuOptions:r,contextMenuItems:n,onUnregisterEntity:a,onInspectEntity:s}=e,{t:o}=(0,v.i)(eV.W),[l,c]=(0,F.useState)(),d=ti(),u=(0,e3.A)(e4.Nf).allowed,p=()=>{c(void 0)},h=(0,b.gf)(eD.k),[g,m]=(0,e9.A)();(0,F.useEffect)(()=>{!g.error&&g.value&&h.post({message:o("entityContextMenu.copiedMessage"),severity:"info",display:"transient"})},[g,h,o]);let f=t?.length?[...t.map(e=>(0,i.jsxs)(eZ.A,{onClick:()=>{p(),e.onClick()},children:[(0,i.jsx)(el.A,{children:(0,i.jsx)(e.Icon,{fontSize:"small"})}),(0,i.jsx)(ec.A,{primary:e.title})]},e.title)),(0,i.jsx)(eM.A,{},"the divider is here!")]:null,y=[(0,i.jsx)(e7,{unregisterEntityOptions:r,isUnregisterAllowed:u,onUnregisterEntity:a,onClose:p},"unregister-entity"),(0,i.jsxs)(eZ.A,{onClick:()=>{p(),s()},children:[(0,i.jsx)(el.A,{children:(0,i.jsx)(e5.default,{fontSize:"small"})}),(0,i.jsx)(ec.A,{primary:o("entityContextMenu.inspectMenuTitle")})]},"inspect-entity"),(0,i.jsxs)(eZ.A,{onClick:()=>{p(),m(window.location.toString())},children:[(0,i.jsx)(el.A,{children:(0,i.jsx)(eJ.default,{fontSize:"small"})}),(0,i.jsx)(ec.A,{primary:o("entityContextMenu.copyURLMenuTitle")})]},"copy-url")];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e1.Ay,{title:o("entityContextMenu.moreButtonTitle"),arrow:!0,children:(0,i.jsx)(eQ.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!l,role:"button",onClick:e=>{c(e.currentTarget)},"data-testid":"menu-button",className:d.button,id:"long-menu",children:(0,i.jsx)(e2.default,{})})}),(0,i.jsx)(e0.Ay,{open:!!l,onClose:p,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu",PaperProps:{style:{minWidth:200}},children:(0,i.jsxs)(eX.A,{autoFocusItem:!!l,children:[f,void 0===n?y:(0,i.jsx)(tr,{onMenuClose:p,children:n})]})})]})}let ta="plugin.catalog.entityLayoutRoute",ts=()=>null;function to(e){let{entity:t,title:r}=e;return(0,i.jsxs)($.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%",children:[(0,i.jsx)($.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",children:t?(0,i.jsx)(w.d,{entityRef:t,hideIcon:!0}):r}),t&&(0,i.jsx)(j.u,{entity:t})]})}function tl(e){let{entity:t}=e,r=(0,A.t)(t,a.vv),{t:n}=(0,v.i)(eV.W);return(0,i.jsxs)(i.Fragment,{children:[r.length>0&&(0,i.jsx)(s.S,{label:n("entityLabels.ownerLabel"),contentTypograpyRootComponent:"p",value:(0,i.jsx)(k.i,{entityRefs:r,defaultKind:"Group",color:"inherit"})}),t.spec?.lifecycle&&(0,i.jsx)(s.S,{label:n("entityLabels.lifecycleLabel"),value:t.spec.lifecycle?.toString()})]})}function tc(e=[],t=[]){for(let r of t){let t=e.find(e=>e.type===r);if(t)return t}return null}(0,m.h)(ts,ta,!0),(0,m.h)(ts,"core.gatherMountPoints",!0);let td=(0,L.A)(e=>({breadcrumbs:{color:e.page.fontColor,fontSize:e.typography.caption.fontSize,textTransform:"uppercase",marginTop:e.spacing(1),opacity:.8,"& span ":{color:e.page.fontColor,textDecoration:"underline",textUnderlineOffset:"3px"}}})),tu=e=>{let t,r,a,s,{UNSTABLE_extraContextMenuItems:m,UNSTABLE_contextMenuOptions:w,children:j,NotFoundComponent:A,parentEntityRelations:k}=e,$=td(),{kind:R,namespace:I,name:P}=(0,f.K)(S.s),{entity:O,loading:N,error:B}=(0,C.TY)(),U=(0,K.zy)(),L=(0,y.O)(j,e=>e.selectByComponentData({key:ta,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:e})=>O?e.if&&!e.if(O)?[]:[{path:e.path,title:e.title,children:e.children,tabProps:e.tabProps}]:[]),[O]),{headerTitle:z,headerType:M}=(t=R??O?.kind??"",r=I??O?.metadata.namespace??"",a=O?.metadata.title??P??O?.metadata.name??"",{headerTitle:`${a}${r&&r!==n.oQ?` in ${r}`:""}`,headerType:(s=t.toLocaleLowerCase("en-US"),O&&O.spec&&"type"in O.spec&&(s+="  ",s+=O.spec.type.toLocaleLowerCase("en-US")),s)}),[D,q]=(0,F.useState)(!1),W=(0,K.Zp)(),[H,_]=(0,eK.ok)(),G=(0,x.S)(eY.rQ),Y=(0,x.S)(eY.pS),{t:J}=(0,v.i)(eV.W),Q=async()=>{q(!1),W(Y?Y():G())},Z=tc(O?.relations??[],k??[]),X=(0,b.gf)(E.v),{value:ee}=(0,V.A)(async()=>Z?tc((await X.getEntityByRef(Z?.targetRef))?.relations,k):null,[Z]);(0,F.useEffect)(()=>{q(!1)},[U.pathname]);let et=H.get("inspect");return(0,i.jsxs)(o.Y,{themeId:O?.spec?.type?.toString()??"home",children:[(0,i.jsx)(l.Y,{title:(0,i.jsx)(to,{title:z,entity:O}),pageTitleOverride:z,type:M,subtitle:Z&&(0,i.jsxs)(c.B,{separator:">",className:$.breadcrumbs,children:[ee&&(0,i.jsx)(T.z,{entityRef:ee.targetRef,disableTooltip:!0}),(0,i.jsx)(T.z,{entityRef:Z.targetRef,disableTooltip:!0}),P]}),children:O&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tl,{entity:O}),(0,i.jsx)(tn,{UNSTABLE_extraContextMenuItems:m,UNSTABLE_contextMenuOptions:w,onUnregisterEntity:()=>q(!0),onInspectEntity:()=>{_(e=>{let t=new URLSearchParams(e);return t.set("inspect",""),t})}})]})}),N&&(0,i.jsx)(d.k,{}),O&&(0,i.jsx)(u.k,{routes:L}),B&&(0,i.jsx)(p.U,{children:(0,i.jsx)(ea.A,{severity:"error",children:B.toString()})}),!N&&!B&&!O&&(0,i.jsx)(p.U,{children:A||(0,i.jsxs)(h.B,{title:J("entityLabels.warningPanelTitle"),children:["There is no ",R," with the requested"," ",(0,i.jsx)(g.N_,{to:"https://backstage.io/docs/features/software-catalog/references",children:"kind, namespace, and name"}),"."]})}),"string"==typeof et&&(0,i.jsx)(eF,{entity:O,initialTab:et||void 0,onSelect:e=>_(t=>{let r=new URLSearchParams(t);return r.set("inspect",e),r}),open:!0,onClose:()=>_(e=>{let t=new URLSearchParams(e);return t.delete("inspect"),t})}),(0,i.jsx)(eG,{open:D,entity:O,onConfirm:Q,onClose:()=>q(!1)})]})};tu.Route=ts},19246:function(e,t,r){"use strict";r.d(t,{B:()=>w,k:()=>j});var i=r(31085),n=r(16400),a=r(48209),s=r(14041),o=r(18690),l=r(30043),c=r(64947),d=r(76891),u=r(93453),p=r(61477),h=r(18139),g=r(34477),m=r(67457),f=r(58045),y=r(10265);function x(e){let{open:t,onClose:r,onConfirm:n,entity:a}=e,[o,x]=(0,s.useState)(!1),b=(0,h.gf)(l.v),v=(0,h.gf)(g.k),{t:w}=(0,y.i)(f.W),j=async()=>{x(!0);try{let e=a.metadata.uid;await b.removeEntityByUid(e),n()}catch(e){(0,m.t)(e),v.post({message:e.message})}finally{x(!1)}};return(0,i.jsxs)(d.A,{open:t,onClose:r,children:[(0,i.jsx)(p.A,{id:"responsive-dialog-title",children:w("deleteEntity.dialogTitle")}),(0,i.jsxs)(u.A,{children:[(0,i.jsx)(c.A,{variant:"contained",color:"secondary",disabled:o,onClick:j,children:w("deleteEntity.deleteButtonTitle")}),(0,i.jsx)(c.A,{onClick:r,color:"primary",children:w("deleteEntity.cancelButtonTitle")})]})]})}var b=r(72814),v=r(88549);function w(e){return e?.metadata?.annotations?.["backstage.io/orphan"]==="true"}function j(){let e=(0,o.Zp)(),t=(0,b.S)(v.rQ),[r,l]=(0,s.useState)(!1),{entity:c}=(0,n.tN)(),{t:d}=(0,y.i)(f.W),u=async()=>{l(!1),e(t())};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{severity:"warning",onClick:()=>l(!0),children:d("deleteEntity.description")}),(0,i.jsx)(x,{open:r,entity:c,onConfirm:u,onClose:()=>l(!1)})]})}},54583:function(e,t,r){"use strict";r.d(t,{s:()=>f,k:()=>y});var i=r(31085),n=r(78560),a=r(30043),s=r(16400),o=r(37281),l=r(77125),c=r(99424),d=r(18139),u=r(73466),p=r(58045),h=r(10265);let g=e=>e.error&&"error"===e.level&&"backstage.io/catalog-processing"===e.type;async function m(e,t){return{items:(await t.getEntityAncestors({entityRef:e})).items.map(e=>({errors:(e.entity.status?.items??[]).filter(g).map(e=>e.error).filter(e=>!!e),entity:e.entity})).filter(e=>e.errors.length>0)}}async function f(e,t){let r=t.apis.get(a.v);if(!r)throw Error(`No implementation available for ${a.v}`);return(await m((0,n.U2)(e),r)).items.length>0}function y(){let{entity:e}=(0,s.tN)(),t=(0,n.U2)(e),r=(0,d.gf)(a.v),{loading:g,error:f,value:y}=(0,u.A)(async()=>m(t,r),[t,r]),{t:x}=(0,h.i)(p.W);return f?(0,i.jsx)(l.A,{mb:1,children:(0,i.jsx)(c._,{error:f})}):g||!y?null:(0,i.jsx)(i.Fragment,{children:y.items.map((t,r)=>(0,i.jsxs)(l.A,{mb:1,children:[(0,n.U2)(e)!==(0,n.U2)(t.entity)&&(0,i.jsxs)(l.A,{p:1,children:[x("entityProcessingErrorsDescription")," ",(0,i.jsx)(o.z,{entityRef:t.entity})]}),t.errors.map((e,t)=>(0,i.jsx)(c._,{error:e},t))]},r))})}},78183:function(e,t,r){"use strict";r.d(t,{G:()=>m,e:()=>g});var i=r(31085),n=r(30043),a=r(16400),s=r(48209),o=r(73466),l=r(77125),c=r(99424),d=r(18139),u=r(58045),p=r(10265);async function h(e,t){let r=e.relations?.map(e=>e.targetRef);if(!r||r?.length<1||r.length>1e3)return[];let i=await t.getEntitiesByRefs({entityRefs:r,fields:["kind","metadata.name","metadata.namespace"]});return r.filter((e,t)=>void 0===i.items[t])}async function g(e,t){let r=t.apis.get(n.v);if(!r)throw Error(`No implementation available for ${n.v}`);return(await h(e,r)).length>0}function m(){let{entity:e}=(0,a.tN)(),t=(0,d.gf)(n.v),{loading:r,error:g,value:m}=(0,o.A)(async()=>h(e,t),[e,t]),{t:f}=(0,p.i)(u.W);return g?(0,i.jsx)(l.A,{mb:1,children:(0,i.jsx)(c._,{error:g})}):r||!m||0===m.length?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.A,{severity:"warning",style:{whiteSpace:"pre-line"},children:[f("entityRelationWarningDescription")," ",m.join(", ")]})})}},41507:function(e,t,r){"use strict";r.d(t,{m:()=>u});var i=r(31085),n=r(16400),a=r(85408),s=r(18139),o=r(77026),l=r(73466);let c="core.backstage.entitySwitch",d=e=>null;(0,a.h)(d,c,!0);let u=e=>{let{entity:t,loading:r}=(0,n.TY)(),a=(0,s.Q2)(),l=(0,o.O)(e.children,e=>e.selectByComponentData({key:c,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(e=>{if(r&&!t)return[];let{if:i,children:n}=e.props;return t?[{if:i?.(t,{apis:a}),children:n}]:[{if:void 0===i,children:n}]}),[a,t,r]);if(l.some(e=>"object"==typeof e.if&&"then"in e.if))return(0,i.jsx)(p,{results:l,renderMultipleMatches:e.renderMultipleMatches});if("all"===e.renderMultipleMatches){let e=l.filter(e=>e.if).map(e=>e.children);return 0===e.length?h(l):(0,i.jsx)(i.Fragment,{children:e})}return l.find(e=>e.if)?.children??h(l)};function p({results:e,renderMultipleMatches:t}){let{loading:r,value:n}=(0,l.A)(async()=>{let r=e.map(async({if:e,children:t})=>{try{if(await e)return t}catch{}return null});if("all"===t){let t=(await Promise.all(r)).filter(Boolean);return 0===t.length?h(e):(0,i.jsx)(i.Fragment,{children:t})}return(await Promise.all(r)).find(Boolean)??h(e)},[e]);return r||!n?null:n}function h(e){return e.filter(e=>void 0===e.if)[0]?.children??null}u.Case=d},85294:function(e,t,r){"use strict";function i(e,t){return!!(e&&"string"==typeof e&&e?.toLocaleLowerCase("en-US")===t?.toLocaleLowerCase("en-US"))}function n(e,t){return"string"==typeof t?i(e,t):0===t.length||t.some(t=>i(e,t))}function a(e){return o({kind:e})}function s(e){return o({kind:"component",type:e})}function o(e){return t=>(!e.kind||!!n(t.kind,e.kind))&&(!e.type||!!n(t.spec?.type,e.type))}r.d(t,{VF:()=>a,Wm:()=>s})},36138:function(e,t,r){"use strict";r.d(t,{E:()=>en,Sz:()=>ee,JF:()=>ea,yE:()=>et,N8:()=>X,XQ:()=>J,Z9:()=>Y,sU:()=>es,TZ:()=>Z,yP:()=>er,yW:()=>Q,bb:()=>ei});var i=r(78560),n=r(79112),a=r(53317),s=r(24259),o=r(10288),l=r.n(o);let c="catalog";var d=r(94214);class u{discoveryApi;fetchApi;constructor(e){this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi||{fetch:l()}}async deleteEntityByUid(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entities/by-uid/{uid}").expand({uid:e.path.uid});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"DELETE"})}async getEntities(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...e.query});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getEntitiesByQuery(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entities/by-query{?fields,limit,offset,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...e.query});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getEntitiesByRefs(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entities/by-refs{?filter*}").expand({...e.query});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async getEntityAncestryByName(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:e.path.kind,namespace:e.path.namespace,name:e.path.name});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getEntityByName(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:e.path.kind,namespace:e.path.namespace,name:e.path.name});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getEntityByUid(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entities/by-uid/{uid}").expand({uid:e.path.uid});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getEntityFacets(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/entity-facets{?facet*,filter*}").expand({...e.query});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async refreshEntity(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/refresh").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async validateEntity(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async analyzeLocation(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async createLocation(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/locations{?dryRun}").expand({...e.query});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async deleteLocation(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/locations/{id}").expand({id:e.path.id});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"DELETE"})}async getLocation(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/locations/{id}").expand({id:e.path.id});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getLocationByEntity(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:e.path.kind,namespace:e.path.namespace,name:e.path.name});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getLocations(e,t){let r=await this.discoveryApi.getBaseUrl(c),i=d.parse("/locations").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}}class p{apiClient;constructor(e){this.apiClient=new u(e)}async getEntityAncestors(e,t){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,i.KU)(e.entityRef)},t))}async getLocations(e,t){return{items:(await this.requestRequired(await this.apiClient.getLocations(e??{},t))).map(e=>e.data)}}async getLocationById(e,t){return await this.requestOptional(await this.apiClient.getLocation({path:{id:e}},t))}async getLocationByEntity(e,t){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,i.KU)(e)},t))}async getEntities(e,t){let{filter:r=[],fields:i=[],order:n,offset:a,limit:s,after:o}=e??{},l=[];if(n)for(let e of[n].flat())e&&l.push(`${e.order}:${e.field}`);return{items:await this.requestRequired(await this.apiClient.getEntities({query:{fields:i,limit:s,filter:this.getFilterValue(r),offset:a,after:o,order:n?l:void 0}},t))}}async getEntitiesByRefs(e,t){let r,i=async r=>{let i=await this.apiClient.getEntitiesByRefs({body:{entityRefs:r,fields:e.fields},query:{filter:this.getFilterValue(e.filter)}},t);if(!i.ok)throw await a.o.fromResponse(i);return(await i.json()).items.map(e=>e??void 0)};for(let t of function(e,t){if(!e.length)return[];let{maxCountPerChunk:r=1e3,maxStringLengthPerChunk:i=92160,extraStringLengthPerRef:n=3}={},a=[],s=0,o=0,l=0;for(let t=0;t<e.length;++t){let c=e[t].length+n;l>0&&(o+c>i||l+1>r)&&(a.push(e.slice(s,t)),s=t,o=0,l=0),o+=c,l+=1}return a.push(e.slice(s,e.length)),a}(e.entityRefs)){let e=await i(t);r?r.push(...e):r=e}return{items:r??[]}}async queryEntities(e={},t){let r={};if(e.cursor){let{fields:t=[],limit:i,cursor:n}=e;r.cursor=n,void 0!==i&&(r.limit=i),t.length&&(r.fields=t)}else{let{fields:t=[],filter:i,limit:n,offset:a,orderFields:s,fullTextFilter:o}=e;r.filter=this.getFilterValue(i),void 0!==n&&(r.limit=n),void 0!==a&&(r.offset=a),void 0!==s&&(r.orderField=(Array.isArray(s)?s:[s]).map(({field:e,order:t})=>`${e},${t}`)),t.length&&(r.fields=t);let l=o?.term?.trim();l&&(r.fullTextFilterTerm=l),o?.fields?.length&&(r.fullTextFilterFields=o.fields)}return this.requestRequired(await this.apiClient.getEntitiesByQuery({query:r},t))}async getEntityByRef(e,t){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,i.KU)(e)},t))}async getEntityByName(e,t){let{kind:r,namespace:i="default",name:n}=e;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:r,namespace:i,name:n}},t))}async refreshEntity(e,t){let r=await this.apiClient.refreshEntity({body:{entityRef:e}},t);if(200!==r.status)throw await a.o.fromResponse(r)}async getEntityFacets(e,t){let{filter:r=[],facets:i}=e;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:i,filter:this.getFilterValue(r)}},t))}async addLocation(e,t){let{type:r="url",target:i,dryRun:n}=e,s=await this.apiClient.createLocation({body:{type:r,target:i},query:{dryRun:n?"true":void 0}},t);if(201!==s.status)throw await a.o.fromResponse(s);let{location:o,entities:l,exists:c}=await s.json();if(!o)throw Error(`Location wasn't added: ${i}`);return{location:o,entities:l,exists:c}}async getLocationByRef(e,t){return(await this.requestRequired(await this.apiClient.getLocations({},t))).map(e=>e.data).find(t=>e===(0,n.KL)(t))}async removeLocationById(e,t){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:e}},t))}async removeEntityByUid(e,t){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:e}},t))}async validateEntity(e,t,r){let i=await this.apiClient.validateEntity({body:{entity:e,location:t}},r);if(i.ok)return{valid:!0};if(400!==i.status)throw await a.o.fromResponse(i);let{errors:n=[]}=await i.json();return{valid:!1,errors:n}}async analyzeLocation(e,t){let r=await this.apiClient.analyzeLocation({body:e},t);if(200!==r.status)throw await a.o.fromResponse(r);return r.json()}async *streamEntities(e,t){let r,i=e?.pageSize??500;do{let n=await this.queryEntities(r?{...e,cursor:r,limit:i}:{...e,limit:i},t);yield n.items,r=n.pageInfo.nextCursor}while(r)}async requestIgnored(e){if(!e.ok)throw await a.o.fromResponse(e)}async requestRequired(e){if(!e.ok)throw await a.o.fromResponse(e);return e.json()}async requestOptional(e){if(!e.ok){if(404===e.status)return;throw await a.o.fromResponse(e)}return await e.json()}getFilterValue(e=[]){let t=[];for(let r of[e].flat()){let e=[];for(let[t,i]of Object.entries(r))for(let r of[i].flat())r===s.c?e.push(t):"string"==typeof r&&e.push(`${t}=${r}`);e.length&&t.push(e.join(","))}return t}}var h=r(30043),g=r(9974),m=r(91072),f=r(20987),y=r(88549),x=r(50809),b=r(45843),v=r(61617),w=r(95159),j=r(83392),A=r(96504),k=r(87402);function S(e){let{years:t=0,months:r=0,weeks:i=0,days:n=0,hours:a=0,minutes:s=0,seconds:o=0,milliseconds:l=0}=e;return 1e3*(60*(60*(24*(365*t+30*r+7*i+n)+a)+s)+o)+l}var C=r(25033),E=r.n(C),T=r(96403),$=r.n(T),R=r(96479),I=r(14451),P=r(94389),O=r(17400),N=r(71865),B=r(52755),U=r(89350),L=r(33602),F=r(48108),z=r(55700);let M={seconds:10},D={milliseconds:50},q={api:O.default,component:U.default,system:P.default,resource:z.default,domain:I.default,location:B.default,user:F.default,group:L.default,template:N.default};function W(e){return{async:e.async,render:({entityRef:t,entity:r,context:i})=>({snapshot:(0,R.T)(r||t,i),loadEntity:e.async})}}class H extends Map{#L;#F=new Map;constructor(e){super(),this.#L=e}set(e,t){let r=super.set(e,t);return this.#F.set(e,Date.now()),r}get(e){if(!this.has(e))return;let t=this.#F.get(e);return Date.now()-t>this.#L?void this.delete(e):super.get(e)}delete(e){return this.#F.delete(e),super.delete(e)}clear(){return this.#F.clear(),super.clear()}}class _{static createLocal(){return new _({renderer:W({async:!1})})}static create(e){return new _(e)}#z;#M;#g;#D;#q;constructor(e){const t=e.cacheTtl??M,r=e.batchDelay??D,i=e.renderer??W({async:!0}),n={};if(Object.entries(q).forEach(([e,t])=>{n[e.toLocaleLowerCase("en-US")]=t}),Object.entries(e.kindIcons??{}).forEach(([e,t])=>{n[e.toLocaleLowerCase("en-US")]=t}),i.async){if(!e.catalogApi)throw TypeError("Asynchronous rendering requires a catalog API");this.#g=this.#W({cacheTtl:t,batchDelay:r,renderer:i,catalogApi:e.catalogApi})}this.#M=S(t),this.#z=new Map,this.#D=n,this.#q=i}forEntity(e,t){let r,{entityRef:i,kind:n,entity:a,needsLoad:s}=this.#H(e),o=e=>{let{snapshot:r}=this.#q.render({entityRef:i,loading:e.loading,entity:e.entity,context:t||{}});return{...r,entityRef:i,Icon:this.#_(r.Icon,n)}};try{r=o({loading:s,entity:a})}catch{r={primaryTitle:i,entityRef:i}}if(!s)return{snapshot:r,promise:Promise.resolve(r)};let l=Promise.resolve().then(()=>this.#g?.load(i)).then(e=>o({loading:!1,entity:e??a})).catch(()=>{}),c=new($())(e=>{let t=!1;return l.then(t=>{t&&e.next(t)}).finally(()=>{t||e.complete()}),()=>{t=!0}}),d=l.then(e=>e??r);return{snapshot:r,update$:c,promise:d}}#H(e){if("string"!=typeof e)return{entity:e,kind:e.kind,entityRef:(0,i.U2)(e),needsLoad:!1};let t=this.#z.get(e),r=t?.entity,n=(!t||Date.now()-t.updatedAt>this.#M)&&!1!==this.#q.async&&void 0!==this.#g;return{entity:r,kind:(0,i.KU)(e).kind,entityRef:e,needsLoad:n}}#W(e){let t=S(e.cacheTtl),r=S(e.batchDelay);return new(E())(async t=>{let{items:r}=await e.catalogApi.getEntitiesByRefs({entityRefs:t,fields:["kind","metadata.name","metadata.namespace","metadata.title","metadata.description","spec.profile.displayName","spec.type"]}),i=Date.now();return t.forEach((e,t)=>{this.#z.set(e,{updatedAt:i,entity:r[t]})}),r},{name:"DefaultEntityPresentationApi",cacheMap:new H(t),maxBatchSize:100,batchScheduleFn:r?e=>setTimeout(e,r):void 0})}#_(e,t){return e||!1!==e&&this.#D[t.toLocaleLowerCase("en-US")]}}var G=r(45250);async function K({storageApi:e}){let t=e.forBucket("settings"),r=e.forBucket("starredEntities"),n=t.snapshot("starredEntities").value;if(!(0,G.isArray)(n))return;let a=new Set(r.snapshot("entityRefs").value??[]);n.filter(G.isString).map(e=>e.split(":")).filter(e=>4===e.length&&"entity"===e[0]).map(([e,t,r,n])=>(0,i.U2)({kind:t,namespace:r,name:n})).forEach(e=>a.add(e)),await r.set("entityRefs",Array.from(a)),await t.remove("starredEntities")}class V{settingsStore;starredEntities;constructor(e){K(e).then(),this.settingsStore=e.storageApi.forBucket("starredEntities"),this.starredEntities=new Set(this.settingsStore.snapshot("entityRefs").value??[]),this.settingsStore.observe$("entityRefs").subscribe({next:e=>{this.starredEntities=new Set(e.value??[]),this.notifyChanges()}})}async toggleStarred(e){this.starredEntities.has(e)?this.starredEntities.delete(e):this.starredEntities.add(e),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}subscribers=new Set;observable=new($())(e=>(e.next(new Set(this.starredEntities)),this.subscribers.add(e),()=>{this.subscribers.delete(e)}));notifyChanges(){for(let e of this.subscribers)e.next(new Set(this.starredEntities))}}let Y=(0,x.i)({id:"catalog",apis:[(0,b.b)({api:h.v,deps:{discoveryApi:v.I,fetchApi:w.a},factory:({discoveryApi:e,fetchApi:t})=>new p({discoveryApi:e,fetchApi:t})}),(0,b.b)({api:g.a,deps:{storageApi:j.F},factory:({storageApi:e})=>new V({storageApi:e})}),(0,b.b)({api:m.n,deps:{catalogApi:h.v},factory:({catalogApi:e})=>_.create({catalogApi:e})})],routes:{catalogIndex:y.rQ,catalogEntity:f.s},externalRoutes:{createComponent:y.qP,viewTechDoc:y.UJ,createFromTemplate:y.Zg,unregisterRedirect:y.pS}}),J=Y.provide((0,A.QJ)({name:"CatalogIndexPage",component:()=>Promise.all([r.e("4553"),r.e("9526"),r.e("2729")]).then(r.bind(r,70384)).then(e=>e.CatalogPage),mountPoint:y.rQ})),Q=Y.provide((0,A.QJ)({name:"CatalogEntityPage",component:()=>r.e("698").then(r.bind(r,42641)).then(e=>e.CatalogEntityPage),mountPoint:f.s})),Z=Y.provide((0,A.NC)({name:"EntityAboutCard",component:{lazy:()=>Promise.all([r.e("9866"),r.e("405"),r.e("4642")]).then(r.bind(r,91641)).then(e=>e.AboutCard)}})),X=Y.provide((0,A.NC)({name:"EntityLinksCard",component:{lazy:()=>r.e("8620").then(r.bind(r,2711)).then(e=>e.EntityLinksCard)}}));Y.provide((0,A.NC)({name:"EntityLabelsCard",component:{lazy:()=>r.e("3553").then(r.bind(r,28984)).then(e=>e.EntityLabelsCard)}}));let ee=Y.provide((0,A.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>r.e("2275").then(r.bind(r,29326)).then(e=>e.HasSystemsCard)}})),et=Y.provide((0,A.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>r.e("997").then(r.bind(r,41172)).then(e=>e.HasComponentsCard)}})),er=Y.provide((0,A.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>r.e("7492").then(r.bind(r,25295)).then(e=>e.HasSubcomponentsCard)}}));Y.provide((0,A.NC)({name:"EntityHasSubdomainsCard",component:{lazy:()=>r.e("9527").then(r.bind(r,65626)).then(e=>e.HasSubdomainsCard)}}));let ei=Y.provide((0,A.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>r.e("6402").then(r.bind(r,78665)).then(e=>e.HasResourcesCard)}})),en=Y.provide((0,A.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>r.e("6612").then(r.bind(r,15695)).then(e=>e.DependsOnComponentsCard)}}));Y.provide((0,A.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>r.e("8674").then(r.bind(r,48889)).then(e=>e.DependencyOfComponentsCard)}}));let ea=Y.provide((0,A.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>r.e("4707").then(r.bind(r,54334)).then(e=>e.DependsOnResourcesCard)}}));Y.provide((0,A.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>r.e("2178").then(r.bind(r,26169)).then(e=>e.RelatedEntitiesCard)}}));let es=Y.provide((0,k.ec)({name:"CatalogSearchResultListItem",component:()=>r.e("3350").then(r.bind(r,61221)).then(e=>e.CatalogSearchResultListItem),predicate:e=>"software-catalog"===e.type}))},88549:function(e,t,r){"use strict";r.d(t,{UJ:()=>s,Zg:()=>o,pS:()=>l,qP:()=>a,rQ:()=>c});var i=r(2488),n=r(77555);let a=(0,i.I)({id:"create-component",optional:!0,defaultTarget:"scaffolder.root"}),s=(0,i.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),o=(0,i.I)({id:"create-from-template",optional:!0,params:["namespace","templateName"],defaultTarget:"scaffolder.selectedTemplate"}),l=(0,i.I)({id:"catalog:unregister-redirect",optional:!0}),c=(0,n.H)({id:"catalog"})},50867:function(e,t,r){"use strict";r.d(t,{e:()=>x});var i=r(31085),n=r(14041),a=r(29365),s=r(9684),o=r(21332),l=r(10265),c=r(64947),d=r(76891),u=r(93453),p=r(46805),h=r(61477);let g=(0,r(48870).h)({id:"home-react",messages:{settingsModal:{title:"Settings",closeButtonTitle:"Close"},cardExtension:{settingsButtonTitle:"Settings"}}}),m=e=>{let{open:t,close:r,componentName:n,children:a}=e,{t:s}=(0,l.i)(g);return(0,i.jsxs)(d.A,{open:t,onClose:()=>r(),children:[(0,i.jsx)(h.A,{children:n?`${s("settingsModal.title")} - ${n}`:s("settingsModal.title")}),(0,i.jsx)(p.A,{children:a}),(0,i.jsx)(u.A,{children:(0,i.jsx)(c.A,{onClick:()=>r(),color:"primary",variant:"contained",children:s("settingsModal.closeButtonTitle")})})]})};var f=r(96504),y=r(95208);function x(e){let{title:t,components:r,name:n,description:a,layout:s,settings:o}=e,l=o?.schema!==void 0;return(0,f.zZ)({name:n,data:{title:t,description:a,"home.widget.config":{layout:s,settings:o}},component:{lazy:()=>r().then(e=>r=>(0,i.jsx)(b,{...r,...e,title:r.title||t,isCustomizable:l}))}})}function b(e){let{Renderer:t,Content:r,Settings:c,Actions:d,ContextProvider:u,isCustomizable:p,title:h,...f}=e,{Progress:x}=(0,y.n)().getComponents(),[b,v]=(0,n.useState)(!1),{t:w}=(0,l.i)(g);if(t)return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)(x,{}),children:(0,i.jsx)(t,{...h&&{title:h},Content:r,...d?{Actions:d}:{},...c&&!p?{Settings:c}:{},...u?{ContextProvider:u}:{},...f})});let j={divider:!!h,...h&&{title:h},...c&&!p?{action:(0,i.jsx)(a.A,{onClick:()=>v(!0),children:(0,i.jsx)(s.default,{children:w("cardExtension.settingsButtonTitle")})})}:{},...d?{actions:(0,i.jsx)(d,{})}:{}},A=(0,i.jsxs)(o.n,{...j,children:[c&&!p&&(0,i.jsx)(m,{open:b,componentName:h,close:()=>v(!1),children:(0,i.jsx)(c,{})}),(0,i.jsx)(r,{...f})]});return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)(x,{}),children:u?(0,i.jsx)(u,{...f,children:A}):A})}},70984:function(e,t,r){"use strict";r.d(t,{Y$:()=>s,Y1:()=>n,uv:()=>a});var i=r(28967);let n=(0,i.y)({id:"plugin.kubernetes.service"}),a=(0,i.y)({id:"plugin.kubernetes.proxy-service"}),s=(0,i.y)({id:"plugin.kubernetes.cluster-link-formatter-service"})},35625:function(e,t,r){"use strict";r.d(t,{g:()=>i});let i=(0,r(28967).y)({id:"plugin.kubernetes-auth-providers.service"})},29397:function(e,t,r){"use strict";r.d(t,{Router:()=>rK,u:()=>rG});var i=r(31085),n=r(16400),a=r(54674),s=r(18690),o=r(42899),l=r(72501),c=r(14041),d=r(45313),u=r(18139);let p=async(e,t,r)=>{let i=[...new Set((await t.getClusters()).map(e=>`${e.authProvider}${e.oidcTokenProvider?`.${e.oidcTokenProvider}`:""}`))],n={entity:e};for(let e of i)n=await r.decorateRequestBodyForAuth(e,n);return n.auth??{}};var h=r(28966),g=r(35625),m=r(70984);let f=(0,c.createContext)([]);var y=r(99338);let x=({entityName:e,errorMessage:t,clustersWithErrors:r})=>(0,i.jsxs)(y.B,{title:"There was a problem retrieving Kubernetes objects",message:`There was a problem retrieving some Kubernetes resources for the entity: ${e}. This could mean that the Error Reporting card is not completely accurate.`,children:[r&&(0,i.jsxs)("div",{children:["Errors: ",r.map((e,t)=>(0,i.jsxs)("div",{children:[(0,i.jsx)(l.A,{variant:"body2",children:`Cluster: ${e.cluster.title||e.cluster.name}`}),e.errors.map((e,t)=>(0,i.jsx)(l.A,{variant:"body2",children:"FETCH_ERROR"===e.errorType?`Error communicating with Kubernetes: ${e.errorType}, message: ${e.message}`:`Error fetching Kubernetes resource: '${e.resourcePath}', error: ${e.errorType}, status code: ${e.statusCode}`},t)),(0,i.jsx)("br",{})]},t))]}),t&&(0,i.jsxs)(l.A,{variant:"body2",children:["Errors: ",t]})]});var b=r(3571);let v=[{title:"cluster",width:"10%",render:e=>e.cluster.title||e.cluster.name},{title:"namespace",width:"10%",render:e=>e.error.sourceRef.namespace},{title:"kind",width:"10%",render:e=>e.error.sourceRef.kind},{title:"name",width:"30%",render:e=>(0,i.jsxs)(i.Fragment,{children:[e.error.sourceRef.name," "]})},{title:"messages",width:"40%",render:e=>e.error.message}],w=(e,t)=>e.error.severity<t.error.severity?1:t.error.severity<e.error.severity?-1:0,j=({detectedErrors:e,clusters:t})=>{let r=Array.from(e.entries()).flatMap(([e,r])=>r.map(r=>({cluster:t.find(t=>t.name===e),error:r}))).sort(w);return(0,i.jsx)(i.Fragment,{children:0!==r.length&&(0,i.jsx)(b.X,{title:"Error Reporting",data:r,columns:v,options:{paging:!0,search:!1,emptyRowsWhenPaging:!1}})})};var A=r(8973),k=r(91567),S=r(29655);let C=e=>e.reduce((e,t)=>{switch(t.type){case"deployments":e.deployments.push(...t.resources);break;case"pods":e.pods.push(...t.resources);break;case"replicasets":e.replicaSets.push(...t.resources);break;case"services":e.services.push(...t.resources);break;case"configmaps":e.configMaps.push(...t.resources);break;case"horizontalpodautoscalers":e.horizontalPodAutoscalers.push(...t.resources);break;case"ingresses":e.ingresses.push(...t.resources);break;case"jobs":e.jobs.push(...t.resources);break;case"cronjobs":e.cronJobs.push(...t.resources);break;case"customresources":e.customResources.push(...t.resources);break;case"statefulsets":e.statefulsets.push(...t.resources);break;case"daemonsets":e.daemonSets.push(...t.resources)}return e},{pods:[],replicaSets:[],deployments:[],services:[],configMaps:[],horizontalPodAutoscalers:[],ingresses:[],jobs:[],cronJobs:[],customResources:[],statefulsets:[],daemonSets:[]});var E=r(6924),T=r(12714);let $=(0,c.createContext)(new Set),R=(0,c.createContext)({pods:[],replicaSets:[],deployments:[],daemonSets:[],services:[],configMaps:[],horizontalPodAutoscalers:[],ingresses:[],jobs:[],cronJobs:[],customResources:[],statefulsets:[]});var I=r(17174),P=r(58837),O=r(99703),N=r(92881),B=r(40703),U=r(59469),L=r(48653),F=r(45685),z=r(69374),M=r(54195);let D=e=>`${(parseFloat(e.toString())/1024/1024).toFixed(0)}MiB`,q=e=>`${(1e3*parseFloat(e.toString())).toFixed(0)}m`;var W=r(11620),H=r(64947),_=r(76891),G=r(46805),K=r(61477),V=r(29365),Y=r(32881);let J=(0,P.A)(e=>(0,O.A)({dialogPaper:{minHeight:"calc(100% - 64px)"},dialogContent:{flexBasis:0},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})),Q=({buttonAriaLabel:e,buttonIcon:t,buttonText:r,children:n,disabled:a,title:s})=>{let o=J(),[l,d]=(0,c.useState)(!1),u=()=>{d(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(_.A,{maxWidth:"xl",fullWidth:!0,open:l,onClose:u,PaperProps:{className:o.dialogPaper},children:[(0,i.jsxs)(K.A,{id:"dialog-title",children:[s,(0,i.jsx)(V.A,{"aria-label":"close",className:o.closeButton,onClick:u,children:(0,i.jsx)(Y.default,{})})]}),(0,i.jsx)(G.A,{className:o.dialogContent,children:n})]}),(0,i.jsx)(H.A,{variant:"outlined","aria-label":e,component:"label",disabled:a,onClick:()=>{d(!0)},startIcon:t,children:r})]})};var Z=r(73466),X=r(61617),ee=r(87083),et=r(95643),er=r(52361);class ei extends er.AttachAddon{#G=new TextEncoder;constructor(e,t){super(e,t);const r=this;r._sendBinary=e=>{if(!r._checkOpenSocket())return;let t=Uint8Array.from([0,...this.#G.encode(e)]);r._socket.send(t)},r._sendData=e=>{r._checkOpenSocket()&&r._sendBinary(e)}}}let en=e=>/wss?:\/\//.test(e.toString()),ea=(0,P.A)(e=>(0,O.A)({podExecTerminal:{width:"100%",height:"100%","& .xterm-screen":{padding:e.spacing(1)}}})),es=e=>{let t=ea(),{containerName:r,podNamespace:n,podName:a}=e,[s,o]=(0,c.useState)(window.location.host),l=(0,c.useRef)(null),d=(0,u.gf)(X.I),p=n??"default";(0,c.useEffect)(()=>{d.getBaseUrl("kubernetes").then(e=>e??window.location.host).then(e=>e.replace(/^http(s?):\/\//,"ws$1://")).then(e=>o(e))},[d]);let h=(0,c.useMemo)(()=>new URLSearchParams({container:r,stdin:"true",stdout:"true",stderr:"true",tty:"true",command:"/bin/sh"}),[r]),g=(0,c.useMemo)(()=>en(s)?new URL(`${s}/proxy/api/v1/namespaces/${p}/pods/${a}/exec?${h}`):"",[s,p,a,h]);return(0,c.useEffect)(()=>{if(!en(g))return()=>{};let e=new ee.Terminal,t=new et.FitAddon;e.loadAddon(t),l.current&&(e.open(l.current),t.fit()),e.writeln("Starting terminal, please wait...");let r=new WebSocket(g,["channel.k8s.io"]);return r.onopen=()=>{e.clear();let t=new ei(r,{bidirectional:!0});e.loadAddon(t)},r.onclose=()=>{e.writeln("Socket connection closed")},()=>{e?.clear(),r?.close()}},[s,g]),(0,i.jsx)("div",{"data-testid":"terminal",ref:l,className:t.podExecTerminal})},eo=e=>{let t,{cluster:r,containerName:n,podName:a}=e,s=(t=(0,u.gf)(m.Y1),(0,Z.A)(async()=>{let e=await t.getClusters();if(1!==e.length)return!1;let{authProvider:r}=e[0];return!["aks","google","oidc"].some(e=>r.includes(e))}));return!s.loading&&s.value&&(0,i.jsx)(Q,{buttonAriaLabel:"open terminal",buttonIcon:(0,i.jsx)(W.default,{}),buttonText:"Terminal",disabled:s.loading||!s.value,title:`${a} - ${n} terminal shell on cluster ${r.title||r.name}`,children:(0,i.jsx)(es,{...e})})};var el=r(54917),ec=r(71677),ed=r(58695),eu=r(53373),ep=r.n(eu);(0,P.A)(e=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:e.typography.pxToRem(45),fontWeight:e.typography.fontWeightBold,color:e.palette.textContrast},overlaySmall:{fontSize:e.typography.pxToRem(25)},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"});let eh=({palette:e,value:t,inverse:r,max:i})=>{if(isNaN(t))return"#ddd";let n=i||100,a=r?n-t:t;return a<n/3?e.status.error:a<2/3*n?e.status.warning:e.status.ok};function eg(e){let{value:t,getColor:r=eh,width:n="thick"}=e,{palette:a}=(0,el.A)();if(isNaN(t))return null;let s=Math.round(100*t*100)/100;s>100&&(s=100);let o="thick"===n?4:1,c=r({palette:a,value:s,inverse:!1,max:100});return(0,i.jsx)(ec.Ay,{title:`${s}%`,children:(0,i.jsx)(l.A,{component:"span",children:(0,i.jsx)(ed.N1,{percent:s,strokeWidth:o,trailWidth:o,strokeColor:c})})})}let em=({palette:e,value:t,inverse:r,max:i})=>{if(isNaN(t))return e.status.pending;let n=i||100,a=r?n-t:t;return a>=n?e.status.error:a>90||a<40?e.status.warning:e.status.ok},ef=({compressed:e=!1,title:t,usage:r,total:n,totalFormatted:a})=>{let s=((e,t)=>{if(0===Number(t))return 0;if("number"==typeof e&&"number"==typeof t)return Math.round(e/t*100);let r=BigInt("number"==typeof e?Math.round(e):Number(e)),i=BigInt("number"==typeof t?Math.round(t):Number(t));return Number(r*BigInt(100)/i)})(r,n);return(0,i.jsxs)(o.A,{container:!0,spacing:0,children:[(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:e?"caption":"subtitle2",children:`${t}: ${a}`})}),(0,i.jsxs)(o.A,{item:!0,xs:12,children:[(0,i.jsx)(eg,{getColor:em,width:e?"thin":"thick",value:s/100}),!e&&(0,i.jsxs)(l.A,{variant:"caption",children:["usage: ",`${s}%`]})]})]})};var ey=r(20473),ex=r(83392),eb=r(10581),ev=r(38097),ew=r(78149);let ej=(0,P.A)(e=>({root:{padding:e.spacing(0),marginBottom:e.spacing(0),marginTop:e.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:e.spacing(6),marginTop:-e.spacing(3),zIndex:"unset"},icon:{fontSize:e.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:e.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:e.palette.banner.link}},button:{color:e.palette.banner.closeButtonColor??"inherit"},info:{backgroundColor:e.palette.banner.info},error:{backgroundColor:e.palette.banner.error},warning:{backgroundColor:e.palette.banner.warning??e.palette.banner.error}}),{name:"BackstageDismissableBanner"}),eA=e=>{let{variant:t,message:r,id:n,fixed:a=!1}=e,s=ej(),o=(0,u.gf)(ex.F).forBucket("notifications"),l=(0,eb.A)(o.observe$("dismissedBanners"),o.snapshot("dismissedBanners")),d=(0,c.useMemo)(()=>new Set(l.value??[]),[l.value]),p="unknown"===l.presence;return(0,i.jsx)(ev.A,{anchorOrigin:a?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!p&&!d.has(n),classes:{root:ep()(s.root,!a&&s.topPosition)},children:(0,i.jsx)(ew.A,{classes:{root:ep()(s.content,s[t]),message:s.message},message:r,action:[(0,i.jsx)(V.A,{title:"Permanently dismiss this message",className:s.button,onClick:()=>{o.set("dismissedBanners",[...d,n])},children:(0,i.jsx)(Y.default,{className:s.icon})},"dismiss")]})})};var ek=r(56711),eS=r(67296),eC=r(4321),eE=r(4387);let eT=({containerScope:e,previous:t})=>{let{value:r,error:n,loading:a}=(({containerScope:e,previous:t})=>{let r=(0,u.gf)(m.uv);return(0,Z.A)(async()=>await r.getPodLogs({podName:e.podName,namespace:e.podNamespace,containerName:e.containerName,clusterName:e.cluster.name,previous:t}),[JSON.stringify(e)])})({containerScope:e,previous:t});return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(eA,{...{message:n.message,variant:"error",fixed:!1},id:"pod-logs"}),(0,i.jsxs)(eC.A,{elevation:1,style:{height:"100%",width:"100%",minHeight:"55rem"},children:[a&&(0,i.jsx)(eE.A,{variant:"rect",width:"100%",height:"100%"}),!a&&void 0!==r&&(""===r.text?(0,i.jsx)(ek.p,{missing:"data",title:"No logs emitted",description:"No logs were emitted by the container"}):(0,i.jsx)(eS.r,{text:r.text}))]})]})},e$=({containerScope:e})=>(0,i.jsx)(Q,{buttonAriaLabel:"get logs",buttonIcon:(0,i.jsx)(ey.default,{}),buttonText:"Logs",disabled:!1,title:`${e.podName} - ${e.containerName} logs on cluster ${e.cluster.title||e.cluster.name}`,children:(0,i.jsx)(eT,{containerScope:e})}),eR=({prefix:e,dateTime:t})=>(0,i.jsxs)(l.A,{variant:"subtitle2",children:[e,":"," ",z.c9.fromISO(t).toRelative({locale:"en"})]}),eI=({podScope:e,containerSpec:t,containerStatus:r,containerMetrics:n})=>{let a,s=(0,u.gf)(M.U).getOptionalBoolean("kubernetes.podExecTerminal.enabled");if(void 0===t)return(0,i.jsx)(l.A,{children:"error reading pod from cluster"});let c=r.state?.running?.startedAt||r.state?.terminated?.startedAt,d=r.state?.terminated?.finishedAt;return(0,i.jsxs)(B.A,{children:[(0,i.jsx)(F.A,{title:r.name,subheader:r.image}),(0,i.jsx)(L.A,{children:(0,i.jsxs)(o.A,{container:!0,children:[(0,i.jsxs)(o.A,{item:!0,xs:12,children:[c&&(0,i.jsx)(eR,{prefix:"Started",dateTime:c}),d&&(0,i.jsx)(eR,{prefix:"Completed",dateTime:d}),c&&d&&(0,i.jsxs)(l.A,{variant:"subtitle2",children:["Execution time:"," ",z.c9.fromISO(d).diff(z.c9.fromISO(c),["hours","minutes","seconds"]).toHuman()]})]}),(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["Status: ",r.state?.waiting?.reason||r.state?.terminated?.reason||(r.state?.running!==void 0?"Running":"Unknown")]})}),r.restartCount>0&&(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["Restarts: ",r.restartCount]})}),(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:"subtitle2",children:"Container health"})}),(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(N.t,{metadata:(a={"not waiting to start":r.state?.waiting===void 0,"no restarts":0===r.restartCount},r.state?.terminated?.reason==="Completed"||(Object.assign(a,{started:!!r.started},{ready:r.ready},{"readiness probe set":t?.readinessProbe!==void 0}),t&&t?.livenessProbe!==void 0&&Object.assign(a,{"liveness probe set":t.livenessProbe})),a),options:{nestedValuesAsYaml:!0}})}),n&&(0,i.jsxs)(o.A,{container:!0,item:!0,xs:12,spacing:0,children:[(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:"subtitle1",children:"Resource utilization"})}),(0,i.jsxs)(o.A,{item:!0,xs:12,style:{minHeight:"5rem"},children:[(0,i.jsx)(ef,{compressed:!0,title:"CPU requests",usage:n.cpuUsage.currentUsage,total:n.cpuUsage.requestTotal,totalFormatted:q(n.cpuUsage.requestTotal)}),(0,i.jsx)(ef,{compressed:!0,title:"CPU limits",usage:n.cpuUsage.currentUsage,total:n.cpuUsage.limitTotal,totalFormatted:q(n.cpuUsage.limitTotal)}),(0,i.jsx)(ef,{compressed:!0,title:"Memory requests",usage:n.memoryUsage.currentUsage,total:n.memoryUsage.requestTotal,totalFormatted:D(n.memoryUsage.requestTotal)}),(0,i.jsx)(ef,{compressed:!0,title:"Memory limits",usage:n.memoryUsage.currentUsage,total:n.memoryUsage.limitTotal,totalFormatted:D(n.memoryUsage.limitTotal)})]})]})]})}),(0,i.jsxs)(U.A,{children:[(0,i.jsx)(e$,{containerScope:{containerName:r.name,...e}}),s&&(0,i.jsx)(eo,{cluster:e.cluster,containerName:r.name,podName:e.podName,podNamespace:e.podNamespace})]})]})};var eP=r(73845),eO=r(73643),eN=r(86901),eB=r(7031),eU=r(62112),eL=r(9911);let eF=({object:e})=>{let[t,r]=(0,c.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN.A,{control:(0,i.jsx)(eO.A,{checked:t,onChange:e=>{r(e.target.checked)},name:"Managed Fields"}),label:"Managed Fields"}),(0,i.jsx)(eU.z,{language:"yaml",text:eL.Ay.dump(e,{replacer:(e,r)=>t?r:"managedFields"===e?void 0:r})})]})},ez=(0,P.A)(e=>(0,O.A)({header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},content:{height:"80%"},icon:{fontSize:20}})),eM=({children:e,header:t,kubernetesObject:r,close:n})=>{let a=ez(),[s,d]=(0,c.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:a.header,children:(0,i.jsxs)(o.A,{container:!0,justifyContent:"flex-start",alignItems:"flex-start",children:[(0,i.jsx)(o.A,{item:!0,xs:11,children:(0,i.jsx)(l.A,{variant:"h5",children:r.metadata?.name})}),(0,i.jsx)(o.A,{item:!0,xs:1,children:(0,i.jsx)(V.A,{title:"Close the drawer",onClick:()=>n(),color:"inherit",children:(0,i.jsx)(Y.default,{className:a.icon})},"dismiss")}),(0,i.jsx)(o.A,{item:!0,xs:12,children:t}),(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(eN.A,{control:(0,i.jsx)(eO.A,{checked:s,onChange:e=>{d(e.target.checked)},name:"YAML"}),label:"YAML"})})]})}),(0,i.jsxs)("div",{className:a.content,children:[s&&(0,i.jsx)(eF,{object:r}),!s&&e]})]})},eD=(0,P.A)(e=>(0,O.A)({paper:{width:"50%",justifyContent:"space-between",padding:e.spacing(2.5)}})),eq=(0,eB.A)({root:{padding:"6px 5px"},label:{textTransform:"none"}})(H.A),eW=({open:e,label:t,drawerContentsHeader:r,kubernetesObject:n,children:a})=>{let s=eD(),[o,l]=(0,c.useState)(e??!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eq,{onClick:()=>l(!0),children:t}),(0,i.jsx)(eP.Ay,{classes:{paper:s.paper},anchor:"right",open:o,onClose:e=>{e.stopPropagation(),l(!1)},onClick:e=>e.stopPropagation(),children:o&&(0,i.jsx)(eM,{header:r,kubernetesObject:n,children:a,close:()=>l(!1)})})]})};var eH=r(78467),e_=r(10265),eG=r(48870);let eK=(0,eG.h)({id:"kubernetes-react",messages:{podDrawer:{buttons:{delete:"Delete Pod"}}}}),eV=({podScope:e})=>{let t,[r,n]=(0,c.useState)(!1),[a,s]=(0,c.useState)(!1),d=(t=(0,u.gf)(m.uv),(0,c.useCallback)(async e=>await t.deletePod({podName:e.podName,namespace:e.podNamespace,clusterName:e.cluster.name}),[t])),{t:p}=(0,e_.i)(eK),h=p("podDrawer.buttons.delete"),g=async()=>{n(!0);try{await d(e)}catch(e){s(!0),console.error(e)}};return(0,i.jsx)(o.A,{container:!0,item:!0,xs:12,children:(0,i.jsxs)(o.A,{item:!0,xs:12,children:[(0,i.jsx)(U.A,{children:(0,i.jsx)(H.A,{variant:"outlined","aria-label":h,component:"label",onClick:g,startIcon:r?(0,i.jsx)(eH.A,{size:18}):(0,i.jsx)(Y.default,{}),disabled:r,children:h})}),a&&(0,i.jsx)(l.A,{variant:"body1",color:"error",style:{textAlign:"right"},children:"Could not delete the pod. Please check the console for the full report."})]})})};var eY=r(58007),eJ=r(8109);let eQ=({condition:e})=>(0,i.jsxs)(i.Fragment,{children:["False"===e.status&&(0,i.jsxs)(T.Xs,{children:[e.type," - (",e.reason," ",e.lastTransitionTime&&z.c9.fromISO(e.lastTransitionTime).toRelative({locale:"en"}),") - ",e.message," "]}),"True"===e.status&&(0,i.jsxs)(T.z3,{children:[e.type," - (",e.lastTransitionTime&&z.c9.fromISO(e.lastTransitionTime).toRelative({locale:"en"}),")"]}),"Unknown"===e.status&&(0,i.jsxs)(T.ly,{children:[e.type," - (",e.lastTransitionTime&&z.c9.fromISO(e.lastTransitionTime).toRelative({locale:"en"}),") ",e.message]})]}),eZ=({pod:e})=>{let t=[e.status?.conditions?.find(e=>"PodScheduled"===e.type),e.status?.conditions?.find(e=>"Initialized"===e.type),e.status?.conditions?.find(e=>"ContainersReady"===e.type),e.status?.conditions?.find(e=>"Ready"===e.type)].filter(e=>!!e);return(0,i.jsx)(o.A,{container:!0,spacing:2,children:(0,i.jsxs)(o.A,{item:!0,xs:12,children:[(0,i.jsx)(l.A,{variant:"h5",children:"Pod is Pending. Conditions:"}),(0,i.jsx)(eY.A,{children:t.map(e=>(0,i.jsx)(eJ.A,{children:(0,i.jsx)(eQ,{condition:e})},e.type))})]})})};var eX=r(5951),e0=r(37197),e1=r(93453),e5=r(69550),e2=r(39330),e3=r(20221),e4=r(46085),e8=r(91467),e7=r(39053),e9=r(77225);let e6=({events:e,warningEventsOnly:t})=>0===e.length?(0,i.jsx)(l.A,{children:"No events found"}):(0,i.jsx)(e4.A,{children:(0,i.jsx)(o.A,{children:(0,i.jsx)(eY.A,{children:e.filter(e=>!t||"Warning"===e.type).map((e,t)=>{let r,n=e.metadata.creationTimestamp?z.c9.fromISO(e.metadata.creationTimestamp).toRelative({locale:"en"}):"unknown";return(0,i.jsxs)(eJ.A,{children:[(0,i.jsx)(ec.Ay,{title:`${e.type??""} event`,children:(r=e.type,(0,i.jsx)(e8.A,{children:(0,i.jsx)(e3.A,{children:"Warning"===r?(0,i.jsx)(e9.default,{}):(0,i.jsx)(e7.default,{})})}))}),(0,i.jsx)(eX.A,{primary:`First event ${n} (count: ${e.count})`,secondary:`${e.reason}: ${e.message}`})]},`${e.metadata.name}-${t}`)})})})}),te=({involvedObjectName:e,namespace:t,clusterName:r,warningEventsOnly:n})=>{let{value:a,error:s,loading:o}=(({involvedObjectName:e,namespace:t,clusterName:r})=>{let i=(0,u.gf)(m.uv);return(0,Z.A)(async()=>await i.getEventsByInvolvedObjectName({involvedObjectName:e,namespace:t,clusterName:r}),[e,t,r])})({involvedObjectName:e,namespace:t,clusterName:r});return(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)(eA,{...{message:s.message,variant:"error",fixed:!1},id:"events"}),o&&(0,i.jsx)(eE.A,{variant:"rect",width:"100%",height:"100%"}),!o&&void 0!==a&&(0,i.jsx)(e6,{warningEventsOnly:n,events:a})]})};var tt=r(87318);let tr=(0,P.A)(e=>(0,O.A)({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})),ti=({open:e,pod:t,error:r,clusterName:n})=>{let[a,s]=(0,c.useState)(!!e),d=tr(),u=()=>{s(!1)},p=r.proposedFix;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.A,{variant:"outlined","aria-label":"fix issue",component:"label",onClick:()=>{s(!0)},startIcon:(0,i.jsx)(e5.default,{}),children:"Help"}),(0,i.jsxs)(_.A,{maxWidth:"xl",fullWidth:!0,open:a,onClose:u,children:[(0,i.jsxs)(K.A,{id:"dialog-title",children:[t.metadata?.name," - ",r.type,(0,i.jsx)(V.A,{"aria-label":"close",className:d.closeButton,onClick:u,children:(0,i.jsx)(Y.default,{})})]}),(0,i.jsx)(G.A,{children:(0,i.jsxs)(o.A,{container:!0,children:[(0,i.jsxs)(o.A,{item:!0,xs:12,children:[(0,i.jsx)(l.A,{variant:"h6",children:"Detected error:"}),(0,i.jsx)(l.A,{children:r.message})]}),(0,i.jsxs)(o.A,{item:!0,xs:12,children:[(0,i.jsx)(l.A,{variant:"h6",children:"Cause explanation:"}),(0,i.jsx)(l.A,{children:r.proposedFix?.rootCauseExplanation??"unknown"})]}),(0,i.jsxs)(o.A,{item:!0,xs:12,children:[(0,i.jsx)(l.A,{variant:"h6",children:"Fix:"}),(0,i.jsx)(eY.A,{children:(r.proposedFix?.actions??[]).map((e,r)=>(0,i.jsx)(eJ.A,{children:e},`${t.metadata?.name??"unknown"}-pf-${r}`))})]}),p&&"logs"===p.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:"h6",children:"Crash logs:"})}),(0,i.jsx)(o.A,{item:!0,xs:9,children:(0,i.jsx)(eT,{previous:!0,containerScope:{podName:t.metadata?.name??"unknown",podNamespace:t.metadata?.namespace??"unknown",cluster:{name:n},containerName:p.container}})})]}),p&&"events"===p.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:"h6",children:"Events:"})}),(0,i.jsx)(o.A,{item:!0,xs:9,children:(0,i.jsx)(te,{warningEventsOnly:!0,involvedObjectName:t.metadata?.name??"",namespace:t.metadata?.namespace??"",clusterName:n})})]})]})}),(0,i.jsx)(e1.A,{children:p&&"docs"===p.type&&(0,i.jsx)(tt.z,{to:p.docsLink,variant:"outlined",startIcon:(0,i.jsx)(e2.default,{}),target:"_blank",rel:"noopener",children:"Open docs"})})]})]})},tn=(0,P.A)(e=>(0,O.A)({root:{overflow:"auto"},list:{width:"100%"}})),ta=({podAndErrors:e})=>{let t=tn();return(0,i.jsx)(eC.A,{className:t.root,children:(0,i.jsx)(eY.A,{className:t.list,children:e.filter(e=>e.errors.length>0).flatMap(e=>e.errors.map((t,r)=>(0,i.jsxs)(c.Fragment,{children:[r>0&&(0,i.jsx)(e0.A,{},`error-divider${r}`),(0,i.jsx)(eJ.A,{children:(0,i.jsxs)(o.A,{container:!0,children:[(0,i.jsx)(o.A,{item:!0,xs:9,children:(0,i.jsx)(eX.A,{primary:t.message,secondary:e.pod.metadata?.name})}),(0,i.jsx)(o.A,{item:!0,xs:3,children:(0,i.jsx)(ti,{pod:e.pod,error:t,clusterName:e.cluster.name})})]})})]},`${e.pod.metadata?.name??"unknown"}-eli-${r}`)))})})},ts=(0,c.createContext)(new Map),to=(e,t)=>{let r={name:t.metadata?.name??"",namespace:t.metadata?.namespace??""},i=(0,c.useContext)(ts).get(e);return i?.find(e=>{let t=e.pod;return r.name===(t.metadata?.name??"")&&r.namespace===(t.metadata?.namespace??"")})},tl=(0,P.A)(e=>(0,O.A)({header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},content:{height:"80%"},icon:{fontSize:20},podoklist:{width:"100%",maxWidth:360,maxHeight:360}})),tc=({podAndErrors:e,open:t})=>{let r,n=tl(),a=to(e.cluster.name,e.pod),s=(r=(0,u.gf)(M.U),r.getOptionalConfig("kubernetes.frontend")?.getOptionalBoolean("podDelete.enabled"));return(0,i.jsx)(eW,{open:t,drawerContentsHeader:(0,i.jsxs)(l.A,{variant:"subtitle1",children:["Pod"," ",e.pod.status?.podIP&&`(${e.pod.status?.podIP})`]}),kubernetesObject:e.pod,label:(0,i.jsx)(l.A,{variant:"subtitle1",children:e.pod.metadata?.name??"unknown"}),children:(0,i.jsxs)("div",{className:n.content,children:[s&&(0,i.jsx)(eV,{podScope:{podName:e.pod.metadata?.name??"unknown",podNamespace:e.pod.metadata?.namespace??"default",cluster:e.cluster}}),a&&(0,i.jsxs)(o.A,{container:!0,item:!0,xs:12,children:[(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:"h5",children:"Resource utilization"})}),(0,i.jsxs)(o.A,{item:!0,xs:6,children:[(0,i.jsx)(ef,{title:"CPU requests",usage:a.cpu.currentUsage,total:a.cpu.requestTotal,totalFormatted:q(a.cpu.requestTotal)}),(0,i.jsx)(ef,{title:"CPU limits",usage:a.cpu.currentUsage,total:a.cpu.limitTotal,totalFormatted:q(a.cpu.limitTotal)})]}),(0,i.jsxs)(o.A,{item:!0,xs:6,children:[(0,i.jsx)(ef,{title:"Memory requests",usage:a.memory.currentUsage,total:a.memory.requestTotal,totalFormatted:D(a.memory.requestTotal)}),(0,i.jsx)(ef,{title:"Memory limits",usage:a.memory.currentUsage,total:a.memory.limitTotal,totalFormatted:D(a.memory.limitTotal)})]})]}),e.pod.status?.phase==="Pending"&&(0,i.jsx)(eZ,{pod:e.pod}),e.pod.status?.containerStatuses?.length&&(0,i.jsxs)(o.A,{container:!0,spacing:2,children:[(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:"h5",children:"Containers"})}),(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(I.s,{children:e.pod.status?.containerStatuses?.map((t,r)=>{var n,s;let o=(n=e.pod,s=t.name,n.spec?.containers.find(e=>e.name===s)),l=(a?.containers??[]).find(e=>e.container===t.name);return(0,i.jsx)(eI,{containerMetrics:l,podScope:{podName:e.pod.metadata?.name??"unknown",podNamespace:e.pod.metadata?.namespace??"unknown",cluster:e.cluster},containerSpec:o,containerStatus:t},`container-card-${e.pod.metadata?.name}-${r}`)})})}),e.errors.length>0&&(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(l.A,{variant:"h5",children:"Errors"})}),e.errors.length>0&&(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(ta,{podAndErrors:[e]})})]})]})})},td=(0,c.createContext)({name:""});var tu=r(49907);let tp=e=>{let t=(e.status?.containerStatuses??[]).reduce((t,r)=>{if(void 0===r.state)return t;let n=r.state.waiting,a=r.state.terminated,s=t=>(0,i.jsxs)(c.Fragment,{children:[(0,i.jsx)(tu.m,{value:"Completed"===t?(0,i.jsxs)(T.z3,{children:["Container: ",r.name]}):(0,i.jsxs)(T.Xs,{children:["Container: ",r.name]}),subvalue:t}),(0,i.jsx)("br",{})]},`${e.metadata?.name}-${r.name}`);return n&&t.push(s(n.reason)),a&&t.push(s(a.reason)),t},[]);return 0===t.length?(0,i.jsx)(T.z3,{children:"OK"}):t},th=e=>{let t=e.status;return"True"===t?[e.type,(0,i.jsx)(T.z3,{children:"True"})]:"False"===t?[e.type,(0,i.jsx)(tu.m,{value:(0,i.jsx)(T.Xs,{children:"False"}),subvalue:e.message??""})]:[e.type,(0,i.jsx)(T.c_,{})]},tg=(e,t)=>{if(0===Number(t))return"0%";if("number"==typeof e&&"number"==typeof t)return`${Math.round(e/t*100)}%`;let r=BigInt("number"==typeof e?Math.round(e):Number(e)),i=BigInt("number"==typeof t?Math.round(t):Number(t));return`${r*BigInt(100)/i}%`},tm="READY",tf="RESOURCE",ty=[{title:"containers ready",align:"center",render:e=>{let t=e.status?.containerStatuses??[],r=t.filter(e=>e.ready).length;return`${r}/${t.length}`},width:"auto"},{title:"total restarts",align:"center",render:e=>{let t=e.status?.containerStatuses??[];return t?.reduce((e,t)=>e+t.restartCount,0)},type:"numeric",width:"auto"}],tx=({pod:e})=>{var t;let r,n=(t={kind:"Pod",apiVersion:"v1",metadata:e.metadata},r={name:t.metadata?.name??"",namespace:t.metadata?.namespace??"",kind:t.kind,apiGroup:t.apiVersion},(0,c.useContext)(f).filter(e=>{let t=e.sourceRef;return r.apiGroup===t.apiGroup&&r.kind===t.kind&&r.name===t.name&&r.namespace===t.namespace}));return(0,i.jsx)(tc,{podAndErrors:{pod:e,cluster:(0,c.useContext)(td),errors:n}})},tb=({clusterName:e,pod:t})=>{let r,n=to(e,t);return n?(0,i.jsx)(i.Fragment,{children:(r=n.cpu,(0,i.jsx)(tu.m,{value:`requests: ${tg(r.currentUsage,r.requestTotal)} of ${q(r.requestTotal)}`,subvalue:`limits: ${tg(r.currentUsage,r.limitTotal)} of ${q(r.limitTotal)}`}))}):(0,i.jsx)(l.A,{children:"unknown"})},tv=({clusterName:e,pod:t})=>{let r,n=to(e,t);return n?(0,i.jsx)(i.Fragment,{children:(r=n.memory,(0,i.jsx)(tu.m,{value:`requests: ${tg(r.currentUsage,r.requestTotal)} of ${D(r.requestTotal)}`,subvalue:`limits: ${tg(r.currentUsage,r.limitTotal)} of ${D(r.limitTotal)}`}))}):(0,i.jsx)(l.A,{children:"unknown"})},tw=({pods:e,extraColumns:t=[]})=>{let r=(0,c.useContext)(td),n=[{title:"ID",field:"metadata.uid",hidden:!0},{title:"name",highlight:!0,render:e=>(0,i.jsx)(tx,{pod:e})},{title:"phase",render:e=>e.status?.phase??"unknown",width:"auto"},{title:"status",render:tp}];if(t.includes(tm)&&n.push(...ty),t.includes(tf)){let e=[{title:"CPU usage %",render:e=>(0,i.jsx)(tb,{clusterName:r.name,pod:e}),width:"auto"},{title:"Memory usage %",render:e=>(0,i.jsx)(tv,{clusterName:r.name,pod:e}),width:"auto"}];n.push(...e)}return(0,i.jsx)("div",{style:{minWidth:"0",width:"100%"},children:(0,i.jsx)(b.X,{options:{paging:!0,search:!1,emptyRowsWhenPaging:!1},data:e.map(e=>({...e,id:e?.metadata?.uid})),columns:n})})},tj=(0,P.A)(e=>(0,O.A)({paper:{width:"50%",justifyContent:"space-between",padding:e.spacing(2.5)}})),tA=(0,P.A)(e=>(0,O.A)({header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},errorMessage:{marginTop:"1em",marginBottom:"1em"},options:{display:"flex",flexDirection:"row",justifyContent:"space-between"},icon:{fontSize:20},content:{height:"80%"}})),tk=(0,eB.A)({root:{padding:"6px 5px"},label:{textTransform:"none"}})(H.A),tS=({cluster:e,errorMessage:t})=>(0,i.jsx)(y.B,{title:"There was a problem formatting the link to the Kubernetes dashboard",message:`Could not format the link to the dashboard of your cluster named '${e.name}'. Its dashboardApp property has been set to '${e.dashboardApp||"standard"}.'`,children:t&&(0,i.jsxs)(l.A,{variant:"body2",children:["Errors: ",t]})}),tC=({toggleDrawer:e,object:t,renderObject:r,kind:n})=>{let[a,s]=(0,c.useState)(!1),d=(0,u.gf)(m.Y$),p=tA(),h=(0,c.useContext)(td),{value:g,error:f}=(0,Z.A)(async()=>d.formatClusterLink({dashboardUrl:h.dashboardUrl,dashboardApp:h.dashboardApp,dashboardParameters:h.dashboardParameters,object:t,kind:n}),[h,t,n,d]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:p.header,children:(0,i.jsxs)(o.A,{container:!0,justifyContent:"flex-start",alignItems:"flex-start",children:[(0,i.jsx)(o.A,{item:!0,xs:11,children:(0,i.jsx)(l.A,{variant:"h5",children:t.metadata?.name??"unknown name"})}),(0,i.jsx)(o.A,{item:!0,xs:1,children:(0,i.jsx)(V.A,{title:"Close the drawer",onClick:t=>e(t,!1),color:"inherit",children:(0,i.jsx)(Y.default,{className:p.icon})},"dismiss")}),(0,i.jsx)(o.A,{item:!0,xs:11,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"body1",children:n})}),(0,i.jsx)(o.A,{item:!0,xs:11,children:(0,i.jsx)(eN.A,{control:(0,i.jsx)(eO.A,{checked:a,onChange:e=>{s(e.target.checked)},name:"YAML"}),label:"YAML"})})]})}),f&&(0,i.jsx)("div",{className:p.errorMessage,children:(0,i.jsx)(tS,{cluster:h,errorMessage:f.message||f.toString()})}),(0,i.jsx)("div",{className:p.options,children:(0,i.jsx)("div",{children:g&&(0,i.jsx)(tt.z,{variant:"outlined",color:"primary",size:"small",to:g,endIcon:(0,i.jsx)(e2.default,{}),children:"Open Kubernetes Dashboard"})})}),(0,i.jsxs)("div",{className:p.content,children:[a&&(0,i.jsx)(eF,{object:t}),!a&&(0,i.jsx)(N.t,{metadata:r(JSON.parse(JSON.stringify(t,(e,t)=>"null"===String(t)||"undefined"===String(t)?void 0:t))),options:{nestedValuesAsYaml:!0}})]})]})},tE=({object:e,renderObject:t,kind:r,buttonVariant:n="subtitle2",expanded:a=!1,children:s})=>{let[o,d]=(0,c.useState)(a),u=tj(),p=(e,t)=>{e.stopPropagation(),d(t)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tk,{onClick:e=>p(e,!0),onFocus:e=>e.stopPropagation(),children:void 0===s?(0,i.jsx)(l.A,{variant:n,children:e.metadata?.name??"unknown object"}):s}),(0,i.jsx)(eP.Ay,{classes:{paper:u.paper},anchor:"right",open:o,onClose:e=>p(e,!1),onClick:e=>e.stopPropagation(),children:(0,i.jsx)(tC,{kind:r,toggleDrawer:p,object:e,renderObject:t})})]})};var tT=r(94390);let t$=({deployment:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"Deployment",renderObject:e=>{let t=(e.status?.conditions??[]).map(th).reduce((e,t)=>(e[t[0]]=t[1],e),{});return{strategy:e.spec?.strategy??"???",minReadySeconds:e.spec?.minReadySeconds??"???",progressDeadlineSeconds:e.spec?.progressDeadlineSeconds??"???",...t}},children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"Deployment"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})},tR=e=>{let{hpa:t,expanded:r,children:n}=e,a=t?.spec?.metrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.target.averageUtilization,s=t?.status?.currentMetrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,i.jsx)(tE,{kind:"HorizontalPodAutoscaler",object:t,expanded:r,renderObject:e=>({targetCPUUtilizationPercentage:a,currentCPUUtilizationPercentage:s,minReplicas:e.spec?.minReplicas,maxReplicas:e.spec?.maxReplicas,currentReplicas:e.status?.currentReplicas,desiredReplicas:e.status?.desiredReplicas,lastScaleTime:t?.status?.lastScaleTime}),children:n})};function tI(e,t){return t.filter(t=>t.metadata?.ownerReferences?.some(t=>t.uid===e.metadata?.uid)??!1)}let tP=(e,t,r)=>tI(e,t.filter(e=>e.status&&e.status.replicas>0)).reduce((e,t)=>e.concat(tI(t,r)),[]),tO=(e,t)=>t.find(t=>(t.spec?.scaleTargetRef?.kind??"").toLocaleLowerCase("en-US")===e.kind.toLocaleLowerCase("en-US")&&(t.metadata?.namespace??"")===(e.namespace??"unknown-namespace")&&(t.spec?.scaleTargetRef?.name??"")===(e.name??"unknown-deployment")),tN=({deployment:e,numberOfCurrentPods:t,numberOfPodsWithErrors:r,hpa:n})=>{let a=n?.spec?.metrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.target.averageUtilization,s=n?.status?.currentMetrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:4,item:!0,children:(0,i.jsx)(t$,{deployment:e})}),n&&(0,i.jsx)(o.A,{item:!0,xs:4,children:(0,i.jsx)(tR,{hpa:n,children:(0,i.jsxs)(o.A,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["min replicas ",n.spec?.minReplicas??"?"," / max replicas"," ",n.spec?.maxReplicas??"?"]})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["current CPU usage: ",s??"?","%"]})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["target CPU usage: ",a??"?","%"]})})]})})}),(0,i.jsxs)(o.A,{item:!0,container:!0,xs:4,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(T.z3,{children:[t," pods"]})}),(0,i.jsx)(o.A,{item:!0,children:r>0?(0,i.jsxs)(T.Xs,{children:[r," pod",r>1?"s":""," with errors"]}):(0,i.jsx)(T.z3,{children:"No pods with errors"})})]})]})},tB=({deployment:e,ownedPods:t,matchingHpa:r})=>{let n=(0,c.useContext)($),a=t.filter(e=>n.has(e.metadata?.name??""));return(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(tN,{deployment:e,numberOfCurrentPods:t.length,numberOfPodsWithErrors:a.length,hpa:r})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(tw,{pods:t,extraColumns:[tm,tf]})})]})},tU=({})=>{let e=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:e.deployments.map((t,r)=>(0,i.jsx)(o.A,{container:!0,item:!0,xs:!0,children:(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(tB,{matchingHpa:tO({name:t.metadata?.name,namespace:t.metadata?.namespace,kind:"deployment"},e.horizontalPodAutoscalers),ownedPods:tP(t,e.replicaSets,e.pods),deployment:t})})},r))})},tL=({statefulset:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"StatefulSet",renderObject:t=>{let r=(t.status?.conditions??[]).map(th).reduce((e,t)=>(e[t[0]]=t[1],e),{});return{updateStrategy:e.spec?.updateStrategy??"???",podManagementPolicy:e.spec?.podManagementPolicy??"???",serviceName:e.spec?.serviceName??"???",selector:e.spec?.selector??"???",revisionHistoryLimit:e.spec?.revisionHistoryLimit??"???",...r}},children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"Stateful Set"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})},tF=({statefulset:e,numberOfCurrentPods:t,numberOfPodsWithErrors:r,hpa:n})=>{let a=n?.spec?.metrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.target.averageUtilization,s=n?.status?.currentMetrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:6,item:!0,children:(0,i.jsx)(tL,{statefulset:e})}),n&&(0,i.jsx)(o.A,{item:!0,xs:3,children:(0,i.jsx)(tR,{hpa:n,children:(0,i.jsxs)(o.A,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["min replicas ",n.spec?.minReplicas??"?"," / max replicas"," ",n.spec?.maxReplicas??"?"]})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["current CPU usage: ",s??"?","%"]})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["target CPU usage: ",a??"?","%"]})})]})})}),(0,i.jsxs)(o.A,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(T.z3,{children:[t," pods"]})}),(0,i.jsx)(o.A,{item:!0,children:r>0?(0,i.jsxs)(T.Xs,{children:[r," pod",r>1?"s":""," with errors"]}):(0,i.jsx)(T.z3,{children:"No pods with errors"})})]})]})},tz=({statefulset:e,ownedPods:t,matchingHpa:r})=>{let n=(0,c.useContext)($),a=t.filter(e=>n.has(e.metadata?.name??""));return(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(tF,{statefulset:e,numberOfCurrentPods:t.length,numberOfPodsWithErrors:a.length,hpa:r})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(tw,{pods:t,extraColumns:[tm,tf]})})]})},tM=({})=>{let e=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:e.statefulsets.map((t,r)=>(0,i.jsx)(o.A,{container:!0,item:!0,xs:!0,children:(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(tz,{matchingHpa:tO({name:t.metadata?.name,namespace:t.metadata?.namespace,kind:"statefulset"},e.horizontalPodAutoscalers),ownedPods:tI(t,e.pods),statefulset:t})})},r))})},tD=({ingress:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"Ingress",renderObject:e=>e.spec||{},children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"Ingress"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})},tq=({ingress:e})=>(0,i.jsx)(o.A,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:(0,i.jsx)(o.A,{xs:12,item:!0,children:(0,i.jsx)(tD,{ingress:e})})}),tW=({ingress:e})=>(0,i.jsx)(N.t,{metadata:{...e.spec},options:{nestedValuesAsYaml:!0}}),tH=({ingress:e})=>(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(tq,{ingress:e})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(tW,{ingress:e})})]}),t_=({})=>{let e=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:e.ingresses.map((e,t)=>(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(tH,{ingress:e})},t))})},tG=({service:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"Service",renderObject:e=>e.spec||{},children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"Service"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})},tK=({service:e})=>(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:8,item:!0,children:(0,i.jsx)(tG,{service:e})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["Type: ",e.spec?.type??"?"]})})]}),tV=({service:e})=>{let t={};return e.status?.loadBalancer?.ingress?.length&&(t.loadbalancer=e.status?.loadBalancer),e.spec?.type==="ClusterIP"&&(t.clusterIP=e.spec.clusterIP),e.spec?.type==="ExternalName"&&(t.externalName=e.spec.externalName),(0,i.jsx)(N.t,{metadata:{type:e.spec?.type,ports:e.spec?.ports,...t},options:{nestedValuesAsYaml:!0}})},tY=({service:e})=>(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(tK,{service:e})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(tV,{service:e})})]}),tJ=({})=>{let e=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:e.services.map((e,t)=>(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(tY,{service:e})},t))})},tQ=({configmap:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"ConfigMap",renderObject:e=>e||{},children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"ConfigMap"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})},tZ=({configmap:e})=>(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:8,item:!0,children:(0,i.jsx)(tQ,{configmap:e})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["Data Count: ",e.data?Object.keys(e.data).length:0]})})]}),tX=({configmap:e})=>{let t={};return t.data=e.data,(0,i.jsx)(N.t,{metadata:{...t},options:{nestedValuesAsYaml:!0}})},t0=({configmap:e})=>(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(tZ,{configmap:e})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(tX,{configmap:e})})]}),t1=({})=>{let e=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:e.configMaps.map((e,t)=>(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(t0,{configmap:e})},t))})},t5=({job:e,expanded:t})=>(0,i.jsx)(tE,{object:e,expanded:t,kind:"Job",renderObject:e=>({parallelism:e.spec?.parallelism??"???",completions:e.spec?.completions??"???",backoffLimit:e.spec?.backoffLimit??"???",startTime:e.status?.startTime??"???"}),children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"Job"})})]})}),t2=({job:e})=>(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:6,item:!0,children:(0,i.jsx)(t5,{job:e})}),(0,i.jsxs)(o.A,{item:!0,container:!0,xs:6,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,i.jsxs)(o.A,{item:!0,children:[e.status?.succeeded&&(0,i.jsx)(T.z3,{children:"Succeeded"}),e.status?.active&&(0,i.jsx)(T.Ek,{children:"Running"}),e.status?.failed&&(0,i.jsx)(T.Xs,{children:"Failed"})]}),(0,i.jsxs)(o.A,{item:!0,children:["Start time: ",e.status?.startTime?.toString()]}),e.status?.completionTime&&(0,i.jsxs)(o.A,{item:!0,children:["Completion time: ",e.status.completionTime.toString()]})]})]}),t3=({job:e,ownedPods:t})=>(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(t2,{job:e})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(tw,{pods:t})})]}),t4=({jobs:e})=>{let t=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:e.map((e,r)=>(0,i.jsx)(o.A,{container:!0,item:!0,xs:!0,children:(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(t3,{ownedPods:tI(e,t.pods),job:e})})},r))})},t8=({cronJob:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"CronJob",renderObject:e=>({schedule:e.spec?.schedule??"???",startingDeadlineSeconds:e.spec?.startingDeadlineSeconds??"???",concurrencyPolicy:e.spec?.concurrencyPolicy??"???",lastScheduleTime:e.status?.lastScheduleTime??"???"}),children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"CronJob"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})};var t7=r(37021),t9=r.n(t7);let t6=new Map([["@yearly","0 0 1 1 *"],["@annually","0 0 1 1 *"],["@monthly","0 0 1 * *"],["@weekly","0 0 * * 0"],["@daily","0 0 * * *"],["@midnight","0 0 * * *"],["@hourly","0 * * * *"]]),re=({cronJob:e})=>(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:6,item:!0,children:(0,i.jsx)(t8,{cronJob:e})}),(0,i.jsxs)(o.A,{item:!0,container:!0,xs:6,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:e.spec?.suspend?(0,i.jsx)(T.Xs,{children:"Suspended"}):(0,i.jsx)(T.z3,{children:"Active"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"body1",children:["Schedule:"," ",e.spec?.schedule?`${e.spec.schedule} (${(e=>{let t=t6.get(e)||e;try{return t9().toString(t)}catch(e){return t}})(e.spec.schedule)})`:"N/A"]})})]})]}),rt=({cronJob:e,ownedJobs:t})=>(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(re,{cronJob:e})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(t4,{jobs:t.reverse()})})]}),rr=({})=>{let e=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:e.cronJobs.map((t,r)=>(0,i.jsx)(o.A,{container:!0,item:!0,xs:!0,children:(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(rt,{ownedJobs:tI(t,e.jobs),cronJob:t})})},r))})};var ri=r(45250),rn=r.n(ri);let ra=({rollout:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"Rollout",renderObject:()=>({}),children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"Rollout"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})};var rs=r(77579),ro=r(9181),rl=r(21619),rc=r(37877),rd=r(78733);let ru=({currentStepIndex:e,aborted:t,steps:r})=>{let n=e>=r.length?e+1:e;return(0,i.jsx)(rd.A,{activeStep:t?-1:n,alternativeLabel:!0,children:r.map((e,t)=>{var r;return(0,i.jsx)(rl.A,{children:(0,i.jsx)(rc.A,{"data-testid":`step-${t}`,children:(r=e).hasOwnProperty("setWeight")?`setWeight ${r.setWeight}%`:r.hasOwnProperty("pause")?void 0===r.pause.duration?"infinite pause":`pause for ${r.pause.duration}`:r.hasOwnProperty("analysis")?(0,i.jsxs)("div",{children:[(0,i.jsx)(l.A,{paragraph:!0,children:"analysis templates:"}),r.analysis.templates.map((e,t)=>(0,i.jsx)(l.A,{paragraph:!0,children:`${e.templateName}${e.clusterScope?" (cluster scoped)":""}`},t))]}):"unknown step"})},t)}).concat((0,i.jsx)(rl.A,{children:(0,i.jsx)(rc.A,{"data-testid":"step--1",children:"Canary promoted"})},"-1"))})},rp=(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)(ro.default,{}),(0,i.jsx)(l.A,{variant:"subtitle1",children:"Aborted"})]}),rh=e=>e.status?.conditions?.find(e=>"Progressing"===e.type&&"False"===e.status&&"RolloutAborted"===e.reason)?.message,rg=({rollout:e,numberOfCurrentPods:t,numberOfPodsWithErrors:r,hpa:n})=>{let a=e.status?.pauseConditions?.find(e=>"CanaryPauseStep"===e.reason)?.startTime,s=rh(e),c=n?.spec?.metrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.target.averageUtilization,d=n?.status?.currentMetrics?.find(e=>"Resource"===e.type&&e.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:6,item:!0,children:(0,i.jsx)(ra,{rollout:e})}),n&&(0,i.jsx)(o.A,{item:!0,xs:3,children:(0,i.jsx)(tR,{hpa:n,children:(0,i.jsxs)(o.A,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["min replicas ",n.spec?.minReplicas??"?"," / max replicas"," ",n.spec?.maxReplicas??"?"]})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["current CPU usage: ",d??"?","%"]})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(l.A,{variant:"subtitle2",children:["target CPU usage: ",c??"?","%"]})})]})})}),(0,i.jsxs)(o.A,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(T.z3,{children:[t," pods"]})}),(0,i.jsx)(o.A,{item:!0,children:r>0?(0,i.jsxs)(T.Xs,{children:[r," pod",r>1?"s":""," with errors"]}):(0,i.jsx)(T.z3,{children:"No pods with errors"})})]}),a&&(0,i.jsx)(o.A,{item:!0,xs:3,children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)(rs.default,{}),(0,i.jsxs)(l.A,{variant:"subtitle1",children:["Paused (",z.c9.fromISO(a).toRelative({locale:"en"}),")"]})]})}),s&&(0,i.jsx)(o.A,{item:!0,xs:3,children:rp})]})},rm=({rollout:e,ownedPods:t,matchingHpa:r,defaultExpanded:n})=>{let a=(0,c.useContext)($),s=t.filter(e=>a.has(e.metadata?.name??"")),o=e.status?.currentStepIndex??0,d=rh(e);return(0,i.jsxs)(A.A,{defaultExpanded:n,TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(rg,{rollout:e,numberOfCurrentPods:t.length,numberOfPodsWithErrors:s.length,hpa:r})}),(0,i.jsx)(k.A,{children:(0,i.jsxs)("div",{style:{width:"100%"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(l.A,{variant:"h6",children:"Rollout status"})}),(0,i.jsxs)("div",{style:{margin:"1rem"},children:[d&&(0,i.jsxs)(i.Fragment,{children:[rp,(0,i.jsx)(l.A,{variant:"subtitle2",children:d})]}),(0,i.jsx)(ru,{aborted:void 0!==d,steps:e.spec?.strategy?.canary?.steps??[],currentStepIndex:o})]}),(0,i.jsx)("div",{children:(0,i.jsx)(tw,{pods:t,extraColumns:[tm,tf]})})]})})]})},rf=({rollouts:e,defaultExpanded:t=!1})=>{let r=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:e.map((e,n)=>(0,i.jsx)(o.A,{container:!0,item:!0,xs:!0,children:(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(rm,{defaultExpanded:t,matchingHpa:tO({name:e.metadata?.name,namespace:e.metadata?.namespace,kind:"rollout"},r.horizontalPodAutoscalers),ownedPods:tP(e,r.replicaSets,r.pods),rollout:e})})},n))})},ry=({customResource:e,customResourceName:t,expanded:r})=>{let n=t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);return(0,i.jsx)(tE,{object:e,expanded:r,kind:n,renderObject:e=>e,children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:n})})]})})},rx=({customResource:e,customResourceName:t})=>(0,i.jsx)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:(0,i.jsx)(o.A,{xs:12,item:!0,children:(0,i.jsx)(ry,{customResource:e,customResourceName:t})})}),rb=({customResource:e,customResourceName:t,defaultExpanded:r})=>(0,i.jsxs)(A.A,{defaultExpanded:r,TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(rx,{customResource:e,customResourceName:t})}),(0,i.jsx)(k.A,{children:Object.prototype.hasOwnProperty.call(e,"status")&&(0,i.jsx)(N.t,{metadata:e.status,options:{nestedValuesAsYaml:!0}})})]}),rv=({customResources:e,customResourceName:t,defaultExpanded:r=!1})=>(0,i.jsx)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:e.map((e,n)=>(0,i.jsx)(o.A,{container:!0,item:!0,xs:!0,children:(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(rb,{defaultExpanded:r,customResource:e,customResourceName:t})})},n))}),rw=({})=>{let e,t=(e=(0,c.useContext)(R).customResources,rn().groupBy(e,e=>e.kind));return(0,i.jsx)(i.Fragment,{children:Object.entries(t).map(([e,t],r)=>"Rollout"===e?(0,i.jsx)(rf,{rollouts:t},r):(0,i.jsx)(rv,{customResources:t,customResourceName:e},r))})},rj=({daemonset:e,expanded:t})=>{let r=e.metadata?.namespace;return(0,i.jsx)(tE,{object:e,expanded:t,kind:"DaemonSet",renderObject:e=>({updateStrategyType:e.spec?.updateStrategy?.type??"???",minReadySeconds:e.spec?.minReadySeconds??"???",revisionHistoryLimit:e.spec?.revisionHistoryLimit??"???",currentNumberScheduled:e.status?.currentNumberScheduled??"???",desiredNumberScheduled:e.status?.desiredNumberScheduled??"???",numberAvailable:e.status?.numberAvailable??"???",numberMisscheduled:e.status?.numberMisscheduled??"???",numberReady:e.status?.numberReady??"???"}),children:(0,i.jsxs)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"body1",children:e.metadata?.name??"unknown object"})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"DaemonSet"})}),r&&(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tT.A,{size:"small",label:`namespace: ${r}`})})]})})},rA=({daemonset:e,numberOfCurrentPods:t,numberOfPodsWithErrors:r})=>(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,i.jsx)(o.A,{xs:4,item:!0,children:(0,i.jsx)(rj,{daemonset:e})}),(0,i.jsxs)(o.A,{item:!0,container:!0,xs:4,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(T.z3,{children:[t," pods"]})}),(0,i.jsx)(o.A,{item:!0,children:r>0?(0,i.jsxs)(T.Xs,{children:[r," pod",r>1?"s":""," with errors"]}):(0,i.jsx)(T.z3,{children:"No pods with errors"})})]})]}),rk=({daemonset:e,ownedPods:t})=>{let r=(0,c.useContext)($),n=t.filter(e=>r.has(e.metadata?.name??""));return(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(rA,{daemonset:e,numberOfCurrentPods:t.length,numberOfPodsWithErrors:n.length})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(tw,{pods:t,extraColumns:[tm,tf]})})]})},rS=({})=>{let e=(0,c.useContext)(R);return(0,i.jsx)(o.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:e.daemonSets.map((t,r)=>(0,i.jsx)(o.A,{container:!0,item:!0,xs:!0,children:(0,i.jsx)(o.A,{item:!0,xs:!0,children:(0,i.jsx)(rk,{ownedPods:tI(t,e.pods),daemonset:t})})},r))})},rC=({clusterName:e,totalNumberOfPods:t,numberOfPodsWithErrors:r})=>(0,i.jsxs)(o.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",spacing:0,children:[(0,i.jsx)(o.A,{xs:6,item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:(0,i.jsxs)(o.A,{item:!0,xs:!0,children:[(0,i.jsx)(l.A,{variant:"body1",children:e}),(0,i.jsx)(l.A,{color:"textSecondary",variant:"subtitle1",children:"Cluster"})]})}),(0,i.jsxs)(o.A,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsxs)(T.z3,{children:[t," pods"]})}),(0,i.jsx)(o.A,{item:!0,children:r>0?(0,i.jsxs)(T.Xs,{children:[r," pods with errors"]}):(0,i.jsx)(T.z3,{children:"No pods with errors"})})]})]}),rE=({clusterObjects:e,podsWithErrors:t})=>{let r=C(e.resources),n=new Map;return n.set(e.cluster.name,e.podMetrics),(0,i.jsx)(td.Provider,{value:e.cluster,children:(0,i.jsx)(R.Provider,{value:r,children:(0,i.jsx)(ts.Provider,{value:n,children:(0,i.jsx)($.Provider,{value:t,children:(0,i.jsxs)(A.A,{TransitionProps:{unmountOnExit:!0},children:[(0,i.jsx)(S.A,{expandIcon:(0,i.jsx)(E.default,{}),children:(0,i.jsx)(rC,{clusterName:e.cluster.title||e.cluster.name,totalNumberOfPods:r.pods.length,numberOfPodsWithErrors:t.size})}),(0,i.jsx)(k.A,{children:(0,i.jsxs)(o.A,{container:!0,direction:"column",children:[r.customResources.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(rw,{})}):void 0,r.deployments.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tU,{})}):void 0,r.daemonSets.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(rS,{})}):void 0,r.statefulsets.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tM,{})}):void 0,r.ingresses.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(t_,{})}):void 0,r.services.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(tJ,{})}):void 0,r.configMaps.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(t1,{})}):void 0,r.cronJobs.length>0?(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(rr,{})}):void 0]})})]})})})})})},rT=(e,t)=>e.flatMap(e=>t.flatMap(t=>t.detectErrors(e)));function r$({container:e,containerStatus:t}){return!t.ready&&t.state?.running?.startedAt!==void 0&&!!e.readinessProbe&&z.c9.fromISO(t.state?.running?.startedAt).plus({seconds:e.readinessProbe?.initialDelaySeconds??0}).plus({seconds:(e.readinessProbe?.periodSeconds??0)*(e.readinessProbe?.failureThreshold??0)})<z.c9.now()}let rR=[{detectErrors:e=>(e=>{let t=rn().groupBy(e.spec?.containers??[],e=>e.name),r=[];for(let i of e.status?.containerStatuses??[]){let e=t[i.name];e.length>0&&r.push({container:e[0],containerStatus:i})}return r})(e).filter(r$).map(t=>{let r;return{type:"readiness-probe-taking-too-long",message:`The container ${t.container.name} failed to start properly, but is not crashing`,severity:4,proposedFix:(r=e.status?.containerStatuses?.find(e=>!1===e.ready),{errorType:"ReadinessProbeFailed",rootCauseExplanation:`The container ${r?.name} failed to start properly, but is not crashing`,actions:["Ensure that the container starts correctly locally","Check the container's logs looking for error during startup"],type:"events",podName:e.metadata?.name??""}),sourceRef:{name:e.metadata?.name??"unknown pod",namespace:e.metadata?.namespace??"unknown namespace",kind:"Pod",apiGroup:"v1"},occurrenceCount:1}})},{detectErrors:e=>(e.status?.containerStatuses??[]).filter(e=>e.state?.waiting?.message!==void 0).map(t=>({type:"container-waiting",message:t.state?.waiting?.message??"container waiting",severity:4,proposedFix:(e=>{let t=(e.status?.containerStatuses??[]).find(e=>e.state?.waiting!==void 0),r=(e.status?.containerStatuses??[]).map(e=>e.state?.waiting).find(e=>e?.reason!==void 0);switch(r?.reason){case"InvalidImageName":return{errorType:"InvalidImageName",rootCauseExplanation:"The image in the pod is invalid",actions:["Ensure the image name is correct and valid image name"],type:"docs",docsLink:"https://docs.docker.com/engine/reference/commandline/tag/#extended-description"};case"ImagePullBackOff":return{errorType:"ImagePullBackOff",rootCauseExplanation:"The image either could not be found or Kubernetes does not have permission to pull it",actions:["Ensure the image name is correct","Ensure Kubernetes has permission to pull this image"],type:"docs",docsLink:"https://kubernetes.io/docs/concepts/containers/images/#imagepullbackoff"};case"CrashLoopBackOff":return{errorType:"CrashLoopBackOff",rootCauseExplanation:`The container ${t?.name} has crashed many times, it will be exponentially restarted until it stops crashing`,actions:["Check the crash logs for stacktraces"],type:"logs",container:t?.name??"unknown"};case"CreateContainerConfigError":return{errorType:"CreateContainerConfigError",rootCauseExplanation:"There is missing or mismatching configuration required to start the container",actions:["Ensure ConfigMaps references in the Deployment manifest are correct and the keys exist","Ensure Secrets references in the Deployment manifest are correct and the keys exist"],type:"docs",docsLink:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/"};default:return}})(e),sourceRef:{name:e.metadata?.name??"unknown pod",namespace:e.metadata?.namespace??"unknown namespace",kind:"Pod",apiGroup:"v1"},occurrenceCount:1}))},{detectErrors:e=>(e.status?.containerStatuses??[]).filter(e=>e.restartCount>0).map(t=>({type:"containers-restarting",message:`container=${t.name} restarted ${t.restartCount} times`,severity:4,proposedFix:(e=>{let t=(e.status?.containerStatuses??[]).find(e=>e.lastState?.terminated!==void 0),r=t?.lastState?.terminated;if(r)switch(r?.reason){case"Unknown":return{errorType:"Unknown",rootCauseExplanation:`This container has exited with a non-zero exit code (${r.exitCode})`,actions:["Check the crash logs for stacktraces"],container:t.name,type:"logs"};case"Error":return{errorType:"Error",rootCauseExplanation:`This container has exited with a non-zero exit code (${r.exitCode})`,actions:["Check the crash logs for stacktraces"],container:t.name,type:"logs"};case"OOMKilled":return{errorType:"OOMKilled",rootCauseExplanation:`The container "${t.name}" has crashed because it has tried to use more memory that it has been allocated`,actions:["Increase the amount of memory assigned to the container","Ensure the application is memory bounded and is not trying to consume too much memory"],docsLink:"https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource/#exceed-a-container-s-memory-limit",type:"docs"};default:return}})(e),sourceRef:{name:e.metadata?.name??"unknown pod",namespace:e.metadata?.namespace??"unknown namespace",kind:"Pod",apiGroup:"v1"},occurrenceCount:t.restartCount}))}],rI=e=>rT(e,rR),rP=[{detectErrors:e=>(e.status?.conditions??[]).filter(e=>"False"===e.status).filter(e=>void 0!==e.message).map(t=>({type:"condition-message-present",message:t.message??"",severity:6,sourceRef:{name:e.metadata?.name??"unknown hpa",namespace:e.metadata?.namespace??"unknown namespace",kind:"Deployment",apiGroup:"apps/v1"},occurrenceCount:1}))}],rO=e=>rT(e,rP),rN=[{detectErrors:e=>(e.spec?.maxReplicas??-1)===e.status?.currentReplicas?[{type:"hpa-max-current-replicas",message:`Current number of replicas (${e.status?.currentReplicas}) is equal to the configured max number of replicas (${e.spec?.maxReplicas??-1})`,severity:8,sourceRef:{name:e.metadata?.name??"unknown hpa",namespace:e.metadata?.namespace??"unknown namespace",kind:"HorizontalPodAutoscaler",apiGroup:"autoscaling/v2"},occurrenceCount:1}]:[]}],rB=e=>rT(e,rN);var rU=r(96872),rL=r(79701);(0,rL.i)({name:"kubernetes.proxy",attributes:{}});let rF=(0,rL.i)({name:"kubernetes.resources.read",attributes:{action:"read"}}),rz=(0,rL.i)({name:"kubernetes.clusters.read",attributes:{action:"read"}});var rM=r(90712);let rD=(0,eG.h)({id:"kubernetes",messages:{kubernetesContentPage:{permissionAlert:{title:"Permission required",message:"To view Kubernetes objects, contact your portal administrator to give you the 'kubernetes.clusters.read' and 'kubernetes.resources.read' permission."}}}});function rq(e){let t=(0,rM.J)({permission:rz}),r=(0,rM.J)({permission:rF}),{t:n}=(0,e_.i)(rD);return t.loading||r.loading?null:t.allowed&&r.allowed?(0,i.jsx)(i.Fragment,{children:e.children}):(0,i.jsx)(y.B,{title:n("kubernetesContentPage.permissionAlert.title"),message:n("kubernetesContentPage.permissionAlert.message")})}let rW=({entity:e,refreshIntervalMs:t})=>{let{kubernetesObjects:r,error:n}=((e,t=1e4)=>{let r=(0,u.gf)(m.Y1),i=(0,u.gf)(g.g),n=(0,c.useCallback)(async()=>{let t=await p(e,r,i);return await r.getObjectsByEntity({auth:t,entity:e})},[r,e,i]),{value:a,loading:s,error:o,retry:l}=(0,h.A)(()=>n(),[n]);return(0,d.A)(()=>l(),t),{kubernetesObjects:a,loading:s,error:o?.message}})(e,t),a=r?.items.map(e=>e.cluster)??[],s=r?.items.filter(e=>e.errors.length>0)??[],y=void 0!==r?(e=>{let t=new Map;for(let r of e.items){let e=[],i=C(r.resources);e=(e=(e=e.concat(rI(i.pods))).concat(rO(i.deployments))).concat(rB(i.horizontalPodAutoscalers)),t.set(r.cluster.name,e)}return t})(r):new Map;return(0,i.jsx)(rq,{children:(0,i.jsxs)(f.Provider,{value:[...y.values()].flat(),children:[void 0===r&&void 0===n&&(0,i.jsx)(rU.k,{}),s.length>0&&(0,i.jsx)(o.A,{container:!0,spacing:3,direction:"column",children:(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(x,{entityName:e.metadata.name,clustersWithErrors:s})})}),void 0!==n&&(0,i.jsx)(o.A,{container:!0,spacing:3,direction:"column",children:(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(x,{entityName:e.metadata.name,errorMessage:n})})}),r&&(0,i.jsxs)(o.A,{container:!0,spacing:3,direction:"column",children:[(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(j,{detectedErrors:y,clusters:a})}),(0,i.jsx)(o.A,{item:!0,children:(0,i.jsx)(l.A,{variant:"h3",children:"Your Clusters"})}),(0,i.jsxs)(o.A,{item:!0,container:!0,children:[r?.items.length<=0&&(0,i.jsx)(o.A,{container:!0,justifyContent:"space-around",direction:"row",alignItems:"center",spacing:2,children:(0,i.jsx)(o.A,{item:!0,xs:8,children:(0,i.jsx)(ek.p,{missing:"data",title:"No Kubernetes resources",description:`No resources on any known clusters for ${e.metadata.name}`})})}),r?.items.length>0&&r?.items.map((e,t)=>{let r=new Set(y.get(e.cluster.name)?.filter(e=>"Pod"===e.sourceRef.kind).map(e=>e.sourceRef.name));return(0,i.jsx)(o.A,{item:!0,xs:12,children:(0,i.jsx)(rE,{clusterObjects:e,podsWithErrors:r})},t)})]})]})]})})},rH="backstage.io/kubernetes-id",r_="backstage.io/kubernetes-label-selector",rG=e=>!!e.metadata.annotations?.[rH]||!!e.metadata.annotations?.[r_],rK=e=>{let{entity:t}=(0,n.tN)(),r=t.metadata.annotations?.[rH],o=t.metadata.annotations?.[r_];return r||o?(0,i.jsx)(s.BV,{children:(0,i.jsx)(s.qh,{path:"/",element:(0,i.jsx)(rW,{entity:t,refreshIntervalMs:e.refreshIntervalMs})})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.o,{annotation:rH}),(0,i.jsx)("h1",{children:"Or use a label selector query, which takes precedence over the previous annotation."}),(0,i.jsx)(H.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/features/kubernetes/configuration#surfacing-your-kubernetes-components-as-part-of-an-entity",children:"Read Kubernetes Plugin Docs"})]})}},58752:function(e,t,r){"use strict";r.d(t,{XK:()=>B});var i=r(70984),n=r(35625),a=r(78560),s=r(57559);class o{discoveryApi;fetchApi;kubernetesAuthProvidersApi;constructor(e){this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi,this.kubernetesAuthProvidersApi=e.kubernetesAuthProvidersApi}async handleResponse(e){if(!e.ok){let t=await e.text();throw Error(404===e.status?"Could not find the Kubernetes Backend (HTTP 404). Make sure the plugin has been fully installed.":`Request failed with ${e.status} ${e.statusText}, ${t}`)}return await e.json()}async postRequired(e,t){let r=`${await this.discoveryApi.getBaseUrl("kubernetes")}${e}`,i=await this.fetchApi.fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return this.handleResponse(i)}async getCluster(e){let t=await this.getClusters().then(t=>t.find(t=>t.name===e));if(!t)throw new s.m_(`Cluster ${e} not found`);return t}async getCredentials(e,t){return await this.kubernetesAuthProvidersApi.getCredentials("oidc"===e?`${e}.${t}`:e)}async getObjectsByEntity(e){return await this.postRequired(`/services/${e.entity.metadata.name}`,e)}async getWorkloadsByEntity(e){return await this.postRequired("/resources/workloads/query",{auth:e.auth,entityRef:(0,a.U2)(e.entity)})}async getCustomObjectsByEntity(e){return await this.postRequired("/resources/custom/query",{entityRef:(0,a.U2)(e.entity),auth:e.auth,customResources:e.customResources})}async getClusters(){let e=`${await this.discoveryApi.getBaseUrl("kubernetes")}/clusters`,t=await this.fetchApi.fetch(e);return(await this.handleResponse(t)).items}async proxy(e){let{authProvider:t,oidcTokenProvider:r}=await this.getCluster(e.clusterName),i=await this.getCredentials(t,r),n=`${await this.discoveryApi.getBaseUrl("kubernetes")}/proxy${e.path}`,a=o.getKubernetesHeaders(e,i?.token,t,r);return await this.fetchApi.fetch(n,{...e.init,headers:a})}static getKubernetesHeaders(e,t,r,i){let n=o.getKubernetesAuthHeaderByAuthProvider(r,i);return{...e.init?.headers,"Backstage-Kubernetes-Cluster":e.clusterName,...t&&{[n]:t}}}static getKubernetesAuthHeaderByAuthProvider(e,t){let r="Backstage-Kubernetes-Authorization";return r=r.concat("-",e),t&&(r=r.concat("-",t)),r}}class l{kubernetesApi;constructor(e){this.kubernetesApi=e.kubernetesApi}async handleText(e){if(!e.ok){let t=await e.text();throw e.status,Error(`Proxy request failed with ${e.status} ${e.statusText}, ${t}`)}return await e.text()}async handleJson(e){if(!e.ok){let t=await e.text(),r=`Request failed with ${e.status} ${e.statusText}, ${t}`;throw Error(404===e.status?`Proxy request failed with ${e.status} ${e.statusText}, ${t}`:`Request failed with ${e.status} ${e.statusText}, ${t}`)}return await e.json()}async getEventsByInvolvedObjectName({clusterName:e,involvedObjectName:t,namespace:r}){return await this.kubernetesApi.proxy({clusterName:e,path:`/api/v1/namespaces/${r}/events?fieldSelector=involvedObject.name=${t}`,init:{method:"GET"}}).then(e=>this.handleJson(e)).then(e=>e.items)}async getPodLogs({podName:e,namespace:t,clusterName:r,containerName:i,previous:n}){let a=new URLSearchParams({container:i});return n&&a.append("previous",""),await this.kubernetesApi.proxy({clusterName:r,path:`/api/v1/namespaces/${t}/pods/${e}/log?${a.toString()}`,init:{method:"GET"}}).then(e=>this.handleText(e)).then(e=>({text:e}))}async deletePod({podName:e,namespace:t,clusterName:r}){return await this.kubernetesApi.proxy({clusterName:r,path:`/api/v1/namespaces/${t}/pods/${e}`,init:{method:"DELETE"}}).then(e=>this.handleText(e)).then(e=>({text:e}))}}class c{authProvider;constructor(e){this.authProvider=e}async decorateRequestBodyForAuth(e){let t=(await this.getCredentials()).token;return"auth"in e?e.auth.google=t:e.auth={google:t},e}async getCredentials(){return{token:await this.authProvider.getAccessToken("https://www.googleapis.com/auth/cloud-platform.read-only")}}}class d{async decorateRequestBodyForAuth(e){return e}async getCredentials(){return{}}}class u{providerName;authProvider;constructor(e,t){this.providerName=e,this.authProvider=t}async decorateRequestBodyForAuth(e){let t=(await this.getCredentials()).token,r={...e.auth};return r.oidc?r.oidc[this.providerName]=t:r.oidc={[this.providerName]:t},e.auth=r,e}async getCredentials(){return{token:await this.authProvider.getIdToken()}}}class p{microsoftAuthApi;constructor(e){this.microsoftAuthApi=e}async decorateRequestBodyForAuth(e){return{...e,auth:{...e.auth,aks:(await this.getCredentials()).token}}}async getCredentials(){return{token:await this.microsoftAuthApi.getAccessToken("6dae42f8-4368-4678-94ff-3960e28e3630/user.read")}}}class h{kubernetesAuthProviderMap;constructor(e){this.kubernetesAuthProviderMap=new Map,this.kubernetesAuthProviderMap.set("google",new c(e.googleAuthApi)),this.kubernetesAuthProviderMap.set("serviceAccount",new d),this.kubernetesAuthProviderMap.set("googleServiceAccount",new d),this.kubernetesAuthProviderMap.set("aws",new d),this.kubernetesAuthProviderMap.set("azure",new d),this.kubernetesAuthProviderMap.set("localKubectlProxy",new d),this.kubernetesAuthProviderMap.set("aks",new p(e.microsoftAuthApi)),e.oidcProviders&&Object.keys(e.oidcProviders).forEach(t=>{this.kubernetesAuthProviderMap.set(`oidc.${t}`,new u(t,e.oidcProviders[t]))})}async decorateRequestBodyForAuth(e,t){let r=this.kubernetesAuthProviderMap.get(e);if(r)return await r.decorateRequestBodyForAuth(t);if(e.startsWith("oidc."))throw Error(`KubernetesAuthProviders has no oidcProvider configured for ${e}`);throw Error(`authProvider "${e}" has no KubernetesAuthProvider defined for it`)}async getCredentials(e){let t=this.kubernetesAuthProviderMap.get(e);if(t)return await t.getCredentials();if(e.startsWith("oidc."))throw Error(`KubernetesAuthProviders has no oidcProvider configured for ${e}`);throw Error(`authProvider "${e}" has no KubernetesAuthProvider defined for it`)}}let g=["subscriptionId","resourceGroup","clusterName"];class m{async formatClusterLink(e){if(!e.dashboardParameters)throw Error("AKS dashboard requires a dashboardParameters option");let t=e.dashboardParameters;for(let e of g)if("string"!=typeof t[e])throw Error(`AKS dashboard requires a "${e}" of type string in the dashboardParameters option`);let r=`/subscriptions/${t.subscriptionId}/resourceGroups/${t.resourceGroup}/providers/Microsoft.ContainerService/managedClusters/${t.clusterName}`,{name:i,namespace:n,uid:a}=e.object.metadata,{selector:s}=e.object.spec,o={kind:e.kind,metadata:{name:i,namespace:n,uid:a},spec:{selector:s}};return new URL(`https://portal.azure.com/#blade/Microsoft_Azure_ContainerService/AksK8ResourceMenuBlade/overview-Deployment/aksClusterId/${encodeURIComponent(r)}/resource/${encodeURIComponent(JSON.stringify(o))}`)}}class f{async formatClusterLink(e){throw Error("EKS formatter is not yet implemented. Please, contribute!")}}let y={deployment:"deployment",pod:"pod",ingress:"ingress",service:"service",horizontalpodautoscaler:"deployment"};class x{googleAuthApi;constructor(e){this.googleAuthApi=e}async formatClusterLink(e){let t;if(!e.dashboardParameters)throw Error("GKE dashboard requires a dashboardParameters option");let r=e.dashboardParameters;if("string"!=typeof r.projectId)throw Error('GKE dashboard requires a "projectId" of type string in the dashboardParameters option');if("string"!=typeof r.region)throw Error('GKE dashboard requires a "region" of type string in the dashboardParameters option');if("string"!=typeof r.clusterName)throw Error('GKE dashboard requires a "clusterName" of type string in the dashboardParameters option');let i=new URL("https://console.cloud.google.com/"),n=encodeURIComponent(r.region),a=encodeURIComponent(r.clusterName),s=encodeURIComponent(e.object.metadata?.name??""),o=encodeURIComponent(e.object.metadata?.namespace??""),l=y[e.kind.toLocaleLowerCase("en-US")];if(o&&s&&l){let e=["ingress","pod"].includes(l)?"details":"overview";t=`kubernetes/${l}/${n}/${a}/${o}/${s}/${e}`}else t=`kubernetes/clusters/details/${n}/${a}/details`;let c=new URL(t,i);if(c.searchParams.set("project",r.projectId),this.googleAuthApi){let e=await this.googleAuthApi.getProfile({optional:!0});e?.email&&c.searchParams.set("authuser",e.email)}return c}}let b={deployment:"deployment",pod:"pod",ingress:"ingress",service:"service",horizontalpodautoscaler:"deployment",statefulset:"statefulset"};class v{async formatClusterLink(e){if(!e.dashboardUrl)throw Error("standard dashboard requires a dashboardUrl option");let t=new URL(e.dashboardUrl.href),r=encodeURIComponent(e.object.metadata?.name??""),i=encodeURIComponent(e.object.metadata?.namespace??""),n=b[e.kind.toLocaleLowerCase("en-US")];return t.pathname.endsWith("/")||(t.pathname+="/"),n&&r&&i?t.hash=`/${n}/${i}/${r}`:i&&(t.hash="/workloads"),i&&(t.hash+=`?namespace=${i}`),t}}let w={deployment:"deployments",ingress:"ingresses",service:"services",horizontalpodautoscaler:"horizontalpodautoscalers",persistentvolume:"persistentvolumes"};class j{async formatClusterLink(e){if(!e.dashboardUrl)throw Error("OpenShift dashboard requires a dashboardUrl option");let t=new URL(e.dashboardUrl.href),r=encodeURIComponent(e.object.metadata?.name??""),i=encodeURIComponent(e.object.metadata?.namespace??""),n=w[e.kind.toLocaleLowerCase("en-US")];t.pathname.endsWith("/")||(t.pathname+="/");let a="";return i?a=r&&n?`k8s/ns/${i}/${n}/${r}`:`k8s/cluster/projects/${i}`:n&&(a=`k8s/cluster/${n}`,r&&(a+=`/${r}`)),new URL(a,t)}}let A={deployment:"apps.deployment",ingress:"networking.k8s.io.ingress",service:"service",horizontalpodautoscaler:"autoscaling.horizontalpodautoscaler"};class k{async formatClusterLink(e){if(!e.dashboardUrl)throw Error("Rancher dashboard requires a dashboardUrl option");let t=new URL(e.dashboardUrl.href),r=encodeURIComponent(e.object.metadata?.name??""),i=encodeURIComponent(e.object.metadata?.namespace??""),n=A[e.kind.toLocaleLowerCase("en-US")];t.pathname.endsWith("/")||(t.pathname+="/");let a="";return n&&r&&i?a=`explorer/${n}/${i}/${r}`:i&&(a="explorer/workload"),new URL(a,t)}}class S{async formatClusterLink(e){let t,{dashboardUrl:r,dashboardParameters:i,object:n,kind:a}=e;if(!r&&!i?.internal)throw Error("Dashboard URL is required or dashboardInternal must be true");let s=i?.clusterName??"default",o=this.getHeadlampPath(a,n,s);if(!o)throw Error(`Could not find path for kind: ${a}`);if(i?.internal)(t=new URL(window.location.origin)).pathname=i.headlampRoute||"/headlamp";else{if(!r?.href)throw Error("Dashboard URL is required when not using internal dashboard");t=new URL(r.href)}return t.searchParams.set("to",o),t}NAMESPACED_RESOURCES=new Set(["pod","deployment","replicaset","statefulset","daemonset","job","cronjob","service","ingress","configmap","secret","serviceaccount","role","rolebinding","networkpolicy","horizontalpodautoscaler","poddisruptionbudget","persistentvolumeclaim"]);getHeadlampPath(e,t,r){let i=e.toLocaleLowerCase("en-US"),{name:n}=t.metadata??{},{namespace:a}=t.metadata??{};if(!n)throw Error(`Resource name is required for kind: ${e}`);if(this.NAMESPACED_RESOURCES.has(i)&&!a)throw Error(`Namespace is required for namespaced resource: ${e}`);return a||(a="default"),({namespace:`/c/${r}/namespaces/${n}`,node:`/c/${r}/nodes/${n}`,persistentvolume:`/c/${r}/storage/persistentvolumes/${n}`,persistentvolumeclaim:`/c/${r}/storage/persistentvolumeclaims/${a}/${n}`,pod:`/c/${r}/pods/${a}/${n}`,deployment:`/c/${r}/deployments/${a}/${n}`,replicaset:`/c/${r}/replicasets/${a}/${n}`,statefulset:`/c/${r}/statefulsets/${a}/${n}`,daemonset:`/c/${r}/daemonsets/${a}/${n}`,job:`/c/${r}/jobs/${a}/${n}`,cronjob:`/c/${r}/cronjobs/${a}/${n}`,service:`/c/${r}/services/${a}/${n}`,ingress:`/c/${r}/ingresses/${a}/${n}`,configmap:`/c/${r}/configmaps/${a}/${n}`,secret:`/c/${r}/secrets/${a}/${n}`,serviceaccount:`/c/${r}/serviceaccounts/${a}/${n}`,role:`/c/${r}/roles/${a}/${n}`,rolebinding:`/c/${r}/rolebindings/${a}/${n}`,clusterrole:`/c/${r}/clusterroles/${n}`,clusterrolebinding:`/c/${r}/clusterrolebindings/${n}`,storageclass:`/c/${r}/storage/storageclasses/${n}`,networkpolicy:`/c/${r}/networkpolicies/${a}/${n}`,horizontalpodautoscaler:`/c/${r}/horizontalpodautoscalers/${a}/${n}`,poddisruptionbudget:`/c/${r}/poddisruptionbudgets/${a}/${n}`,customresourcedefinition:`/c/${r}/customresourcedefinitions/${n}`})[i]??""}}class C{formatters;defaultFormatterName;constructor(e){this.formatters=e.formatters,this.defaultFormatterName=e.defaultFormatterName}async formatClusterLink(e){if(!e.dashboardUrl&&!e.dashboardParameters)return;if(e.dashboardUrl&&!e.object)return e.dashboardUrl;let t=e.dashboardApp??this.defaultFormatterName,r=this.formatters[t];if(!r)throw Error(`Could not find Kubernetes dashboard app named '${t}'`);return(await r.formatClusterLink({dashboardUrl:e.dashboardUrl?new URL(e.dashboardUrl):void 0,dashboardParameters:e.dashboardParameters,object:e.object,kind:e.kind})).toString()}}var E=r(77555),T=r(50809),$=r(45843),R=r(61617),I=r(95159),P=r(33129),O=r(96504);let N=(0,E.H)({id:"kubernetes"}),B=(0,T.i)({id:"kubernetes",apis:[(0,$.b)({api:i.Y1,deps:{discoveryApi:R.I,fetchApi:I.a,kubernetesAuthProvidersApi:n.g},factory:({discoveryApi:e,fetchApi:t,kubernetesAuthProvidersApi:r})=>new o({discoveryApi:e,fetchApi:t,kubernetesAuthProvidersApi:r})}),(0,$.b)({api:i.uv,deps:{kubernetesApi:i.Y1},factory:({kubernetesApi:e})=>new l({kubernetesApi:e})}),(0,$.b)({api:n.g,deps:{gitlabAuthApi:P.$7,googleAuthApi:P.Vk,microsoftAuthApi:P.u0,oktaAuthApi:P.Zj,oneloginAuthApi:P.zk},factory:({gitlabAuthApi:e,googleAuthApi:t,microsoftAuthApi:r,oktaAuthApi:i,oneloginAuthApi:n})=>new h({microsoftAuthApi:r,googleAuthApi:t,oidcProviders:{gitlab:e,google:t,microsoft:r,okta:i,onelogin:n}})}),(0,$.b)({api:i.Y$,deps:{googleAuthApi:P.Vk},factory:e=>new C({formatters:{standard:new v,aks:new m,eks:new f,gke:new x(e.googleAuthApi),openshift:new j,rancher:new k,headlamp:new S},defaultFormatterName:"standard"})})],routes:{entityContent:N}}).provide((0,O.QJ)({name:"EntityKubernetesContent",component:()=>Promise.resolve().then(r.bind(r,29397)).then(e=>e.Router),mountPoint:N}))},95777:function(e,t,r){"use strict";r.d(t,{a:()=>i});let i=(0,r(28967).y)({id:"plugin.notifications.service"})},41168:function(e,t,r){"use strict";r.d(t,{e:()=>k});var i=r(31085),n=r(14041),a=r(44188),s=r(72814),o=r(18139),l=r(95777),c=r(45170),d=r(97331);let u=r.n(d)()(e=>{document.title=e},100);var p=r(75202),h=r(7370),g=r(51561),m=r(34477),f=r(57389),y=r(99632),x=r(80052),b=r(39330),v=r(55429),w=r(29365),j=r(94390);let A=(0,r(60882).A)(y.hD)(({theme:e})=>({"&.notistack-MuiContent-low":{backgroundColor:e.palette.background.default,color:e.palette.text.primary},"&.notistack-MuiContent-normal":{backgroundColor:e.palette.background.default,color:e.palette.text.primary},"&.notistack-MuiContent-high":{backgroundColor:e.palette.background.default,color:e.palette.text.primary},"&.notistack-MuiContent-critical":{backgroundColor:e.palette.background.default,color:e.palette.text.primary}})),k=e=>{let{webNotificationsEnabled:t=!1,titleCounterEnabled:r=!0,snackbarEnabled:d=!0,snackbarAutoHideDuration:k=1e4,icon:S=g.default,text:C="Notifications",...E}=e??{webNotificationsEnabled:!1,titleCounterEnabled:!0,snackbarProps:{enabled:!0,autoHideDuration:1e4}},T=(0,n.useMemo)(()=>e?.snackbarProps??{enabled:d,autoHideDuration:k},[e?.snackbarProps,k,d]),{loading:$,error:R,value:I,retry:P}=(0,a.s)(e=>e.getStatus()),O=(0,o.gf)(l.a),N=(0,o.gf)(m.k),[B,U]=(0,n.useState)(0),L=(0,s.S)(c.r)(),{lastSignal:F}=(0,f.U)("notifications"),{sendWebNotification:z,requestUserPermission:M}=function(e){let[t,r]=(0,n.useState)("default"),i=(0,s.S)(c.r)(),a=(0,o.gf)(l.a),d=(0,n.useCallback)(()=>{e&&"Notification"in window&&"default"===t&&window.Notification.requestPermission().then(e=>{r(e)})},[e,t]);return{sendWebNotification:(0,n.useCallback)(e=>{if("granted"!==t)return null;let r=new Notification(e.title,{body:e.description,tag:e.id});return r.onclick=t=>{t.preventDefault(),e.link?(window.open(e.link,"_blank"),a.updateNotifications({ids:[e.id],read:!0})):window.open(i),r.close()},r},[t,a,i]),requestUserPermission:d}}(t),[D,q]=(0,n.useState)(!1),{setNotificationCount:W}=function(){let[e,t]=(0,n.useState)(document.title),[r,i]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let t=e.replace(/^\(\d+\)\s/,""),i=`${0===r?"":`(${r}) `}${t}`;return document.title!==i&&u(i),()=>{document.title=e.replace(/^\(\d+\)\s/,"")}},[r,e]),(0,n.useEffect)(()=>{let e,r=document.querySelector("title");return r&&(e=new MutationObserver(e=>{e?.[0]?.target?.textContent&&t(e[0].target.textContent)})).observe(r,{characterData:!0,childList:!0}),()=>{e&&e.disconnect()}},[]),{setNotificationCount:(0,n.useCallback)(e=>i(e),[])}}(),H=(0,n.useCallback)(e=>({action:t=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.A,{component:p.N_,to:e.payload.link??L,onClick:()=>{e.payload.link&&O.updateNotifications({ids:[e.id],read:!0}).catch(()=>{N.post({message:"Failed to mark notification as read",severity:"error"})}),(0,y.mk)(t)},children:(0,i.jsx)(b.default,{fontSize:"small"})}),(0,i.jsx)(w.A,{onClick:()=>{O.updateNotifications({ids:[e.id],read:!0}).then(()=>{(0,y.mk)(t)}).catch(()=>{N.post({message:"Failed to mark notification as read",severity:"error"})})},children:(0,i.jsx)(v.default,{fontSize:"small"})})]})}),[L,O,N]);(0,n.useEffect)(()=>{D&&(P(),q(!1))},[D,P]),(0,n.useEffect)(()=>{F&&F.action&&((t||T.enabled)&&"new_notification"===F.action&&O.getNotification(F.notification_id).then(e=>{if(e&&(t&&z({id:e.id,title:e.payload.title,description:e.payload.description??"",link:e.payload.link}),T.enabled)){let{action:t}=H(e),r=e.payload.title.length>50?`${e.payload.title.substring(0,50)}...`:e.payload.title;(0,y.M8)(r,{key:e.id,style:T.snackStyle,variant:e.payload.severity,anchorOrigin:T.anchorOrigin??{vertical:"bottom",horizontal:"right"},action:t,autoHideDuration:T.autoHideDuration})}}).catch(()=>{N.post({message:"Failed to fetch notification",severity:"error"})}),q(!0))},[F,z,t,O,N,H,T]),(0,n.useEffect)(()=>{$||R||!I||U(I.unread)},[$,R,I]),(0,n.useEffect)(()=>{r&&W(B)},[r,B,W]);let _=!R&&B?B:void 0;return(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(y.n,{iconVariant:{normal:T?.iconVariant?.normal??(0,i.jsx)(x.z,{severity:"normal"}),critical:T?.iconVariant?.critical??(0,i.jsx)(x.z,{severity:"critical"}),high:T?.iconVariant?.high??(0,i.jsx)(x.z,{severity:"high"}),low:T?.iconVariant?.low??(0,i.jsx)(x.z,{severity:"low"})},dense:T?.dense,maxSnack:T?.maxSnack,Components:{normal:T?.Components?.normal??A,critical:T?.Components?.critical??A,high:T?.Components?.high??A,low:T?.Components?.low??A}}),(0,i.jsx)(h.uk,{to:L,onClick:()=>{M()},text:C,icon:S,...E,children:_&&(0,i.jsx)(j.A,{size:"small",label:_>99?"99+":_})})]})}},80052:function(e,t,r){"use strict";r.d(t,{z:()=>c});var i=r(31085),n=r(84343),a=r(9181),s=r(26907),o=r(89031);let l=(0,r(58837).A)(e=>({critical:{color:e.palette.status.error},high:{color:e.palette.status.warning},normal:{color:e.palette.status.ok},low:{color:e.palette.status.running}})),c=({severity:e})=>{let t=l();switch(e){case"critical":return(0,i.jsx)(a.default,{className:t.critical});case"high":return(0,i.jsx)(s.default,{className:t.high});case"low":return(0,i.jsx)(o.default,{className:t.low});default:return(0,i.jsx)(n.default,{className:t.normal})}}},44188:function(e,t,r){"use strict";r.d(t,{s:()=>s});var i=r(95777),n=r(18139),a=r(28966);function s(e,t=[]){let r=(0,n.gf)(i.a);return(0,a.A)(async()=>await e(r),t)}},13717:function(e,t,r){"use strict";r.d(t,{O:()=>p});var i=r(50809),n=r(45843),a=r(61617),s=r(95159),o=r(96504),l=r(45170),c=r(95777),d=r(53317);class u{discoveryApi;fetchApi;constructor(e){this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi}async getNotifications(e){let t=new URLSearchParams;return e?.limit!==void 0&&t.append("limit",e.limit.toString(10)),e?.offset!==void 0&&t.append("offset",e.offset.toString(10)),e?.sort!==void 0&&t.append("orderField",`${e.sort},${e?.sortOrder??"desc"}`),this.appendCommonQueryStrings(t,e),e?.topic!==void 0&&t.append("topic",e.topic),await this.request(`/notifications?${t}`)}async getNotification(e){return await this.request(`/notifications/${encodeURIComponent(e)}`)}async getStatus(){return await this.request("/status")}async updateNotifications(e){return await this.request("/notifications/update",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}async getNotificationSettings(){return await this.request("/settings")}async updateNotificationSettings(e){return await this.request("/settings",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}async getTopics(e){let t=new URLSearchParams;return this.appendCommonQueryStrings(t,e),await this.request(`/topics?${t}`)}appendCommonQueryStrings(e,t){t?.search&&e.append("search",t.search),t?.read!==void 0&&e.append("read",t.read?"true":"false"),t?.saved!==void 0&&e.append("saved",t.saved?"true":"false"),t?.createdAfter!==void 0&&e.append("createdAfter",t.createdAfter.toISOString()),t?.minimumSeverity!==void 0&&e.append("minimumSeverity",t.minimumSeverity)}async request(e,t){let r=await this.discoveryApi.getBaseUrl("notifications"),i=await this.fetchApi.fetch(`${r}${e}`,t);if(!i.ok)throw await d.o.fromResponse(i);return i.json()}}let p=(0,i.i)({id:"notifications",routes:{root:l.r},apis:[(0,n.b)({api:c.a,deps:{discoveryApi:a.I,fetchApi:s.a},factory:({discoveryApi:e,fetchApi:t})=>new u({discoveryApi:e,fetchApi:t})})]}).provide((0,o.QJ)({name:"NotificationsPage",component:()=>r.e("3253").then(r.bind(r,49300)).then(e=>e.NotificationsPage),mountPoint:l.r}))},45170:function(e,t,r){"use strict";r.d(t,{r:()=>i});let i=(0,r(77555).H)({id:"notifications"})},26722:function(e,t,r){"use strict";r.d(t,{k:()=>P});var i=r(31085),n=r(78560),a=r(55488),s=r(7370),o=r(76059),l=r(14041),c=r(18690),d=r(21613),u=r(58837),p=r(71677),h=r(72501),g=r(75202),m=r(53373),f=r.n(m),y=r(79065),x=r(55704),b=r(31072),v=r(82775),w=r(77125),j=r(64947);let A=(0,u.A)(e=>({item:{height:48,width:"100%","&:hover":{background:e.palette.navigation.navItem?.hoverBackground||"#6f6f6f",color:e.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:e.palette.navigation.color,padding:e.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:e.palette.common.white},label:{margin:e.spacing(1.75),marginLeft:e.spacing(1),fontSize:e.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:e.palette.navigation.navItem?.hoverBackground||"#6f6f6f",color:e.palette.navigation.selectedColor}},dropdownButton:{textTransform:"none",justifyContent:"flex-start"},textContent:{color:e.palette.navigation.color,paddingLeft:e.spacing(4),paddingRight:e.spacing(1),fontSize:e.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}),{name:"BackstageSidebarSubmenuItem"}),k=e=>{let{title:t,subtitle:r,to:n,icon:a,dropdownItems:s,exact:o}=e,u=A(),{setIsHoveredOn:m}=(0,l.useContext)(b.U1),k=()=>{m(!1)},S=(0,c.x$)(n??""),C=(0,c.zy)(),E=(0,v.z)(C,S,o),[T,$]=(0,l.useState)(e.initialShowDropdown??!1);return void 0!==s?(s.some(e=>{let t=(0,d.o1)(e.to);return E=(0,v.z)(C,t,o)}),(0,i.jsxs)(w.A,{className:u.itemContainer,children:[(0,i.jsx)(p.Ay,{title:t,enterDelay:500,enterNextDelay:500,children:(0,i.jsxs)(j.A,{role:"button",onClick:()=>{$(!T)},onTouchStart:e=>e.stopPropagation(),className:f()(u.item,u.dropdownButton,E?u.selected:void 0),children:[a&&(0,i.jsx)(a,{fontSize:"small"}),(0,i.jsxs)(h.A,{variant:"subtitle1",component:"span",className:u.label,children:[t,(0,i.jsx)("br",{}),r&&(0,i.jsx)(h.A,{variant:"caption",component:"span",className:u.subtitle,children:r})]}),T?(0,i.jsx)(x.default,{className:u.dropdownArrow}):(0,i.jsx)(y.default,{className:u.dropdownArrow})]})}),s&&T&&(0,i.jsx)(w.A,{className:u.dropdown,children:s.map((e,t)=>(0,i.jsx)(p.Ay,{title:e.title,enterDelay:500,enterNextDelay:500,children:(0,i.jsx)(g.N_,{to:e.to,underline:"none",className:u.dropdownItem,onClick:k,onTouchStart:e=>e.stopPropagation(),children:(0,i.jsx)(h.A,{component:"span",className:u.textContent,children:e.title})})},t))})]})):(0,i.jsx)(w.A,{className:u.itemContainer,children:(0,i.jsx)(p.Ay,{title:t,enterDelay:500,enterNextDelay:500,children:(0,i.jsxs)(g.N_,{to:n,underline:"none",className:f()(u.item,E?u.selected:void 0),onClick:k,onTouchStart:e=>e.stopPropagation(),children:[a&&(0,i.jsx)(a,{fontSize:"small"}),(0,i.jsxs)(h.A,{variant:"subtitle1",component:"span",className:u.label,children:[t,(0,i.jsx)("br",{}),r&&(0,i.jsx)(h.A,{variant:"caption",component:"span",className:u.subtitle,children:r})]})]})})})};var S=r(18139),C=r(94223),E=r(72814),T=r(73466),$=r(30043),R=r(20987),I=r(91072);let P=e=>{let{singularTitle:t,pluralTitle:r,icon:l,filter:c}=e,d=(0,S.gf)(C.K),u=(0,S.gf)($.v),p=(0,E.S)(R.s),h=(0,S.gf)(I.n),{value:g}=(0,T.A)(async()=>{let e=await d.getBackstageIdentity();return(await u.getEntities({filter:[{kind:"group","relations.hasMember":e.userEntityRef,...c??{}}],fields:["metadata","kind","spec.profile"]})).items},[]);if(!g?.length)return null;if(1===g.length){let e=g[0];return(0,i.jsx)(s.uk,{text:t,to:p((0,n.sM)(e)),icon:l})}return(0,i.jsx)(s.uk,{icon:l,text:r,children:(0,i.jsx)(o.O,{title:r,children:g?.map(e=>{let t=h.forEntity(e);return(0,i.jsx)(k,{title:t.snapshot.primaryTitle,subtitle:e.metadata.namespace!==a.oQ?e.metadata.namespace:void 0,to:p((0,n.sM)(e)),icon:l},(0,n.U2)(e))})})})}},93709:function(e,t,r){"use strict";r.d(t,{O2:()=>d,VA:()=>c,iU:()=>o,lD:()=>l,yJ:()=>s});var i=r(50809),n=r(96504),a=r(14920);let s=(0,i.i)({id:"org",externalRoutes:{catalogIndex:a.E}}),o=s.provide((0,n.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>r.e("7367").then(r.bind(r,14314)).then(e=>e.GroupProfileCard)}})),l=s.provide((0,n.NC)({name:"EntityMembersListCard",component:{lazy:()=>r.e("7367").then(r.bind(r,14314)).then(e=>e.MembersListCard)}})),c=s.provide((0,n.NC)({name:"EntityOwnershipCard",component:{lazy:()=>r.e("7367").then(r.bind(r,14314)).then(e=>e.OwnershipCard)}})),d=s.provide((0,n.NC)({name:"EntityUserProfileCard",component:{lazy:()=>r.e("7367").then(r.bind(r,14314)).then(e=>e.UserProfileCard)}}))},14920:function(e,t,r){"use strict";r.d(t,{E:()=>i});let i=(0,r(2488).I)({id:"catalog-index",optional:!0,defaultTarget:"catalog.catalogIndex"})},79701:function(e,t,r){"use strict";function i({name:e,attributes:t,resourceType:r}){return r?{type:"resource",name:e,attributes:t,resourceType:r}:{type:"basic",name:e,attributes:t}}r.d(t,{i:()=>i})},45614:function(e,t,r){"use strict";function i(e,t){return"resourceType"in e&&(!t||e.resourceType===t)}r.d(t,{OL:()=>i})},3663:function(e,t,r){"use strict";r.d(t,{b:()=>i});let i={DENY:"DENY",ALLOW:"ALLOW",CONDITIONAL:"CONDITIONAL"}},40058:function(e,t,r){"use strict";r.d(t,{x:()=>i});let i=(0,r(28967).y)({id:"plugin.permission.api"})},75014:function(e,t,r){"use strict";r.d(t,{T:()=>o});var i=r(31085),n=r(95208),a=r(90712),s=r(45614);function o(e){let{permission:t,resourceRef:r}=e,o=(0,a.J)((0,s.OL)(t)?{permission:t,resourceRef:r}:{permission:t}),l=(0,n.n)();if(o.loading)return null;if(o.allowed)return(0,i.jsx)(i.Fragment,{children:e.children});if(e.errorPage)return(0,i.jsx)(i.Fragment,{children:e.errorPage});let{NotFoundErrorPage:c}=l.getComponents();return(0,i.jsx)(c,{})}},90712:function(e,t,r){"use strict";r.d(t,{J:()=>l});var i=r(18139),n=r(40058),a=r(45614),s=r(3663),o=r(1973);function l(e){let t=(0,i.gf)(n.x),{data:r,error:l}=(0,o.Ay)(e,async e=>{if((0,a.OL)(e.permission)&&!e.resourceRef)return s.b.DENY;let{result:r}=await t.authorize(e);return r});return l?{error:l,loading:!1,allowed:!1}:void 0===r?{loading:!0,allowed:!1}:{loading:!1,allowed:r===s.b.ALLOW}}},63163:function(e,t,r){"use strict";r.d(t,{z:()=>i});let i=(0,r(28967).y)({id:"plugin.scaffolder.service"})},72918:function(e,t,r){"use strict";r.d(t,{Y:()=>s,z:()=>a});var i=r(85408),n=r(75706);function a(e){return{expose(){let t=()=>null;return(0,i.h)(t,n.b,e),t}}}let s=()=>null;(0,i.h)(s,n.R,!0)},75706:function(e,t,r){"use strict";r.d(t,{R:()=>i,b:()=>n});let i="scaffolder.extensions.wrapper.v1",n="scaffolder.extensions.field.v1"},19579:function(e,t,r){"use strict";r.d(t,{v:()=>i});let i=(0,r(28967).y)({id:"plugin.scaffolder.form-fields"})},71135:function(e,t,r){"use strict";r.d(t,{g:()=>o});var i=r(31085),n=r(28364),a=r(95061);let s=(0,r(58837).A)(e=>({markdownDescription:{fontSize:e.typography.caption.fontSize,margin:0,color:e.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),o=e=>{let{children:t,displayLabel:r=!0,rawErrors:o=[],errors:l,help:c,rawDescription:d,required:u,disabled:p}=e,h=s();return(0,i.jsxs)(a.A,{fullWidth:!0,error:!!o.length,required:u,disabled:p,children:[t,r&&d?(0,i.jsx)(n.h,{content:d,linkTarget:"_blank",className:h.markdownDescription}):null,l,c]})}},97909:function(e,t,r){"use strict";r.d(t,{Q:()=>l,Z:()=>c});var i=r(31085),n=r(54852),a=r(4790),s=r(14041);let o=(0,n.tK)("secrets-context"),l=e=>{let{initialSecrets:t={}}=e,[r,n]=(0,s.useState)({...t});return(0,i.jsx)(o.Provider,{value:(0,a.B)({1:{secrets:r,setSecrets:n}}),children:e.children})},c=()=>{let e=(0,s.useContext)(o)?.atVersion(1);if(!e)throw Error("useTemplateSecrets must be used within a SecretsContextProvider");let{setSecrets:t,secrets:r={}}=e;return{setSecrets:(0,s.useCallback)(e=>{t(t=>({...t,...e}))},[t]),secrets:r}}},81308:function(e,t,r){"use strict";r.d(t,{_:()=>a});var i=r(62006),n=r(33587);function a(e){let{output:t,uiOptions:r}=e;return{TProps:void 0,TOutput:void 0,schema:{returnValue:(0,i.Ay)(t(n)),uiOptions:r&&(0,i.Ay)(r(n))},type:void 0,uiOptionsType:void 0}}},31766:function(e,t,r){"use strict";r.d(t,{S:()=>i});let i=(0,r(28967).y)({id:"plugin.scaffolder.form-decorators"})},79541:function(e,t,r){"use strict";r.d(t,{R:()=>o});var i=r(31085),n=r(16249),a=r(10265),s=r(30268);let o=e=>{let{t}=(0,a.i)(s.W),{onChange:r,required:o,schema:{title:l=t("fields.entityNamePicker.title"),description:c=t("fields.entityNamePicker.description")},rawErrors:d,formData:u,uiSchema:{"ui:autofocus":p},idSchema:h,placeholder:g}=e;return(0,i.jsx)(n.A,{id:h?.$id,label:l,placeholder:g,helperText:c,required:o,value:u??"",onChange:({target:{value:e}})=>r(e),margin:"normal",error:d?.length>0&&!u,inputProps:{autoFocus:p},FormHelperTextProps:{margin:"dense",style:{marginLeft:0}}})}},71004:function(e,t,r){"use strict";r.d(t,{a:()=>i});let i=(0,r(81308)._)({output:e=>e.string()}).schema},62416:function(e,t,r){"use strict";r.d(t,{_:()=>n});var i=r(68314);let n=(e,t)=>{i.y.isValidObjectName(e)||t.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")}},17875:function(e,t,r){"use strict";r.d(t,{q:()=>b});var i=r(31085),n=r(24259),a=r(78560),s=r(18139),o=r(30043),l=r(91072),c=r(45809),d=r(16249),u=r(98312),p=r(59447),h=r(14041),g=r(73466),m=r(96290),f=r(10265),y=r(30268),x=r(71135);let b=e=>{let{t}=(0,f.i)(y.W),{onChange:r,schema:{title:n=t("fields.entityPicker.title"),description:b=t("fields.entityPicker.description")},required:w,uiSchema:j,rawErrors:A,formData:k,idSchema:S,errors:C}=e,E=function(e){let t=e["ui:options"]?.allowedKinds,r=e["ui:options"]?.catalogFilter||t&&{kind:t};if(r)return Array.isArray(r)?r.map(v):v(r)}(j),T=j["ui:options"]?.defaultKind,$=j["ui:options"]?.defaultNamespace||void 0,R=j?.["ui:disabled"]??!1,I=(0,s.gf)(o.v),P=(0,s.gf)(l.n),{value:O,loading:N}=(0,g.A)(async()=>{let e=["kind","metadata.name","metadata.namespace","metadata.title","metadata.description","spec.profile.displayName","spec.type"],{items:t}=await I.getEntities(E?{filter:E,fields:e}:{filter:void 0,fields:e}),r=new Map(await Promise.all(t.map(async e=>{let t=await P.forEntity(e).promise;return[(0,a.U2)(e),t]})));return{catalogEntities:t,entityRefToPresentation:r}}),B=j["ui:options"]?.allowArbitraryValues??!0,U=(0,h.useCallback)(e=>{try{let t=(0,a.KU)(e,{defaultKind:T,defaultNamespace:$});return(0,a.U2)(t)}catch(t){return e}},[T,$]),L=(0,h.useCallback)((e,t,i)=>{if("string"!=typeof t)r(t?(0,a.U2)(t):void 0);else if("blur"===i||"create-option"===i){let e=t;try{e=(0,a.U2)((0,a.KU)(t,{defaultKind:T,defaultNamespace:$}))}catch(e){}(k!==t||B)&&r(e)}},[r,k,T,$,B]),F=O?.catalogEntities.find(e=>(0,a.U2)(e)===k)??(B&&k?U(k):"");return(0,h.useEffect)(()=>{w&&!B&&O?.catalogEntities.length===1&&""===F&&r((0,a.U2)(O.catalogEntities[0]))},[O,r,F,w,B]),(0,i.jsx)(x.g,{rawErrors:A,rawDescription:j["ui:description"]??b,required:w,disabled:R,errors:C,children:(0,i.jsx)(u.Ay,{disabled:R||w&&!B&&O?.catalogEntities.length===1,id:S?.$id,value:F,loading:N,onChange:L,options:O?.catalogEntities||[],getOptionLabel:e=>"string"==typeof e?e:O?.entityRefToPresentation.get((0,a.U2)(e))?.entityRef,autoSelect:!0,freeSolo:B,renderInput:e=>(0,i.jsx)(d.A,{...e,label:n,margin:"dense",variant:"outlined",required:w,disabled:R,InputProps:e.InputProps}),renderOption:e=>(0,i.jsx)(c.d,{entityRef:e}),filterOptions:(0,p.Z)({stringify:e=>O?.entityRefToPresentation.get((0,a.U2)(e))?.primaryTitle}),ListboxComponent:m.J})})};function v(e){let t={};for(let[r,i]of Object.entries(e))if(Array.isArray(i))t[r]=i;else t[r]="object"==typeof i&&i.exists?n.c:i?.toString();return t}},95201:function(e,t,r){"use strict";r.d(t,{NH:()=>a,Vy:()=>n,f2:()=>s});var i=r(81308);let n=e=>e.record(e.string().or(e.object({exists:e.boolean().optional()})).or(e.array(e.string()))),a=(0,i._)({output:e=>e.string(),uiOptions:e=>{let t;return e.object({allowedKinds:e.array(e.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:e.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:e.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:e.union([e.string(),e.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:(t=n(e)).or(t.array()).optional().describe("List of key-value filter expression for entities")})}}),s=a.schema},26611:function(e,t,r){"use strict";r.d(t,{t:()=>f});var i=r(31085),n=r(14041),a=r(73466),s=r(8380),o=r(68314);let l={isValidApiVersion:o.y.isValidApiVersion,isValidKind:o.y.isValidKind,isValidEntityName:o.y.isValidObjectName,isValidNamespace:o.y.isValidNamespace,isValidLabelKey:o.y.isValidLabelKey,isValidLabelValue:o.y.isValidLabelValue,isValidAnnotationKey:o.y.isValidAnnotationKey,isValidAnnotationValue:o.y.isValidAnnotationValue,isValidTag:e=>"string"==typeof e&&e.length>=1&&e.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(e)};var c=r(18139),d=r(30043),u=r(16249),p=r(98312),h=r(10265),g=r(30268),m=r(71135);let f=e=>{let{t}=(0,h.i)(g.W),{formData:r,onChange:o,schema:{title:f=t("fields.entityTagsPicker.title"),description:y=t("fields.entityTagsPicker.description")},uiSchema:x,rawErrors:b,required:v,errors:w}=e,j=(0,c.gf)(d.v),[A,k]=(0,n.useState)([]),[S,C]=(0,n.useState)(""),[E,T]=(0,n.useState)(!1),$=function(e={}){return{...l,...e}}().isValidTag,R=x["ui:options"]?.kinds,I=x["ui:options"]?.showCounts,P=x["ui:options"]?.helperText,O=x?.["ui:disabled"]??!1,{loading:N,value:B}=(0,a.A)(async()=>{let e="metadata.tags",t={facets:[e]};R&&(t.filter={kind:R});let{facets:r}=await j.getEntityFacets(t),i=Object.fromEntries(r[e].map(({value:e,count:t})=>[e,t]));return k(Object.keys(i).sort((e,t)=>I?i[t]-i[e]:e.localeCompare(t))),i});return(0,s.A)(()=>o(r||[])),(0,i.jsx)(m.g,{rawErrors:b,rawDescription:P??x["ui:description"]??y,required:v,disabled:O,errors:w,children:(0,i.jsx)(p.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:(e,t)=>{let i=!1,n=!1,a=r||[];if(t?.length&&a.length<t.length){let e=t[t.length-1]=t[t.length-1].toLocaleLowerCase("en-US").trim();i=!$(e),n=-1!==a.indexOf(e)}T(i),C(i?S:""),i||n||o(t||[])},disabled:O,value:r||[],inputValue:S,loading:N,options:A,ChipProps:{size:"small"},renderOption:e=>I?`${e} (${B?.[e]})`:e,renderInput:e=>(0,i.jsx)(u.A,{...e,label:f,disabled:O,onChange:e=>C(e.target.value),error:E,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}}})})})}},8886:function(e,t,r){"use strict";r.d(t,{u:()=>i});let i=(0,r(81308)._)({output:e=>e.array(e.string()),uiOptions:e=>e.object({kinds:e.array(e.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:e.boolean().optional().describe("Whether to show usage counts per tag"),helperText:e.string().optional().describe("Helper text to display; DEPRECATED, simply use ui:description")})}).schema},22139:function(e,t,r){"use strict";r.d(t,{R:()=>v,e:()=>w});var i=r(31085),n=r(24259),a=r(78560),s=r(18139),o=r(30043),l=r(91072),c=r(45809),d=r(16249),u=r(98312),p=r(59447),h=r(14041),g=r(73466),m=r(96290),f=r(71135),y=r(10265),x=r(30268);let b=["blur","create-option"],v=e=>{let{t}=(0,y.i)(x.W),{onChange:r,schema:{title:n=t("fields.multiEntityPicker.title"),description:v=t("fields.multiEntityPicker.description")},required:w,uiSchema:A,rawErrors:k,formData:S,idSchema:C,errors:E}=e,T=function(e){let t=e["ui:options"]?.catalogFilter;if(t)return Array.isArray(t)?t.map(j):j(t)}(A),$=A["ui:options"]?.defaultKind,R=A["ui:options"]?.defaultNamespace||void 0,I=A?.["ui:disabled"]??!1,[P,O]=(0,h.useState)(0),N=(0,s.gf)(o.v),B=(0,s.gf)(l.n),{value:U,loading:L}=(0,g.A)(async()=>{let{items:e}=await N.getEntities(T?{filter:T}:void 0),t=new Map(await Promise.all(e.map(async e=>{let t=await B.forEntity(e).promise;return[(0,a.U2)(e),t]})));return{entities:e,entityRefToPresentation:t}}),F=A["ui:options"]?.allowArbitraryValues??!0,z=e.schema.maxItems,M=(0,h.useCallback)((e,t,i)=>{let n=t.map(e=>{if("string"!=typeof e)return e?(0,a.U2)(e):void 0;let t=e;try{t=(0,a.U2)((0,a.KU)(e,{defaultKind:$,defaultNamespace:R}))}catch(e){}if(S?.includes(e)||F&&b.includes(i))return t}).filter(e=>void 0!==e);O(n.length),r(n)},[r,S,$,R,F]);return(0,h.useEffect)(()=>{w&&!F&&U?.entities?.length===1&&r([(0,a.U2)(U?.entities[0])])},[U,r,w,F]),(0,i.jsx)(f.g,{rawErrors:k,rawDescription:A["ui:description"]??v,required:w,disabled:I,errors:E,children:(0,i.jsx)(u.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:I||w&&!F&&U?.entities?.length===1,id:C?.$id,defaultValue:S,loading:L,onChange:M,options:U?.entities||[],renderOption:e=>(0,i.jsx)(c.d,{entityRef:e}),getOptionLabel:e=>"string"==typeof e?e:U?.entityRefToPresentation.get((0,a.U2)(e))?.entityRef,getOptionDisabled:e=>!!z&&P>=z,autoSelect:!0,freeSolo:F,renderInput:e=>(0,i.jsx)(d.A,{...e,label:n,disabled:I,margin:"dense",FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:w,InputProps:{...e.InputProps,required:S?.length===0&&w}}),filterOptions:(0,p.Z)({stringify:e=>U?.entityRefToPresentation.get((0,a.U2)(e))?.primaryTitle}),ListboxComponent:m.J})})},w=(e,t)=>{e.forEach(e=>{try{(0,a.KU)(e)}catch{t.addError(`${e} is not a valid entity ref`)}})};function j(e){let t={};for(let[r,i]of Object.entries(e))if(Array.isArray(i))t[r]=i;else t[r]="object"==typeof i&&i.exists?n.c:i?.toString();return t}},23654:function(e,t,r){"use strict";r.d(t,{mG:()=>s});var i=r(60448),n=r(81308);let a=i.g1(i.Yj().or(i.Ik({exists:i.zM().optional()})).or(i.YO(i.Yj()))),s=(0,n._)({output:e=>e.array(e.string()),uiOptions:e=>e.object({defaultKind:e.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:e.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:e.union([e.string(),e.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:e.array(a).or(a).optional().describe("List of key-value filter expression for entities")})}).schema},34861:function(e,t,r){"use strict";r.d(t,{T:()=>w});var i=r(31085),n=r(14041),a=r(18139),s=r(94223),o=r(24453),l=r(16249),c=r(98312),d=r(59447),u=r(30043),p=r(91072),h=r(45809),g=r(57559),m=r(73466),f=r(78560),y=r(96290),x=r(10265),b=r(30268),v=r(71135);let w=e=>{let{t}=(0,x.i)(b.W),{schema:{title:r=t("fields.myGroupsPicker.title"),description:w=t("fields.myGroupsPicker.description")},required:j,rawErrors:A,onChange:k,formData:S,uiSchema:C,errors:E}=e,T=(0,a.gf)(s.K),$=(0,a.gf)(u.v),R=(0,a.gf)(o.m),I=(0,a.gf)(p.n),P=C?.["ui:disabled"]??!1,{value:O,loading:N}=(0,m.A)(async()=>{let{userEntityRef:e}=await T.getBackstageIdentity();if(!e)return R.post(new g.m_("No user entity ref found")),{catalogEntities:[],entityRefToPresentation:new Map};let{items:t}=await $.getEntities({filter:{kind:"Group","relations.hasMember":[e]}}),r=new Map(await Promise.all(t.map(async e=>{let t=await I.forEntity(e).promise;return[(0,f.U2)(e),t]})));return{catalogEntities:t,entityRefToPresentation:r}}),B=O?.catalogEntities.find(e=>(0,f.U2)(e)===S)||null;return(0,n.useEffect)(()=>{j&&O?.catalogEntities.length===1&&!B&&k((0,f.U2)(O.catalogEntities[0]))},[O,k,B,j]),(0,i.jsx)(v.g,{rawErrors:A,rawDescription:C["ui:description"]??w,required:j,disabled:P,errors:E,children:(0,i.jsx)(c.Ay,{disabled:j&&O?.catalogEntities.length===1,id:"OwnershipEntityRefPicker-dropdown",options:O?.catalogEntities||[],value:B,loading:N,onChange:(e,t)=>{k(t?(0,f.U2)(t):"")},getOptionLabel:e=>O?.entityRefToPresentation.get((0,f.U2)(e))?.primaryTitle,autoSelect:!0,renderInput:e=>(0,i.jsx)(l.A,{...e,label:r,margin:"dense",FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:j,InputProps:e.InputProps}),renderOption:e=>(0,i.jsx)(h.d,{entityRef:e}),filterOptions:(0,d.Z)({stringify:e=>O?.entityRefToPresentation.get((0,f.U2)(e))?.primaryTitle}),ListboxComponent:y.J})})}},63374:function(e,t,r){"use strict";r.d(t,{M:()=>i});let i=(0,r(81308)._)({output:e=>e.string()}).schema},9739:function(e,t,r){"use strict";r.d(t,{F:()=>g});var i=r(31085),n=r(97214),a=r(18139),s=r(94223),o=r(16249),l=r(98312),c=r(73466),d=r(17875),u=r(10265),p=r(30268),h=r(71135);let g=e=>{let{t}=(0,u.i)(p.W),{schema:{title:r=t("fields.ownedEntityPicker.title"),description:g=t("fields.ownedEntityPicker.description")},uiSchema:m,required:f}=e,y=(0,a.gf)(s.K),{loading:x,value:b}=(0,c.A)(async()=>(await y.getBackstageIdentity()).ownershipEntityRefs);if(x)return(0,i.jsx)(h.g,{rawDescription:m["ui:description"]??g,required:f,disabled:m["ui:disabled"],children:(0,i.jsx)(l.Ay,{loading:x,renderInput:e=>(0,i.jsx)(o.A,{...e,label:r,margin:"dense",FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:f,InputProps:e.InputProps}),options:[]})});let v=function(e,t){var r;let i=e?.["ui:options"]||{},{allowedKinds:a,...s}=i,o=((r=i.catalogFilter)?Array.isArray(r)?r:[r]:[{}]).map(e=>({...e,...a?{kind:a}:{},[`relations.${n.vv}`]:t||[]}));return{"ui:options":{...s,catalogFilter:o},"ui:disabled":e["ui:disabled"]}}(m,b);return(0,i.jsx)(d.q,{...e,uiSchema:v})}},19742:function(e,t,r){"use strict";r.d(t,{M:()=>i}),r(31085),r(14041);let i=r(95201).NH.schema},6451:function(e,t,r){"use strict";r.d(t,{u:()=>o});var i=r(31085),n=r(17875),a=r(10265),s=r(30268);let o=e=>{let{t}=(0,a.i)(s.W),{schema:{title:r=t("fields.ownerPicker.title"),description:o=t("fields.ownerPicker.description")},uiSchema:l,...c}=e,d=l["ui:options"]?.defaultNamespace,u=l["ui:options"]?.allowedKinds,p=l["ui:options"]?.catalogFilter||{kind:u||["Group","User"]},h={...l,"ui:options":{catalogFilter:p,defaultKind:"Group",allowArbitraryValues:l["ui:options"]?.allowArbitraryValues??!0,...void 0!==d?{defaultNamespace:d}:{}}};return(0,i.jsx)(n.q,{...c,schema:{title:r,description:o},uiSchema:h})}},63653:function(e,t,r){"use strict";r.d(t,{h:()=>a});var i=r(81308),n=r(95201);let a=(0,i._)({output:e=>e.string(),uiOptions:e=>{let t;return e.object({allowedKinds:e.array(e.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:e.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:e.union([e.string(),e.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:(t=(0,n.Vy)(e)).or(t.array()).optional().describe("List of key-value filter expression for entities")})}}).schema},82235:function(e,t,r){"use strict";r.d(t,{z:()=>j});var i=r(31085),n=r(18139),a=r(59059),s=r(14146),o=r(14041),l=r(48240),c=r(97909),d=r(77125),u=r(37197),p=r(72501),h=r(63163),g=r(95061),m=r(51253),f=r(16249),y=r(98312);let x=({onChange:e,state:t,rawErrors:r,accessToken:a,isDisabled:s,required:c})=>{let{host:d,workspace:u,repository:p,branch:x}=t,[b,v]=(0,o.useState)([]),w=(0,n.gf)(h.z),j=(0,o.useCallback)(()=>{w.autocomplete&&u&&p&&a&&"bitbucket.org"===d?w.autocomplete({token:a,resource:"branches",context:{workspace:u,repository:p},provider:"bitbucket-cloud"}).then(({results:e})=>{v(e.map(e=>e.id))}).catch(()=>{v([])}):v([])},[d,u,p,a,w]);return(0,l.A)(j,500,[j]),(0,i.jsxs)(g.A,{margin:"normal",required:c,error:r?.length>0&&!x,children:[(0,i.jsx)(y.Ay,{value:x,onChange:(t,r)=>{e({branch:r||""})},disabled:s,options:b,renderInput:e=>(0,i.jsx)(f.A,{...e,label:"Branch",disabled:s,required:c}),freeSolo:!0,autoSelect:!0}),(0,i.jsx)(m.A,{children:"The branch of the repository"})]})},b=({onChange:e,state:t,rawErrors:r,isDisabled:n,required:a})=>{let{branch:s}=t;return(0,i.jsxs)(g.A,{margin:"normal",required:a,error:r?.length>0&&!s,children:[(0,i.jsx)(f.A,{id:"branchInput",label:"Branch",disabled:n,onChange:t=>e({branch:t.target.value}),value:s}),(0,i.jsx)(m.A,{children:"The branch of the repository"})]})},v=({onChange:e,state:t,rawErrors:r,accessToken:a,isDisabled:s,required:c})=>{let{host:d,owner:u,repository:p,branch:x}=t,[b,v]=(0,o.useState)([]),w=(0,n.gf)(h.z),j=(0,o.useCallback)(()=>{w.autocomplete&&u&&p&&a&&d?w.autocomplete({token:a,resource:"branches",context:{host:d,owner:u,repository:p},provider:"github"}).then(({results:e})=>{v(e.map(e=>e.id))}).catch(()=>{v([])}):v([])},[d,u,p,a,w]);return(0,l.A)(j,500,[j]),(0,i.jsxs)(g.A,{margin:"normal",required:c,error:r?.length>0&&!x,children:[(0,i.jsx)(y.Ay,{value:x,onChange:(t,r)=>{e({branch:r||""})},disabled:s,options:b,renderInput:e=>(0,i.jsx)(f.A,{...e,label:"Branch",disabled:s,required:c}),freeSolo:!0,autoSelect:!0}),(0,i.jsx)(m.A,{children:"The branch of the repository"})]})};var w=r(28364);let j=e=>{let{uiSchema:t,onChange:r,rawErrors:h,formData:g,schema:m,formContext:f,required:y}=e,{formData:{repoUrl:j}}=f,[A,k]=(0,o.useState)({branch:g||""}),{host:S,branch:C}=A,E=(0,n.gf)(a.Y),T=(0,n.gf)(s.$),{secrets:$,setSecrets:R}=(0,c.Z)();(0,l.A)(async()=>{let{requestUserCredentials:e}=t?.["ui:options"]??{};if(!e||!S||$[e.secretsKey])return;let{token:r}=await T.getCredentials({url:`https://${S}`,additionalScope:{repoWrite:!0,customScopes:e.additionalScopes}});R({[e.secretsKey]:r})},500,[S,t]),(0,o.useEffect)(()=>{if(j){let e=new URL(`https://${j}`);k(t=>({...t,host:e.host,workspace:e.searchParams.get("workspace")||"",repository:e.searchParams.get("repo")||"",owner:e.searchParams.get("owner")||""}))}},[j]),(0,o.useEffect)(()=>{r(C)},[C,r]);let I=(0,o.useCallback)(e=>{k(t=>({...t,...e}))},[k]),P=(S&&E.byHost(S)?.type)??null,O=t["ui:description"]??m.description;return(0,i.jsxs)(i.Fragment,{children:[m.title&&(0,i.jsxs)(d.A,{my:1,children:[(0,i.jsx)(p.A,{variant:"h5",children:m.title}),(0,i.jsx)(u.A,{})]}),O&&(0,i.jsx)(p.A,{variant:"body1",children:(0,i.jsx)(w.h,{content:O})}),(()=>{switch(P){case"bitbucket":return(0,i.jsx)(x,{onChange:I,state:A,rawErrors:h,accessToken:t?.["ui:options"]?.requestUserCredentials?.secretsKey&&$[t["ui:options"].requestUserCredentials.secretsKey],isDisabled:t?.["ui:disabled"]??!1,required:y});case"github":return(0,i.jsx)(v,{onChange:I,state:A,rawErrors:h,accessToken:t?.["ui:options"]?.requestUserCredentials?.secretsKey&&$[t["ui:options"].requestUserCredentials.secretsKey],isDisabled:t?.["ui:disabled"]??!1,required:y});default:return(0,i.jsx)(b,{onChange:I,state:A,rawErrors:h,isDisabled:t?.["ui:disabled"]??!1,required:y})}})()]})}},58464:function(e,t,r){"use strict";r.d(t,{_:()=>i});let i=(0,r(81308)._)({output:e=>e.string(),uiOptions:e=>e.object({requestUserCredentials:e.object({secretsKey:e.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:e.object({gitea:e.array(e.string()).optional().describe("Additional Gitea scopes to request"),gerrit:e.array(e.string()).optional().describe("Additional Gerrit scopes to request"),github:e.array(e.string()).optional().describe("Additional GitHub scopes to request"),gitlab:e.array(e.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:e.array(e.string()).optional().describe("Additional BitBucket scopes to request"),azure:e.array(e.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})}).schema},5507:function(e,t,r){"use strict";r.d(t,{e:()=>U});var i=r(31085),n=r(18139),a=r(59059),s=r(14146),o=r(97909),l=r(77125),c=r(37197),d=r(72501),u=r(14041),p=r(48240),h=r(95061),g=r(51253),m=r(16249),f=r(79089),y=r(10265),x=r(30268);let b=e=>{let{allowedOrganizations:t=[],allowedProject:r=[],rawErrors:n,state:a,onChange:s,isDisabled:o}=e,{t:l}=(0,y.i)(x.W),c=t?t.map(e=>({label:e,value:e})):[{label:"Loading...",value:"loading"}],d=r?r.map(e=>({label:e,value:e})):[{label:"Loading...",value:"loading"}],{organization:u,project:p}=a;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.A,{margin:"normal",required:!0,error:n?.length>0&&!u,children:t?.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.w,{native:!0,label:l("fields.azureRepoPicker.organization.title"),onChange:e=>s({organization:String(Array.isArray(e)?e[0]:e)}),disabled:o||1===t.length,selected:u,items:c}),(0,i.jsx)(g.A,{children:l("fields.azureRepoPicker.organization.description")})]}):(0,i.jsx)(m.A,{id:"orgInput",label:l("fields.azureRepoPicker.organization.title"),onChange:e=>s({organization:e.target.value}),helperText:l("fields.azureRepoPicker.organization.description"),disabled:o,value:u})}),(0,i.jsx)(h.A,{margin:"normal",required:!0,error:n?.length>0&&!p,children:r?.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.w,{native:!0,label:l("fields.azureRepoPicker.project.title"),onChange:e=>s({project:String(Array.isArray(e)?e[0]:e)}),disabled:o||1===r.length,selected:p,items:d}),(0,i.jsx)(g.A,{children:l("fields.azureRepoPicker.project.description")})]}):(0,i.jsx)(m.A,{id:"projectInput",label:l("fields.azureRepoPicker.project.title"),onChange:e=>s({project:e.target.value}),value:p,disabled:o,helperText:l("fields.azureRepoPicker.project.description")})})]})};var v=r(63163),w=r(98312);let j=e=>{let{allowedOwners:t=[],allowedProjects:r=[],onChange:a,rawErrors:s,state:o,accessToken:l,isDisabled:c}=e,{t:d}=(0,y.i)(x.W),{host:b,workspace:j,project:A}=o,k=t?t?.map(e=>({label:e,value:e})):[],S=r?r?.map(e=>({label:e,value:e})):[];(0,u.useEffect)(()=>{"bitbucket.org"===b&&t.length&&a({workspace:t[0]})},[t,b,a]);let C=(0,n.gf)(v.z),[E,T]=(0,u.useState)([]),[$,R]=(0,u.useState)([]),I=(0,u.useCallback)(()=>{C.autocomplete&&l&&"bitbucket.org"===b?C.autocomplete({context:{},token:l,resource:"workspaces",provider:"bitbucket-cloud"}).then(({results:e})=>{T(e.map(e=>e.id))}).catch(()=>{T([])}):T([])},[C,l,b]);(0,p.A)(I,500,[I]);let P=(0,u.useCallback)(()=>{C.autocomplete&&l&&"bitbucket.org"===b&&j?C.autocomplete({token:l,resource:"projects",context:{workspace:j},provider:"bitbucket-cloud"}).then(({results:e})=>{R(e.map(e=>e.id))}).catch(()=>{R([])}):R([])},[C,l,b,j]);(0,p.A)(P,500,[P]);let O=(0,u.useCallback)(()=>{C.autocomplete&&l&&"bitbucket.org"===b&&j&&A?C.autocomplete({token:l,resource:"repositories",context:{workspace:j,project:A},provider:"bitbucket-cloud"}).then(({results:e})=>{a({availableRepos:e.map(e=>({name:e.id}))})}).catch(()=>{a({availableRepos:[]})}):a({availableRepos:[]})},[C,l,b,j,A,a]);return(0,p.A)(O,500,[O]),(0,i.jsxs)(i.Fragment,{children:["bitbucket.org"===b&&(0,i.jsxs)(h.A,{margin:"normal",required:!0,error:s?.length>0&&!j,children:[t?.length?(0,i.jsx)(f.w,{native:!0,label:d("fields.bitbucketRepoPicker.workspaces.title"),onChange:e=>a({workspace:String(Array.isArray(e)?e[0]:e)}),disabled:c||1===t.length,selected:j,items:k}):(0,i.jsx)(w.Ay,{value:j,onChange:(e,t)=>{a({workspace:t||""})},options:E,renderInput:e=>(0,i.jsx)(m.A,{...e,label:d("fields.bitbucketRepoPicker.workspaces.inputTitle"),disabled:c,required:!0}),disabled:c,freeSolo:!0,autoSelect:!0}),(0,i.jsx)(g.A,{children:d("fields.bitbucketRepoPicker.workspaces.description")})]}),(0,i.jsxs)(h.A,{margin:"normal",required:!0,error:s?.length>0&&!A,children:[r?.length?(0,i.jsx)(f.w,{native:!0,label:d("fields.bitbucketRepoPicker.project.title"),onChange:e=>a({project:String(Array.isArray(e)?e[0]:e)}),disabled:c||1===r.length,selected:A,items:S}):(0,i.jsx)(w.Ay,{value:A,onChange:(e,t)=>{a({project:t||""})},options:$,disabled:c,renderInput:e=>(0,i.jsx)(m.A,{...e,label:d("fields.bitbucketRepoPicker.project.inputTitle"),disabled:c,required:!0}),freeSolo:!0,autoSelect:!0}),(0,i.jsx)(g.A,{children:d("fields.bitbucketRepoPicker.project.description")})]})]})},A=e=>{let{onChange:t,rawErrors:r,state:n,isDisabled:a}=e,{t:s}=(0,y.i)(x.W),{workspace:o,owner:l}=n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.A,{margin:"normal",error:r?.length>0&&!o,children:(0,i.jsx)(m.A,{id:"ownerInput",label:s("fields.gerritRepoPicker.owner.title"),onChange:e=>t({owner:e.target.value}),helperText:s("fields.gerritRepoPicker.owner.description"),disabled:a,value:l})}),(0,i.jsx)(h.A,{margin:"normal",required:!0,error:r?.length>0&&!o,children:(0,i.jsx)(m.A,{id:"parentInput",label:s("fields.gerritRepoPicker.parent.title"),onChange:e=>t({workspace:e.target.value}),disabled:a,value:o,helperText:s("fields.gerritRepoPicker.parent.description")})})]})},k=e=>{let{allowedOwners:t=[],state:r,onChange:n,rawErrors:a,isDisabled:s}=e,{t:o}=(0,y.i)(x.W),l=t?t.map(e=>({label:e,value:e})):[{label:"Loading...",value:"loading"}],{owner:c}=r;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(h.A,{margin:"normal",required:!0,error:a?.length>0&&!c,children:t?.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.w,{native:!0,label:o("fields.giteaRepoPicker.owner.title"),onChange:e=>n({owner:String(Array.isArray(e)?e[0]:e)}),disabled:s||1===t.length,selected:c,items:l}),(0,i.jsx)(g.A,{children:o("fields.giteaRepoPicker.owner.description")})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.A,{id:"ownerInput",label:o("fields.giteaRepoPicker.owner.inputTitle"),onChange:e=>n({owner:e.target.value}),helperText:o("fields.giteaRepoPicker.owner.description"),disabled:s,value:c})})})})};var S=r(82438),C=r.n(S),E=r(40105),T=r.n(E);let $=e=>{let{allowedOwners:t=[],rawErrors:r,state:a,onChange:s,accessToken:o,isDisabled:l}=e,{t:c}=(0,y.i)(x.W),d=t?t.map(e=>({label:e,value:e})):[{label:"Loading...",value:"loading"}],{host:b,owner:j}=a,A=(0,n.gf)(v.z),[k,S]=(0,u.useState)([]),E=(0,u.useCallback)(()=>{A.autocomplete&&o&&b?A.autocomplete({token:o,resource:"repositoriesWithOwner",provider:"github",context:{host:b}}).then(({results:e})=>{S(e.map(e=>{let[t,r]=e.id.split("/");return{owner:t,name:r}}))}).catch(()=>{S([])}):S([])},[A,o,b]);(0,p.A)(E,500,[E]);let $=(0,u.useMemo)(()=>C()(T()(k,"owner")),[k]),R=(0,u.useCallback)(()=>{s({availableRepos:k.flatMap(e=>e.owner===j?[{name:e.name}]:[])})},[k,j,s]);return(0,p.A)(R,500,[R]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(h.A,{margin:"normal",required:!0,error:r?.length>0&&!j,children:[t?.length?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(f.w,{native:!0,label:c("fields.githubRepoPicker.owner.title"),onChange:e=>s({owner:String(Array.isArray(e)?e[0]:e)}),disabled:l||1===t.length,selected:j,items:d})}):(0,i.jsx)(w.Ay,{value:j,onChange:(e,t)=>{s({owner:t||""})},options:$,renderInput:e=>(0,i.jsx)(m.A,{...e,label:c("fields.githubRepoPicker.owner.inputTitle"),disabled:l,required:!0}),freeSolo:!0,disabled:l,autoSelect:!0}),(0,i.jsx)(g.A,{children:c("fields.githubRepoPicker.owner.description")})]})})},R=e=>{let{allowedOwners:t=[],state:r,onChange:a,rawErrors:s,accessToken:o,isDisabled:l}=e,[c,d]=(0,u.useState)([]),{t:b}=(0,y.i)(x.W),j=t?t.map(e=>({label:e,value:e})):[{label:"Loading...",value:"loading"}],{owner:A,host:k}=r,S=(0,n.gf)(v.z),C=(0,u.useCallback)(()=>{S.autocomplete&&o&&k?S.autocomplete({token:o,resource:"groups",provider:"gitlab",context:{host:k}}).then(({results:e})=>{d(e.map(e=>({title:e.title,id:e.id})))}).catch(()=>{d([])}):d([])},[S,o,k]);(0,p.A)(C,500,[C]);let E=(0,u.useCallback)(()=>{if(!S.autocomplete||!o||!k||!A)return void a({availableRepos:[]});let e=c.find(e=>e.title===A);S.autocomplete({token:o,resource:"repositories",context:{id:e?.id??"",host:k},provider:"gitlab"}).then(({results:e})=>{a({availableRepos:e.map(e=>({name:e.title,id:e.id}))})}).catch(()=>{a({availableRepos:[]})})},[S,o,k,A,a,c]);return(0,p.A)(E,500,[E]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(h.A,{margin:"normal",required:!0,error:s?.length>0&&!A,children:t?.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.w,{native:!0,label:b("fields.gitlabRepoPicker.owner.title"),onChange:e=>a({owner:String(Array.isArray(e)?e[0]:e)}),disabled:l||1===t.length,selected:A,items:j}),(0,i.jsx)(g.A,{children:b("fields.gitlabRepoPicker.owner.description")})]}):(0,i.jsx)(w.Ay,{value:A,onChange:(e,t)=>{a({owner:t||""})},options:c.map(e=>e.title),renderInput:e=>(0,i.jsx)(m.A,{...e,label:b("fields.gitlabRepoPicker.owner.title"),disabled:l,required:!0}),freeSolo:!0,disabled:l,autoSelect:!0})})})};var I=r(96872),P=r(73466);let O=e=>{let{host:t,hosts:r,onChange:a,rawErrors:s,isDisabled:o}=e,{t:l}=(0,y.i)(x.W),c=(0,n.gf)(v.z),{value:{integrations:d}={integrations:[]},loading:p}=(0,P.A)(async()=>await c.getIntegrationsList({allowedHosts:r??[]}));(0,u.useEffect)(()=>{!t&&(r?.length?a(r[0]):d?.length&&a(d[0].host))},[r,t,a,d]);let m=d?d.filter(e=>!r?.length||r?.includes(e.host)).map(e=>({label:e.title,value:e.host})):[{label:"Loading...",value:"loading"}];return p?(0,i.jsx)(I.k,{}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(h.A,{margin:"normal",required:!0,error:s?.length>0&&!t,children:[(0,i.jsx)(f.w,{native:!0,disabled:o||r?.length===1,label:l("fields.repoUrlPicker.host.title"),onChange:e=>a(String(Array.isArray(e)?e[0]:e)),selected:t,items:m,"data-testid":"host-select"}),(0,i.jsx)(g.A,{children:l("fields.repoUrlPicker.host.description")})]})})},N=e=>{let{repoName:t,allowedRepos:r,onChange:n,rawErrors:a,availableRepos:s,isDisabled:o}=e,{t:l}=(0,y.i)(x.W);(0,u.useEffect)(()=>{!t&&r?.length&&n({name:r[0]})},[r,t,n]);let c=r?r.map(e=>({label:e,value:e})):[{label:"Loading...",value:"loading"}];return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(h.A,{margin:"normal",required:!0,error:a?.length>0&&!t,children:[r?.length?(0,i.jsx)(f.w,{native:!0,label:l("fields.repoUrlPicker.repository.title"),onChange:e=>n({name:String(Array.isArray(e)?e[0]:e)}),disabled:o||1===r.length,selected:t,items:c}):(0,i.jsx)(w.Ay,{value:t,onInputChange:(e,t)=>{n(s?.find(e=>e.name===t)||{name:t||""})},options:(s||[]).map(e=>e.name),renderInput:e=>(0,i.jsx)(m.A,{...e,label:l("fields.repoUrlPicker.repository.inputTitle"),required:!0}),freeSolo:!0,autoSelect:!0,disabled:o}),(0,i.jsx)(g.A,{children:l("fields.repoUrlPicker.repository.description")})]})})};var B=r(28364);let U=e=>{let{uiSchema:t,onChange:r,rawErrors:h,formData:g,schema:m}=e,[f,y]=(0,u.useState)(function(e){let t="",r="",i="",n="",a="",s="";try{if(e){let o=new URL(`https://${e}`);t=o.host,r=o.searchParams.get("owner")||"",i=o.searchParams.get("repo")||"",n=o.searchParams.get("organization")||"",a=o.searchParams.get("workspace")||"",s=o.searchParams.get("project")||""}}catch{}return{host:t,owner:r,repoName:i,organization:n,workspace:a,project:s}}(g)),[x,v]=(0,u.useState)(void 0),w=(0,n.gf)(a.Y),S=(0,n.gf)(s.$),{secrets:C,setSecrets:E}=(0,o.Z)(),T=(0,u.useMemo)(()=>t?.["ui:options"]?.allowedHosts??[],[t]),I=(0,u.useMemo)(()=>t?.["ui:options"]?.allowedOrganizations??[],[t]),P=(0,u.useMemo)(()=>t?.["ui:options"]?.allowedOwners??[],[t]),U=(0,u.useMemo)(()=>t?.["ui:options"]?.allowedProjects??[],[t]),L=(0,u.useMemo)(()=>t?.["ui:options"]?.allowedRepos??[],[t]),F=(0,u.useMemo)(()=>t?.["ui:disabled"]??!1,[t]),{owner:z,organization:M,project:D,repoName:q}=f;(0,u.useEffect)(()=>{r(function(e){if(!e.host)return;let t=new URLSearchParams;return e.owner&&t.set("owner",e.owner),e.repoName&&t.set("repo",e.repoName),e.organization&&t.set("organization",e.organization),e.workspace&&t.set("workspace",e.workspace),e.project&&t.set("project",e.project),`${e.host}?${t.toString()}`}(f))},[f,r]),(0,u.useEffect)(()=>{I.length>0&&!M&&y(e=>({...e,organization:I[0]}))},[y,I,M]),(0,u.useEffect)(()=>{P.length>0&&!z&&y(e=>({...e,owner:P[0]}))},[y,P,z]),(0,u.useEffect)(()=>{U.length>0&&!D&&y(e=>({...e,project:U[0]}))},[y,U,D]),(0,u.useEffect)(()=>{L.length>0&&!q&&y(e=>({...e,repoName:L[0]}))},[y,L,q]);let W=(0,u.useCallback)(e=>{y(t=>({...t,...e}))},[y]);(0,p.A)(async()=>{let{requestUserCredentials:e}=t?.["ui:options"]??{};if(!e||!f.host||C[e.secretsKey]&&x===f.host)return;let{token:r}=await S.getCredentials({url:`https://${f.host}`,additionalScope:{repoWrite:!0,customScopes:e.additionalScopes}});E({[e.secretsKey]:r}),v(f.host)},500,[f,t]);let H=(f.host&&w.byHost(f.host)?.type)??null,_=t["ui:description"]??m.description;return(0,i.jsxs)(i.Fragment,{children:[m.title&&(0,i.jsxs)(l.A,{my:1,children:[(0,i.jsx)(d.A,{variant:"h5",children:m.title}),(0,i.jsx)(c.A,{})]}),_&&(0,i.jsx)(d.A,{variant:"body1",children:(0,i.jsx)(B.h,{content:_})}),(0,i.jsx)(O,{host:f.host,hosts:T,onChange:e=>y(t=>({...t,host:e})),rawErrors:h,isDisabled:F}),"github"===H&&(0,i.jsx)($,{allowedOwners:P,onChange:W,rawErrors:h,state:f,isDisabled:F,accessToken:t?.["ui:options"]?.requestUserCredentials?.secretsKey&&C[t["ui:options"].requestUserCredentials.secretsKey]}),"gitea"===H&&(0,i.jsx)(k,{allowedOwners:P,allowedRepos:L,rawErrors:h,state:f,isDisabled:F,onChange:W}),"gitlab"===H&&(0,i.jsx)(R,{allowedOwners:P,rawErrors:h,state:f,onChange:W,isDisabled:F,accessToken:t?.["ui:options"]?.requestUserCredentials?.secretsKey&&C[t["ui:options"].requestUserCredentials.secretsKey]}),"bitbucket"===H&&(0,i.jsx)(j,{allowedOwners:P,allowedProjects:U,rawErrors:h,state:f,onChange:W,isDisabled:F,accessToken:t?.["ui:options"]?.requestUserCredentials?.secretsKey&&C[t["ui:options"].requestUserCredentials.secretsKey]}),"azure"===H&&(0,i.jsx)(b,{allowedOrganizations:I,allowedProject:U,rawErrors:h,state:f,isDisabled:F,onChange:W}),"gerrit"===H&&(0,i.jsx)(A,{rawErrors:h,state:f,onChange:W,isDisabled:F}),(0,i.jsx)(N,{repoName:f.repoName,allowedRepos:L,onChange:e=>y(t=>({...t,repoName:e.id||e.name})),isDisabled:F,rawErrors:h,availableRepos:f.availableRepos})]})}},21775:function(e,t,r){"use strict";r.d(t,{d:()=>i});let i=(0,r(81308)._)({output:e=>e.string(),uiOptions:e=>e.object({allowedHosts:e.array(e.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:e.array(e.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:e.array(e.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:e.array(e.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:e.array(e.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:e.object({secretsKey:e.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:e.object({gitea:e.array(e.string()).optional().describe("Additional Gitea scopes to request"),gerrit:e.array(e.string()).optional().describe("Additional Gerrit scopes to request"),github:e.array(e.string()).optional().describe("Additional GitHub scopes to request"),gitlab:e.array(e.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:e.array(e.string()).optional().describe("Additional BitBucket scopes to request"),azure:e.array(e.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})}).schema},77795:function(e,t,r){"use strict";r.d(t,{_:()=>n});var i=r(59059);let n=(e,t,r)=>{try{let{host:n,searchParams:a}=new URL(`https://${e}`),s=r.apiHolder.get(i.Y);n?(s?.byHost(n)?.type==="bitbucket"?("bitbucket.org"!==n||a.get("workspace")||t.addError("Incomplete repository location provided, workspace not provided"),a.get("project")||t.addError("Incomplete repository location provided, project not provided")):s?.byHost(n)?.type==="azure"?a.get("project")||t.addError("Incomplete repository location provided, project not provided"):s?.byHost(n)?.type==="gerrit"||a.get("owner")||t.addError("Incomplete repository location provided, owner not provided"),a.get("repo")||t.addError("Incomplete repository location provided, repo not provided")):t.addError("Incomplete repository location provided, host not provided")}catch{t.addError("Unable to parse the Repository URL")}}},96290:function(e,t,r){"use strict";r.d(t,{J:()=>c});var i=r(31085),n=r(14041),a=r(84392);let s=e=>{let{data:t,index:r,style:i}=e;return(0,n.cloneElement)(t[r],{style:i})},o=(0,n.createContext)({}),l=(0,n.forwardRef)((e,t)=>{let r=(0,n.useContext)(o);return(0,i.jsx)("div",{ref:t,...e,...r})}),c=(0,n.forwardRef)((e,t)=>{let{children:r,...c}=e,d=n.Children.toArray(r),u=d.length,p=Math.min(10,u)+.5;return(0,i.jsx)("div",{ref:t,children:(0,i.jsx)(o.Provider,{value:c,children:(0,i.jsx)(a.Y1,{height:36*p,itemData:d,itemCount:u,itemSize:36,outerElementType:l,width:"100%",children:s})})})})},43689:function(e,t,r){"use strict";let i;r.d(t,{Te:()=>em,r6:()=>ef});var n=r(59059),a=r(63163),s=r(72918),o=r(78560),l=r(53317),c=r(87922),d=r(96403),u=r.n(d),p=r(10288),h=r.n(p);let g="scaffolder";var m=r(94214);class f{discoveryApi;fetchApi;constructor(e){this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi||{fetch:h()}}async autocomplete(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/autocomplete/{provider}/{resource}").expand({provider:e.path.provider,resource:e.path.resource});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async cancelTask(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/tasks/{taskId}/cancel").expand({taskId:e.path.taskId});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST"})}async dryRun(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/dry-run").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async getTask(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/tasks/{taskId}").expand({taskId:e.path.taskId});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async getTemplateParameterSchema(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/templates/{namespace}/{kind}/{name}/parameter-schema").expand({namespace:e.path.namespace,kind:e.path.kind,name:e.path.name});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async listActions(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/actions").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async listTasks(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/tasks{?createdBy*,limit,offset,order*,status*}").expand({...e.query});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async listTemplatingExtensions(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/templating-extensions").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}async retry(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/tasks/{taskId}/retry").expand({taskId:e.path.taskId});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async scaffold(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/tasks").expand({});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"POST",body:JSON.stringify(e.body)})}async streamLogsPolling(e,t){let r=await this.discoveryApi.getBaseUrl(g),i=m.parse("/v2/tasks/{taskId}/events{?after}").expand({taskId:e.path.taskId,...e.query});return await this.fetchApi.fetch(`${r}${i}`,{headers:{"Content-Type":"application/json",...t?.token&&{Authorization:`Bearer ${t?.token}`}},method:"GET"})}}class y{apiClient;discoveryApi;scmIntegrationsApi;fetchApi;identityApi;useLongPollingLogs;constructor(e){this.apiClient=new f(e),this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi??{fetch},this.scmIntegrationsApi=e.scmIntegrationsApi,this.useLongPollingLogs=e.useLongPollingLogs??!1,this.identityApi=e.identityApi}async listTasks(e,t){if(!this.identityApi)throw Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");let{userEntityRef:r}=await this.identityApi.getBackstageIdentity();return await this.requestRequired(await this.apiClient.listTasks({query:{createdBy:"owned"===e.filterByOwnership?[r]:void 0,limit:e.limit,offset:e.offset}},t))}async getIntegrationsList(e){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(e=>!this.scmIntegrationsApi.bitbucketCloud.byHost(e.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(e.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(e=>({type:e.type,title:e.title,host:e.config.host})).filter(t=>e.allowedHosts.includes(t.host))}}async getTemplateParameterSchema(e,t){return await this.requestRequired(await this.apiClient.getTemplateParameterSchema({path:(0,o.KU)(e,{defaultKind:"template"})},t))}async scaffold(e,t){let r=await this.apiClient.scaffold({body:e},t);if(201!==r.status){let e=`${r.status} ${r.statusText}`,t=await r.text();throw Error(`Backend request failed, ${e} ${t.trim()}`)}let{id:i}=await r.json();return{taskId:i}}async getTask(e,t){return await this.requestRequired(await this.apiClient.getTask({path:{taskId:e}},t))}streamLogs(e,t){return this.useLongPollingLogs?this.streamLogsPolling(e,t):this.streamLogsEventStream(e)}async dryRun(e,t){return await this.requestRequired(await this.apiClient.dryRun({body:{template:e.template,values:e.values,secrets:e.secrets,directoryContents:e.directoryContents}},t))}streamLogsEventStream({isTaskRecoverable:e,taskId:t,after:r}){return new(u())(i=>{let n=new URLSearchParams;void 0!==r&&n.set("after",String(Number(r))),this.discoveryApi.getBaseUrl("scaffolder").then(r=>{let n=`${r}/v2/tasks/${encodeURIComponent(t)}/eventstream`,a=e=>{if(e.data)try{i.next(JSON.parse(e.data))}catch(e){i.error(e)}},s=new AbortController;(0,c.y)(n,{fetch:this.fetchApi.fetch,signal:s.signal,onmessage(t){if("log"===t.event)return void a(t);if("completion"===t.event&&!e){a(t),i.complete(),s.abort();return}a(t)},onerror(e){i.error(e)}})},e=>{i.error(e)})})}streamLogsPolling({taskId:e,after:t},r){let i=t;return new(u())(t=>{(async()=>{for(;!t.closed;){let n=await this.apiClient.streamLogsPolling({path:{taskId:e},query:{after:i}},r);if(!n.ok){await new Promise(e=>setTimeout(e,1e3));continue}for(let e of(await n.json()))if(i=Number(e.id),t.next(e),"completion"===e.type)return void t.complete()}})()})}async listActions(e){return await this.requestRequired(await this.apiClient.listActions(null,e))}async listTemplatingExtensions(e){return await this.requestRequired(await this.apiClient.listTemplatingExtensions(null,e))}async cancelTask(e,t){return await this.requestRequired(await this.apiClient.cancelTask({path:{taskId:e}},t))}async retry(e,t){return await this.requestRequired(await this.apiClient.retry({body:{},path:{taskId:e}},t))}async autocomplete({token:e,resource:t,provider:r,context:i}){return await this.requestRequired(await this.apiClient.autocomplete({path:{provider:r,resource:t},body:{token:e,context:i}}))}async requestRequired(e){if(!e.ok)throw await l.o.fromResponse(e);return e.json()}}class x extends y{}var b=r(17875),v=r(79541),w=r(62416),j=r(71004),A=r(6451),k=r(22139),S=r(5507),C=r(21775),E=r(77795),T=r(50809),$=r(45843),R=r(61617),I=r(95159),P=r(94223),O=r(96504),N=r(9739),B=r(26611),U=r(66446),L=r(34861),F=r(82235),z=r(58464),M=r(31766),D=r(62006);function q(){return{with:e=>{let t;return Object.assign(e=>({$$type:"@backstage/ExtensionDataValue",id:t,value:e}),{id:t=e.id,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){let e=!!this.config.optional;return`ExtensionDataRef{id=${t},optional=${e}}`}})}}}function W(e,t,r){if("object"!=typeof e||!e?.[Symbol.iterator])throw Error(`${t} did not provide an iterable object`);let i=new Map,n=r&&new Map(r.map(e=>[e.id,e]));for(let t of e){if(n&&!n.delete(t.id))throw Error(`extension data '${t.id}' was provided but not declared`);i.set(t.id,t)}let a=n&&Array.from(n.values()).filter(e=>!e.config.optional);if(a&&a.length>0)throw Error(`missing required extension data value(s) '${a.map(e=>e.id).join(", ")}'`);return{get:e=>i.get(e.id)?.value,[Symbol.iterator]:()=>i.values()}}function H(e,t,r){if(!e||!t||!r)return t;let i={};for(let n in e){if(!Object.hasOwn(e,n))continue;let a=e[n],s=r[n];if(a.config.singleton){let e=t[n];if(s){let t=W(s,"extension input override",a.extensionData);if(!e)throw Error(`attempted to override data of input '${n}' but it is not present in the original inputs`);i[n]=Object.assign(t,{node:e.node})}}else{let e=t[n];if(!Array.isArray(s))throw Error(`override data provided for input '${n}' must be an array`);if(0===s.length)i[n]=[];else{let t=s.filter(e=>"node"in e).length;if(0===t){if(e.length!==s.length)throw Error(`override data provided for input '${n}' must match the length of the original inputs`);i[n]=s.map((t,r)=>Object.assign(W(t,"extension input override",a.extensionData),{node:e[r].node}))}else if(t===s.length)i[n]=s;else throw Error(`override data for input '${n}' may not mix forwarded inputs with data overrides`)}}}return i}var _=r(33587);class G{static create(e){return new G(e.type,new Set(e.versions))}#K;#V;constructor(e,t){this.#K=e,this.#V=t}TPublic=void 0;TInternal=void 0;isType=e=>this.#Y(e);toInternal=e=>{if(!this.#Y(e))throw TypeError(`Invalid opaque type, expected '${this.#K}', but got '${this.#J(e)}'`);if(!this.#V.has(e.version)){let t=Array.from(this.#V).map(this.#Q);t.length>1&&(t[t.length-1]=`or ${t[t.length-1]}`);let r=t.length>2?t.join(", "):t.join(" ");throw TypeError(`Invalid opaque type instance, got version ${this.#Q(e.version)}, expected ${r}`)}return e};createInstance(e,t){return Object.assign(t,{$$type:this.#K,...e&&{version:e}})}#Y(e){return null!==e&&"object"==typeof e&&e.$$type===this.#K}#J(e){return"object"!=typeof e?`<${typeof e}>`:null===e?"<null>":"$$type"in e?String(e.$$type):String(e)}#Q=e=>e?`'${e}'`:"undefined"}let K=G.create({type:"@backstage/ExtensionDefinition",versions:["v1","v2"]}),V=G.create({type:"@backstage/ExtensionInput",versions:[void 0]}),Y=Symbol("params");function J(e,t,r){return e?Object.fromEntries(Object.entries(e).map(([e,i])=>[e,V.toInternal(i).withContext({kind:t,name:r,input:e})])):{}}function Q(e){let t,r,i=e.config?.schema,n=i&&(r=(t=_).object(Object.fromEntries(Object.entries(i).map(([e,r])=>[e,r(t)]))),{parse:e=>{let t=r.safeParse(e);if(t.success)return t.data;throw Error(t.error.issues.map(function e(t){if("invalid_union"===t.code)return e(t.unionErrors[0].issues[0]);let r=t.message;return"Required"===r&&(r="Missing required value"),t.path.length&&(r+=` at '${t.path.join(".")}'`),r}).join("; "))},schema:(0,D.Ay)(r)});return K.createInstance("v2",{T:void 0,kind:e.kind,name:e.name,attachTo:e.attachTo,disabled:e.disabled??!1,inputs:J(e.inputs,e.kind,e.name),output:e.output,configSchema:n,factory:e.factory,toString(){let t=[];e.kind&&t.push(`kind=${e.kind}`),e.name&&t.push(`name=${e.name}`);let r=[e.attachTo].flat().map(e=>{if(V.isType(e)){let{context:t}=V.toInternal(e);if(!t)return"<detached-input>";let r="<plugin>";return t?.kind&&(r=`${t?.kind}:${r}`),t?.name&&(r=`${r}/${t?.name}`),`${r}@${t.input}`}if("relative"in e&&e.relative){let t="<plugin>";return e.relative.kind&&(t=`${e.relative.kind}:${t}`),e.relative.name&&(t=`${t}/${e.relative.name}`),`${t}@${e.input}`}if("id"in e)return`${e.id}@${e.input}`;throw Error("Invalid attachment point specification")}).join("+");return t.push(`attachTo=${r}`),`ExtensionDefinition{${t.join(",")}}`},override(t){if(!Array.isArray(e.output))throw Error("Cannot override an extension that is not declared using the new format with outputs as an array");if(t.output&&!t.factory)throw Error("Refused to override output without also overriding factory");if(t.params&&t.factory)throw Error("Refused to override params and factory at the same time");return Q({kind:e.kind,name:e.name,attachTo:t.attachTo??e.attachTo,disabled:t.disabled??e.disabled,inputs:J({...e.inputs??{},...t.inputs??{}},e.kind,e.name),output:t.output??e.output,config:e.config||t.config?{schema:{...e.config?.schema,...t.config?.schema}}:void 0,factory:({node:r,apis:i,config:n,inputs:a})=>{if(!t.factory)return e.factory({node:r,apis:i,config:n,inputs:a,[Y]:t.params});let s=t.factory(t=>W(e.factory({node:r,apis:i,config:t?.config??n,inputs:H(e.inputs,a,t?.inputs),[Y]:t?.params}),"original extension factory",e.output),{node:r,apis:i,config:n,inputs:a});if("object"!=typeof s||!s?.[Symbol.iterator])throw Error("extension factory override did not provide an iterable object");let o=new Map;for(let e of s)o.set(e.id,e);return o.values()}})}})}let Z=G.create({type:"@backstage/BlueprintParams",versions:["v1"]});function X(e){return Z.createInstance("v1",{T:null,params:e})}function ee(e,t,r){let i=e(t);try{return Z.toInternal(i).params}catch(e){throw TypeError(`Invalid invocation of blueprint with kind '${r}', the parameter definition callback function did not return a valid parameter definition object; Caused by: ${e.message}`)}}function et(e,t,r,i){let n=t[Y];if(r){if(n){if("function"!=typeof n)throw TypeError(`Invalid extension override of blueprint with kind '${i}', the override params were passed as a plain object, but this blueprint requires them to be passed in callback form`);return ee(n,r,i)}if("function"!=typeof e)throw TypeError(`Invalid invocation of blueprint with kind '${i}', the parameters where passed as a plain object, but this blueprint requires them to be passed in callback form`);return ee(e,r,i)}let a="function"==typeof e?ee(e,X,i):e,s="function"==typeof n?ee(n,X,i):n;return{...a,...s}}function er(e){let t=e.defineParams;return{dataRefs:e.dataRefs,make:r=>Q({kind:e.kind,name:r.name,attachTo:r.attachTo??e.attachTo,disabled:r.disabled??e.disabled,inputs:e.inputs,output:e.output,config:e.config,factory:i=>e.factory(et(r.params,i,t,e.kind),i)}),makeWithOverrides:r=>Q({kind:e.kind,name:r.name,attachTo:r.attachTo??e.attachTo,disabled:r.disabled??e.disabled,inputs:{...r.inputs,...e.inputs},output:r.output??e.output,config:e.config||r.config?{schema:{...e.config?.schema,...r.config?.schema}}:void 0,factory:i=>{let{node:n,config:a,inputs:s,apis:o}=i;return r.factory((r,l)=>W(e.factory(et(r,i,t,e.kind),{apis:o,node:n,config:l?.config??a,inputs:H(e.inputs,s,l?.inputs)}),"original blueprint factory",e.output),{apis:o,node:n,config:a,inputs:s})}})}}let ei=q().with({id:"core.api.factory"}),en=er({kind:"api",attachTo:{id:"root",input:"apis"},output:[ei],dataRefs:{factory:ei},defineParams:e=>X(e),*factory(e){yield ei(e)}}),ea=q().with({id:"scaffolder.form-decorator-loader"}),es=er({kind:"scaffolder-form-decorator",attachTo:{id:"api:scaffolder/form-decorators",input:"formDecorators"},dataRefs:{formDecoratorLoader:ea},output:[ea],*factory(e){yield ea(e.decorator)}});class eo{options;constructor(e){this.options=e}static create(e){return new eo(e??{decorators:[]})}async getFormDecorators(){return this.options.decorators}}en.makeWithOverrides({name:"form-decorators",inputs:{formDecorators:(i={extensionData:[es.dataRefs.formDecoratorLoader],config:{singleton:!1,optional:!1},replaces:void 0},function e(t){return V.createInstance(void 0,{...i,context:t,withContext:e})}())},factory(e,{inputs:t}){let r=t.formDecorators.map(e=>e.get(es.dataRefs.formDecoratorLoader));return e(e=>e({api:M.S,deps:{},factory:()=>eo.create({decorators:r})}))}});var el=r(19579),ec=r(95201),ed=r(23654),eu=r(63653),ep=r(63374),eh=r(19742),eg=r(8886);let em=(0,T.i)({id:"scaffolder",apis:[(0,$.b)({api:a.z,deps:{discoveryApi:R.I,scmIntegrationsApi:n.Y,fetchApi:I.a,identityApi:P.K},factory:({discoveryApi:e,scmIntegrationsApi:t,fetchApi:r,identityApi:i})=>new x({discoveryApi:e,scmIntegrationsApi:t,fetchApi:r,identityApi:i})}),(0,$.b)({api:M.S,deps:{},factory:()=>eo.create()}),(0,$.b)({api:el.v,deps:{},factory:()=>({getFormFields:async()=>[]})})],routes:{root:U.rQ,selectedTemplate:U.sP,ongoingTask:U.bW,actions:U.GF,listTasks:U.JX,edit:U.Dg,editor:U.GH,customFields:U.t6,templateForm:U.P,templatingExtensions:U.SE},externalRoutes:{registerComponent:U.J0,viewTechDoc:U.UJ}});em.provide((0,s.z)({component:b.q,name:"EntityPicker",schema:ec.f2})),em.provide((0,s.z)({component:v.R,name:"EntityNamePicker",validation:w._,schema:j.a})),em.provide((0,s.z)({component:k.R,name:"MultiEntityPicker",schema:ed.mG,validation:k.e})),em.provide((0,s.z)({component:S.e,name:"RepoUrlPicker",validation:E._,schema:C.d})),em.provide((0,s.z)({component:A.u,name:"OwnerPicker",schema:eu.h})),em.provide((0,s.z)({component:L.T,name:"MyGroupsPicker",schema:ep.M}));let ef=em.provide((0,O.QJ)({name:"ScaffolderPage",component:()=>Promise.all([r.e("4553"),r.e("9866"),r.e("4484"),r.e("405"),r.e("6290")]).then(r.bind(r,39641)).then(e=>e.Router),mountPoint:U.rQ}));em.provide((0,s.z)({component:N.F,name:"OwnedEntityPicker",schema:eh.M})),em.provide((0,s.z)({component:B.t,name:"EntityTagsPicker",schema:eg.u})),em.provide((0,s.z)({component:F.z,name:"RepoBranchPicker",schema:z._}))},66446:function(e,t,r){"use strict";r.d(t,{J0:()=>c,P:()=>b,bW:()=>h,sP:()=>p,GF:()=>m,t6:()=>x,Dg:()=>f,GH:()=>y,rQ:()=>u,SE:()=>v,JX:()=>g,UJ:()=>d});var i=r(2488),n=r(77555),a=r(13930);let s=/^\w+$/;class o{[a.b]="sub";id;path;parent;params;constructor(e,t,r,i){this.id=e,this.path=t,this.parent=r,this.params=i}toString(){return`routeRef{type=sub,id=${this.id}}`}$$type="@backstage/SubRouteRef";version="v1";T=void 0;getParams(){return this.params}getParent(){return this.parent}getDescription(){return`at ${this.path} with parent ${this.parent}`}}function l(e){let{id:t,path:r,parent:i}=e,n=r.split("/").filter(e=>e.startsWith(":")).map(e=>e.substring(1)),a=[...i.params,...n];if(i.params.some(e=>n.includes(e)))throw Error("SubRouteRef may not have params that overlap with its parent");if(!r.startsWith("/"))throw Error(`SubRouteRef path must start with '/', got '${r}'`);if(r.endsWith("/"))throw Error(`SubRouteRef path must not end with '/', got '${r}'`);for(let e of n)if(!s.test(e))throw Error(`SubRouteRef path has invalid param, got '${e}'`);return new o(t,r,i,a)}let c=(0,i.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"}),d=(0,i.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),u=(0,n.H)({id:"scaffolder"});l({id:"scaffolder/legacy/selected-template",parent:u,path:"/templates/:templateName"});let p=l({id:"scaffolder/selected-template",parent:u,path:"/templates/:namespace/:templateName"}),h=l({id:"scaffolder/task",parent:u,path:"/tasks/:taskId"}),g=l({id:"scaffolder/list-tasks",parent:u,path:"/tasks"}),m=l({id:"scaffolder/actions",parent:u,path:"/actions"}),f=l({id:"scaffolder/edit",parent:u,path:"/edit"}),y=l({id:"scaffolder/editor",parent:u,path:"/template"}),x=l({id:"scaffolder/customFields",parent:u,path:"/custom-fields"}),b=l({id:"scaffolder/editorForm",parent:u,path:"/template-form"}),v=l({id:"scaffolder/templating-extensions",parent:u,path:"/templating-extensions"})},30268:function(e,t,r){"use strict";r.d(t,{W:()=>i});let i=(0,r(48870).h)({id:"scaffolder",messages:{aboutCard:{launchTemplate:"Launch Template"},actionsPage:{title:"Installed actions",pageTitle:"Create a New Component",subtitle:"This is the collection of all installed actions",content:{emptyState:{title:"No information to display",description:"There are no actions installed or there was an issue communicating with backend."},searchFieldPlaceholder:"Search for an action"},action:{input:"Input",output:"Output",examples:"Examples"}},fields:{entityNamePicker:{title:"Name",description:"Unique name of the component"},entityPicker:{title:"Entity",description:"An entity from the catalog"},entityTagsPicker:{title:"Tags",description:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"},multiEntityPicker:{title:"Entity",description:"An entity from the catalog"},myGroupsPicker:{title:"Entity",description:"An entity from the catalog"},ownedEntityPicker:{title:"Entity",description:"An entity from the catalog"},ownerPicker:{title:"Owner",description:"The owner of the component"},azureRepoPicker:{organization:{title:"Organization",description:"The Organization that this repo will belong to"},project:{title:"Project",description:"The Project that this repo will belong to"}},bitbucketRepoPicker:{workspaces:{title:"Allowed Workspaces",inputTitle:"Workspaces",description:"The Workspace that this repo will belong to"},project:{title:"Allowed Projects",inputTitle:"Projects",description:"The Project that this repo will belong to"}},gerritRepoPicker:{owner:{title:"Owner",description:"The owner of the project (optional)"},parent:{title:"Parent",description:"The project parent that the repo will belong to"}},giteaRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project."}},githubRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"The organization, user or project that this repo will belong to"}},gitlabRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project."}},repoUrlPicker:{host:{title:"Host",description:"The host where the repository will be created"},repository:{title:"Repositories Available",inputTitle:"Repository",description:"The name of the repository"}}},listTaskPage:{title:"List template tasks",pageTitle:"Templates Tasks",subtitle:"All tasks that have been started",content:{emptyState:{title:"No information to display",description:"There are no tasks or there was an issue communicating with backend."},tableTitle:"Tasks",tableCell:{taskID:"Task ID",template:"Template",created:"Created",owner:"Owner",status:"Status"}}},ownerListPicker:{title:"Task Owner",options:{owned:"Owned",all:"All"}},ongoingTask:{title:"Run of",pageTitle:{hasTemplateName:"Run of {{templateName}}",noTemplateName:"Scaffolder Run"},subtitle:"Task {{taskId}}",cancelButtonTitle:"Cancel",retryButtonTitle:"Retry",startOverButtonTitle:"Start Over",hideLogsButtonTitle:"Hide Logs",showLogsButtonTitle:"Show Logs",contextMenu:{hideLogs:"Hide Logs",showLogs:"Show Logs",hideButtonBar:"Hide Button Bar",retry:"Retry",showButtonBar:"Show Button Bar",startOver:"Start Over",cancel:"Cancel"}},templateEditorForm:{stepper:{emptyText:"There are no spec parameters in the template to preview."}},renderSchema:{tableCell:{name:"Name",title:"Title",description:"Description",type:"Type"},undefined:"No schema defined"},templatingExtensions:{title:"Templating Extensions",pageTitle:"Templating Extensions",subtitle:"This is the collection of available templating extensions",content:{emptyState:{title:"No information to display",description:"There are no templating extensions available or there was an issue communicating with the backend."},searchFieldPlaceholder:"Search for an extension",filters:{title:"Filters",notAvailable:"There are no template filters defined.",metadataAbsent:"Filter metadata unavailable",schema:{input:"Input",arguments:"Arguments",output:"Output"},examples:"Examples"},functions:{title:"Functions",notAvailable:"There are no global template functions defined.",metadataAbsent:"Function metadata unavailable",schema:{arguments:"Arguments",output:"Output"},examples:"Examples"},values:{title:"Values",notAvailable:"There are no global template values defined."}}},templateTypePicker:{title:"Categories"},templateIntroPage:{title:"Manage Templates",subtitle:"Edit, preview, and try out templates, forms, and custom fields"},templateFormPage:{title:"Template Editor",subtitle:"Edit, preview, and try out templates forms"},templateCustomFieldPage:{title:"Custom Field Explorer",subtitle:"Edit, preview, and try out custom fields"},templateEditorPage:{title:"Template Editor",subtitle:"Edit, preview, and try out templates and template forms",dryRunResults:{title:"Dry-run results"},dryRunResultsList:{title:"Result {{resultId}}",downloadButtonTitle:"Download as .zip",deleteButtonTitle:"Delete result"},dryRunResultsView:{tab:{files:"Files",log:"Log",output:"Output"}},taskStatusStepper:{skippedStepTitle:"Skipped"},customFieldExplorer:{selectFieldLabel:"Choose Custom Field Extension",fieldForm:{title:"Field Options",applyButtonTitle:"Apply"},fieldPreview:{title:"Field Preview"},preview:{title:"Template Spec"}},templateEditorBrowser:{closeConfirmMessage:"Are you sure? Unsaved changes will be lost",saveIconTooltip:"Save all files",reloadIconTooltip:"Reload directory",closeIconTooltip:"Close directory"},templateEditorIntro:{title:"Get started by choosing one of the options below",loadLocal:{title:"Load Template Directory",description:"Load a local template directory, allowing you to both edit and try executing your own template.",unsupportedTooltip:"Only supported in some Chromium-based browsers with the page loaded over HTTPS"},createLocal:{title:"Create New Template",description:"Create a local template directory, allowing you to both edit and try executing your own template.",unsupportedTooltip:"Only supported in some Chromium-based browsers with the page loaded over HTTPS"},formEditor:{title:"Template Form Playground",description:"Preview and edit a template form, either using a sample template or by loading a template from the catalog."},fieldExplorer:{title:"Custom Field Explorer",description:"View and play around with available installed custom field extensions."}},templateEditorTextArea:{saveIconTooltip:"Save file",refreshIconTooltip:"Reload file",emptyStateParagraph:"Please select an action on the file menu."},templateFormPreviewer:{title:"Load Existing Template"}},templateListPage:{title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",pageTitle:"Create a new component",templateGroups:{defaultTitle:"Templates",otherTitle:"Other Templates"},contentHeader:{registerExistingButtonTitle:"Register Existing Component",supportButtonTitle:"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...)."},additionalLinksForEntity:{viewTechDocsTitle:"View TechDocs"}},templateWizardPage:{title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",pageTitle:"Create a new component",pageContextMenu:{editConfigurationTitle:"Edit Configuration"}},templateEditorToolbar:{customFieldExplorerTooltip:"Custom Fields Explorer",installedActionsDocumentationTooltip:"Installed Actions Documentation",templatingExtensionsDocumentationTooltip:"Templating Extensions Documentation",addToCatalogButton:"Publish",addToCatalogDialogTitle:"Publish changes",addToCatalogDialogContent:{stepsIntroduction:"Follow the instructions below to create or update a template:",stepsListItems:"Save the template files in a local directory\nCreate a pull request to a new or existing git repository\nIf the template already exists, the changes will be reflected in the software catalog once the pull request gets merged\nBut if you are creating a new template, follow the documentation linked below to register the new template repository in software catalog"},addToCatalogDialogActions:{documentationButton:"Go to the documentation",documentationUrl:"https://backstage.io/docs/features/software-templates/adding-templates/"}},templateEditorToolbarFileMenu:{button:"File",options:{openDirectory:"Open template directory",createDirectory:"Create template directory",closeEditor:"Close template editor"}},templateEditorToolbarTemplatesMenu:{button:"Templates"}}})},20570:function(e,t,r){"use strict";r.d(t,{y:()=>i});let i=(0,r(28967).y)({id:"plugin.search.queryservice"})},51470:function(e,t,r){"use strict";r.d(t,{e:()=>s});var i=r(31085),n=r(14041);let a=(0,r(58837).A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),s=e=>{let{text:t,preTag:r,postTag:s}=e,o=a(),l=(0,n.useMemo)(()=>t.split(RegExp(`(${r}.+?${s})`)),[s,r,t]);return(0,i.jsx)(i.Fragment,{children:l.map((e,t)=>e.includes(r)?(0,i.jsx)("mark",{className:o.highlight,children:e.replace(RegExp(`${r}|${s}`,"g"),"")},t):e)})}},33986:function(e,t,r){"use strict";r.d(t,{I:()=>b,Z:()=>x});var i=r(31085),n=r(18139),a=r(54195),s=r(95208),o=r(19224),l=r(29365),c=r(34839),d=r(16249),u=r(64947),p=r(45917),h=r(14041),g=r(48240),m=r(87437),f=r(10265),y=r(92469);let x=(0,h.forwardRef)((e,t)=>{let{onChange:r,onKeyDown:o=()=>{},onClear:x=()=>{},onSubmit:b=()=>{},debounceTime:v=200,clearButton:w=!0,fullWidth:j=!0,value:A,label:k,placeholder:S,inputProps:C={},InputProps:E={},endAdornment:T,...$}=e,R=(0,n.gf)(a.U),[I,P]=(0,h.useState)(""),O=(0,h.useRef)(""),{t:N}=(0,f.i)(y._);(0,h.useEffect)(()=>{P(e=>e===O.current?String(A):e)},[A,O]),(0,g.A)(()=>{O.current=I,r(I)},v,[I]);let B=(0,h.useCallback)(e=>{P(e.target.value)},[P]),U=(0,h.useCallback)(e=>{o&&o(e),b&&"Enter"===e.key&&b()},[o,b]),L=(0,h.useCallback)(()=>{O.current="",r(""),P(""),x&&x()},[r,x]),F=k?void 0:N("searchBar.title"),z=S??N("searchBar.placeholder",{org:R.getOptionalString("app.title")||"Backstage"}),M=(0,s.n)().getSystemIcon("search")||p.default,D=(0,i.jsx)(c.A,{position:"start",children:(0,i.jsx)(l.A,{"aria-label":"Query",size:"small",disabled:!0,children:(0,i.jsx)(M,{})})}),q=(0,i.jsx)(c.A,{position:"end",children:(0,i.jsx)(u.A,{"aria-label":N("searchBar.clearButtonTitle"),size:"small",onClick:L,onKeyDown:e=>{"Enter"===e.key&&e.stopPropagation()},children:N("searchBar.clearButtonTitle")})});return(0,i.jsx)(m.Lt,{inheritParentContextIfAvailable:!0,children:(0,i.jsx)(d.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:t,value:I,label:k,placeholder:z,InputProps:{startAdornment:D,endAdornment:w?q:T,...E},inputProps:{"aria-label":F,...C},fullWidth:j,onChange:B,onKeyDown:U,...$})})}),b=(0,h.forwardRef)((e,t)=>{let{value:r="",onChange:n,...a}=e,{term:s,setTerm:l}=(0,m.SQ)();(0,h.useEffect)(()=>{r&&l(String(r))},[r,l]);let c=(0,h.useCallback)(e=>{n?n(e):l(e)},[n,l]);return(0,i.jsx)(m.Lt,{inheritParentContextIfAvailable:!0,children:(0,i.jsx)(o.I,{attributes:{pluginId:"search",extension:"SearchBar"},children:(0,i.jsx)(x,{...a,ref:t,value:s,onChange:c})})})})},83921:function(e,t,r){"use strict";r.d(t,{$6:()=>T});var i=r(31085),n=r(14041),a=r(45250),s=r(8297),o=r(95061),l=r(86901),c=r(98552),d=r(91761),u=r(58837),p=r(79089),h=r(87437),g=r(94390),m=r(16249),f=r(98312),y=r(87290),x=r(48240);function b(e){if(void 0!==e)return Array.isArray(e)?e.map(e=>b(e)):"string"==typeof e?{value:e,label:e}:e}let v=(e,t,r=[],i=250)=>{let a=(0,n.useRef)({}),s=(0,n.useCallback)(async t=>(await e?.(t))?.map(e=>b(e))||[],[e]),[o,l]=(0,y.A)(s,[t],{loading:!0});if((0,x.A)(()=>{void 0===a.current[t]&&(a.current[t]=l(t).then(e=>(a.current[t]=e,e)))},i,[l,t]),r.length)return{loading:!1,value:r};let c=a.current[t];return Array.isArray(c)?{loading:!1,value:c}:o},w=(e,t)=>{let{setFilters:r}=(0,h.SQ)();(0,n.useEffect)(()=>{t&&[t].flat().length>0&&r(r=>({...r,[e]:t}))},[])},j=e=>{let{className:t,defaultValue:r,name:a,values:s,valuesDebounceMs:o,label:l,filterSelectedOptions:c,limitTags:d,multiple:u}=e,[p,y]=(0,n.useState)("");w(a,r);let{value:x,loading:j}=v("function"==typeof s?s:void 0,p,"function"==typeof s?void 0:s?.map(e=>b(e)),o),{filters:A,setFilters:k}=(0,h.SQ)(),S=b(A[a]),C=(0,n.useMemo)(()=>S||(u?[]:null),[S,u]);return(0,i.jsx)(f.Ay,{filterSelectedOptions:c,limitTags:d,multiple:u,className:t,id:`${u?"multi-":""}select-filter-${a}--select`,options:x||[],loading:j,value:C,onChange:(e,t)=>{k(e=>{let{[a]:r,...i}=e;return t?{...i,[a]:Array.isArray(t)?t.map(e=>e.value):t.value}:{...i}})},onInputChange:(e,t)=>y(t),getOptionLabel:e=>e.label,renderInput:e=>(0,i.jsx)(m.A,{...e,name:"search",variant:"outlined",label:l,fullWidth:!0}),renderTags:(e,t)=>e.map((e,r)=>(0,i.jsx)(g.A,{label:e.label,color:"primary",...t({index:r})}))})};var A=r(10265),k=r(92469);let S=(0,u.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),C=e=>{let{className:t,defaultValue:r,label:n,name:a,values:s=[],valuesDebounceMs:u}=e,p=S(),{filters:g,setFilters:m}=(0,h.SQ)();w(a,r);let{value:f=[],loading:y}=v("function"==typeof s?s:void 0,"","function"==typeof s?void 0:s.map(e=>b(e)),u),x=e=>{let{target:{value:t,checked:r}}=e;m(e=>{let{[a]:i,...n}=e,s=(i||[]).filter(e=>e!==t),o=r?[...s,t]:s;return o.length?{...n,[a]:o}:n})};return(0,i.jsxs)(o.A,{className:t,disabled:y,fullWidth:!0,"data-testid":"search-checkboxfilter-next",children:[!!n&&(0,i.jsx)(d.A,{className:p.label,children:n}),f.map(({value:e,label:t})=>(0,i.jsx)(l.A,{classes:{root:p.checkboxWrapper,label:p.textWrapper},label:t,control:(0,i.jsx)(c.A,{color:"primary",inputProps:{"aria-labelledby":t},value:e,name:t,onChange:x,checked:(g[a]??[]).includes(e)})},e))]})},E=e=>{let{className:t,defaultValue:r,label:l,name:c,values:d,valuesDebounceMs:u}=e,{t:g}=(0,A.i)(k._);w(c,r);let{value:m=[],loading:f}=v("function"==typeof d?d:void 0,"","function"==typeof d?void 0:d?.map(e=>b(e)),u),y=(0,n.useRef)((0,s.A)()),x={value:y.current,label:g("searchFilter.allOptionTitle")},{filters:j,setFilters:S}=(0,h.SQ)(),C=[x,...m];return(0,i.jsx)(o.A,{disabled:f,className:t,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next",children:(0,i.jsx)(p.w,{label:l??(0,a.capitalize)(c),selected:j[c]||y.current,onChange:e=>{S(t=>{let{[c]:r,...i}=t;return e!==y.current?{...i,[c]:e}:i})},items:C})})},T=e=>{let{component:t,...r}=e;return(0,i.jsx)(t,{...r})};T.Checkbox=e=>(0,i.jsx)(T,{...e,component:C}),T.Select=e=>(0,i.jsx)(T,{...e,component:E}),T.Autocomplete=e=>(0,i.jsx)(T,{...e,component:j})},9176:function(e,t,r){"use strict";r.d(t,{n:()=>u});var i=r(31085),n=r(14041),a=r(570),s=r(87437),o=r(10265),l=r(92469),c=r(1048).Buffer;let d=e=>{let{t}=(0,o.i)(l._),{total:r=-1,cursor:s,hasNextPage:d,onCursorChange:u,limit:p=25,limitLabel:h=t("searchPagination.limitLabel"),limitText:g=({from:e,to:i})=>r>0?t("searchPagination.limitText",{num:`${r}`}):`${e}-${i}`,limitOptions:m,onLimitChange:f,...y}=e,x=(0,n.useMemo)(()=>s?Number(c.from(s,"base64").toString("utf-8")):0,[s]),b=(0,n.useCallback)((e,t)=>{u?.(c.from(t.toString(),"utf-8").toString("base64"))},[u]),v=(0,n.useCallback)(e=>{let t=e.target.value;f?.(parseInt(t,10))},[f]);return(0,i.jsx)(a.A,{...y,component:"div",count:r,page:x,nextIconButtonProps:{...void 0!==d&&{disabled:!d}},onPageChange:b,rowsPerPage:p,labelRowsPerPage:h,labelDisplayedRows:g,rowsPerPageOptions:m,onRowsPerPageChange:v})},u=e=>{let{pageLimit:t,setPageLimit:r,pageCursor:a,setPageCursor:o,fetchNextPage:l}=(0,s.SQ)(),c=(0,n.useCallback)(e=>{r(e),o(void 0)},[r,o]);return(0,i.jsx)(d,{...e,hasNextPage:!!l,limit:t,onLimitChange:c,cursor:a,onCursorChange:o})}},62958:function(e,t,r){"use strict";r.d(t,{q0:()=>v});var i=r(31085),n=r(73466),a=r(45250),s=r(56711),o=r(96872),l=r(99424),c=r(18139),d=r(19224),u=r(20570),p=r(87437),h=r(87402),g=r(10265),m=r(92469);let f=e=>{let{children:t}=e,{result:r,...i}=(0,p.SQ)();return t(r,i)},y=e=>{let{query:t,children:r}=e,i=(0,c.gf)(u.y);return r((0,n.A)(()=>{let{term:e="",types:r=[],filters:n={},...a}=t;return i.query({...a,term:e,types:r,filters:n})},[t]),t)},x=e=>{let{query:t,children:r}=e;return t?(0,i.jsx)(y,{query:t,children:r}):(0,i.jsx)(f,{children:r})},b=e=>{let{t}=(0,g.i)(m._),{query:r,children:n,noResultsComponent:c=(0,i.jsx)(s.p,{missing:"data",title:t("noResultsDescription")}),...d}=e;return(0,i.jsx)(x,{query:r,children:({loading:e,error:t,value:r})=>e?(0,i.jsx)(o.k,{}):t?(0,i.jsx)(l._,{title:"Error encountered while fetching search results",error:t}):r?.results.length?(0,a.isFunction)(n)?n(r):(0,i.jsx)(h.z$,{...d,results:r.results,children:n}):c})},v=e=>(0,i.jsx)(d.I,{attributes:{pluginId:"search",extension:"SearchResult"},children:(0,i.jsx)(b,{...e})})},87437:function(e,t,r){"use strict";r.d(t,{Lt:()=>b,SQ:()=>f});var i=r(31085),n=r(45250),a=r(14041),s=r(73466),o=r(5877),l=r(54852),c=r(4790),d=r(18139),u=r(52262),p=r(19224),h=r(54195),g=r(20570);let m=(0,l.tK)("search-context"),f=()=>{let e=(0,a.useContext)(m);if(!e)throw Error("useSearch must be used within a SearchContextProvider");let t=e.atVersion(1);if(!t)throw Error("No SearchContext v1 found");return t},y={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},x=e=>{let{initialState:t,children:r}=e,l=((e=y)=>{let t=(0,d.gf)(g.y),r=(0,u.s)(),[i,l]=(0,a.useState)(e.term),[c,p]=(0,a.useState)(e.types),[h,m]=(0,a.useState)(e.filters),[f,x]=(0,a.useState)(e.pageLimit),[b,v]=(0,a.useState)(e.pageCursor),w=(0,o.A)(i),j=(0,o.A)(h),A=(0,a.useRef)(null),k=(0,s.A)(async()=>{A.current&&A.current.abort();let e=new AbortController;A.current=e;let n=await t.query({term:i,types:c,filters:h,pageLimit:f,pageCursor:b},{signal:e.signal});return i&&r.captureEvent("search",i,{value:n.numberOfResults}),n},[i,c,h,f,b]),S=!k.loading&&!k.error&&k.value?.nextPageCursor,C=!k.loading&&!k.error&&k.value?.previousPageCursor,E=(0,a.useCallback)(()=>{v(k.value?.nextPageCursor)},[k.value?.nextPageCursor]),T=(0,a.useCallback)(()=>{v(k.value?.previousPageCursor)},[k.value?.previousPageCursor]);return(0,a.useEffect)(()=>()=>{A.current&&A.current.abort()},[]),(0,a.useEffect)(()=>{void 0!==w&&i!==w&&v(void 0)},[i,w,v]),(0,a.useEffect)(()=>{void 0===j||(0,n.isEqual)(h,j)||v(void 0)},[h,j,v]),{result:k,term:i,setTerm:l,types:c,setTypes:p,filters:h,setFilters:m,pageLimit:f,setPageLimit:x,pageCursor:b,setPageCursor:v,fetchNextPage:S?E:void 0,fetchPreviousPage:C?T:void 0}})(t);return(0,i.jsx)(p.I,{attributes:{searchTypes:l.types.sort().join(",")},children:(0,i.jsx)(m.Provider,{value:(0,c.B)({1:l}),children:r})})},b=e=>{let{initialState:t,inheritParentContextIfAvailable:r,children:n}=e,s=void 0!==(0,a.useContext)(m),o=(0,d.gf)(h.U),l=o.has("search.query.pageLimit")?{pageLimit:o.getNumber("search.query.pageLimit")}:{},c={...y,...t??{},...l};return s&&r?(0,i.jsx)(i.Fragment,{children:n}):(0,i.jsx)(x,{initialState:c,children:n})}},87402:function(e,t,r){"use strict";r.d(t,{z$:()=>A,ec:()=>j});var i=r(31085),n=r(14041),a=r(85408),s=r(52262),o=r(96504),l=r(77026),c=r(58007),d=r(8109),u=r(19224),p=r(51470),h=r(68804),g=r(5951),m=r(77125),f=r(72501),y=r(75202);let x=({result:e,highlight:t,icon:r,secondaryAction:n,lineClamp:a=5})=>e?(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(h.A,{children:r}),(0,i.jsx)(g.A,{primaryTypographyProps:{variant:"h6"},primary:(0,i.jsx)(y.N_,{noTrack:!0,to:e.location,children:t?.fields.title?(0,i.jsx)(p.e,{text:t?.fields.title||"",preTag:t?.preTag||"",postTag:t?.postTag||""}):e.title}),secondary:(0,i.jsx)(f.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:a,overflow:"hidden"},color:"textSecondary",variant:"body2",children:t?.fields.text?(0,i.jsx)(p.e,{text:t.fields.text,preTag:t.preTag,postTag:t.postTag}):e.text})}),n&&(0,i.jsx)(m.A,{alignItems:"flex-end",children:n})]}):null,b=e=>(0,i.jsx)(u.I,{attributes:{pluginId:"search",extension:"DefaultResultListItem"},children:(0,i.jsx)(x,{...e})}),v="search.results.list.items.extensions.v1",w=e=>{let{rank:t,result:r,noTrack:a,children:o,alignItems:l="flex-start",...c}=e,u=(0,s.s)(),p=(0,n.useCallback)(()=>{a||r&&u.captureEvent("discover",r.title,{attributes:{to:r.location},value:t})},[t,r,a,u]);return(0,i.jsx)(d.A,{divider:!0,alignItems:l,onClickCapture:p,...c,children:o})},j=e=>{let{name:t,component:r,predicate:a=()=>!0}=e;return(0,o.zZ)({name:t,component:{lazy:()=>r().then(e=>t=>(0,i.jsx)(w,{rank:t.rank,result:t.result,noTrack:t.noTrack,children:(0,n.createElement)(e,t)}))},data:{[v]:a}})},A=e=>{let t,{results:r,children:s,...o}=e,d=(t=(0,l.O)(s,e=>e.selectByComponentData({key:v}).getElements(),[s]),(0,n.useCallback)((e,r)=>{let s=((e,t)=>{for(let r of e){if(!(0,n.isValidElement)(r))continue;let e=(0,a.E)(r,v);if(e?.(t))return(0,n.cloneElement)(r,{rank:t.rank,highlight:t.highlight,result:t.document,...r.props})}return null})(t,e);return(0,i.jsx)(n.Fragment,{children:s??(0,i.jsx)(w,{rank:e.rank,result:e.document,children:(0,i.jsx)(b,{rank:e.rank,highlight:e.highlight,result:e.document})})},r)},[t]));return(0,i.jsx)(c.A,{...o,children:r.map(d)})}},92469:function(e,t,r){"use strict";r.d(t,{_:()=>i});let i=(0,r(48870).h)({id:"search-react",messages:{searchBar:{title:"Search",placeholder:"Search in {{org}}",clearButtonTitle:"Clear"},searchFilter:{allOptionTitle:"All"},searchPagination:{limitLabel:"Results per page:",limitText:"of {{num}}"},noResultsDescription:"Sorry, no results were found",searchResultGroup:{linkTitle:"See All",addFilterButtonTitle:"Add filter"},searchResultPager:{previous:"Previous",next:"Next"}}})},87024:function(e,t,r){"use strict";r.d(t,{n:()=>F});var i=r(31085),n=r(98552),a=r(94390),s=r(95061),o=r(48543),l=r(5951),c=r(26343),d=r(99489),u=r(58837),p=r(8380),h=r(14041),g=r(18139),m=r(87437),f=r(20570),y=r(8973),x=r(29655),b=r(91567),v=r(77125),w=r(37197),j=r(58007),A=r(8109),k=r(68804),S=r(6924),C=r(72501),E=r(53364),T=r(73466),$=r(10265),R=r(11235);let I=(0,u.A)(e=>({icon:{color:e.palette.text.primary},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:e.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:e.spacing(2,0),"&.Mui-expanded":{margin:e.spacing(2,0)}},accordionDetails:{padding:e.spacing(0,0,1)}})),P=e=>{let t=I(),{filters:r,setPageCursor:n,setTypes:a,term:s,types:o}=(0,m.SQ)(),c=(0,g.gf)(f.y),[d,u]=(0,h.useState)(!0),{defaultValue:p,name:P,showCounts:O,types:N}=e,{t:B}=(0,$.i)(R.$),U=(0,h.useRef)(null);(0,h.useEffect)(()=>{p&&a([p])},[]);let L=[{value:"",name:B("searchType.accordion.allTitle"),icon:(0,i.jsx)(E.default,{})},...N],F=o[0]||"",{value:z}=(0,T.A)(async()=>{if(!O)return{};U.current&&U.current.abort();let e=new AbortController;return U.current=e,Object.fromEntries(await Promise.all(L.map(e=>e.value).map(async t=>{let{numberOfResults:i}=await c.query({term:s,types:t?[t]:[],filters:!o.includes(t)&&(o.length||t)?{}:r,pageLimit:0},{signal:e.signal});return[t,void 0!==i?B("searchType.accordion.numberOfResults",{number:i>=1e4?">10000":`${i}`}):" -- "]})))},[r,O,s,o]);return(0,h.useEffect)(()=>()=>{U.current&&U.current.abort()},[]),(0,i.jsxs)(v.A,{children:[(0,i.jsx)(C.A,{variant:"body2",component:"h2",children:P}),(0,i.jsxs)(y.A,{className:t.accordion,expanded:d,onChange:()=>u(e=>!e),children:[(0,i.jsx)(x.A,{classes:{root:t.accordionSummary,content:t.accordionSummaryContent},expandIcon:(0,i.jsx)(S.default,{className:t.icon}),IconButtonProps:{size:"small"},children:d?B("searchType.accordion.collapse"):L.filter(e=>e.value===F)[0].name}),(0,i.jsx)(b.A,{classes:{root:t.accordionDetails},children:(0,i.jsx)(j.A,{className:t.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0,children:L.map(e=>{let r;return(0,i.jsxs)(h.Fragment,{children:[(0,i.jsx)(w.A,{}),(0,i.jsxs)(A.A,{selected:o[0]===e.value||0===o.length&&""===e.value,onClick:(r=e.value,()=>{a(""!==r?[r]:[]),n(void 0)}),button:!0,children:[(0,i.jsx)(k.A,{children:(0,h.cloneElement)(e.icon,{className:t.listItemIcon})}),(0,i.jsx)(l.A,{primary:e.name,secondary:z&&z[e.value]})]})]},e.value)})})})]})]})};var O=r(38605),N=r(74953);let B=(0,u.A)(e=>({tabs:{borderBottom:`1px solid ${e.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:e.typography.fontWeightBold,fontSize:e.typography.pxToRem(13),color:e.palette.text.primary,minWidth:"130px"}})),U=e=>{let t=B(),{setPageCursor:r,setTypes:n,types:a}=(0,m.SQ)(),{defaultValue:s,types:o}=e,{t:l}=(0,$.i)(R.$);(0,h.useEffect)(()=>{s&&n([s])},[]);let c=[{value:"",name:l("searchType.tabs.allTitle")},...o];return(0,i.jsx)(N.A,{"aria-label":"List of search types tabs",className:t.tabs,indicatorColor:"primary",value:0===a.length?"":a[0],onChange:(e,t)=>{n(""!==t?[t]:[]),r(void 0)},children:c.map((e,r)=>(0,i.jsx)(O.A,{className:t.tab,label:e.name,value:e.value},r))})},L=(0,u.A)(e=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:e.spacing(1)},chip:{margin:2}})),F=e=>{let{className:t,defaultValue:r,name:u,values:h=[]}=e,g=L(),{types:f,setTypes:y}=(0,m.SQ)(),{t:x}=(0,$.i)(R.$);return(0,p.A)(()=>{!f.length&&(r&&Array.isArray(r)?y(r):r&&y([r]))}),(0,i.jsxs)(s.A,{className:t,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next",children:[(0,i.jsx)(o.A,{className:g.label,margin:"dense",children:u}),(0,i.jsx)(d.A,{multiple:!0,variant:"outlined",value:f,onChange:e=>{y(e.target.value)},placeholder:x("searchType.allResults"),renderValue:e=>(0,i.jsx)("div",{className:g.chips,children:e.map(e=>(0,i.jsx)(a.A,{label:e,className:g.chip,size:"small"},e))}),children:h.map(e=>(0,i.jsxs)(c.A,{value:e,children:[(0,i.jsx)(n.A,{checked:f.indexOf(e)>-1}),(0,i.jsx)(l.A,{primary:e})]},e))})]})};F.Accordion=e=>(0,i.jsx)(P,{...e}),F.Tabs=e=>(0,i.jsx)(U,{...e})},77792:function(e,t,r){"use strict";r.d(t,{ai:()=>y,rQ:()=>g,gC:()=>f});var i=r(53317),n=r(45810),a=r.n(n);class s{discoveryApi;fetchApi;constructor(e){this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi}async query(e,t){let r=a().stringify(e),n=`${await this.discoveryApi.getBaseUrl("search")}/query?${r}`,s=await this.fetchApi.fetch(n,{signal:t?.signal});if(!s.ok)throw await i.o.fromResponse(s);return s.json()}}var o=r(20570),l=r(77555),c=r(50809),d=r(45843),u=r(61617),p=r(95159),h=r(96504);let g=(0,l.H)({id:"search"}),m=(0,c.i)({id:"search",apis:[(0,d.b)({api:o.y,deps:{discoveryApi:u.I,fetchApi:p.a},factory:({discoveryApi:e,fetchApi:t})=>new s({discoveryApi:e,fetchApi:t})})],routes:{root:g}}),f=m.provide((0,h.QJ)({name:"SearchPage",component:()=>r.e("1338").then(r.bind(r,83201)).then(e=>e.SearchPage),mountPoint:g})),y=m.provide((0,h.NC)({name:"SidebarSearchModal",component:{lazy:()=>r.e("4901").then(r.bind(r,23012)).then(e=>e.SidebarSearchModal)}}));m.provide((0,h.NC)({name:"HomePageSearchBar",component:{lazy:()=>r.e("514").then(r.bind(r,30521)).then(e=>e.HomePageSearchBar)}}))},11235:function(e,t,r){"use strict";r.d(t,{$:()=>i});let i=(0,r(48870).h)({id:"search",messages:{searchModal:{viewFullResults:"View Full Results"},searchType:{allResults:"All Results",tabs:{allTitle:"All"},accordion:{allTitle:"All",collapse:"Collapse",numberOfResults:"{{number}} results"}},sidebarSearchModal:{title:"Search"}}})},72090:function(e,t,r){"use strict";r.d(t,{c:()=>i});let i=(0,r(28967).y)({id:"plugin.signal.service"})},57389:function(e,t,r){"use strict";r.d(t,{U:()=>s});var i=r(72090),n=r(18139),a=r(14041);let s=e=>{let t=(0,n.Q2)().get(i.c),[r,s]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let r=null;if(t){let{unsubscribe:i}=t.subscribe(e,e=>{s(e)});r=i}return()=>{t&&r&&r()}},[t,e]),{lastSignal:r,isSignalsAvailable:(0,a.useMemo)(()=>!!t,[t])}}},86676:function(e,t,r){"use strict";r.d(t,{o:()=>u});var i=r(50809),n=r(45843),a=r(94223),s=r(61617),o=r(96504),l=r(72090),c=r(8297);class d{static DEFAULT_CONNECT_TIMEOUT_MS=1e3;static DEFAULT_RECONNECT_TIMEOUT_MS=5e3;ws=null;subscriptions=new Map;messageQueue=[];reconnectTo;static create(e){let{identity:t,discoveryApi:r,connectTimeout:i=d.DEFAULT_CONNECT_TIMEOUT_MS,reconnectTimeout:n=d.DEFAULT_RECONNECT_TIMEOUT_MS}=e;return new d(t,r,i,n)}identity;discoveryApi;connectTimeout;reconnectTimeout;constructor(e,t,r,i){this.identity=e,this.discoveryApi=t,this.connectTimeout=r,this.reconnectTimeout=i}subscribe(e,t){let r=(0,c.A)(),i=[...this.subscriptions.values()].find(t=>t.channel===e);return this.subscriptions.set(r,{channel:e,callback:t}),this.connect().then(()=>{i||this.send({action:"subscribe",channel:e})}).catch(()=>{this.reconnect()}),{unsubscribe:()=>{let t=this.subscriptions.get(r);t&&(this.subscriptions.delete(r),[...this.subscriptions.values()].find(t=>t.channel===e)||this.send({action:"unsubscribe",channel:t.channel}),0===this.subscriptions.size&&(this.ws?.close(1e3),this.ws=null))}}}send(e){let t=JSON.stringify(e);if(0!==t.length){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){e&&this.messageQueue.unshift(t);return}for(let e of this.messageQueue)this.ws.send(e);this.messageQueue=[],e&&this.ws.send(t)}}async connect(){if(this.ws&&this.ws.readyState!==WebSocket.CLOSED)return;let e=await this.discoveryApi.getBaseUrl("signals"),{token:t}=await this.identity.getCredentials(),r=new URL(e);r.protocol="http:"===r.protocol?"ws:":"wss:",this.ws=new WebSocket(r.toString(),t);let i=0;for(;this.ws&&this.ws.readyState!==WebSocket.OPEN&&i<this.connectTimeout;)await new Promise(e=>setTimeout(e,100)),i+=100;if(!this.ws||this.ws.readyState!==WebSocket.OPEN)throw Error("Connect timeout");this.ws.onmessage=e=>{this.handleMessage(e)},this.ws.onerror=()=>{this.ws&&this.ws.close(),this.ws=null},this.ws.onclose=e=>{1e3!==e.code&&1001!==e.code&&this.reconnect()}}handleMessage(e){try{let t=JSON.parse(e.data);if(!t.channel)return;for(let e of this.subscriptions.values())e.channel===t.channel&&e.callback(t.message)}catch(e){}}reconnect(){this.reconnectTo&&clearTimeout(this.reconnectTo),this.reconnectTo=setTimeout(()=>{this.reconnectTo=null,this.ws&&this.ws.close(),this.ws=null,this.connect().then(()=>{for(let e of this.subscriptions.values())this.send({action:"subscribe",channel:e.channel})}).catch(()=>{this.reconnect()})},this.reconnectTimeout)}}let u=(0,i.i)({id:"signals",apis:[(0,n.b)({api:l.c,deps:{identity:a.K,discoveryApi:s.I},factory:({identity:e,discoveryApi:t})=>d.create({identity:e,discoveryApi:t})})]}).provide((0,o.NC)({name:"SignalsDisplay",component:{sync:()=>null}}))},19108:function(e,t,r){"use strict";r.d(t,{As:()=>i,GO:()=>n,qH:()=>a});let i="backstage.io/techdocs-ref",n="backstage.io/techdocs-entity",a="backstage.io/techdocs-entity-path"},12231:function(e,t,r){"use strict";r.d(t,{Gr:()=>er});var i=r(50809),n=r(11618),a=r(15246),s=r(31085),o=r(14041),l=r(28466),c=r(7031),d=r(64947),u=r(63798),p=r(6924),h=r(85639);let g=(0,c.A)({root:{position:"absolute",left:"13.7rem",top:"19px",zIndex:2,padding:0,minWidth:0}})(d.A),m=(0,c.A)({root:{height:"20px",width:"20px"}})(u.default),f=(0,c.A)({root:{height:"20px",width:"20px"}})(p.default);var y=r(52536),x=r.n(y),b=r(18139),v=r(54195),w=r(82619),j=r(64746),A=r(59059);let k="techdocs-report-issue",S=`#${k}`,C=["github","gitlab"],E='[title^="Edit this page"]',T=(e,t)=>"github"===t?(0,w.F)(e,"blob"):"gitlab"===t?(0,j.B)(e,"blob"):(console.error(`Invalid SCM type ${t} found in ReportIssue addon for URL ${e}!`),e);var $=r(58837),R=r(41883),I=r(4321),P=r(85005),O=r(92483),N=r(75202);let B=(0,$.A)(e=>({root:{display:"grid",gridGap:e.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:e.palette.common.black,fontSize:e.typography.button.fontSize}})),U=({template:e,repository:t})=>{let r=B(),i=(({type:e})=>"github"===e?O.Hk:P.default)(t),n=((e,t)=>{let{title:r,body:i}=t,n=encodeURIComponent(r),a=encodeURIComponent(i),{protocol:s,resource:o,owner:l,name:c,type:d}=e,u=encodeURI(`${s}://${o}/${l}/${c}`);return"github"===d?`${u}/issues/new?title=${n}&body=${a}`:`${u}/issues/new?issue[title]=${n}&issue[description]=${a}`})(t,e);return(0,s.jsxs)(N.N_,{className:r.root,to:n,target:"_blank",children:[(0,s.jsx)(i,{})," Open new ",(({type:e})=>e.charAt(0).toLocaleUpperCase("en-US")+e.slice(1))(t)," issue"]})},L=(0,$.A)(e=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:e.spacing(1),zIndex:e.zIndex.tooltip,background:e.palette.common.white}})),F=({debounceTime:e,templateBuilder:t,repository:r})=>{let i=L(),[n,a]=(0,o.useState)(),l=(e=>{var t;let r,i,n,a,s={title:"",body:""},o=(0,h.k0)(e),[l]=(0,h.$r)([E]),c=l?.href??"",d=(0,b.gf)(A.Y),u=(0,b.gf)(v.U).getOptionalString("app.title")||"Backstage";if(!o||!c)return s;let p=d.byUrl(c)?.type;return p?{title:(i=70===(r=o.toString().substring(0,70)).length?"...":"",`Documentation feedback: ${r}${i}`),body:(t=T(c,p),n=o.toString().trim().split("\n").map(e=>`> ${e.trim()}`).join("\n"),a=[`${u} URL: <${window.location.href}> 
Markdown URL: <${t}>`],`## Documentation Feedback \u{1F4DD}

 #### The highlighted text: 

 ${n}

 #### The comment on the text: 
 _>replace this line with your comment<_

 ___
${a}`)}:s})(e),c=(0,h.k0)(e),[d,u]=(0,h.$r)(['[data-md-component="main"] .md-content','[title^="Leave feedback for"]']),[p]=(0,h.$r)([S]);return(u&&(u.style.display="none"),(0,o.useEffect)(()=>{if(!c||!c.containsNode(d,!0)||c.containsNode(p,!0))return;let e=d.getBoundingClientRect(),t=c.getRangeAt(0).getBoundingClientRect(),r=t.top-e.top,i=r<50?101:r-16;e.top<0&&r-Math.abs(e.top)<50&&(i+=89),a({top:`${i}px`,left:`${t.left+t.width/2}px`})},[c,d,p]),p||((p=document.createElement("div")).setAttribute("id",k),d.prepend(p)),c&&c.containsNode(d,!0))?(0,s.jsx)(R.A,{container:p,children:(0,s.jsx)(I.A,{"data-testid":"report-issue-addon",className:i.root,style:n,children:(0,s.jsx)(U,{repository:r,template:t?t({selection:c}):l})})}):null};var z=r(34453),M=r(54917),D=r(26343),q=r(5951),W=r(72501),H=r(77125),_=r(29365),G=r(18466),K=r(80113);let V="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",Y=(0,c.A)(e=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:e.palette.common.white,boxShadow:V,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:V}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:e.palette.textSubtle,fontSize:e.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(z.A),J="techdocs.addons.settings.textsize",Q=[{value:90},{value:100},{value:115},{value:130},{value:150}],Z=(0,$.A)(e=>({container:{color:e.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:e.spacing(1)},increaseButton:{marginLeft:e.spacing(1)}}));var X=r(10527),ee=r(60367);let et=(0,i.i)({id:"techdocsModuleAddonsContrib"});et.provide((0,n.Hr)({name:"ExpandableNavigation",location:a.e.PrimarySidebar,component:()=>{let{value:e,set:t}=(0,l.t)("@backstage/techdocs-addons/nav-expanded",{defaultValue:{expandAllNestedNavs:!1}}),[r,i]=(0,o.useState)(!1),[...n]=(0,h.$r)([".md-nav__item--nested .md-toggle"]);(0,o.useEffect)(()=>{n?.length&&i(!0)},[n]),(0,o.useEffect)(()=>{if(n?.length)for(let r of n){var t;t=r,e?.expandAllNestedNavs!==t.checked&&r.click()}},[e,n]);let a=()=>{t(e=>({expandAllNestedNavs:!e?.expandAllNestedNavs}))};return(0,s.jsx)(s.Fragment,{children:r?(0,s.jsx)(g,{size:"small",onClick:a,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a())},tabIndex:0,"aria-expanded":e?.expandAllNestedNavs,"aria-label":e?.expandAllNestedNavs?"collapse-nav":"expand-nav",children:e?.expandAllNestedNavs?(0,s.jsx)(f,{}):(0,s.jsx)(m,{})}):null})}}));let er=et.provide((0,n.Hr)({name:"ReportIssue",location:a.e.Content,component:({debounceTime:e=500,templateBuilder:t})=>{let r=(()=>{let e=(0,b.gf)(A.Y),[t]=(0,h.$r)([E]),r=t?.href??"";if(!r)return null;let i=e.byUrl(r)?.type;return i?{...x()(T(r,i)),type:i}:null})();return r&&C.includes(r.type)?(0,s.jsx)(F,{debounceTime:e,templateBuilder:t,repository:r}):null}}));et.provide((0,n.Hr)({name:"TextSize",location:a.e.Settings,component:()=>{let e=Z(),t=(0,M.A)(),[r]=(0,h.$r)(["body"]),[i,n]=(0,o.useState)(()=>{let e=localStorage?.getItem(J);return e?parseInt(e,10):100}),a=(0,o.useMemo)(()=>Q.map(e=>e.value),[]),l=(0,o.useMemo)(()=>a.indexOf(i),[a,i]),c=(0,o.useMemo)(()=>a[0],[a]),d=(0,o.useMemo)(()=>a[a.length-1],[a]),u=(0,o.useCallback)(()=>`${i}%`,[i]),p=(0,o.useCallback)((e,t)=>{Array.isArray(t)||(n(t),localStorage?.setItem(J,String(t)))},[n]),g=(0,o.useCallback)(e=>{p(e,a[l-1])},[l,a,p]),m=(0,o.useCallback)(e=>{p(e,a[l+1])},[l,a,p]);return(0,o.useEffect)(()=>{if(!r)return;let e=t.typography?.htmlFontSize??16;r.style.setProperty("--md-typeset-font-size",`${i/100*e}px`)},[r,i,t]),(0,s.jsx)(D.A,{className:e.menuItem,button:!0,disableRipple:!0,children:(0,s.jsx)(q.A,{primary:(0,s.jsx)(W.A,{variant:"subtitle2",color:"textPrimary",children:"Text size"}),secondary:(0,s.jsxs)(H.A,{className:e.container,children:[(0,s.jsx)(_.A,{className:e.decreaseButton,size:"small",edge:"start",disabled:i===c,onClick:g,"aria-label":"Decrease text size",children:(0,s.jsx)(K.default,{})}),(0,s.jsx)(Y,{value:i,"aria-labelledby":"text-size-slider",getAriaValueText:u,valueLabelDisplay:"on",valueLabelFormat:u,marks:Q,step:null,min:c,max:d,onChangeCommitted:p}),(0,s.jsx)(_.A,{className:e.increaseButton,size:"small",edge:"end",disabled:i===d,onClick:m,"aria-label":"Increase text size",children:(0,s.jsx)(G.default,{})})]}),disableTypography:!0})})}})),et.provide((0,n.Hr)({name:"LightBox",location:a.e.Content,component:()=>{let e=(0,h.$r)(["img"]);return(0,o.useEffect)(()=>{let t=null,r=new X.A({pswpModule:ee.A,initialZoomLevel:1,secondaryZoomLevel:e=>{let t=e.elementSize.x,r=e.elementSize.y;return Math.min(e.panAreaSize.x/t,e.panAreaSize.y/r)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return e.forEach((i,n)=>{i.onclick=()=>(null===t&&(t=e.map(e=>({element:e,src:e.src,msrc:e.src,alt:e.alt,width:e.clientWidth,height:e.clientHeight}))),r?.loadAndOpen(n,t),!1)}),r.init(),()=>{r?.destroy(),r=null}},[e]),null}}))},11618:function(e,t,r){"use strict";r.d(t,{AF:()=>d,Hr:()=>h,Wm:()=>c,YR:()=>f,po:()=>u});var i=r(31085),n=r(14041),a=r(18690),s=r(85408),o=r(96504),l=r(77026);let c="techdocs.addons.addon.v1",d="techdocs.addons.wrapper.v1",u=()=>null;(0,s.h)(u,d,!0);let p=e=>`${c}.${e.toLocaleLowerCase("en-US")}`;function h(e){let{name:t,component:r}=e;return(0,o.zZ)({name:t,component:{sync:e=>(0,i.jsx)(r,{...e})},data:{[c]:e,[p(t)]:!0}})}let g=e=>e.selectByComponentData({key:d}).selectByComponentData({key:c}),m=e=>e.selectByComponentData({key:d}).findComponentData({key:c}),f=()=>{let e=(0,a.P1)(),t=(0,l.O)(e,g),r=(0,l.O)(e,m),i=(0,n.useCallback)(e=>{if(!t||!e)return null;let r=p(e.name);return t.selectByComponentData({key:r}).getElements()[0]??null},[t]);return{renderComponentByName:(0,n.useCallback)(e=>{let t=r.find(t=>t.name===e);return t?i(t):null},[r,i]),renderComponentsByLocation:(0,n.useCallback)(e=>{let t=r.filter(t=>t.location===e);return t.length?t.map(i):null},[r,i])}}},49707:function(e,t,r){"use strict";r.d(t,{l:()=>n,s:()=>a});var i=r(28967);let n=(0,i.y)({id:"plugin.techdocs.service"}),a=(0,i.y)({id:"plugin.techdocs.storageservice"})},83380:function(e,t,r){"use strict";r.d(t,{R:()=>y,V:()=>x});var i=r(31085),n=r(14041),a=r(73466),s=r(28966),o=r(78560),l=r(54852),c=r(4790),d=r(18139),u=r(54195),p=r(19224),h=r(49707),g=r(11642);let m={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},f=(0,l.tK)("techdocs-reader-page-context"),y=(0,n.memo)(e=>{let{entityRef:t,children:r}=e,l=(0,d.gf)(h.l),y=(0,d.gf)(u.U),x=(0,a.A)(async()=>l.getEntityMetadata(t),[t]),b=(0,s.A)(async()=>l.getTechDocsMetadata(t),[t]),[v,w]=(0,n.useState)(m.title),[j,A]=(0,n.useState)(m.subtitle),[k,S]=(0,n.useState)(m.shadowRoot);(0,n.useEffect)(()=>{!k||b.value||b.loading||b.retry()},[b.value,b.loading,k,b.retry,b]);let C={metadata:b,entityRef:(0,g.Lf)(t,y),entityMetadata:x,shadowRoot:k,setShadowRoot:S,title:v,setTitle:w,subtitle:j,setSubtitle:A},E=(0,c.B)({1:C});return(0,i.jsx)(p.I,{attributes:{entityRef:(0,o.U2)(t)},children:(0,i.jsx)(f.Provider,{value:E,children:r instanceof Function?r(C):r})})},(e,t)=>{let r,i;return r=e.entityRef,i=t.entityRef,(0,o.U2)(r)===(0,o.U2)(i)}),x=()=>{let e=(0,n.useContext)(f);if(void 0===e)return m;let t=e.atVersion(1);if(void 0===t)throw Error("No context found for version 1.");return t}},11642:function(e,t,r){"use strict";r.d(t,{Lf:()=>a,b1:()=>o,oN:()=>s});var i=r(78560),n=r(19108);function a(e,t){return t.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(e.kind=e.kind.toLocaleLowerCase(),e.name=e.name.toLocaleLowerCase(),e.namespace=e.namespace.toLocaleLowerCase()),e}function s(e){let t=e.metadata.annotations?.[n.qH];return t?(t.startsWith("/")||(t=`/${t}`),t):""}let o=(e,t)=>{if(!t)return;let{namespace:r,kind:a,name:o}=(0,i.sM)(e);if(e.metadata.annotations?.[n.GO])try{let t=(0,i.KU)(e.metadata.annotations?.[n.GO]);r=t.namespace,a=t.kind,o=t.name}catch{}let l=t({namespace:r,kind:a,name:o}),c=s(e);return`${l}${c}`}},85639:function(e,t,r){"use strict";r.d(t,{$r:()=>l,k0:()=>c});var i=r(14041),n=r(12784),a=r.n(n),s=r(83380);let o=()=>{let{shadowRoot:e}=(0,s.V)();return e},l=e=>{let t=o(),[r,n]=(0,i.useState)(t?.firstChild);return((0,i.useEffect)(()=>{let e;return t&&(e=new MutationObserver(()=>{n(t?.firstChild)})).observe(t,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),()=>e?.disconnect()},[t]),r&&r instanceof HTMLElement)?e.map(e=>r.querySelectorAll(e)).filter(e=>e.length).map(e=>Array.from(e)).flat():[]},c=(e=0)=>{let t=o(),[r,n]=(0,i.useState)(null),s=(0,i.useMemo)(()=>a()(()=>{let e=t.getSelection?t.getSelection():document.getSelection();e&&e.toString()&&e.rangeCount&&e.getRangeAt(0).getBoundingClientRect().top?n(e):n(null)},e),[t,n,e]);return(0,i.useEffect)(()=>(window.document.addEventListener("selectionchange",s),()=>{s.cancel(),window.document.removeEventListener("selectionchange",s)}),[s]),r}},15246:function(e,t,r){"use strict";r.d(t,{e:()=>i});let i=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"})},94682:function(e,t,r){"use strict";r.d(t,{IP:()=>w,Ju:()=>y,Wj:()=>v,o_:()=>x,$j:()=>b});var i=r(49707),n=r(53317),a=r(57559),s=r(87922);class o{configApi;discoveryApi;fetchApi;constructor(e){this.configApi=e.configApi,this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi}async getCookie(){let e=await this.getApiOrigin(),t=`${e}/cookie`,r=await this.fetchApi.fetch(`${t}`,{credentials:"include"});if(!r.ok)throw await n.o.fromResponse(r);return await r.json()}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(e){let{kind:t,namespace:r,name:i}=e,a=await this.getApiOrigin(),s=`${a}/metadata/techdocs/${r}/${t}/${i}`,o=await this.fetchApi.fetch(`${s}`);if(!o.ok)throw await n.o.fromResponse(o);return await o.json()}async getEntityMetadata(e){let{kind:t,namespace:r,name:i}=e,a=await this.getApiOrigin(),s=`${a}/metadata/entity/${r}/${t}/${i}`,o=await this.fetchApi.fetch(`${s}`);if(!o.ok)throw await n.o.fromResponse(o);return await o.json()}}class l{configApi;discoveryApi;fetchApi;constructor(e){this.configApi=e.configApi,this.discoveryApi=e.discoveryApi,this.fetchApi=e.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){return this.configApi.getOptionalString("techdocs.storageUrl")??`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getOptionalString("techdocs.builder")||"local"}async getEntityDocs(e,t){let{kind:r,namespace:i,name:n}=e,s=await this.getStorageUrl(),o=`${s}/${i}/${r}/${n}/${t}`,l=await this.fetchApi.fetch(`${o.endsWith("/")?o:`${o}/`}index.html`),c="";switch(l.status){case 404:throw c="Page not found. ",t||(c+="This could be because there is no index.md file in the root of the docs directory of this repository."),new a.m_(c);case 500:throw Error(c="Could not generate documentation or an error in the TechDocs backend. ")}return l.text()}async syncEntityDocs(e,t=()=>{}){let{kind:r,namespace:i,name:n}=e,a=await this.getApiOrigin(),o=`${a}/sync/${i}/${r}/${n}`;return new Promise((e,r)=>{let i=new AbortController;(0,s.y)(o,{fetch:this.fetchApi.fetch,signal:i.signal,onmessage(i){if("log"===i.event)i.data&&t(JSON.parse(i.data));else if("finish"===i.event){let t=!1;i.data&&({updated:t}=JSON.parse(i.data)),e(t?"updated":"cached")}else"error"===i.event&&r(Error(i.data))},onerror(e){throw i.abort(),r(e),e}})})}async getBaseUrl(e,t,r){let{kind:i,namespace:n,name:a}=t,s=await this.getApiOrigin(),o=`${s}/static/docs/${n}/${i}/${a}/${r}`;return new URL(e,o.endsWith("/")?o:`${o}/`).toString()}}var c=r(17749),d=r(50809),u=r(45843),p=r(54195),h=r(61617),g=r(95159),m=r(96504),f=r(87402);let y=(0,d.i)({id:"techdocs",apis:[(0,u.b)({api:i.s,deps:{configApi:p.U,discoveryApi:h.I,fetchApi:g.a},factory:({configApi:e,discoveryApi:t,fetchApi:r})=>new l({configApi:e,discoveryApi:t,fetchApi:r})}),(0,u.b)({api:i.l,deps:{configApi:p.U,discoveryApi:h.I,fetchApi:g.a},factory:({configApi:e,discoveryApi:t,fetchApi:r})=>new o({configApi:e,discoveryApi:t,fetchApi:r})})],routes:{root:c.rQ,docRoot:c.Oc,entityContent:c.Ri}});y.provide((0,m.QJ)({name:"TechdocsPage",component:()=>Promise.all([r.e("4553"),r.e("3815"),r.e("1957")]).then(r.bind(r,69476)).then(e=>e.Router),mountPoint:c.rQ}));let x=y.provide((0,m.QJ)({name:"EntityTechdocsContent",component:()=>Promise.all([r.e("4553"),r.e("3815"),r.e("1957")]).then(r.bind(r,69476)).then(e=>e.LegacyEmbeddedDocsRouter),mountPoint:c.Ri}));y.provide((0,m.QJ)({name:"TechDocsCustomHome",component:()=>Promise.all([r.e("4553"),r.e("4532")]).then(r.bind(r,88047)).then(e=>e.TechDocsCustomHome),mountPoint:c.rQ}));let b=y.provide((0,m.QJ)({name:"TechDocsIndexPage",component:()=>Promise.all([r.e("4553"),r.e("5040")]).then(r.bind(r,55411)).then(e=>e.TechDocsIndexPage),mountPoint:c.rQ})),v=y.provide((0,m.QJ)({name:"TechDocsReaderPage",component:()=>Promise.all([r.e("3815"),r.e("1331")]).then(r.bind(r,88942)).then(e=>e.TechDocsReaderPage),mountPoint:c.Oc})),w=y.provide((0,f.ec)({name:"TechDocsSearchResultListItem",component:()=>r.e("9705").then(r.bind(r,41472)).then(e=>e.TechDocsSearchResultListItem),predicate:e=>"techdocs"===e.type}))},17749:function(e,t,r){"use strict";r.d(t,{Oc:()=>a,Ri:()=>s,rQ:()=>n});var i=r(77555);let n=(0,i.H)({id:"techdocs:index-page"}),a=(0,i.H)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),s=(0,i.H)({id:"techdocs:catalog-reader-view"})},87344:function(e,t,r){"use strict";r.d(t,{c:()=>c});var i=r(31085),n=r(20221),a=r(58837),s=r(36521),o=r(31072);let l=(0,a.A)(e=>({avatar:{width:({size:e})=>e,height:({size:e})=>e,fontSize:({size:e})=>.7*e,border:`1px solid ${e.palette.textSubtle}`}})),c=e=>{let{size:t}=e,{iconSize:r}=o.hC,a=l(t?{size:t}:{size:r}),{profile:c}=(0,s.s)();return(0,i.jsx)(n.A,{src:c.picture,className:a.avatar,alt:"Profile picture"})}},58021:function(e,t,r){"use strict";r.d(t,{w:()=>d});var i=r(31085),n=r(9684),a=r(74268),s=r(7370),o=r(72814),l=r(10265),c=r(27482);let d=e=>{let t=(0,o.S)(a.kQ),r=e.icon?e.icon:n.default,{t:d}=(0,l.i)(c.r);return(0,i.jsx)(s.uk,{text:d("sidebarTitle"),to:t(),icon:r})}},36521:function(e,t,r){"use strict";r.d(t,{s:()=>c});var i=r(18139),n=r(94223),a=r(34477),s=r(14041),o=r(73466),l=r(30043);let c=()=>{let e=(0,i.gf)(n.K),t=(0,i.gf)(a.k),r=(0,i.gf)(l.v),{value:c,loading:d,error:u}=(0,o.A)(async()=>{let t=await e.getProfileInfo(),i=await e.getBackstageIdentity(),n=await r.getEntityByRef(i.userEntityRef);return void 0===t.picture&&n?.spec?.profile?.picture&&(t={...t,picture:n.spec.profile.picture}),{profile:t,identity:i}},[]);return((0,s.useEffect)(()=>{u&&t.post({message:`Failed to load user identity: ${u}`,severity:"error"})},[u,t]),d||u)?{profile:{},displayName:"",loading:d}:{profile:c.profile,backstageIdentity:c.identity,displayName:c.profile.displayName??c.identity.userEntityRef,loading:d}}},74268:function(e,t,r){"use strict";r.d(t,{kQ:()=>s,mu:()=>o});var i=r(77555),n=r(50809),a=r(96504);let s=(0,i.H)({id:"user-settings"}),o=(0,n.i)({id:"user-settings",routes:{settingsPage:s}}).provide((0,a.QJ)({name:"UserSettingsPage",component:()=>r.e("8152").then(r.bind(r,57035)).then(e=>e.SettingsPage),mountPoint:s}))},27482:function(e,t,r){"use strict";r.d(t,{r:()=>i});let i=(0,r(48870).h)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}},signOutMenu:{title:"Sign Out",moreIconTitle:"more"},pinToggle:{title:"Pin Sidebar",description:"Prevent the sidebar from collapsing",switchTitles:{unpin:"Unpin Sidebar",pin:"Pin Sidebar"},ariaLabelTitle:"Pin Sidebar Switch"},identityCard:{title:"Backstage Identity",noIdentityTitle:"No Backstage Identity",userEntity:"User Entity",ownershipEntities:"Ownership Entities"},defaultProviderSettings:{description:"Provides authentication towards {{provider}} APIs and identities"},emptyProviders:{title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:{title:"Open app-config.yaml and make the changes as highlighted below:",readMoreButtonTitle:"Read More"}},providerSettingsItem:{title:{signIn:"Sign in to {{title}}",signOut:"Sign out from {{title}}"},buttonTitle:{signIn:"Sign in",signOut:"Sign out"}},authProviders:{title:"Available Providers"},defaultSettingsPage:{tabsTitle:{general:"General",authProviders:"Authentication Providers",featureFlags:"Feature Flags"}},featureFlags:{title:"Feature Flags",description:"Please refresh the page when toggling feature flags",emptyFlags:{title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:{title:"An example for how to add a feature flag is highlighted below:",readMoreButtonTitle:"Read More"}},filterTitle:"Filter",clearFilter:"Clear filter",flagItem:{title:{disable:"Disable",enable:"Enable"},subtitle:{registeredInApplication:"Registered in the application",registeredInPlugin:"Registered in {{pluginId}} plugin"}}},settingsLayout:{title:"Settings"},sidebarTitle:"Settings",profileCard:{title:"Profile"},appearanceCard:{title:"Appearance"}}})},54852:function(e,t,r){"use strict";r.d(t,{qO:()=>s,tK:()=>a});var i=r(14041),n=r(1952);function a(e){return(0,n.Q)(e,()=>(0,i.createContext)(void 0))}function s(e){return(0,i.useContext)(a(e))}},4790:function(e,t,r){"use strict";function i(e){Object.freeze(e);let t={atVersion:t=>e[t]};return Object.defineProperty(t,"$map",{configurable:!0,enumerable:!0,get:()=>e}),t}r.d(t,{B:()=>i})},1952:function(e,t,r){"use strict";r.d(t,{Q:()=>n});let i="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")();function n(e,t){let r=`__@backstage/${e}__`,n=i[r];return n||(n=t(),i[r]=n),n}},69487:function(){}}]);
//# sourceMappingURL=module-backstage.456a4a50.js.map