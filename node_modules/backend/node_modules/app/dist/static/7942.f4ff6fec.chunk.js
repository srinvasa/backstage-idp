"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["7942"],{94165:function(e,t,a){a.d(t,{PullRequestsStatsCard:()=>eE});var n=a(31085),s=a(14041),i=a(58837),r=a(58007),l=a(8109),o=a(5951),d=a(32784),c=a(268),g=a(8973),m=a(29655),u=a(91567),h=a(42899),x=a(72501),p=a(9181),A=a(6924),j=a(32138);let f=(e,t)=>("light"===t.palette.type?c.e$:c.a)(t.palette[e].light,.6),v=(e,t)=>("light"===t.palette.type?c.a:c.e$)(t.palette[e].light,.9),C=(0,i.A)(e=>({root:{marginRight:e.spacing(1),fill:({severity:t})=>f(t,e)}})),y=({severity:e})=>{let t=C({severity:e});return(0,n.jsx)(p.default,{classes:t})},b=({severity:e})=>{let t=C({severity:e});return(0,n.jsx)(A.default,{classes:t})},T=(0,i.A)(e=>({panel:{backgroundColor:({severity:t})=>v(t,e),color:({severity:t})=>f(t,e),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:t})=>f(t,e),fontWeight:e.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:t})=>f(t,e),backgroundColor:({severity:t})=>v(t,e)},details:{width:"100%",display:"block",color:e.palette.textContrast,backgroundColor:e.palette.background.default,border:`1px solid ${e.palette.border}`,padding:e.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"});function k(e){let{severity:t="warning",title:a,titleFormat:s,message:i,children:r,defaultExpanded:l}=e,o=T({severity:t}),d=t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1)+(a?`: ${a}`:"");return(0,n.jsxs)(g.A,{defaultExpanded:l??!1,className:o.panel,role:"alert",children:[(0,n.jsxs)(m.A,{expandIcon:(0,n.jsx)(b,{severity:t}),className:o.summary,children:[(0,n.jsx)(y,{severity:t}),(0,n.jsx)(x.A,{className:o.summaryText,variant:"subtitle1",children:"markdown"===s?(0,n.jsx)(j.h,{content:d,className:o.markdownContent}):d})]}),(i||r)&&(0,n.jsx)(u.A,{children:(0,n.jsxs)(h.A,{container:!0,children:[i&&(0,n.jsx)(h.A,{item:!0,xs:12,children:(0,n.jsx)(x.A,{className:o.message,variant:"body1",children:i})}),r&&(0,n.jsx)(h.A,{item:!0,xs:12,className:o.details,children:r})]})})]})}let N=(0,i.A)(e=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:e.spacing(2)},divider:{margin:e.spacing(2)}}),{name:"BackstageErrorPanel"}),w=({error:e,message:t,stack:a,children:s})=>{let i=N();return(0,n.jsxs)(r.A,{dense:!0,children:[(0,n.jsxs)(l.A,{alignItems:"flex-start",children:[(0,n.jsx)(o.A,{classes:{secondary:i.text},primary:"Error",secondary:e}),(0,n.jsx)(d.l,{text:e})]}),(0,n.jsxs)(l.A,{alignItems:"flex-start",children:[(0,n.jsx)(o.A,{classes:{secondary:i.text},primary:"Message",secondary:t}),(0,n.jsx)(d.l,{text:t})]}),a&&(0,n.jsxs)(l.A,{alignItems:"flex-start",children:[(0,n.jsx)(o.A,{classes:{secondary:i.text},primary:"Stack Trace",secondary:a}),(0,n.jsx)(d.l,{text:a})]}),s]})};function R(e){let{title:t,error:a,defaultExpanded:s,titleFormat:i,children:r}=e;return(0,n.jsx)(k,{severity:"error",title:t??a.message,defaultExpanded:s,titleFormat:i,children:(0,n.jsx)(w,{error:a.name,message:a.message,stack:a.stack,children:r})})}var B=a(95479),M=a.n(B),S=a(99703),F=a(7031),D=a(61009),q=a(13677),P=a(54801),W=a(9719);let I=(0,F.A)(e=>(0,S.A)({root:{fontWeight:e.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:e.spacing(4),border:"0",verticalAlign:"top"}}),{name:"BackstageMetadataTableTitleCell"})(P.A),L=(0,F.A)({root:{border:"0",verticalAlign:"top"}},{name:"BackstageMetadataTableCell"})(P.A),$=({dense:e,children:t})=>(0,n.jsx)(D.A,{size:e?"small":"medium",children:(0,n.jsx)(q.A,{children:t})}),E=({title:e,children:t,...a})=>(0,n.jsxs)(W.A,{children:[e&&(0,n.jsx)(I,{children:e}),(0,n.jsx)(L,{colSpan:e?1:2,...a,children:t})]}),U=(0,F.A)(e=>(0,S.A)({root:{margin:e.spacing(0,0,-1,0)}}),{name:"BackstageMetadataTableList"})(({classes:e,children:t})=>(0,n.jsx)(r.A,{disablePadding:!0,className:e.root,children:t})),H=(0,F.A)(e=>(0,S.A)({root:{padding:e.spacing(0,0,1,0)},random:{}}),{name:"BackstageMetadataTableListItem"})(({classes:e,children:t})=>(0,n.jsx)(l.A,{className:e.root,children:t}));var _=a(95742),z=a(9911);let V=(0,S.A)({root:{margin:"0 0",listStyleType:"none"}}),O=(0,F.A)(V,{name:"BackstageStructuredMetadataTableList"})(({classes:e,children:t})=>(0,n.jsx)(U,{classes:e,children:t})),Y=(0,F.A)(e=>(0,S.A)({root:{...V.root,paddingLeft:e.spacing(1)}}),{name:"BackstageStructuredMetadataTableNestedList"})(({classes:e,children:t})=>(0,n.jsx)(U,{classes:e,children:t})),G=({value:e,options:t})=>(0,n.jsx)(s.Fragment,{children:function e(t,a,i){if((0,s.isValidElement)(t))return(0,n.jsx)(s.Fragment,{children:t});if(null!==t&&"object"==typeof t){if(a.nestedValuesAsYaml)return(0,n.jsx)(_.z,{language:"yaml",text:z.Ay.dump(t),customStyle:{background:"transparent",lineHeight:"1.4",padding:"0",margin:0}});if(!Array.isArray(t)){let s;return s=Object.keys(t).map(s=>{let i=e(t[s],a,!0);return(0,n.jsxs)(H,{children:[(0,n.jsx)(x.A,{variant:"body2",component:"span",children:`${a.titleFormat(s)}: `}),i]},s)}),i?(0,n.jsx)(Y,{children:s}):(0,n.jsx)(O,{children:s})}}if(Array.isArray(t)){let s;return s=t.map((t,s)=>(0,n.jsx)(H,{children:e(t,a,i)},s)),i?(0,n.jsx)(Y,{children:s}):(0,n.jsx)(O,{children:s})}return"boolean"==typeof t?(0,n.jsx)(s.Fragment,{children:t?"✅":"❌"}):(0,n.jsx)(x.A,{variant:"body2",component:"span",children:t})}(e,t,!1)}),Z=({title:e,value:t,options:a})=>(0,n.jsx)(E,{title:a.titleFormat(e),children:(0,n.jsx)(G,{value:t,options:a})});function X(e){var t;let{metadata:a,dense:s=!0,options:i}=e,r=(t={titleFormat:M(),nestedValuesAsYaml:i?.nestedValuesAsYaml??!1,...i},Object.keys(a).map(e=>(0,n.jsx)(Z,{title:e,value:a[e],options:t},e)));return(0,n.jsx)($,{dense:s,children:r})}var J=a(17354),K=a(40703),Q=a(59469),ee=a(48653),et=a(45685),ea=a(37197),en=a(53373),es=a.n(en),ei=a(77125),er=a(52235),el=a(99488);let eo=(0,i.A)(e=>({root:{maxWidth:"fit-content",padding:e.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:e.palette.textSubtle},arrow:{color:e.palette.textSubtle}}),{name:"BackstageBottomLink"});function ed(e){let{link:t,title:a,onClick:s}=e,i=eo();return(0,n.jsxs)(ei.A,{children:[(0,n.jsx)(ea.A,{}),(0,n.jsx)(el.N_,{to:t,onClick:s,underline:"none",children:(0,n.jsxs)(ei.A,{display:"flex",alignItems:"center",className:i.root,children:[(0,n.jsx)(ei.A,{className:i.boxTitle,fontWeight:"fontWeightBold",m:1,children:(0,n.jsx)(x.A,{children:(0,n.jsx)("strong",{children:a})})}),(0,n.jsx)(er.default,{className:i.arrow})]})})]})}var ec=a(64947);let eg=(0,s.forwardRef)((e,t)=>(0,n.jsx)(el.N_,{ref:t,...e,color:"initial"})),em=(0,s.forwardRef)((e,t)=>(0,n.jsx)(ec.A,{ref:t,component:eg,...e}));var eu=a(91327),eh=a(35675);let ex=e=>{let{slackChannel:t}=e,{t:a}=(0,eh.i)(eu.O);return t?"string"==typeof t?(0,n.jsx)(x.A,{children:a("errorBoundary.title",{slackChannel:t})}):t.href?(0,n.jsx)(em,{to:t.href,variant:"contained",children:t.name}):(0,n.jsx)(x.A,{children:a("errorBoundary.title",{slackChannel:t.name})}):null},ep=class extends s.Component{constructor(e){super(e),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(e,t){console.error(`ErrorBoundary, error: ${e}`,{error:e,errorInfo:t}),this.setState({error:e,errorInfo:t})}render(){let{slackChannel:e,children:t}=this.props,{error:a}=this.state;return a?(0,n.jsx)(R,{title:"Something Went Wrong",error:a,children:(0,n.jsx)(ex,{slackChannel:e})}):t}},eA=(0,i.A)(e=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},contentAlignBottom:{display:"flex",alignItems:"self-end"},header:{padding:e.spacing(2,2,2,2.5)},headerTitle:{fontWeight:e.typography.fontWeightBold},headerSubheader:{paddingTop:e.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),ej=(0,F.A)(e=>({root:{display:"inline-block",padding:e.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Q.A),ef={flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},ev={fullHeight:{flex:1},gridItem:{flex:1}};function eC(e){let{title:t,subheader:a,divider:s=!0,deepLink:i,slackChannel:r,errorBoundaryProps:l,variant:o,alignContent:d="normal",children:c,headerStyle:g,headerProps:m,icon:u,action:h,actionsClassName:x,actions:p,cardClassName:A,actionsTopRight:j,className:f,noPadding:v,titleTypographyProps:C,subheaderTypographyProps:y}=e,b=eA(),T={},k={};return o&&o.split(/[\s]+/g).forEach(e=>{T={...T,...ef[e]},k={...k,...ev[e]}}),(0,n.jsx)(K.A,{style:T,className:f,children:(0,n.jsxs)(ep,{...l||(r?{slackChannel:r}:{}),children:[t&&(0,n.jsx)(et.A,{classes:{root:es()(b.header),title:b.headerTitle,subheader:b.headerSubheader,avatar:b.headerAvatar,action:b.headerAction,content:b.headerContent},title:t,subheader:a||u?(0,n.jsxs)("div",{"data-testid":"info-card-subheader",children:[a&&(0,n.jsx)("div",{className:b.subheader,children:a}),u]}):null,action:h,style:{...g},titleTypographyProps:C,subheaderTypographyProps:y,...m}),j&&(0,n.jsx)(ej,{children:j}),s&&(0,n.jsx)(ea.A,{}),(0,n.jsx)(ee.A,{className:es()(A,{[b.noPadding]:v,[b.contentAlignBottom]:"bottom"===d}),style:k,children:c}),p&&(0,n.jsx)(Q.A,{className:x,children:p}),i&&(0,n.jsx)(ed,{...i})]})})}var ey=a(25514),eb=a(73466),eT=a(74909),ek=a(69374),eN=a(60521),ew=a(18866),eR=a(74088),eB=a(71677),eM=a(78467),eS=a(95061),eF=a(99489),eD=a(26343),eq=a(51253);let eP=(0,i.A)(e=>({container:{backgroundColor:e.palette.background.paper,fontSize:"1rem",fontWeight:Number(e.typography.fontWeightBold),borderRadius:"6px",boxShadow:e.shadows[10]},additions:{color:e.palette.success.main},deletions:{color:e.palette.error.main}})),eW=e=>{let{additions:t,deletions:a}=e,s=eP();return(0,n.jsxs)(h.A,{container:!0,className:s.container,children:[(0,n.jsxs)(h.A,{item:!0,className:s.additions,children:["+",t]}),(0,n.jsxs)(h.A,{item:!0,className:s.deletions,children:["-",a]})]})};var eI=a(54316);let eL=(0,i.A)(e=>({infoCard:{marginBottom:e.spacing(3),"& + .MuiAlert-root":{marginTop:e.spacing(3)},"& .MuiCardContent-root":{padding:e.spacing(2,1,2,2)},"& td":{whiteSpace:"normal"}}})),e$=()=>{let{entity:e}=(0,ew.tN)(),[t,a]=(0,s.useState)(20),[i,r]=((0,ey.pZ)(e)??"/").split("/"),[{statsData:l,loading:o,error:d}]=function({owner:e,repo:t,branch:a,pageSize:n,state:s}){let i=(0,eN.gf)(eT.E),{entity:r}=(0,ew.tN)(),l=(0,eR.E)(r),{loading:o,value:d,error:c}=(0,eb.A)(async()=>{let r;if(!t)return{avgTimeUntilMerge:"Never",avgCodingTime:"Never",mergedToClosedRatio:"0%",avgChangedLinesCount:0,avgChangedFilesCount:0,avgAdditions:0,avgDeletions:0};let{pullRequestsData:o}=await i.listPullRequests({search:`state:${s}`,hostname:l,owner:e,repo:t,pageSize:n,page:1,branch:a}),d=["github-actions[bot]","dependabot[bot]","roadie-bot"],c=await Promise.all(o.items.filter(e=>{let t=e.user?.login;return t&&!d.includes(t)}).map(async a=>{let n=await i.getRepositoryData({url:a.pull_request.url,hostname:l}),s=await i.getCommitDetailsData({hostname:l,owner:e,repo:t,number:a.number});return{createdAt:a.created_at,closedAt:a.closed_at,firstCommitAt:s.firstCommitDate?.toString()??null,pullRequest:{mergedAt:a.pull_request.merged_at,additions:n.additions,deletions:n.deletions,changedFiles:n.changedFiles}}})),g={...r=c.reduce((e,t)=>{if(e.avgTimeUntilMerge+=t.pullRequest.mergedAt?new Date(t.pullRequest.mergedAt).getTime()-new Date(t.createdAt).getTime():0,t.firstCommitAt){let a=new Date(t.createdAt).getTime()-new Date(t.firstCommitAt).getTime();e.avgCodingTime+=a>0?a:0}return e.mergedCount+=+!!t.pullRequest.mergedAt,e.closedCount+=+!!t.closedAt,e.additions+=t.pullRequest.additions,e.deletions+=t.pullRequest.deletions,e.changedLinesCount+=t.pullRequest.additions+t.pullRequest.deletions,e.changedFilesCount+=t.pullRequest.changedFiles,e},{avgTimeUntilMerge:0,avgCodingTime:0,closedCount:0,mergedCount:0,changedLinesCount:0,changedFilesCount:0,additions:0,deletions:0}),avgChangedLinesCount:Math.round(r.changedLinesCount/c.length),avgChangedFilesCount:Math.round(r.changedFilesCount/c.length),avgAdditions:Math.round(r.additions/c.length),avgDeletions:Math.round(r.deletions/c.length)};if(0===g.closedCount||0===g.mergedCount)return{...g,avgTimeUntilMerge:"Never",avgCodingTime:"Never",mergedToClosedRatio:"0%"};let m=g.avgTimeUntilMerge/g.mergedCount,u=ek.dw.fromMillis(m).shiftTo("months","days","hour").toHuman({notation:"compact"}),h=g.avgCodingTime/c.length,x=ek.dw.fromMillis(h).shiftTo("months","days","hour").toHuman({notation:"compact"});return{...g,avgTimeUntilMerge:u,avgCodingTime:x,mergedToClosedRatio:`${Math.round(g.mergedCount/g.closedCount*100)}%`}},[n,t,e]);return[{loading:o,statsData:d,projectName:`${e}/${t}`,error:c}]}({owner:i,repo:r,pageSize:t,state:"closed"}),c={"average time of PR until merge":l?.avgTimeUntilMerge,"merged to closed ratio":l?.mergedToClosedRatio,"average size of PR":(0,n.jsx)(eB.Ay,{title:(0,n.jsx)(eW,{additions:l?.avgAdditions,deletions:l?.avgDeletions}),children:(0,n.jsxs)("div",{children:[l?.avgChangedLinesCount," lines"]})}),"average changed files of PR":`${l?.avgChangedFilesCount}`,"average coding time of PR":`${l?.avgCodingTime}`};return o?(0,n.jsx)(eM.A,{}):d?(0,n.jsx)(R,{error:d}):(0,n.jsxs)(ei.A,{position:"relative",children:[(0,n.jsx)(X,{metadata:c}),(0,n.jsx)(ei.A,{display:"flex",justifyContent:"flex-end",children:(0,n.jsxs)(eS.A,{children:[(0,n.jsxs)(eF.A,{value:t,onChange:e=>a(Number(e.target.value)),children:[(0,n.jsx)(eD.A,{value:10,children:"10"}),(0,n.jsx)(eD.A,{value:20,children:"20"}),(0,n.jsx)(eD.A,{value:50,children:"50"}),(0,n.jsx)(eD.A,{value:100,children:"100"})]}),(0,n.jsx)(eq.A,{children:"Number of PRs"})]})})]})},eE=e=>{let t=eL(),{entity:a}=(0,ew.tN)(),s=(0,eR.E)(a),i=(0,ey.pZ)(a);return i&&""!==i?(0,n.jsx)(eI.u,{title:"GitHub Pull Requests Statistics",hostname:s,children:(0,n.jsx)(eC,{title:"GitHub Pull Requests Statistics",className:t.infoCard,variant:e.variant,children:(0,n.jsx)(e$,{})})}):(0,n.jsx)(J.o,{annotation:ey.pM})}}}]);
//# sourceMappingURL=7942.f4ff6fec.chunk.js.map