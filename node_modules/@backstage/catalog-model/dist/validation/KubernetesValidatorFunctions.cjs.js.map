{"version":3,"file":"KubernetesValidatorFunctions.cjs.js","sources":["../../src/validation/KubernetesValidatorFunctions.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonValidatorFunctions } from './CommonValidatorFunctions';\n\n/**\n * Contains validation functions that match the Kubernetes spec, usable to\n * build a catalog that is compatible with those rule sets.\n *\n * @public\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/names/\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set\n * @see https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/#syntax-and-character-set\n */\nexport class KubernetesValidatorFunctions {\n  static isValidApiVersion(value: unknown): boolean {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      n => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n),\n    );\n  }\n\n  static isValidKind(value: unknown): boolean {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^[a-zA-Z][a-z0-9A-Z]*$/.test(value)\n    );\n  }\n\n  static isValidObjectName(value: unknown): boolean {\n    return (\n      typeof value === 'string' &&\n      value.length >= 1 &&\n      value.length <= 63 &&\n      /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value)\n    );\n  }\n\n  static isValidNamespace(value: unknown): boolean {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n\n  static isValidLabelKey(value: unknown): boolean {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName,\n    );\n  }\n\n  static isValidLabelValue(value: unknown): boolean {\n    return (\n      value === '' || KubernetesValidatorFunctions.isValidObjectName(value)\n    );\n  }\n\n  static isValidAnnotationKey(value: unknown): boolean {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      '/',\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName,\n    );\n  }\n\n  static isValidAnnotationValue(value: unknown): boolean {\n    return typeof value === 'string';\n  }\n}\n"],"names":["CommonValidatorFunctions"],"mappings":";;;;AA2BO,MAAM,4BAAA,CAA6B;AAAA,EACxC,OAAO,kBAAkB,KAAA,EAAyB;AAChD,IAAA,OAAOA,iDAAA,CAAyB,wBAAA;AAAA,MAC9B,KAAA;AAAA,MACA,GAAA;AAAA,MACAA,iDAAA,CAAyB,mBAAA;AAAA,MACzB,CAAA,CAAA,KAAK,EAAE,MAAA,IAAU,CAAA,IAAK,EAAE,MAAA,IAAU,EAAA,IAAM,gBAAA,CAAiB,IAAA,CAAK,CAAC;AAAA,KACjE;AAAA,EACF;AAAA,EAEA,OAAO,YAAY,KAAA,EAAyB;AAC1C,IAAA,OACE,OAAO,KAAA,KAAU,QAAA,IACjB,KAAA,CAAM,MAAA,IAAU,CAAA,IAChB,KAAA,CAAM,MAAA,IAAU,EAAA,IAChB,wBAAA,CAAyB,IAAA,CAAK,KAAK,CAAA;AAAA,EAEvC;AAAA,EAEA,OAAO,kBAAkB,KAAA,EAAyB;AAChD,IAAA,OACE,OAAO,KAAA,KAAU,QAAA,IACjB,KAAA,CAAM,MAAA,IAAU,CAAA,IAChB,KAAA,CAAM,MAAA,IAAU,EAAA,IAChB,4CAAA,CAA6C,IAAA,CAAK,KAAK,CAAA;AAAA,EAE3D;AAAA,EAEA,OAAO,iBAAiB,KAAA,EAAyB;AAC/C,IAAA,OAAOA,iDAAA,CAAyB,gBAAgB,KAAK,CAAA;AAAA,EACvD;AAAA,EAEA,OAAO,gBAAgB,KAAA,EAAyB;AAC9C,IAAA,OAAOA,iDAAA,CAAyB,wBAAA;AAAA,MAC9B,KAAA;AAAA,MACA,GAAA;AAAA,MACAA,iDAAA,CAAyB,mBAAA;AAAA,MACzB,4BAAA,CAA6B;AAAA,KAC/B;AAAA,EACF;AAAA,EAEA,OAAO,kBAAkB,KAAA,EAAyB;AAChD,IAAA,OACE,KAAA,KAAU,EAAA,IAAM,4BAAA,CAA6B,iBAAA,CAAkB,KAAK,CAAA;AAAA,EAExE;AAAA,EAEA,OAAO,qBAAqB,KAAA,EAAyB;AACnD,IAAA,OAAOA,iDAAA,CAAyB,wBAAA;AAAA,MAC9B,KAAA;AAAA,MACA,GAAA;AAAA,MACAA,iDAAA,CAAyB,mBAAA;AAAA,MACzB,4BAAA,CAA6B;AAAA,KAC/B;AAAA,EACF;AAAA,EAEA,OAAO,uBAAuB,KAAA,EAAyB;AACrD,IAAA,OAAO,OAAO,KAAA,KAAU,QAAA;AAAA,EAC1B;AACF;;;;"}