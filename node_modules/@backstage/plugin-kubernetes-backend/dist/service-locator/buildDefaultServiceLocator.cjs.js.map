{"version":3,"file":"buildDefaultServiceLocator.cjs.js","sources":["../../src/service-locator/buildDefaultServiceLocator.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { RootConfigService } from '@backstage/backend-plugin-api';\nimport { ServiceLocatorMethod } from '../types';\nimport { KubernetesClustersSupplier } from '@backstage/plugin-kubernetes-node';\nimport { MultiTenantServiceLocator } from './MultiTenantServiceLocator';\nimport { SingleTenantServiceLocator } from './SingleTenantServiceLocator';\nimport { CatalogRelationServiceLocator } from './CatalogRelationServiceLocator';\n\nexport const buildDefaultServiceLocator = ({\n  config,\n  clusterSupplier,\n}: {\n  config: RootConfigService;\n  clusterSupplier: KubernetesClustersSupplier;\n}) => {\n  const method = config.getString(\n    'kubernetes.serviceLocatorMethod.type',\n  ) as ServiceLocatorMethod;\n\n  switch (method) {\n    case 'multiTenant':\n      return new MultiTenantServiceLocator(clusterSupplier);\n    case 'singleTenant':\n      return new SingleTenantServiceLocator(clusterSupplier);\n    case 'catalogRelation':\n      return new CatalogRelationServiceLocator(clusterSupplier);\n    case 'http':\n      throw new Error('not implemented');\n    default:\n      throw new Error(\n        `Unsupported kubernetes.serviceLocatorMethod \"${method}\"`,\n      );\n  }\n};\n"],"names":["MultiTenantServiceLocator","SingleTenantServiceLocator","CatalogRelationServiceLocator"],"mappings":";;;;;;AAsBO,MAAM,6BAA6B,CAAC;AAAA,EACzC,MAAA;AAAA,EACA;AACF,CAAA,KAGM;AACJ,EAAA,MAAM,SAAS,MAAA,CAAO,SAAA;AAAA,IACpB;AAAA,GACF;AAEA,EAAA,QAAQ,MAAA;AAAQ,IACd,KAAK,aAAA;AACH,MAAA,OAAO,IAAIA,oDAA0B,eAAe,CAAA;AAAA,IACtD,KAAK,cAAA;AACH,MAAA,OAAO,IAAIC,sDAA2B,eAAe,CAAA;AAAA,IACvD,KAAK,iBAAA;AACH,MAAA,OAAO,IAAIC,4DAA8B,eAAe,CAAA;AAAA,IAC1D,KAAK,MAAA;AACH,MAAA,MAAM,IAAI,MAAM,iBAAiB,CAAA;AAAA,IACnC;AACE,MAAA,MAAM,IAAI,KAAA;AAAA,QACR,gDAAgD,MAAM,CAAA,CAAA;AAAA,OACxD;AAAA;AAEN;;;;"}