import { describeParentCallSite } from './describeParentCallSite.esm.js';
import { OpaqueRouteRef } from '../frontend-internal/src/routing/OpaqueRouteRef.esm.js';
import '../frontend-internal/src/routing/OpaqueSubRouteRef.esm.js';
import '../frontend-internal/src/routing/OpaqueExternalRouteRef.esm.js';

function createRouteRef(config) {
  const params = config?.params ?? [];
  const creationSite = describeParentCallSite();
  let id = void 0;
  return OpaqueRouteRef.createInstance("v1", {
    T: void 0,
    getParams() {
      return params;
    },
    getDescription() {
      if (id) {
        return id;
      }
      return `created at '${creationSite}'`;
    },
    alias: config?.aliasFor,
    setId(newId) {
      if (!newId) {
        throw new Error(`RouteRef id must be a non-empty string`);
      }
      if (id && id !== newId) {
        throw new Error(
          `RouteRef was referenced twice as both '${id}' and '${newId}'`
        );
      }
      id = newId;
    },
    toString() {
      return `routeRef{id=${id},at='${creationSite}'}`;
    }
  });
}

export { createRouteRef };
//# sourceMappingURL=RouteRef.esm.js.map
