{"version":3,"file":"useRelations.esm.js","sources":["../../src/hooks/useRelations.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useMemo } from 'react';\n\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport { catalogGraphApiRef } from '../api';\nimport { RelationPairs } from '../lib/types';\n\nexport interface UseRelationsOptions {\n  relations?: string[];\n  relationPairs?: RelationPairs;\n}\n\nexport interface UseRelationsResult {\n  relations: string[];\n  relationPairs: RelationPairs;\n  defaultRelations: string[];\n  relationsToInclude: string[];\n  includeRelation: (type: string) => boolean;\n}\n\n/**\n * Given an optional list of specific relations and/or relation pairs,\n * this hook returns the relations, relation pairs and default relations (to\n * show/select), falling back to the configured setting.\n * It also returns a function `includeRelation` to filter whether a relation\n * should be included or not.\n */\nexport function useRelations(\n  opts: UseRelationsOptions = {},\n): UseRelationsResult {\n  const { knownRelations, knownRelationPairs, defaultRelations } =\n    useApi(catalogGraphApiRef);\n\n  const relations = opts.relations ?? knownRelations;\n  const relationPairs = opts.relationPairs ?? knownRelationPairs;\n  const relationsToInclude = opts.relations ?? defaultRelations;\n\n  const includeRelation = useCallback(\n    (type: string) => {\n      return relationsToInclude.includes(type);\n    },\n    [relationsToInclude],\n  );\n\n  return useMemo(\n    () => ({\n      relations,\n      relationPairs,\n      defaultRelations,\n      relationsToInclude,\n      includeRelation,\n    }),\n    [\n      relations,\n      relationPairs,\n      defaultRelations,\n      relationsToInclude,\n      includeRelation,\n    ],\n  );\n}\n"],"names":[],"mappings":";;;;;AA2CO,SAAS,YAAA,CACd,IAAA,GAA4B,EAAC,EACT;AACpB,EAAA,MAAM,EAAE,cAAA,EAAgB,kBAAA,EAAoB,gBAAA,EAAiB,GAC3D,OAAO,kBAAkB,CAAA;AAE3B,EAAA,MAAM,SAAA,GAAY,KAAK,SAAA,IAAa,cAAA;AACpC,EAAA,MAAM,aAAA,GAAgB,KAAK,aAAA,IAAiB,kBAAA;AAC5C,EAAA,MAAM,kBAAA,GAAqB,KAAK,SAAA,IAAa,gBAAA;AAE7C,EAAA,MAAM,eAAA,GAAkB,WAAA;AAAA,IACtB,CAAC,IAAA,KAAiB;AAChB,MAAA,OAAO,kBAAA,CAAmB,SAAS,IAAI,CAAA;AAAA,IACzC,CAAA;AAAA,IACA,CAAC,kBAAkB;AAAA,GACrB;AAEA,EAAA,OAAO,OAAA;AAAA,IACL,OAAO;AAAA,MACL,SAAA;AAAA,MACA,aAAA;AAAA,MACA,gBAAA;AAAA,MACA,kBAAA;AAAA,MACA;AAAA,KACF,CAAA;AAAA,IACA;AAAA,MACE,SAAA;AAAA,MACA,aAAA;AAAA,MACA,gBAAA;AAAA,MACA,kBAAA;AAAA,MACA;AAAA;AACF,GACF;AACF;;;;"}