{"version":3,"file":"DefaultCatalogGraphApi.esm.js","sources":["../../src/api/DefaultCatalogGraphApi.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ALL_RELATION_PAIRS, ALL_RELATIONS, RelationPairs } from '../lib/types';\nimport {\n  CatalogGraphApi,\n  DefaultRelations,\n  DefaultRelationsExclude,\n  DefaultRelationsInclude,\n} from './CatalogGraphApi';\n\n/**\n * Options for the {@link DefaultCatalogGraphApi}.\n *\n * @public\n */\nexport interface DefaultCatalogGraphApiOptions {\n  readonly knownRelations?: string[];\n  readonly knownRelationPairs?: RelationPairs;\n  readonly defaultRelationTypes?: DefaultRelations;\n}\n\n/**\n * The default implementation of the {@link CatalogGraphApi}.\n *\n * @public\n */\nexport class DefaultCatalogGraphApi implements CatalogGraphApi {\n  readonly knownRelations: string[];\n  readonly knownRelationPairs: [string, string][];\n  readonly defaultRelations: string[];\n\n  constructor(\n    options: DefaultCatalogGraphApiOptions = {\n      knownRelations: ALL_RELATIONS,\n      knownRelationPairs: ALL_RELATION_PAIRS,\n      defaultRelationTypes: { exclude: [] },\n    },\n  ) {\n    this.knownRelations = options.knownRelations ?? ALL_RELATIONS;\n    this.knownRelationPairs = options.knownRelationPairs ?? ALL_RELATION_PAIRS;\n\n    const defaultRelations = options.defaultRelationTypes;\n\n    if (Array.isArray((defaultRelations as DefaultRelationsInclude).include)) {\n      const defaultRelationsInclude =\n        defaultRelations as DefaultRelationsInclude;\n\n      this.defaultRelations = this.knownRelations.filter(rel =>\n        defaultRelationsInclude.include.includes(rel),\n      );\n    } else {\n      const defaultRelationsExclude =\n        defaultRelations as DefaultRelationsExclude;\n\n      this.defaultRelations = this.knownRelations.filter(\n        rel => !defaultRelationsExclude.exclude.includes(rel),\n      );\n    }\n  }\n}\n"],"names":[],"mappings":";;AAwCO,MAAM,sBAAA,CAAkD;AAAA,EACpD,cAAA;AAAA,EACA,kBAAA;AAAA,EACA,gBAAA;AAAA,EAET,YACE,OAAA,GAAyC;AAAA,IACvC,cAAA,EAAgB,aAAA;AAAA,IAChB,kBAAA,EAAoB,kBAAA;AAAA,IACpB,oBAAA,EAAsB,EAAE,OAAA,EAAS,EAAC;AAAE,GACtC,EACA;AACA,IAAA,IAAA,CAAK,cAAA,GAAiB,QAAQ,cAAA,IAAkB,aAAA;AAChD,IAAA,IAAA,CAAK,kBAAA,GAAqB,QAAQ,kBAAA,IAAsB,kBAAA;AAExD,IAAA,MAAM,mBAAmB,OAAA,CAAQ,oBAAA;AAEjC,IAAA,IAAI,KAAA,CAAM,OAAA,CAAS,gBAAA,CAA6C,OAAO,CAAA,EAAG;AACxE,MAAA,MAAM,uBAAA,GACJ,gBAAA;AAEF,MAAA,IAAA,CAAK,gBAAA,GAAmB,KAAK,cAAA,CAAe,MAAA;AAAA,QAAO,CAAA,GAAA,KACjD,uBAAA,CAAwB,OAAA,CAAQ,QAAA,CAAS,GAAG;AAAA,OAC9C;AAAA,IACF,CAAA,MAAO;AACL,MAAA,MAAM,uBAAA,GACJ,gBAAA;AAEF,MAAA,IAAA,CAAK,gBAAA,GAAmB,KAAK,cAAA,CAAe,MAAA;AAAA,QAC1C,CAAA,GAAA,KAAO,CAAC,uBAAA,CAAwB,OAAA,CAAQ,SAAS,GAAG;AAAA,OACtD;AAAA,IACF;AAAA,EACF;AACF;;;;"}