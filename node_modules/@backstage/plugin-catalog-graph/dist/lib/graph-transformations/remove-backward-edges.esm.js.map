{"version":3,"file":"remove-backward-edges.esm.js","sources":["../../../src/lib/graph-transformations/remove-backward-edges.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EntityEdge } from '../types';\nimport { GraphTransformer } from './types';\n\n/**\n * Remove edges going backwards, if unidirectional and we haven't already\n * merged the relations\n */\nexport const removeBackwardEdges: GraphTransformer = ctx => {\n  const { edges } = ctx;\n\n  const edgesMapFrom = new Map<string, EntityEdge[]>();\n\n  edges.forEach(edge => {\n    const theseEdges = edgesMapFrom.get(edge.from) ?? [];\n    theseEdges.push(edge);\n    edgesMapFrom.set(edge.from, theseEdges);\n  });\n\n  edges.forEach(edge => {\n    if (edge.relations.length > 1) {\n      edge.relations = edge.relations.slice(0, 1);\n    }\n  });\n};\n"],"names":[],"mappings":"AAuBO,MAAM,sBAAwC,CAAA,GAAA,KAAO;AAC1D,EAAA,MAAM,EAAE,OAAM,GAAI,GAAA;AAElB,EAAA,MAAM,YAAA,uBAAmB,GAAA,EAA0B;AAEnD,EAAA,KAAA,CAAM,QAAQ,CAAA,IAAA,KAAQ;AACpB,IAAA,MAAM,aAAa,YAAA,CAAa,GAAA,CAAI,IAAA,CAAK,IAAI,KAAK,EAAC;AACnD,IAAA,UAAA,CAAW,KAAK,IAAI,CAAA;AACpB,IAAA,YAAA,CAAa,GAAA,CAAI,IAAA,CAAK,IAAA,EAAM,UAAU,CAAA;AAAA,EACxC,CAAC,CAAA;AAED,EAAA,KAAA,CAAM,QAAQ,CAAA,IAAA,KAAQ;AACpB,IAAA,IAAI,IAAA,CAAK,SAAA,CAAU,MAAA,GAAS,CAAA,EAAG;AAC7B,MAAA,IAAA,CAAK,SAAA,GAAY,IAAA,CAAK,SAAA,CAAU,KAAA,CAAM,GAAG,CAAC,CAAA;AAAA,IAC5C;AAAA,EACF,CAAC,CAAA;AACH;;;;"}