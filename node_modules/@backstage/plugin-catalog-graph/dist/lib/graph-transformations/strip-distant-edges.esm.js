const stripDistantEdges = (options) => {
  const entityEdges = /* @__PURE__ */ new Map();
  options.edges.forEach((edge) => {
    let fromEdges = entityEdges.get(edge.from);
    if (!fromEdges) {
      fromEdges = [];
      entityEdges.set(edge.from, fromEdges);
    }
    fromEdges.push(edge);
    let toEdges = entityEdges.get(edge.to);
    if (!toEdges) {
      toEdges = [];
      entityEdges.set(edge.to, toEdges);
    }
    toEdges.push(edge);
  });
  options.edges = options.edges.filter((edge) => {
    const fromEdges = entityEdges.get(edge.from).filter(
      (fromEdge) => !(fromEdge.from === edge.from && fromEdge.to === edge.to) && !(fromEdge.from === edge.to && fromEdge.to === edge.from)
    );
    const toEdges = entityEdges.get(edge.to).filter(
      (toEdge) => !(toEdge.from === edge.from && toEdge.to === edge.to) && !(toEdge.from === edge.to && toEdge.to === edge.from)
    );
    if (fromEdges.length === 0 || toEdges.length === 0) {
      return true;
    }
    const shorterFrom = fromEdges.some(
      (fromEdge) => (fromEdge.distance ?? 0) < (edge.distance ?? 0)
    );
    const shorterTo = toEdges.some(
      (toEdge) => (toEdge.distance ?? 0) < (edge.distance ?? 0)
    );
    if (shorterFrom && shorterTo) {
      return false;
    }
    return true;
  });
};

export { stripDistantEdges };
//# sourceMappingURL=strip-distant-edges.esm.js.map
