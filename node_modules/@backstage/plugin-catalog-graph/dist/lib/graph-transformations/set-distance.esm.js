const setDistances = ({
  nodeDistances,
  edges,
  rootEntityRefs
}) => {
  const edgeMap = /* @__PURE__ */ new Map();
  edges.forEach((edge) => {
    const fromEdges = edgeMap.get(edge.from) ?? [];
    fromEdges.push(edge);
    edgeMap.set(edge.from, fromEdges);
    const toEdges = edgeMap.get(edge.to) ?? [];
    toEdges.push(edge);
    edgeMap.set(edge.to, toEdges);
  });
  rootEntityRefs.forEach((rootEntityRef) => {
    nodeDistances.set(rootEntityRef, 0);
  });
  const visitedNodes = new Set(rootEntityRefs);
  let currentNodes = rootEntityRefs;
  let distance = 0;
  while (currentNodes.length > 0) {
    const thisDistance = ++distance;
    const nextNodes = [];
    currentNodes.forEach((node) => {
      edgeMap.get(node)?.forEach((edge) => {
        edge.distance ??= thisDistance;
        const fromDistance = nodeDistances.get(edge.from) ?? thisDistance;
        nodeDistances.set(edge.from, fromDistance);
        nextNodes.push(edge.from);
        const toDistance = nodeDistances.get(edge.to) ?? thisDistance;
        nodeDistances.set(edge.to, toDistance);
        nextNodes.push(edge.to);
      });
    });
    for (const currentNode of currentNodes) {
      visitedNodes.add(currentNode);
    }
    currentNodes = Array.from(new Set(nextNodes)).filter(
      (node) => !visitedNodes.has(node)
    );
  }
};

export { setDistances };
//# sourceMappingURL=set-distance.esm.js.map
