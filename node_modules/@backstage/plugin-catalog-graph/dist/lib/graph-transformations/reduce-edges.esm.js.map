{"version":3,"file":"reduce-edges.esm.js","sources":["../../../src/lib/graph-transformations/reduce-edges.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EntityEdge } from '../types';\nimport { GraphTransformer } from './types';\n\n/**\n * Reduce edges as the dependency graph anyway ignores duplicated edges\n * regarding from / to\n * Additionally, this will improve rendering speed for the dependency graph\n */\nexport const reduceEdges: GraphTransformer = ctx => {\n  ctx.edges = ctx.edges.reduce((previousEdges, currentEdge) => {\n    const indexFound = previousEdges.findIndex(\n      previousEdge =>\n        previousEdge.from === currentEdge.from &&\n        previousEdge.to === currentEdge.to,\n    );\n    if (indexFound >= 0) {\n      previousEdges[indexFound] = {\n        ...previousEdges[indexFound],\n        relations: Array.from(\n          new Set([\n            ...previousEdges[indexFound].relations,\n            ...currentEdge.relations,\n          ]),\n        ),\n      };\n      return previousEdges;\n    }\n    return [...previousEdges, currentEdge];\n  }, [] as EntityEdge[]);\n};\n"],"names":[],"mappings":"AAwBO,MAAM,cAAgC,CAAA,GAAA,KAAO;AAClD,EAAA,GAAA,CAAI,QAAQ,GAAA,CAAI,KAAA,CAAM,MAAA,CAAO,CAAC,eAAe,WAAA,KAAgB;AAC3D,IAAA,MAAM,aAAa,aAAA,CAAc,SAAA;AAAA,MAC/B,kBACE,YAAA,CAAa,IAAA,KAAS,YAAY,IAAA,IAClC,YAAA,CAAa,OAAO,WAAA,CAAY;AAAA,KACpC;AACA,IAAA,IAAI,cAAc,CAAA,EAAG;AACnB,MAAA,aAAA,CAAc,UAAU,CAAA,GAAI;AAAA,QAC1B,GAAG,cAAc,UAAU,CAAA;AAAA,QAC3B,WAAW,KAAA,CAAM,IAAA;AAAA,8BACX,GAAA,CAAI;AAAA,YACN,GAAG,aAAA,CAAc,UAAU,CAAA,CAAE,SAAA;AAAA,YAC7B,GAAG,WAAA,CAAY;AAAA,WAChB;AAAA;AACH,OACF;AACA,MAAA,OAAO,aAAA;AAAA,IACT;AACA,IAAA,OAAO,CAAC,GAAG,aAAA,EAAe,WAAW,CAAA;AAAA,EACvC,CAAA,EAAG,EAAkB,CAAA;AACvB;;;;"}