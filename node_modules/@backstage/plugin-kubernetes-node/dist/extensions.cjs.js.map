{"version":3,"file":"extensions.cjs.js","sources":["../src/extensions.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createExtensionPoint } from '@backstage/backend-plugin-api';\nimport {\n  AuthenticationStrategy,\n  CustomResource,\n  ObjectToFetch,\n  KubernetesClustersSupplier,\n  KubernetesFetcher,\n  KubernetesObjectsProvider,\n  KubernetesServiceLocator,\n} from '@backstage/plugin-kubernetes-node';\n\n/**\n * A factory function for creating a KubernetesObjectsProvider.\n *\n * @public\n */\nexport type KubernetesObjectsProviderFactory = (opts: {\n  getDefault: () => Promise<KubernetesObjectsProvider>;\n  clusterSupplier: KubernetesClustersSupplier;\n  serviceLocator: KubernetesServiceLocator;\n  customResources: CustomResource[];\n  objectTypesToFetch?: ObjectToFetch[];\n  authStrategy: AuthenticationStrategy;\n}) => Promise<KubernetesObjectsProvider>;\n\n/**\n * The interface for {@link kubernetesObjectsProviderExtensionPoint}.\n *\n * @public\n */\nexport interface KubernetesObjectsProviderExtensionPoint {\n  addObjectsProvider(\n    provider: KubernetesObjectsProvider | KubernetesObjectsProviderFactory,\n  ): void;\n}\n\n/**\n * An extension point the exposes the ability to configure a objects provider.\n *\n * @public\n */\nexport const kubernetesObjectsProviderExtensionPoint =\n  createExtensionPoint<KubernetesObjectsProviderExtensionPoint>({\n    id: 'kubernetes.objects-provider',\n  });\n\n/**\n * A factory function for creating a KubernetesClustersSupplier.\n *\n * @public\n */\nexport type KubernetesClusterSupplierFactory = (opts: {\n  getDefault: () => Promise<KubernetesClustersSupplier>;\n}) => Promise<KubernetesClustersSupplier>;\n\n/**\n * The interface for {@link kubernetesClusterSupplierExtensionPoint}.\n *\n * @public\n */\nexport interface KubernetesClusterSupplierExtensionPoint {\n  addClusterSupplier(\n    clusterSupplier:\n      | KubernetesClustersSupplier\n      | KubernetesClusterSupplierFactory,\n  ): void;\n}\n\n/**\n * An extension point the exposes the ability to configure a cluster supplier.\n *\n * @public\n */\nexport const kubernetesClusterSupplierExtensionPoint =\n  createExtensionPoint<KubernetesClusterSupplierExtensionPoint>({\n    id: 'kubernetes.cluster-supplier',\n  });\n\n/**\n * The interface for {@link kubernetesAuthStrategyExtensionPoint}.\n *\n * @public\n */\nexport interface KubernetesAuthStrategyExtensionPoint {\n  addAuthStrategy(key: string, strategy: AuthenticationStrategy): void;\n}\n\n/**\n * An extension point the exposes the ability to add an Auth Strategy.\n *\n * @public\n */\nexport const kubernetesAuthStrategyExtensionPoint =\n  createExtensionPoint<KubernetesAuthStrategyExtensionPoint>({\n    id: 'kubernetes.auth-strategy',\n  });\n\n/**\n * A factory function for creating a KubernetesFetcher.\n *\n * @public\n */\nexport type KubernetesFetcherFactory = (opts: {\n  getDefault: () => Promise<KubernetesFetcher>;\n}) => Promise<KubernetesFetcher>;\n\n/**\n * The interface for {@link kubernetesFetcherExtensionPoint}.\n *\n * @public\n */\nexport interface KubernetesFetcherExtensionPoint {\n  addFetcher(fetcher: KubernetesFetcher | KubernetesFetcherFactory): void;\n}\n\n/**\n * An extension point the exposes the ability to configure a kubernetes fetcher.\n *\n * @public\n */\nexport const kubernetesFetcherExtensionPoint =\n  createExtensionPoint<KubernetesFetcherExtensionPoint>({\n    id: 'kubernetes.fetcher',\n  });\n\n/**\n * A factory function for creating a KubernetesServiceLocator.\n *\n * @public\n */\nexport type KubernetesServiceLocatorFactory = (opts: {\n  getDefault: () => Promise<KubernetesServiceLocator>;\n  clusterSupplier: KubernetesClustersSupplier;\n}) => Promise<KubernetesServiceLocator>;\n\n/**\n * The interface for {@link kubernetesServiceLocatorExtensionPoint}.\n *\n * @public\n */\nexport interface KubernetesServiceLocatorExtensionPoint {\n  addServiceLocator(\n    serviceLocator: KubernetesServiceLocator | KubernetesServiceLocatorFactory,\n  ): void;\n}\n\n/**\n * An extension point the exposes the ability to configure a kubernetes service locator.\n *\n * @public\n */\nexport const kubernetesServiceLocatorExtensionPoint =\n  createExtensionPoint<KubernetesServiceLocatorExtensionPoint>({\n    id: 'kubernetes.service-locator',\n  });\n"],"names":["createExtensionPoint"],"mappings":";;;;AAwDO,MAAM,0CACXA,qCAAA,CAA8D;AAAA,EAC5D,EAAA,EAAI;AACN,CAAC;AA6BI,MAAM,0CACXA,qCAAA,CAA8D;AAAA,EAC5D,EAAA,EAAI;AACN,CAAC;AAgBI,MAAM,uCACXA,qCAAA,CAA2D;AAAA,EACzD,EAAA,EAAI;AACN,CAAC;AAyBI,MAAM,kCACXA,qCAAA,CAAsD;AAAA,EACpD,EAAA,EAAI;AACN,CAAC;AA4BI,MAAM,yCACXA,qCAAA,CAA6D;AAAA,EAC3D,EAAA,EAAI;AACN,CAAC;;;;;;;;"}