{"version":3,"file":"Router.esm.js","sources":["../src/Router.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport {\n  useEntity,\n  MissingAnnotationEmptyState,\n} from '@backstage/plugin-catalog-react';\nimport { Route, Routes } from 'react-router-dom';\nimport { KubernetesContent } from './KubernetesContent';\nimport Button from '@material-ui/core/Button';\nimport {\n  KUBERNETES_ANNOTATION,\n  KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION,\n} from '@backstage/plugin-kubernetes-common';\n\nexport const isKubernetesAvailable = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[KUBERNETES_ANNOTATION]) ||\n  Boolean(\n    entity.metadata.annotations?.[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION],\n  );\n\nexport const Router = (props: { refreshIntervalMs?: number }) => {\n  const { entity } = useEntity();\n\n  const kubernetesAnnotationValue =\n    entity.metadata.annotations?.[KUBERNETES_ANNOTATION];\n\n  const kubernetesLabelSelectorQueryAnnotationValue =\n    entity.metadata.annotations?.[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION];\n\n  if (\n    kubernetesAnnotationValue ||\n    kubernetesLabelSelectorQueryAnnotationValue\n  ) {\n    return (\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <KubernetesContent\n              entity={entity}\n              refreshIntervalMs={props.refreshIntervalMs}\n            />\n          }\n        />\n      </Routes>\n    );\n  }\n\n  return (\n    <>\n      <MissingAnnotationEmptyState annotation={KUBERNETES_ANNOTATION} />\n      <h1>\n        Or use a label selector query, which takes precedence over the previous\n        annotation.\n      </h1>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        href=\"https://backstage.io/docs/features/kubernetes/configuration#surfacing-your-kubernetes-components-as-part-of-an-entity\"\n      >\n        Read Kubernetes Plugin Docs\n      </Button>\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;;;AA6BO,MAAM,qBAAA,GAAwB,CAAC,MAAA,KACpC,OAAA,CAAQ,OAAO,QAAA,CAAS,WAAA,GAAc,qBAAqB,CAAC,CAAA,IAC5D,OAAA;AAAA,EACE,MAAA,CAAO,QAAA,CAAS,WAAA,GAAc,0CAA0C;AAC1E;AAEK,MAAM,MAAA,GAAS,CAAC,KAAA,KAA0C;AAC/D,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,SAAA,EAAU;AAE7B,EAAA,MAAM,yBAAA,GACJ,MAAA,CAAO,QAAA,CAAS,WAAA,GAAc,qBAAqB,CAAA;AAErD,EAAA,MAAM,2CAAA,GACJ,MAAA,CAAO,QAAA,CAAS,WAAA,GAAc,0CAA0C,CAAA;AAE1E,EAAA,IACE,6BACA,2CAAA,EACA;AACA,IAAA,2BACG,MAAA,EAAA,EACC,QAAA,kBAAA,GAAA;AAAA,MAAC,KAAA;AAAA,MAAA;AAAA,QACC,IAAA,EAAK,GAAA;AAAA,QACL,OAAA,kBACE,GAAA;AAAA,UAAC,iBAAA;AAAA,UAAA;AAAA,YACC,MAAA;AAAA,YACA,mBAAmB,KAAA,CAAM;AAAA;AAAA;AAC3B;AAAA,KAEJ,EACF,CAAA;AAAA,EAEJ;AAEA,EAAA,uBACE,IAAA,CAAA,QAAA,EAAA,EACE,QAAA,EAAA;AAAA,oBAAA,GAAA,CAAC,2BAAA,EAAA,EAA4B,YAAY,qBAAA,EAAuB,CAAA;AAAA,oBAChE,GAAA,CAAC,QAAG,QAAA,EAAA,qFAAA,EAGJ,CAAA;AAAA,oBACA,GAAA;AAAA,MAAC,MAAA;AAAA,MAAA;AAAA,QACC,OAAA,EAAQ,WAAA;AAAA,QACR,KAAA,EAAM,SAAA;AAAA,QACN,IAAA,EAAK,uHAAA;AAAA,QACN,QAAA,EAAA;AAAA;AAAA;AAED,GAAA,EACF,CAAA;AAEJ;;;;"}