{"version":3,"file":"apis.esm.js","sources":["../../src/alpha/apis.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ApiBlueprint,\n  discoveryApiRef,\n  fetchApiRef,\n} from '@backstage/frontend-plugin-api';\nimport {\n  KubernetesBackendClient,\n  kubernetesApiRef,\n  kubernetesProxyApiRef,\n  kubernetesAuthProvidersApiRef,\n  KubernetesAuthProviders,\n  KubernetesProxyClient,\n  kubernetesClusterLinkFormatterApiRef,\n  getDefaultFormatters,\n  KubernetesClusterLinkFormatter,\n  DEFAULT_FORMATTER_NAME,\n} from '@backstage/plugin-kubernetes-react';\nimport {\n  gitlabAuthApiRef,\n  googleAuthApiRef,\n  microsoftAuthApiRef,\n  oktaAuthApiRef,\n  oneloginAuthApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const kubernetesApiExtension = ApiBlueprint.make({\n  params: defineParams =>\n    defineParams({\n      api: kubernetesApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef,\n        kubernetesAuthProvidersApi: kubernetesAuthProvidersApiRef,\n      },\n      factory: ({ discoveryApi, fetchApi, kubernetesAuthProvidersApi }) =>\n        new KubernetesBackendClient({\n          discoveryApi,\n          fetchApi,\n          kubernetesAuthProvidersApi,\n        }),\n    }),\n});\n\nexport const kubernetesProxyApi = ApiBlueprint.make({\n  name: 'proxy',\n  params: defineParams =>\n    defineParams({\n      api: kubernetesProxyApiRef,\n      deps: {\n        kubernetesApi: kubernetesApiRef,\n      },\n      factory: ({ kubernetesApi }) =>\n        new KubernetesProxyClient({\n          kubernetesApi,\n        }),\n    }),\n});\n\nexport const kubernetesAuthProvidersApi = ApiBlueprint.make({\n  name: 'auth-providers',\n  params: defineParams =>\n    defineParams({\n      api: kubernetesAuthProvidersApiRef,\n      deps: {\n        gitlabAuthApi: gitlabAuthApiRef,\n        googleAuthApi: googleAuthApiRef,\n        microsoftAuthApi: microsoftAuthApiRef,\n        oktaAuthApi: oktaAuthApiRef,\n        oneloginAuthApi: oneloginAuthApiRef,\n      },\n      factory: ({\n        gitlabAuthApi,\n        googleAuthApi,\n        microsoftAuthApi,\n        oktaAuthApi,\n        oneloginAuthApi,\n      }) => {\n        const oidcProviders = {\n          gitlab: gitlabAuthApi,\n          google: googleAuthApi,\n          microsoft: microsoftAuthApi,\n          okta: oktaAuthApi,\n          onelogin: oneloginAuthApi,\n        };\n\n        return new KubernetesAuthProviders({\n          microsoftAuthApi,\n          googleAuthApi,\n          oidcProviders,\n        });\n      },\n    }),\n});\n\nexport const kubernetesClusterLinkFormatterApi = ApiBlueprint.make({\n  name: 'cluster-link-formatter',\n  params: defineParams =>\n    defineParams({\n      api: kubernetesClusterLinkFormatterApiRef,\n      deps: { googleAuthApi: googleAuthApiRef },\n      factory: deps => {\n        const formatters = getDefaultFormatters(deps);\n        return new KubernetesClusterLinkFormatter({\n          formatters,\n          defaultFormatterName: DEFAULT_FORMATTER_NAME,\n        });\n      },\n    }),\n});\n"],"names":["kubernetesAuthProvidersApi"],"mappings":";;;;AAyCO,MAAM,sBAAA,GAAyB,aAAa,IAAA,CAAK;AAAA,EACtD,MAAA,EAAQ,kBACN,YAAA,CAAa;AAAA,IACX,GAAA,EAAK,gBAAA;AAAA,IACL,IAAA,EAAM;AAAA,MACJ,YAAA,EAAc,eAAA;AAAA,MACd,QAAA,EAAU,WAAA;AAAA,MACV,0BAAA,EAA4B;AAAA,KAC9B;AAAA,IACA,OAAA,EAAS,CAAC,EAAE,YAAA,EAAc,UAAU,0BAAA,EAAAA,2BAAAA,EAA2B,KAC7D,IAAI,uBAAA,CAAwB;AAAA,MAC1B,YAAA;AAAA,MACA,QAAA;AAAA,MACA,0BAAA,EAAAA;AAAA,KACD;AAAA,GACJ;AACL,CAAC;AAEM,MAAM,kBAAA,GAAqB,aAAa,IAAA,CAAK;AAAA,EAClD,IAAA,EAAM,OAAA;AAAA,EACN,MAAA,EAAQ,kBACN,YAAA,CAAa;AAAA,IACX,GAAA,EAAK,qBAAA;AAAA,IACL,IAAA,EAAM;AAAA,MACJ,aAAA,EAAe;AAAA,KACjB;AAAA,IACA,SAAS,CAAC,EAAE,aAAA,EAAc,KACxB,IAAI,qBAAA,CAAsB;AAAA,MACxB;AAAA,KACD;AAAA,GACJ;AACL,CAAC;AAEM,MAAM,0BAAA,GAA6B,aAAa,IAAA,CAAK;AAAA,EAC1D,IAAA,EAAM,gBAAA;AAAA,EACN,MAAA,EAAQ,kBACN,YAAA,CAAa;AAAA,IACX,GAAA,EAAK,6BAAA;AAAA,IACL,IAAA,EAAM;AAAA,MACJ,aAAA,EAAe,gBAAA;AAAA,MACf,aAAA,EAAe,gBAAA;AAAA,MACf,gBAAA,EAAkB,mBAAA;AAAA,MAClB,WAAA,EAAa,cAAA;AAAA,MACb,eAAA,EAAiB;AAAA,KACnB;AAAA,IACA,SAAS,CAAC;AAAA,MACR,aAAA;AAAA,MACA,aAAA;AAAA,MACA,gBAAA;AAAA,MACA,WAAA;AAAA,MACA;AAAA,KACF,KAAM;AACJ,MAAA,MAAM,aAAA,GAAgB;AAAA,QACpB,MAAA,EAAQ,aAAA;AAAA,QACR,MAAA,EAAQ,aAAA;AAAA,QACR,SAAA,EAAW,gBAAA;AAAA,QACX,IAAA,EAAM,WAAA;AAAA,QACN,QAAA,EAAU;AAAA,OACZ;AAEA,MAAA,OAAO,IAAI,uBAAA,CAAwB;AAAA,QACjC,gBAAA;AAAA,QACA,aAAA;AAAA,QACA;AAAA,OACD,CAAA;AAAA,IACH;AAAA,GACD;AACL,CAAC;AAEM,MAAM,iCAAA,GAAoC,aAAa,IAAA,CAAK;AAAA,EACjE,IAAA,EAAM,wBAAA;AAAA,EACN,MAAA,EAAQ,kBACN,YAAA,CAAa;AAAA,IACX,GAAA,EAAK,oCAAA;AAAA,IACL,IAAA,EAAM,EAAE,aAAA,EAAe,gBAAA,EAAiB;AAAA,IACxC,SAAS,CAAA,IAAA,KAAQ;AACf,MAAA,MAAM,UAAA,GAAa,qBAAqB,IAAI,CAAA;AAC5C,MAAA,OAAO,IAAI,8BAAA,CAA+B;AAAA,QACxC,UAAA;AAAA,QACA,oBAAA,EAAsB;AAAA,OACvB,CAAA;AAAA,IACH;AAAA,GACD;AACL,CAAC;;;;"}