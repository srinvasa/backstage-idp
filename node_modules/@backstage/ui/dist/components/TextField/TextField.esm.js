import { jsxs, jsx } from 'react/jsx-runtime';
import { forwardRef, useEffect } from 'react';
import { TextField as TextField$1, Input } from 'react-aria-components';
import clsx from 'clsx';
import { FieldLabel } from '../FieldLabel/FieldLabel.esm.js';
import { FieldError } from '../FieldError/FieldError.esm.js';
import { useStyles } from '../../hooks/useStyles.esm.js';
import { TextFieldDefinition } from './definition.esm.js';
import styles from './TextField.module.css.esm.js';

const TextField = forwardRef(
  (props, ref) => {
    const {
      label,
      "aria-label": ariaLabel,
      "aria-labelledby": ariaLabelledBy
    } = props;
    useEffect(() => {
      if (!label && !ariaLabel && !ariaLabelledBy) {
        console.warn(
          "TextField requires either a visible label, aria-label, or aria-labelledby for accessibility"
        );
      }
    }, [label, ariaLabel, ariaLabelledBy]);
    const { classNames, dataAttributes, style, cleanedProps } = useStyles(
      TextFieldDefinition,
      {
        size: "small",
        ...props
      }
    );
    const {
      className,
      description,
      icon,
      isRequired,
      secondaryLabel,
      placeholder,
      ...rest
    } = cleanedProps;
    const secondaryLabelText = secondaryLabel || (isRequired ? "Required" : null);
    return /* @__PURE__ */ jsxs(
      TextField$1,
      {
        className: clsx(classNames.root, styles[classNames.root], className),
        ...dataAttributes,
        "aria-label": ariaLabel,
        "aria-labelledby": ariaLabelledBy,
        style,
        ...rest,
        ref,
        children: [
          /* @__PURE__ */ jsx(
            FieldLabel,
            {
              label,
              secondaryLabel: secondaryLabelText,
              description
            }
          ),
          /* @__PURE__ */ jsxs(
            "div",
            {
              className: clsx(
                classNames.inputWrapper,
                styles[classNames.inputWrapper]
              ),
              "data-size": dataAttributes["data-size"],
              children: [
                icon && /* @__PURE__ */ jsx(
                  "div",
                  {
                    className: clsx(
                      classNames.inputIcon,
                      styles[classNames.inputIcon]
                    ),
                    "data-size": dataAttributes["data-size"],
                    "aria-hidden": "true",
                    children: icon
                  }
                ),
                /* @__PURE__ */ jsx(
                  Input,
                  {
                    className: clsx(classNames.input, styles[classNames.input]),
                    ...icon && { "data-icon": true },
                    placeholder
                  }
                )
              ]
            }
          ),
          /* @__PURE__ */ jsx(FieldError, {})
        ]
      }
    );
  }
);
TextField.displayName = "TextField";

export { TextField };
//# sourceMappingURL=TextField.esm.js.map
