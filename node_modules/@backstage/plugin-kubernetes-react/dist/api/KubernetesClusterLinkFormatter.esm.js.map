{"version":3,"file":"KubernetesClusterLinkFormatter.esm.js","sources":["../../src/api/KubernetesClusterLinkFormatter.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  KubernetesClusterLinkFormatterApi,\n  FormatClusterLinkOptions,\n} from './types';\nimport { ClusterLinksFormatter } from '../types';\n\n/** @public */\nexport class KubernetesClusterLinkFormatter\n  implements KubernetesClusterLinkFormatterApi\n{\n  private readonly formatters: Record<string, ClusterLinksFormatter>;\n  private readonly defaultFormatterName: string;\n\n  constructor(options: {\n    formatters: Record<string, ClusterLinksFormatter>;\n    defaultFormatterName: string;\n  }) {\n    this.formatters = options.formatters;\n    this.defaultFormatterName = options.defaultFormatterName;\n  }\n  async formatClusterLink(options: FormatClusterLinkOptions) {\n    if (!options.dashboardUrl && !options.dashboardParameters) {\n      return undefined;\n    }\n    if (options.dashboardUrl && !options.object) {\n      return options.dashboardUrl;\n    }\n    const app = options.dashboardApp ?? this.defaultFormatterName;\n    const formatter = this.formatters[app];\n    if (!formatter) {\n      throw new Error(`Could not find Kubernetes dashboard app named '${app}'`);\n    }\n    const url = await formatter.formatClusterLink({\n      dashboardUrl: options.dashboardUrl\n        ? new URL(options.dashboardUrl)\n        : undefined,\n      dashboardParameters: options.dashboardParameters,\n      object: options.object,\n      kind: options.kind,\n    });\n    return url.toString();\n  }\n}\n"],"names":[],"mappings":"AAuBO,MAAM,8BAAA,CAEb;AAAA,EACmB,UAAA;AAAA,EACA,oBAAA;AAAA,EAEjB,YAAY,OAAA,EAGT;AACD,IAAA,IAAA,CAAK,aAAa,OAAA,CAAQ,UAAA;AAC1B,IAAA,IAAA,CAAK,uBAAuB,OAAA,CAAQ,oBAAA;AAAA,EACtC;AAAA,EACA,MAAM,kBAAkB,OAAA,EAAmC;AACzD,IAAA,IAAI,CAAC,OAAA,CAAQ,YAAA,IAAgB,CAAC,QAAQ,mBAAA,EAAqB;AACzD,MAAA,OAAO,MAAA;AAAA,IACT;AACA,IAAA,IAAI,OAAA,CAAQ,YAAA,IAAgB,CAAC,OAAA,CAAQ,MAAA,EAAQ;AAC3C,MAAA,OAAO,OAAA,CAAQ,YAAA;AAAA,IACjB;AACA,IAAA,MAAM,GAAA,GAAM,OAAA,CAAQ,YAAA,IAAgB,IAAA,CAAK,oBAAA;AACzC,IAAA,MAAM,SAAA,GAAY,IAAA,CAAK,UAAA,CAAW,GAAG,CAAA;AACrC,IAAA,IAAI,CAAC,SAAA,EAAW;AACd,MAAA,MAAM,IAAI,KAAA,CAAM,CAAA,+CAAA,EAAkD,GAAG,CAAA,CAAA,CAAG,CAAA;AAAA,IAC1E;AACA,IAAA,MAAM,GAAA,GAAM,MAAM,SAAA,CAAU,iBAAA,CAAkB;AAAA,MAC5C,cAAc,OAAA,CAAQ,YAAA,GAClB,IAAI,GAAA,CAAI,OAAA,CAAQ,YAAY,CAAA,GAC5B,MAAA;AAAA,MACJ,qBAAqB,OAAA,CAAQ,mBAAA;AAAA,MAC7B,QAAQ,OAAA,CAAQ,MAAA;AAAA,MAChB,MAAM,OAAA,CAAQ;AAAA,KACf,CAAA;AACD,IAAA,OAAO,IAAI,QAAA,EAAS;AAAA,EACtB;AACF;;;;"}