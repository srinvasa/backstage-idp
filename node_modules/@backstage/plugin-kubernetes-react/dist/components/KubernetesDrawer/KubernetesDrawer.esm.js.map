{"version":3,"file":"KubernetesDrawer.esm.js","sources":["../../../src/components/KubernetesDrawer/KubernetesDrawer.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ReactNode, ChangeEvent, useState } from 'react';\n\nimport type { IObjectMeta } from '@kubernetes-models/apimachinery/apis/meta/v1/ObjectMeta';\nimport Drawer from '@material-ui/core/Drawer';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport Switch from '@material-ui/core/Switch';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  withStyles,\n} from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ManifestYaml } from './ManifestYaml';\n\nconst useDrawerContentStyles = makeStyles((_theme: Theme) =>\n  createStyles({\n    header: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n    },\n    content: {\n      height: '80%',\n    },\n    icon: {\n      fontSize: 20,\n    },\n  }),\n);\n\n/**\n * The type of object that can be represented by the Drawer\n *\n * @public\n */\nexport interface KubernetesObject {\n  kind: string;\n  metadata?: IObjectMeta;\n}\n\ninterface KubernetesDrawerContentProps {\n  close: () => void;\n  kubernetesObject: KubernetesObject;\n  header?: ReactNode;\n  children?: ReactNode;\n}\n\nconst KubernetesDrawerContent = ({\n  children,\n  header,\n  kubernetesObject,\n  close,\n}: KubernetesDrawerContentProps) => {\n  const classes = useDrawerContentStyles();\n  const [isYaml, setIsYaml] = useState<boolean>(false);\n\n  return (\n    <>\n      <div className={classes.header}>\n        <Grid container justifyContent=\"flex-start\" alignItems=\"flex-start\">\n          <Grid item xs={11}>\n            <Typography variant=\"h5\">\n              {kubernetesObject.metadata?.name}\n            </Typography>\n          </Grid>\n          <Grid item xs={1}>\n            <IconButton\n              key=\"dismiss\"\n              title=\"Close the drawer\"\n              onClick={() => close()}\n              color=\"inherit\"\n            >\n              <CloseIcon className={classes.icon} />\n            </IconButton>\n          </Grid>\n          <Grid item xs={12}>\n            {header}\n          </Grid>\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={isYaml}\n                  onChange={event => {\n                    setIsYaml(event.target.checked);\n                  }}\n                  name=\"YAML\"\n                />\n              }\n              label=\"YAML\"\n            />\n          </Grid>\n        </Grid>\n      </div>\n      <div className={classes.content}>\n        {isYaml && <ManifestYaml object={kubernetesObject} />}\n        {!isYaml && children}\n      </div>\n    </>\n  );\n};\n\n/**\n * Props of KubernetesDrawer\n *\n * @public\n */\nexport interface KubernetesDrawerProps {\n  open?: boolean;\n  kubernetesObject: KubernetesObject;\n  label: ReactNode;\n  drawerContentsHeader?: ReactNode;\n  children?: ReactNode;\n}\n\nconst useDrawerStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      width: '50%',\n      justifyContent: 'space-between',\n      padding: theme.spacing(2.5),\n    },\n  }),\n);\n\nconst DrawerButton = withStyles({\n  root: {\n    padding: '6px 5px',\n  },\n  label: {\n    textTransform: 'none',\n  },\n})(Button);\n\n/**\n * Button/Drawer component for Kubernetes Objects\n *\n * @public\n */\nexport const KubernetesDrawer = ({\n  open,\n  label,\n  drawerContentsHeader,\n  kubernetesObject,\n  children,\n}: KubernetesDrawerProps) => {\n  const classes = useDrawerStyles();\n  const [isOpen, setIsOpen] = useState<boolean>(open ?? false);\n\n  const toggleDrawer = (e: ChangeEvent<{}>, newValue: boolean) => {\n    e.stopPropagation();\n    setIsOpen(newValue);\n  };\n\n  return (\n    <>\n      <DrawerButton onClick={() => setIsOpen(true)}>{label}</DrawerButton>\n      <Drawer\n        classes={{\n          paper: classes.paper,\n        }}\n        anchor=\"right\"\n        open={isOpen}\n        onClose={(e: any) => toggleDrawer(e, false)}\n        onClick={event => event.stopPropagation()}\n      >\n        {isOpen && (\n          <KubernetesDrawerContent\n            header={drawerContentsHeader}\n            kubernetesObject={kubernetesObject}\n            children={children}\n            close={() => setIsOpen(false)}\n          />\n        )}\n      </Drawer>\n    </>\n  );\n};\n"],"names":[],"mappings":"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"}