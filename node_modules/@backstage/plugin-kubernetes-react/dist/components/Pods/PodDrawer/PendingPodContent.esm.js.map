{"version":3,"file":"PendingPodContent.esm.js","sources":["../../../../src/components/Pods/PodDrawer/PendingPodContent.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Typography from '@material-ui/core/Typography';\nimport { IPodCondition, Pod } from 'kubernetes-models/v1';\nimport {\n  StatusError,\n  StatusOK,\n  StatusWarning,\n} from '@backstage/core-components';\nimport { DateTime } from 'luxon';\n\ninterface PodConditionProps {\n  condition: IPodCondition;\n}\n\nconst PodCondition = ({ condition }: PodConditionProps) => {\n  return (\n    <>\n      {condition.status === 'False' && (\n        <StatusError>\n          {condition.type} - ({condition.reason}{' '}\n          {condition.lastTransitionTime &&\n            DateTime.fromISO(condition.lastTransitionTime).toRelative({\n              locale: 'en',\n            })}\n          ) - {condition.message}{' '}\n        </StatusError>\n      )}\n      {condition.status === 'True' && (\n        <StatusOK>\n          {condition.type} - (\n          {condition.lastTransitionTime &&\n            DateTime.fromISO(condition.lastTransitionTime).toRelative({\n              locale: 'en',\n            })}\n          )\n        </StatusOK>\n      )}\n      {condition.status === 'Unknown' && (\n        <StatusWarning>\n          {condition.type} - (\n          {condition.lastTransitionTime &&\n            DateTime.fromISO(condition.lastTransitionTime).toRelative({\n              locale: 'en',\n            })}\n          ) {condition.message}\n        </StatusWarning>\n      )}\n    </>\n  );\n};\n\n/**\n * Props for PendingPodContent\n *\n * @public\n */\nexport interface PendingPodContentProps {\n  pod: Pod;\n}\n\n/**\n * Shows details about pod's conditions as it starts\n *\n * @public\n */\nexport const PendingPodContent = ({ pod }: PendingPodContentProps) => {\n  // TODO add PodHasNetwork when it's out of alpha\n  // https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-conditions\n  const startupConditions = [\n    pod.status?.conditions?.find(c => c.type === 'PodScheduled'),\n    pod.status?.conditions?.find(c => c.type === 'Initialized'),\n    pod.status?.conditions?.find(c => c.type === 'ContainersReady'),\n    pod.status?.conditions?.find(c => c.type === 'Ready'),\n  ].filter((c): c is IPodCondition => !!c); // filter out undefined\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant=\"h5\">Pod is Pending. Conditions:</Typography>\n        <List>\n          {startupConditions.map(c => (\n            <ListItem key={c.type}>\n              <PodCondition condition={c} />\n            </ListItem>\n          ))}\n        </List>\n      </Grid>\n    </Grid>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;AA+BA,MAAM,YAAA,GAAe,CAAC,EAAE,SAAA,EAAU,KAAyB;AACzD,EAAA,uBACE,IAAA,CAAA,QAAA,EAAA,EACG,QAAA,EAAA;AAAA,IAAA,SAAA,CAAU,MAAA,KAAW,OAAA,oBACpB,IAAA,CAAC,WAAA,EAAA,EACE,QAAA,EAAA;AAAA,MAAA,SAAA,CAAU,IAAA;AAAA,MAAK,MAAA;AAAA,MAAK,SAAA,CAAU,MAAA;AAAA,MAAQ,GAAA;AAAA,MACtC,UAAU,kBAAA,IACT,QAAA,CAAS,QAAQ,SAAA,CAAU,kBAAkB,EAAE,UAAA,CAAW;AAAA,QACxD,MAAA,EAAQ;AAAA,OACT,CAAA;AAAA,MAAE,MAAA;AAAA,MACA,SAAA,CAAU,OAAA;AAAA,MAAS;AAAA,KAAA,EAC1B,CAAA;AAAA,IAED,SAAA,CAAU,MAAA,KAAW,MAAA,oBACpB,IAAA,CAAC,QAAA,EAAA,EACE,QAAA,EAAA;AAAA,MAAA,SAAA,CAAU,IAAA;AAAA,MAAK,MAAA;AAAA,MACf,UAAU,kBAAA,IACT,QAAA,CAAS,QAAQ,SAAA,CAAU,kBAAkB,EAAE,UAAA,CAAW;AAAA,QACxD,MAAA,EAAQ;AAAA,OACT,CAAA;AAAA,MAAE;AAAA,KAAA,EAEP,CAAA;AAAA,IAED,SAAA,CAAU,MAAA,KAAW,SAAA,oBACpB,IAAA,CAAC,aAAA,EAAA,EACE,QAAA,EAAA;AAAA,MAAA,SAAA,CAAU,IAAA;AAAA,MAAK,MAAA;AAAA,MACf,UAAU,kBAAA,IACT,QAAA,CAAS,QAAQ,SAAA,CAAU,kBAAkB,EAAE,UAAA,CAAW;AAAA,QACxD,MAAA,EAAQ;AAAA,OACT,CAAA;AAAA,MAAE,IAAA;AAAA,MACF,SAAA,CAAU;AAAA,KAAA,EACf;AAAA,GAAA,EAEJ,CAAA;AAEJ,CAAA;AAgBO,MAAM,iBAAA,GAAoB,CAAC,EAAE,GAAA,EAAI,KAA8B;AAGpE,EAAA,MAAM,iBAAA,GAAoB;AAAA,IACxB,IAAI,MAAA,EAAQ,UAAA,EAAY,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,SAAS,cAAc,CAAA;AAAA,IAC3D,IAAI,MAAA,EAAQ,UAAA,EAAY,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,SAAS,aAAa,CAAA;AAAA,IAC1D,IAAI,MAAA,EAAQ,UAAA,EAAY,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,SAAS,iBAAiB,CAAA;AAAA,IAC9D,IAAI,MAAA,EAAQ,UAAA,EAAY,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,SAAS,OAAO;AAAA,IACpD,MAAA,CAAO,CAAC,CAAA,KAA0B,CAAC,CAAC,CAAC,CAAA;AACvC,EAAA,uBACE,GAAA,CAAC,IAAA,EAAA,EAAK,SAAA,EAAS,IAAA,EAAC,OAAA,EAAS,CAAA,EACvB,QAAA,kBAAA,IAAA,CAAC,IAAA,EAAA,EAAK,IAAA,EAAI,IAAA,EAAC,EAAA,EAAI,EAAA,EACb,QAAA,EAAA;AAAA,oBAAA,GAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,IAAA,EAAK,QAAA,EAAA,6BAAA,EAA2B,CAAA;AAAA,oBACpD,GAAA,CAAC,IAAA,EAAA,EACE,QAAA,EAAA,iBAAA,CAAkB,GAAA,CAAI,uBACrB,GAAA,CAAC,QAAA,EAAA,EACC,QAAA,kBAAA,GAAA,CAAC,YAAA,EAAA,EAAa,WAAW,CAAA,EAAG,CAAA,EAAA,EADf,CAAA,CAAE,IAEjB,CACD,CAAA,EACH;AAAA,GAAA,EACF,CAAA,EACF,CAAA;AAEJ;;;;"}