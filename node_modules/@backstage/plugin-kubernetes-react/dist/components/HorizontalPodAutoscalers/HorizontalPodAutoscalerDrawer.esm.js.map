{"version":3,"file":"HorizontalPodAutoscalerDrawer.esm.js","sources":["../../../src/components/HorizontalPodAutoscalers/HorizontalPodAutoscalerDrawer.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ReactNode } from 'react';\nimport type { V2HorizontalPodAutoscaler } from '@kubernetes/client-node';\nimport { KubernetesStructuredMetadataTableDrawer } from '../KubernetesDrawer';\n\n/** @public */\nexport const HorizontalPodAutoscalerDrawer = (props: {\n  hpa: V2HorizontalPodAutoscaler;\n  expanded?: boolean;\n  children?: ReactNode;\n}) => {\n  const { hpa, expanded, children } = props;\n\n  const specCpuUtil = hpa?.spec?.metrics?.find(\n    metric => metric.type === 'Resource' && metric.resource?.name === 'cpu',\n  )?.resource?.target.averageUtilization;\n\n  const cpuUtil = hpa?.status?.currentMetrics?.find(\n    metric => metric.type === 'Resource' && metric.resource?.name === 'cpu',\n  )?.resource?.current.averageUtilization;\n\n  return (\n    <KubernetesStructuredMetadataTableDrawer\n      kind=\"HorizontalPodAutoscaler\"\n      object={hpa}\n      expanded={expanded}\n      renderObject={(hpaObject: V2HorizontalPodAutoscaler) => {\n        return {\n          targetCPUUtilizationPercentage: specCpuUtil,\n          currentCPUUtilizationPercentage: cpuUtil,\n          minReplicas: hpaObject.spec?.minReplicas,\n          maxReplicas: hpaObject.spec?.maxReplicas,\n          currentReplicas: hpaObject.status?.currentReplicas,\n          desiredReplicas: hpaObject.status?.desiredReplicas,\n          lastScaleTime: hpa?.status?.lastScaleTime,\n        };\n      }}\n    >\n      {children}\n    </KubernetesStructuredMetadataTableDrawer>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;AAqBO,MAAM,6BAAA,GAAgC,CAAC,KAAA,KAIxC;AACJ,EAAA,MAAM,EAAE,GAAA,EAAK,QAAA,EAAU,QAAA,EAAS,GAAI,KAAA;AAEpC,EAAA,MAAM,WAAA,GAAc,GAAA,EAAK,IAAA,EAAM,OAAA,EAAS,IAAA;AAAA,IACtC,YAAU,MAAA,CAAO,IAAA,KAAS,UAAA,IAAc,MAAA,CAAO,UAAU,IAAA,KAAS;AAAA,GACpE,EAAG,UAAU,MAAA,CAAO,kBAAA;AAEpB,EAAA,MAAM,OAAA,GAAU,GAAA,EAAK,MAAA,EAAQ,cAAA,EAAgB,IAAA;AAAA,IAC3C,YAAU,MAAA,CAAO,IAAA,KAAS,UAAA,IAAc,MAAA,CAAO,UAAU,IAAA,KAAS;AAAA,GACpE,EAAG,UAAU,OAAA,CAAQ,kBAAA;AAErB,EAAA,uBACE,GAAA;AAAA,IAAC,uCAAA;AAAA,IAAA;AAAA,MACC,IAAA,EAAK,yBAAA;AAAA,MACL,MAAA,EAAQ,GAAA;AAAA,MACR,QAAA;AAAA,MACA,YAAA,EAAc,CAAC,SAAA,KAAyC;AACtD,QAAA,OAAO;AAAA,UACL,8BAAA,EAAgC,WAAA;AAAA,UAChC,+BAAA,EAAiC,OAAA;AAAA,UACjC,WAAA,EAAa,UAAU,IAAA,EAAM,WAAA;AAAA,UAC7B,WAAA,EAAa,UAAU,IAAA,EAAM,WAAA;AAAA,UAC7B,eAAA,EAAiB,UAAU,MAAA,EAAQ,eAAA;AAAA,UACnC,eAAA,EAAiB,UAAU,MAAA,EAAQ,eAAA;AAAA,UACnC,aAAA,EAAe,KAAK,MAAA,EAAQ;AAAA,SAC9B;AAAA,MACF,CAAA;AAAA,MAEC;AAAA;AAAA,GACH;AAEJ;;;;"}