{"version":3,"file":"ErrorPanel.esm.js","sources":["../../../src/components/ErrorPanel/ErrorPanel.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ReactNode } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { ClusterObjects } from '@backstage/plugin-kubernetes-common';\nimport { WarningPanel } from '@backstage/core-components';\n\nconst clustersWithErrorsToErrorMessage = (\n  clustersWithErrors: ClusterObjects[],\n): ReactNode => {\n  return clustersWithErrors.map((c, i) => {\n    return (\n      <div key={i}>\n        <Typography variant=\"body2\">{`Cluster: ${\n          c.cluster.title || c.cluster.name\n        }`}</Typography>\n        {c.errors.map((e, j) => {\n          return (\n            <Typography variant=\"body2\" key={j}>\n              {e.errorType === 'FETCH_ERROR'\n                ? `Error communicating with Kubernetes: ${e.errorType}, message: ${e.message}`\n                : `Error fetching Kubernetes resource: '${e.resourcePath}', error: ${e.errorType}, status code: ${e.statusCode}`}\n            </Typography>\n          );\n        })}\n        <br />\n      </div>\n    );\n  });\n};\n\n/**\n *\n *\n * @public\n */\nexport type ErrorPanelProps = {\n  entityName: string;\n  errorMessage?: string;\n  clustersWithErrors?: ClusterObjects[];\n  children?: ReactNode;\n};\n\n/**\n *\n *\n * @public\n */\nexport const ErrorPanel = ({\n  entityName,\n  errorMessage,\n  clustersWithErrors,\n}: ErrorPanelProps) => (\n  <WarningPanel\n    title=\"There was a problem retrieving Kubernetes objects\"\n    message={`There was a problem retrieving some Kubernetes resources for the entity: ${entityName}. This could mean that the Error Reporting card is not completely accurate.`}\n  >\n    {clustersWithErrors && (\n      <div>Errors: {clustersWithErrorsToErrorMessage(clustersWithErrors)}</div>\n    )}\n    {errorMessage && (\n      <Typography variant=\"body2\">Errors: {errorMessage}</Typography>\n    )}\n  </WarningPanel>\n);\n"],"names":[],"mappings":";;;;AAqBA,MAAM,gCAAA,GAAmC,CACvC,kBAAA,KACc;AACd,EAAA,OAAO,kBAAA,CAAmB,GAAA,CAAI,CAAC,CAAA,EAAG,CAAA,KAAM;AACtC,IAAA,4BACG,KAAA,EAAA,EACC,QAAA,EAAA;AAAA,sBAAA,GAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,OAAA,EAAS,QAAA,EAAA,CAAA,SAAA,EAC3B,CAAA,CAAE,QAAQ,KAAA,IAAS,CAAA,CAAE,OAAA,CAAQ,IAC/B,CAAA,CAAA,EAAG,CAAA;AAAA,MACF,CAAA,CAAE,MAAA,CAAO,GAAA,CAAI,CAAC,GAAG,CAAA,KAAM;AACtB,QAAA,uBACE,GAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,OAAA,EACjB,QAAA,EAAA,CAAA,CAAE,cAAc,aAAA,GACb,CAAA,qCAAA,EAAwC,CAAA,CAAE,SAAS,CAAA,WAAA,EAAc,CAAA,CAAE,OAAO,CAAA,CAAA,GAC1E,CAAA,qCAAA,EAAwC,CAAA,CAAE,YAAY,CAAA,UAAA,EAAa,CAAA,CAAE,SAAS,CAAA,eAAA,EAAkB,CAAA,CAAE,UAAU,CAAA,CAAA,EAAA,EAHjF,CAIjC,CAAA;AAAA,MAEJ,CAAC,CAAA;AAAA,0BACA,IAAA,EAAA,EAAG;AAAA,KAAA,EAAA,EAbI,CAcV,CAAA;AAAA,EAEJ,CAAC,CAAA;AACH,CAAA;AAmBO,MAAM,aAAa,CAAC;AAAA,EACzB,UAAA;AAAA,EACA,YAAA;AAAA,EACA;AACF,CAAA,qBACE,IAAA;AAAA,EAAC,YAAA;AAAA,EAAA;AAAA,IACC,KAAA,EAAM,mDAAA;AAAA,IACN,OAAA,EAAS,4EAA4E,UAAU,CAAA,2EAAA,CAAA;AAAA,IAE9F,QAAA,EAAA;AAAA,MAAA,kBAAA,yBACE,KAAA,EAAA,EAAI,QAAA,EAAA;AAAA,QAAA,UAAA;AAAA,QAAS,iCAAiC,kBAAkB;AAAA,OAAA,EAAE,CAAA;AAAA,MAEpE,YAAA,oBACC,IAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,OAAA,EAAQ,QAAA,EAAA;AAAA,QAAA,UAAA;AAAA,QAAS;AAAA,OAAA,EAAa;AAAA;AAAA;AAEtD;;;;"}