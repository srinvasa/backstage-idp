import { useEffect } from 'react';

const STACK_ATTR = "data-unified-theme-stack";
const MODE_ATTR = "data-theme-mode";
const NAME_ATTR = "data-theme-name";
function mutateAttrStack(mutator) {
  const stack = (() => {
    const raw = document.body.getAttribute(STACK_ATTR);
    if (!raw) {
      return [];
    }
    try {
      const parsed = JSON.parse(raw);
      return Array.isArray(parsed) ? parsed : [];
    } catch {
      return [];
    }
  })();
  mutator(stack);
  if (stack.length === 0) {
    document.body.removeAttribute(STACK_ATTR);
  } else {
    document.body.setAttribute(STACK_ATTR, JSON.stringify(stack));
  }
  const top = stack[stack.length - 1];
  if (top?.mode) {
    document.body.setAttribute(MODE_ATTR, String(top.mode));
  } else {
    document.body.removeAttribute(MODE_ATTR);
  }
  if (top?.name) {
    document.body.setAttribute(NAME_ATTR, String(top.name));
  } else {
    document.body.removeAttribute(NAME_ATTR);
  }
}
function useApplyThemeAttributes(themeMode, themeName) {
  useEffect(() => {
    mutateAttrStack((stack) => {
      stack.push({ mode: themeMode, name: themeName });
    });
    return () => {
      mutateAttrStack((stack) => {
        stack.pop();
      });
    };
  }, [themeMode, themeName]);
}

export { useApplyThemeAttributes };
//# sourceMappingURL=useApplyThemeAttributes.esm.js.map
