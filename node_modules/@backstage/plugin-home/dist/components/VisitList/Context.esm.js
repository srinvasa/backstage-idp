import { jsx } from 'react/jsx-runtime';
import { useContext, createContext } from 'react';
import { parseEntityRef } from '@backstage/catalog-model';
import { colorVariants } from '@backstage/theme';

const getColorByIndex = (index) => {
  const variants = Object.keys(colorVariants);
  const variantIndex = index % variants.length;
  return colorVariants[variants[variantIndex]][0];
};
const maybeEntity = (visit) => {
  try {
    return parseEntityRef(visit?.entityRef ?? "");
  } catch (e) {
    return void 0;
  }
};
const defaultGetChipColor = (visit) => {
  const defaultColor = getColorByIndex(0);
  const entity = maybeEntity(visit);
  if (!entity) return defaultColor;
  const entityKinds = [
    "component",
    "template",
    "api",
    "group",
    "user",
    "resource",
    "system",
    "domain",
    "location"
  ];
  const foundIndex = entityKinds.indexOf(
    entity.kind.toLocaleLowerCase("en-US")
  );
  return foundIndex === -1 ? defaultColor : getColorByIndex(foundIndex + 1);
};
const defaultGetLabel = (visit) => {
  const entity = maybeEntity(visit);
  return (entity?.kind ?? "Other").toLocaleLowerCase("en-US");
};
const VisitDisplayContext = createContext({
  getChipColor: defaultGetChipColor,
  getLabel: defaultGetLabel
});
const VisitDisplayProvider = ({
  children,
  getChipColor = defaultGetChipColor,
  getLabel = defaultGetLabel
}) => {
  const value = {
    getChipColor,
    getLabel
  };
  return /* @__PURE__ */ jsx(VisitDisplayContext.Provider, { value, children });
};
const useVisitDisplay = () => {
  const context = useContext(VisitDisplayContext);
  if (!context) {
    throw new Error(
      "useVisitDisplay must be used within a VisitDisplayProvider"
    );
  }
  return context;
};

export { VisitDisplayProvider, useVisitDisplay };
//# sourceMappingURL=Context.esm.js.map
