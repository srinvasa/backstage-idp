{"version":3,"file":"WidgetSettingsOverlay.esm.js","sources":["../../../src/components/CustomHomepage/WidgetSettingsOverlay.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { useState } from 'react';\nimport { Widget } from './types';\nimport { withTheme } from '@rjsf/core';\nimport { Theme as MuiTheme } from '@rjsf/material-ui';\nimport validator from '@rjsf/validator-ajv8';\nimport { useTranslationRef } from '@backstage/frontend-plugin-api';\nimport { homeTranslationRef } from '../../translation';\n\nconst Form = withTheme(MuiTheme);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    iconGrid: {\n      height: '100%',\n      '& *': {\n        padding: 0,\n      },\n    },\n    settingsOverlay: {\n      position: 'absolute',\n      backgroundColor: 'rgba(40, 40, 40, 0.93)',\n      width: '100%',\n      height: '100%',\n      top: 0,\n      left: 0,\n      padding: theme.spacing(2),\n      color: 'white',\n    },\n  }),\n);\ninterface WidgetSettingsOverlayProps {\n  id: string;\n  widget: Widget;\n  handleRemove: (id: string) => void;\n  handleSettingsSave: (id: string, settings: Record<string, any>) => void;\n  settings?: Record<string, any>;\n  deletable?: boolean;\n}\n\nexport const WidgetSettingsOverlay = (props: WidgetSettingsOverlayProps) => {\n  const { id, widget, settings, handleRemove, handleSettingsSave, deletable } =\n    props;\n  const [settingsDialogOpen, setSettingsDialogOpen] = useState(false);\n  const styles = useStyles();\n\n  const onClose = () => setSettingsDialogOpen(false);\n  const { t } = useTranslationRef(homeTranslationRef);\n\n  return (\n    <div className={styles.settingsOverlay}>\n      {widget.settingsSchema && (\n        <Dialog\n          open={settingsDialogOpen}\n          className=\"widgetSettingsDialog\"\n          onClose={onClose}\n        >\n          <DialogContent>\n            <Form\n              validator={validator}\n              showErrorList={false}\n              schema={widget.settingsSchema}\n              uiSchema={widget.uiSchema}\n              noHtml5Validate\n              formData={settings}\n              formContext={{ settings }}\n              onSubmit={({ formData, errors }) => {\n                if (errors.length === 0) {\n                  handleSettingsSave(id, formData);\n                  setSettingsDialogOpen(false);\n                }\n              }}\n              experimental_defaultFormStateBehavior={{\n                allOf: 'populateDefaults',\n              }}\n            >\n              <DialogActions>\n                <Button color=\"primary\" variant=\"contained\" type=\"submit\">\n                  {t('widgetSettingsOverlay.submitButtonTitle')}\n                </Button>\n                <Button color=\"secondary\" onClick={onClose}>\n                  {t('widgetSettingsOverlay.cancelButtonTitle')}\n                </Button>\n              </DialogActions>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      )}\n      <Grid\n        container\n        className={styles.iconGrid}\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        {widget.settingsSchema && (\n          <Grid item className=\"overlayGridItem\">\n            <Tooltip title={t('widgetSettingsOverlay.editSettingsTooptip')}>\n              <IconButton\n                color=\"primary\"\n                onClick={() => setSettingsDialogOpen(true)}\n              >\n                <SettingsIcon fontSize=\"large\" />\n              </IconButton>\n            </Tooltip>\n          </Grid>\n        )}\n        {deletable !== false && (\n          <Grid item className=\"overlayGridItem\">\n            <Tooltip title={t('widgetSettingsOverlay.deleteWidgetTooltip')}>\n              <IconButton color=\"secondary\" onClick={() => handleRemove(id)}>\n                <DeleteIcon fontSize=\"large\" />\n              </IconButton>\n            </Tooltip>\n          </Grid>\n        )}\n      </Grid>\n    </div>\n  );\n};\n"],"names":["MuiTheme"],"mappings":"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"}