{"version":3,"file":"types.esm.js","sources":["../../../src/components/CustomHomepage/types.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CSSProperties, ReactElement, ReactNode } from 'react';\nimport { Layout } from 'react-grid-layout';\nimport { z } from 'zod';\nimport { RJSFSchema, UiSchema } from '@rjsf/utils';\n\nconst RSJFTypeSchema: z.ZodType<RJSFSchema> = z.any();\nconst RSJFTypeUiSchema: z.ZodType<UiSchema> = z.any();\nconst ReactElementSchema: z.ZodType<ReactElement> = z.any();\nconst LayoutSchema: z.ZodType<Layout> = z.any();\n\n/**\n * Breakpoint options for <CustomHomepageGridProps/>\n *\n * @public\n */\nexport type Breakpoint = 'xxs' | 'xs' | 'sm' | 'md' | 'lg' | 'xl';\n\n/**\n * Props customizing the <CustomHomepageGrid/> component.\n *\n * @public\n */\nexport type CustomHomepageGridProps = {\n  /**\n   * Children contain all widgets user can configure on their own homepage.\n   */\n  children?: ReactNode;\n  /**\n   * Default layout for the homepage before users have modified it.\n   */\n  config?: LayoutConfiguration[];\n  /**\n   * Title displayed in the header of the grid. If not provided, no title will be shown.\n   */\n  title?: string;\n  /**\n   * Height of grid row in pixels.\n   * @defaultValue 60\n   */\n  rowHeight?: number;\n  /**\n   * Screen width in pixels for different breakpoints.\n   * @defaultValue theme breakpoints\n   */\n  breakpoints?: Record<Breakpoint, number>;\n  /**\n   * Number of grid columns for different breakpoints.\n   * @defaultValue \\{ lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 \\}\n   */\n  cols?: Record<Breakpoint, number>;\n  /**\n   * Grid container padding (x, y) in pixels for all or specific breakpoints.\n   * @defaultValue [0, 0]\n   * @example [10, 10]\n   * @example \\{ lg: [10, 10] \\}\n   */\n  containerPadding?: [number, number] | Record<Breakpoint, [number, number]>;\n  /**\n   * Grid container margin (x, y) in pixels for all or specific breakpoints.\n   * @defaultValue [0, 0]\n   * @example [10, 10]\n   * @example \\{ lg: [10, 10] \\}\n   */\n  containerMargin?: [number, number] | Record<Breakpoint, [number, number]>;\n  /**\n   * Maximum number of rows user can have in the grid.\n   * @defaultValue unlimited\n   */\n  maxRows?: number;\n  /**\n   * Custom style for grid.\n   */\n  style?: CSSProperties;\n  /**\n   * Compaction type of widgets in the grid. This controls where widgets are moved in case\n   * they are overlapping in the grid.\n   */\n  compactType?: 'vertical' | 'horizontal' | null;\n  /**\n   * Controls if widgets can overlap in the grid. If true, grid can be placed one over the other.\n   * @defaultValue false\n   */\n  allowOverlap?: boolean;\n  /**\n   * Controls if widgets can collide with each other. If true, grid items won't change position when being dragged over.\n   * @defaultValue true\n   */\n  preventCollision?: boolean;\n};\n\nexport const LayoutConfigurationSchema = z.object({\n  component: ReactElementSchema,\n  x: z.number().nonnegative('x must be positive number'),\n  y: z.number().nonnegative('y must be positive number'),\n  width: z.number().positive('width must be positive number'),\n  height: z.number().positive('height must be positive number'),\n  movable: z.boolean().optional(),\n  deletable: z.boolean().optional(),\n  resizable: z.boolean().optional(),\n});\n\n/**\n * Layout configuration that can be passed to the custom home page.\n *\n * @public\n */\nexport type LayoutConfiguration = {\n  component: ReactElement | string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  movable?: boolean;\n  deletable?: boolean;\n  resizable?: boolean;\n};\n\nexport const WidgetSchema = z.object({\n  name: z.string(),\n  title: z.string().optional(),\n  description: z.string().optional(),\n  component: ReactElementSchema,\n  width: z.number().positive('width must be positive number').optional(),\n  height: z.number().positive('height must be positive number').optional(),\n  minWidth: z.number().positive('minWidth must be positive number').optional(),\n  maxWidth: z.number().positive('maxWidth must be positive number').optional(),\n  minHeight: z\n    .number()\n    .positive('minHeight must be positive number')\n    .optional(),\n  maxHeight: z\n    .number()\n    .positive('maxHeight must be positive number')\n    .optional(),\n  settingsSchema: RSJFTypeSchema.optional(),\n  uiSchema: RSJFTypeUiSchema.optional(),\n  movable: z.boolean().optional(),\n  deletable: z.boolean().optional(),\n  resizable: z.boolean().optional(),\n});\n\nexport type Widget = z.infer<typeof WidgetSchema>;\n\nconst GridWidgetSchema = z.object({\n  id: z.string(),\n  layout: LayoutSchema,\n  settings: z.record(z.string(), z.any()),\n  movable: z.boolean().optional(),\n  deletable: z.boolean().optional(),\n  resizable: z.boolean().optional(),\n});\n\nexport type GridWidget = z.infer<typeof GridWidgetSchema>;\n\nexport const CustomHomepageGridStateV1Schema = z.object({\n  version: z.literal(1),\n  pages: z.record(z.string(), z.array(GridWidgetSchema)),\n});\n\nexport type CustomHomepageGridStateV1 = z.infer<\n  typeof CustomHomepageGridStateV1Schema\n>;\n"],"names":[],"mappings":"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"}