{"version":3,"file":"plugin.esm.js","sources":["../src/plugin.ts"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n  identityApiRef,\n  storageApiRef,\n} from '@backstage/core-plugin-api';\nimport { createCardExtension } from '@backstage/plugin-home-react';\nimport {\n  ToolkitContentProps,\n  VisitedByTypeProps,\n  FeaturedDocsCardProps,\n  QuickStartCardProps,\n} from './homePageComponents';\nimport { rootRouteRef } from './routes';\nimport { VisitsStorageApi, visitsApiRef } from './api';\nimport { StarredEntitiesProps } from './homePageComponents/StarredEntities/Content';\n\n/** @public */\nexport const homePlugin = createPlugin({\n  id: 'home',\n  apis: [\n    createApiFactory({\n      api: visitsApiRef,\n      deps: {\n        storageApi: storageApiRef,\n        identityApi: identityApiRef,\n      },\n      factory: ({ storageApi, identityApi }) =>\n        VisitsStorageApi.create({ storageApi, identityApi }),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n  },\n});\n\n/** @public */\nexport const HomepageCompositionRoot = homePlugin.provide(\n  createRoutableExtension({\n    name: 'HomepageCompositionRoot',\n    component: () =>\n      import('./components').then(m => m.HomepageCompositionRoot),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/** @public */\nexport const ComponentAccordion = homePlugin.provide(\n  createComponentExtension({\n    name: 'ComponentAccordion',\n    component: {\n      lazy: () =>\n        import('./componentRenderers').then(m => m.ComponentAccordion),\n    },\n  }),\n);\n\n/** @public */\nexport const ComponentTabs = homePlugin.provide(\n  createComponentExtension({\n    name: 'ComponentTabs',\n    component: {\n      lazy: () => import('./componentRenderers').then(m => m.ComponentTabs),\n    },\n  }),\n);\n\n/** @public */\nexport const ComponentTab = homePlugin.provide(\n  createComponentExtension({\n    name: 'ComponentTab',\n    component: {\n      lazy: () => import('./componentRenderers').then(m => m.ComponentTab),\n    },\n  }),\n);\n\n/**\n * A component to display a playful greeting for the user.\n *\n * @public\n */\nexport const WelcomeTitle = homePlugin.provide(\n  createComponentExtension({\n    name: 'WelcomeTitle',\n    component: {\n      lazy: () =>\n        import('./homePageComponents/WelcomeTitle').then(m => m.WelcomeTitle),\n    },\n  }),\n);\n\n/**\n * A component to display a company logo for the user.\n *\n * @public\n */\nexport const HomePageCompanyLogo = homePlugin.provide(\n  createComponentExtension({\n    name: 'CompanyLogo',\n    component: {\n      lazy: () =>\n        import('./homePageComponents/CompanyLogo').then(m => m.CompanyLogo),\n    },\n  }),\n);\n\n/** @public */\nexport const HomePageRandomJoke = homePlugin.provide(\n  createCardExtension<{ defaultCategory?: 'any' | 'programming' }>({\n    name: 'HomePageRandomJoke',\n    title: 'Random Joke',\n    components: () => import('./homePageComponents/RandomJoke'),\n    description: 'Shows a random joke about optional category',\n    layout: {\n      height: { minRows: 4 },\n      width: { minColumns: 3 },\n    },\n    settings: {\n      schema: {\n        title: 'Random Joke settings',\n        type: 'object',\n        properties: {\n          defaultCategory: {\n            title: 'Category',\n            type: 'string',\n            enum: ['any', 'programming', 'dad'],\n            default: 'any',\n          },\n        },\n      },\n    },\n  }),\n);\n\n/**\n * A component to display a list of tools for the user.\n *\n * @public\n */\nexport const HomePageToolkit = homePlugin.provide(\n  createCardExtension<ToolkitContentProps>({\n    name: 'HomePageToolkit',\n    title: 'Toolkit',\n    components: () => import('./homePageComponents/Toolkit'),\n  }),\n);\n\n/**\n * A component to display a list of starred entities for the user.\n *\n * @public\n */\nexport const HomePageStarredEntities = homePlugin.provide(\n  createCardExtension<Partial<StarredEntitiesProps>>({\n    name: 'HomePageStarredEntities',\n    title: 'Your Starred Entities',\n    components: () => import('./homePageComponents/StarredEntities'),\n  }),\n);\n\n/**\n * A component to display a configurable list of clocks for various time zones.\n *\n * @public\n */\nexport const HeaderWorldClock = homePlugin.provide(\n  createComponentExtension({\n    name: 'HeaderWorldClock',\n    component: {\n      lazy: () =>\n        import('./homePageComponents/HeaderWorldClock').then(\n          m => m.HeaderWorldClock,\n        ),\n    },\n  }),\n);\n\n/**\n * Display top visited pages for the homepage\n * @public\n */\nexport const HomePageTopVisited = homePlugin.provide(\n  createCardExtension<Partial<VisitedByTypeProps>>({\n    name: 'HomePageTopVisited',\n    title: 'Top Visited',\n    components: () => import('./homePageComponents/VisitedByType/TopVisited'),\n  }),\n);\n\n/**\n * Display recently visited pages for the homepage\n * @public\n */\nexport const HomePageRecentlyVisited = homePlugin.provide(\n  createCardExtension<Partial<VisitedByTypeProps>>({\n    name: 'HomePageRecentlyVisited',\n    title: 'Recently Visited',\n    components: () =>\n      import('./homePageComponents/VisitedByType/RecentlyVisited'),\n  }),\n);\n\n/**\n * A component to display specific Featured Docs.\n *\n * @public\n */\nexport const FeaturedDocsCard = homePlugin.provide(\n  createCardExtension<FeaturedDocsCardProps>({\n    name: 'FeaturedDocsCard',\n    title: 'Featured Docs',\n    components: () => import('./homePageComponents/FeaturedDocsCard'),\n  }),\n);\n\n/**\n * A component to display Quick Start information.\n *\n * @public\n */\nexport const QuickStartCard = homePlugin.provide(\n  createCardExtension<QuickStartCardProps>({\n    name: 'QuickStartCard',\n    title: 'Quick Start',\n    components: () => import('./homePageComponents/QuickStart'),\n  }),\n);\n"],"names":[],"mappings":"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"}