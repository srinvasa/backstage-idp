import { jsx } from 'react/jsx-runtime';
import { useApi, identityApiRef, alertApiRef } from '@backstage/core-plugin-api';
import Tooltip from '@material-ui/core/Tooltip';
import Typography from '@material-ui/core/Typography';
import { useMemo, useEffect } from 'react';
import useAsync from 'react-use/esm/useAsync';
import { getTimeBasedGreeting } from './timeUtil.esm.js';

const WelcomeTitle = ({
  language,
  variant = "inherit"
}) => {
  const identityApi = useApi(identityApiRef);
  const alertApi = useApi(alertApiRef);
  const greeting = useMemo(() => getTimeBasedGreeting(language), [language]);
  const { value: profile, error } = useAsync(
    () => identityApi.getProfileInfo()
  );
  useEffect(() => {
    if (error) {
      alertApi.post({
        message: `Failed to load user identity: ${error}`,
        severity: "error"
      });
    }
  }, [error, alertApi]);
  return /* @__PURE__ */ jsx(Tooltip, { title: greeting.language, children: /* @__PURE__ */ jsx(Typography, { component: "span", variant, children: `${greeting.greeting}${profile?.displayName ? `, ${profile?.displayName}` : ""}!` }) });
};

export { WelcomeTitle };
//# sourceMappingURL=WelcomeTitle.esm.js.map
