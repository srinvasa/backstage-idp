{"version":3,"file":"Content.esm.js","sources":["../../../src/homePageComponents/FeaturedDocsCard/Content.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { JSX } from 'react';\nimport useAsync from 'react-use/esm/useAsync';\nimport {\n  LinkButton,\n  EmptyState,\n  Link,\n  Progress,\n  ErrorPanel,\n} from '@backstage/core-components';\nimport {\n  catalogApiRef,\n  EntityDisplayName,\n} from '@backstage/plugin-catalog-react';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { EntityFilterQuery } from '@backstage/catalog-client';\n\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { useTranslationRef } from '@backstage/frontend-plugin-api';\nimport { homeTranslationRef } from '../../translation';\n\n/**\n * Props customizing the <FeaturedDocsCard/> component.\n *\n * @public\n */\nexport type FeaturedDocsCardProps = {\n  /** The entity filter used to display only the intended item/s */\n  filter: EntityFilterQuery;\n  /** An optional ReactNode for empty states */\n  emptyState?: JSX.Element;\n  /** An optional linkDestination to set for the Featured Doc  */\n  linkDestination?: string;\n  /** An optional limit to set for link destination  */\n  responseLimit?: number;\n  /** An optional string to customize sublink text */\n  subLinkText?: string;\n};\n\n/** @public */\nexport type FeaturedDocsCardClassKey =\n  | 'docDescription'\n  | 'docSubLink'\n  | 'docsTitleLink';\n\nconst useStyles = makeStyles(\n  theme => ({\n    docDescription: {\n      fontSize: theme.typography.body1.fontSize,\n      fontWeight: theme.typography.body1.fontWeight,\n      marginBottom: theme.spacing(2),\n      marginTop: theme.spacing(2),\n    },\n    docSubLink: {\n      fontSize: theme.typography.subtitle1.fontSize,\n      fontWeight: theme.typography.subtitle1.fontWeight,\n      lineHeight: theme.typography.subtitle1.lineHeight,\n    },\n    docsTitleLink: {\n      fontSize: theme.typography.h6.fontSize,\n      fontWeight: theme.typography.h6.fontWeight,\n      lineHeight: theme.typography.h6.lineHeight,\n    },\n  }),\n  { name: 'HomeFeaturedDocsCard' },\n);\n\n/**\n * A component to display specific Featured Docs.\n *\n * @public\n */\nexport const Content = (props: FeaturedDocsCardProps): JSX.Element => {\n  const { emptyState, filter, linkDestination, responseLimit, subLinkText } =\n    props;\n  const { t } = useTranslationRef(homeTranslationRef);\n  const linkText = subLinkText || t('featuredDocsCard.learnMoreTitle');\n  const styles = useStyles();\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    value: entities,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const response = await catalogApi.getEntities({\n      filter: filter,\n      limit: responseLimit || 10,\n    });\n    return response.items;\n  });\n\n  if (loading) {\n    return <Progress />;\n  }\n  if (error) {\n    return <ErrorPanel error={error} />;\n  }\n\n  return entities?.length ? (\n    <>\n      {entities.map(d => (\n        <div\n          key={`${d.metadata.name}-${d.kind}-${d.metadata.namespace}`}\n          data-testid=\"docs-card-content\"\n        >\n          <Link\n            className={styles.docsTitleLink}\n            data-testid=\"docs-card-title\"\n            to={\n              linkDestination ||\n              `/docs/${d.metadata.namespace || 'default'}/${d.kind}/${\n                d.metadata.name\n              }/`\n            }\n          >\n            <EntityDisplayName entityRef={stringifyEntityRef(d)} />\n          </Link>\n          {d.metadata.description && (\n            <Typography className={styles.docDescription}>\n              {d.metadata.description}\n            </Typography>\n          )}\n          <Link\n            className={styles.docSubLink}\n            data-testid=\"docs-card-sub-link\"\n            to={\n              linkDestination ||\n              `/docs/${d.metadata.namespace || 'default'}/${d.kind}/${\n                d.metadata.name\n              }/`\n            }\n          >\n            {linkText}\n          </Link>\n        </div>\n      ))}\n    </>\n  ) : (\n    emptyState || (\n      <EmptyState\n        missing=\"data\"\n        title={t('featuredDocsCard.empty.title')}\n        description={t('featuredDocsCard.empty.description')}\n        action={\n          <LinkButton\n            to=\"https://backstage.io/docs/features/techdocs/getting-started\"\n            variant=\"contained\"\n          >\n            {t('featuredDocsCard.empty.learnMoreLinkTitle')}\n          </LinkButton>\n        }\n      />\n    )\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;;AA8DA,MAAM,SAAA,GAAY,UAAA;AAAA,EAChB,CAAA,KAAA,MAAU;AAAA,IACR,cAAA,EAAgB;AAAA,MACd,QAAA,EAAU,KAAA,CAAM,UAAA,CAAW,KAAA,CAAM,QAAA;AAAA,MACjC,UAAA,EAAY,KAAA,CAAM,UAAA,CAAW,KAAA,CAAM,UAAA;AAAA,MACnC,YAAA,EAAc,KAAA,CAAM,OAAA,CAAQ,CAAC,CAAA;AAAA,MAC7B,SAAA,EAAW,KAAA,CAAM,OAAA,CAAQ,CAAC;AAAA,KAC5B;AAAA,IACA,UAAA,EAAY;AAAA,MACV,QAAA,EAAU,KAAA,CAAM,UAAA,CAAW,SAAA,CAAU,QAAA;AAAA,MACrC,UAAA,EAAY,KAAA,CAAM,UAAA,CAAW,SAAA,CAAU,UAAA;AAAA,MACvC,UAAA,EAAY,KAAA,CAAM,UAAA,CAAW,SAAA,CAAU;AAAA,KACzC;AAAA,IACA,aAAA,EAAe;AAAA,MACb,QAAA,EAAU,KAAA,CAAM,UAAA,CAAW,EAAA,CAAG,QAAA;AAAA,MAC9B,UAAA,EAAY,KAAA,CAAM,UAAA,CAAW,EAAA,CAAG,UAAA;AAAA,MAChC,UAAA,EAAY,KAAA,CAAM,UAAA,CAAW,EAAA,CAAG;AAAA;AAClC,GACF,CAAA;AAAA,EACA,EAAE,MAAM,sBAAA;AACV,CAAA;AAOO,MAAM,OAAA,GAAU,CAAC,KAAA,KAA8C;AACpE,EAAA,MAAM,EAAE,UAAA,EAAY,MAAA,EAAQ,eAAA,EAAiB,aAAA,EAAe,aAAY,GACtE,KAAA;AACF,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,kBAAkB,CAAA;AAClD,EAAA,MAAM,QAAA,GAAW,WAAA,IAAe,CAAA,CAAE,iCAAiC,CAAA;AACnE,EAAA,MAAM,SAAS,SAAA,EAAU;AACzB,EAAA,MAAM,UAAA,GAAa,OAAO,aAAa,CAAA;AACvC,EAAA,MAAM;AAAA,IACJ,KAAA,EAAO,QAAA;AAAA,IACP,OAAA;AAAA,IACA;AAAA,GACF,GAAI,SAAS,YAAY;AACvB,IAAA,MAAM,QAAA,GAAW,MAAM,UAAA,CAAW,WAAA,CAAY;AAAA,MAC5C,MAAA;AAAA,MACA,OAAO,aAAA,IAAiB;AAAA,KACzB,CAAA;AACD,IAAA,OAAO,QAAA,CAAS,KAAA;AAAA,EAClB,CAAC,CAAA;AAED,EAAA,IAAI,OAAA,EAAS;AACX,IAAA,2BAAQ,QAAA,EAAA,EAAS,CAAA;AAAA,EACnB;AACA,EAAA,IAAI,KAAA,EAAO;AACT,IAAA,uBAAO,GAAA,CAAC,cAAW,KAAA,EAAc,CAAA;AAAA,EACnC;AAEA,EAAA,OAAO,QAAA,EAAU,MAAA,mBACf,GAAA,CAAA,QAAA,EAAA,EACG,QAAA,EAAA,QAAA,CAAS,IAAI,CAAA,CAAA,qBACZ,IAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MAEC,aAAA,EAAY,mBAAA;AAAA,MAEZ,QAAA,EAAA;AAAA,wBAAA,GAAA;AAAA,UAAC,IAAA;AAAA,UAAA;AAAA,YACC,WAAW,MAAA,CAAO,aAAA;AAAA,YAClB,aAAA,EAAY,iBAAA;AAAA,YACZ,EAAA,EACE,eAAA,IACA,CAAA,MAAA,EAAS,CAAA,CAAE,QAAA,CAAS,SAAA,IAAa,SAAS,CAAA,CAAA,EAAI,CAAA,CAAE,IAAI,CAAA,CAAA,EAClD,CAAA,CAAE,SAAS,IACb,CAAA,CAAA,CAAA;AAAA,YAGF,QAAA,kBAAA,GAAA,CAAC,iBAAA,EAAA,EAAkB,SAAA,EAAW,kBAAA,CAAmB,CAAC,CAAA,EAAG;AAAA;AAAA,SACvD;AAAA,QACC,CAAA,CAAE,QAAA,CAAS,WAAA,oBACV,GAAA,CAAC,UAAA,EAAA,EAAW,WAAW,MAAA,CAAO,cAAA,EAC3B,QAAA,EAAA,CAAA,CAAE,QAAA,CAAS,WAAA,EACd,CAAA;AAAA,wBAEF,GAAA;AAAA,UAAC,IAAA;AAAA,UAAA;AAAA,YACC,WAAW,MAAA,CAAO,UAAA;AAAA,YAClB,aAAA,EAAY,oBAAA;AAAA,YACZ,EAAA,EACE,eAAA,IACA,CAAA,MAAA,EAAS,CAAA,CAAE,QAAA,CAAS,SAAA,IAAa,SAAS,CAAA,CAAA,EAAI,CAAA,CAAE,IAAI,CAAA,CAAA,EAClD,CAAA,CAAE,SAAS,IACb,CAAA,CAAA,CAAA;AAAA,YAGD,QAAA,EAAA;AAAA;AAAA;AACH;AAAA,KAAA;AAAA,IA/BK,CAAA,EAAG,CAAA,CAAE,QAAA,CAAS,IAAI,CAAA,CAAA,EAAI,EAAE,IAAI,CAAA,CAAA,EAAI,CAAA,CAAE,QAAA,CAAS,SAAS,CAAA;AAAA,GAiC5D,CAAA,EACH,CAAA,GAEA,UAAA,oBACE,GAAA;AAAA,IAAC,UAAA;AAAA,IAAA;AAAA,MACC,OAAA,EAAQ,MAAA;AAAA,MACR,KAAA,EAAO,EAAE,8BAA8B,CAAA;AAAA,MACvC,WAAA,EAAa,EAAE,oCAAoC,CAAA;AAAA,MACnD,MAAA,kBACE,GAAA;AAAA,QAAC,UAAA;AAAA,QAAA;AAAA,UACC,EAAA,EAAG,6DAAA;AAAA,UACH,OAAA,EAAQ,WAAA;AAAA,UAEP,YAAE,2CAA2C;AAAA;AAAA;AAChD;AAAA,GAEJ;AAGN;;;;"}