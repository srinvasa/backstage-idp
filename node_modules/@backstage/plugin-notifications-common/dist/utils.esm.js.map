{"version":3,"file":"utils.esm.js","sources":["../src/utils.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NotificationSettings } from './types';\n\n/** @public */\nexport const isNotificationsEnabledFor = (\n  settings: NotificationSettings,\n  channelId: string,\n  originId: string,\n  topicId: string | null,\n) => {\n  const channel = settings.channels.find(c => c.id === channelId);\n  if (!channel) {\n    return true;\n  }\n\n  const origin = channel.origins.find(o => o.id === originId);\n  if (!origin) {\n    // If no origin is found, use channel's enabled flag (defaults to true if not set)\n    return channel.enabled ?? true;\n  }\n\n  // If topic is specified, check topic-level setting\n  if (topicId !== null) {\n    const topic = origin.topics?.find(t => t.id === topicId);\n    if (topic) {\n      return topic.enabled;\n    }\n    // No explicit topic setting, check origin\n    return origin.enabled;\n  }\n\n  // No topic specified, check origin-level setting\n  return origin.enabled;\n};\n"],"names":[],"mappings":"AAkBO,MAAM,yBAAA,GAA4B,CACvC,QAAA,EACA,SAAA,EACA,UACA,OAAA,KACG;AACH,EAAA,MAAM,UAAU,QAAA,CAAS,QAAA,CAAS,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,OAAO,SAAS,CAAA;AAC9D,EAAA,IAAI,CAAC,OAAA,EAAS;AACZ,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,MAAM,SAAS,OAAA,CAAQ,OAAA,CAAQ,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,OAAO,QAAQ,CAAA;AAC1D,EAAA,IAAI,CAAC,MAAA,EAAQ;AAEX,IAAA,OAAO,QAAQ,OAAA,IAAW,IAAA;AAAA,EAC5B;AAGA,EAAA,IAAI,YAAY,IAAA,EAAM;AACpB,IAAA,MAAM,QAAQ,MAAA,CAAO,MAAA,EAAQ,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,OAAO,OAAO,CAAA;AACvD,IAAA,IAAI,KAAA,EAAO;AACT,MAAA,OAAO,KAAA,CAAM,OAAA;AAAA,IACf;AAEA,IAAA,OAAO,MAAA,CAAO,OAAA;AAAA,EAChB;AAGA,EAAA,OAAO,MAAA,CAAO,OAAA;AAChB;;;;"}