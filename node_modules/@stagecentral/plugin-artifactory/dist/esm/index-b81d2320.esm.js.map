{"version":3,"file":"index-b81d2320.esm.js","sources":["../../src/hooks/useArtifactoryPlugin.ts","../../src/components/ArtifactoryComponent/ArtifactoryComponent.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { ArtifactoryPluginApiRef } from '../api/types';\nimport { Entity } from '@backstage/catalog-model';\nimport { Artifact } from '../api/types';\n\n\nexport const useArtifactoryObjects = (entity: Entity ) => {\n    const [loading, setLoading] = useState<boolean>(true);\n    const [error, setError] = useState<boolean>(false);\n    const [artifacts, setArtifacts] = useState<Artifact[]>([]);\n    const myPluginApi = useApi(ArtifactoryPluginApiRef);\n    const getObjects = async () => {\n      try {\n        const artifacts = await myPluginApi.getArtifacts(entity);\n        setArtifacts(artifacts);\n      } catch (e) {\n        setError(true);\n      } finally {\n        setLoading(false);\n      }\n    }\n    useEffect(() => {\n      getObjects();\n    });\n    return {\n      error,\n      loading,\n      artifacts: artifacts,\n    }\n};\n","import React from 'react';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { useArtifactoryObjects } from '../../hooks/useArtifactoryPlugin'\nimport { Table, TableColumn } from '@backstage/core-components';\nimport { Artifact } from '../../api/types';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\ntype DenseTableProps = {\n  artifacts: Artifact[];\n};\n\nexport const DenseTable = ({ artifacts }: DenseTableProps) => {\n  const configApi = useApi(configApiRef);\n  const jfrogUrl = configApi.getString('artifactory.url') + '/artifactory';\n  const columns: TableColumn[] = [\n    { title: 'Name', field: 'name' },\n    { title: 'path', field: 'path' },\n    { title: 'repo', field: 'repo' },\n    { title: 'url', field: 'url', render: (row: any) => <a href={`${jfrogUrl}/${row.repo}/${row.path}/${row.name}`}>{`${jfrogUrl}/${row.repo}/${row.path}/${row.name}`}</a> },\n  ];\n\n  const data = artifacts.map(artifact => {\n    return {\n      name: artifact.name,\n      path: artifact.path,\n      repo: artifact.repo,\n      url: `${jfrogUrl}/artifactory/${artifact.repo}/${artifact.path}/${artifact.name}`\n    };\n  });\n\n  return (\n    <Table\n      title={`Artifact List (fetching data from ${jfrogUrl})`}\n      options={{ search: false, paging: false }}\n      columns={columns}\n      data={data}\n    />\n  );\n};\n\nexport const ArtifactoryComponent = () => {\n  const { entity } = useEntity();\n  const { error, loading, artifacts } = useArtifactoryObjects(entity);\n  if (loading) {\n    return <div>Loading</div>;\n  }\n  if (error) {\n    return <div>Error</div>;\n  }\n  return <DenseTable artifacts={artifacts || []} />;\n\n};\n"],"names":["artifacts"],"mappings":"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"}