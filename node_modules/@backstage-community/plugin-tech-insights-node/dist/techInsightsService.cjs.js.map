{"version":3,"file":"techInsightsService.cjs.js","sources":["../src/techInsightsService.ts"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { TechInsightsClient } from '@backstage-community/plugin-tech-insights-common/client';\nimport {\n  CheckResult,\n  BulkCheckResponse,\n  FactSchema,\n  Check,\n  InsightFacts,\n} from '@backstage-community/plugin-tech-insights-common';\nimport {\n  createServiceFactory,\n  createServiceRef,\n  coreServices,\n} from '@backstage/backend-plugin-api';\nimport { CompoundEntityRef } from '@backstage/catalog-model';\n\n/**\n * A service that provides access to tech insights data.\n *\n * @public\n */\nexport interface TechInsightsService {\n  getFacts(entity: CompoundEntityRef, facts: string[]): Promise<InsightFacts>;\n  getAllChecks(): Promise<Check[]>;\n  getFactSchemas(): Promise<FactSchema[]>;\n  runChecks(\n    entityParams: CompoundEntityRef,\n    checks?: string[],\n  ): Promise<CheckResult[]>;\n  runBulkChecks(\n    entities: CompoundEntityRef[],\n    checks?: Check[],\n  ): Promise<BulkCheckResponse>;\n}\n\n/**\n * A reference to the tech insights service.\n *\n * @public\n */\nexport const techInsightsServiceRef = createServiceRef<TechInsightsService>({\n  id: 'tech-insights-client',\n  defaultFactory: async service =>\n    createServiceFactory({\n      service,\n      deps: {\n        auth: coreServices.auth,\n        discoveryApi: coreServices.discovery,\n      },\n      async factory({ auth, discoveryApi }) {\n        return new TechInsightsClient({\n          discoveryApi,\n          identityApi: auth,\n        });\n      },\n    }),\n});\n"],"names":["createServiceRef","createServiceFactory","coreServices","TechInsightsClient"],"mappings":";;;;;AAuDO,MAAM,yBAAyBA,iCAAsC,CAAA;AAAA,EAC1E,EAAI,EAAA,sBAAA;AAAA,EACJ,cAAA,EAAgB,OAAM,OAAA,KACpBC,qCAAqB,CAAA;AAAA,IACnB,OAAA;AAAA,IACA,IAAM,EAAA;AAAA,MACJ,MAAMC,6BAAa,CAAA,IAAA;AAAA,MACnB,cAAcA,6BAAa,CAAA;AAAA,KAC7B;AAAA,IACA,MAAM,OAAA,CAAQ,EAAE,IAAA,EAAM,cAAgB,EAAA;AACpC,MAAA,OAAO,IAAIC,yBAAmB,CAAA;AAAA,QAC5B,YAAA;AAAA,QACA,WAAa,EAAA;AAAA,OACd,CAAA;AAAA;AACH,GACD;AACL,CAAC;;;;"}