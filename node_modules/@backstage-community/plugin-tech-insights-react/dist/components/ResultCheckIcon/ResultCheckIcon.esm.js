import { jsxs, Fragment, jsx } from 'react/jsx-runtime';
import { useState } from 'react';
import { useApi } from '@backstage/core-plugin-api';
import IconButton from '@material-ui/core/IconButton';
import Alert from '@material-ui/lab/Alert';
import { techInsightsApiRef } from '../../api/TechInsightsApi.esm.js';
import '@backstage-community/plugin-tech-insights-common/client';
import '@material-ui/icons/CheckCircleOutline';
import '@material-ui/icons/ErrorOutline';
import { ResultLinksMenu } from '../ResultLinksMenu/ResultLinksMenu.esm.js';

const ResultCheckIcon = (props) => {
  const {
    result,
    entity,
    disableLinksMenu,
    component,
    componentProps,
    missingRendererComponent = /* @__PURE__ */ jsx(Alert, { severity: "error", children: "Unknown type." })
  } = props;
  const api = useApi(techInsightsApiRef);
  const checkResultRenderer = props.checkResultRenderer ?? api.getCheckResultRenderers([result.check.type])[0];
  const [menu, setMenu] = useState();
  const iconComponent = checkResultRenderer?.component(result);
  const onClick = (event) => {
    menu?.open(event.currentTarget);
  };
  const wrapActions = (inner) => {
    if (!menu) {
      if (component) {
        const Component = component;
        return /* @__PURE__ */ jsx(Component, { ...componentProps, children: inner });
      }
      return inner;
    }
    if (component) {
      const Component = component;
      return /* @__PURE__ */ jsx(Component, { ...componentProps, onClick, children: /* @__PURE__ */ jsx(IconButton, { edge: "end", "aria-label": "icon", children: inner }) });
    }
    return /* @__PURE__ */ jsx(IconButton, { edge: "end", "aria-label": "icon", onClick, children: inner });
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    !disableLinksMenu && /* @__PURE__ */ jsx(ResultLinksMenu, { result, entity, setMenu }),
    wrapActions(iconComponent ?? missingRendererComponent)
  ] });
};

export { ResultCheckIcon };
//# sourceMappingURL=ResultCheckIcon.esm.js.map
