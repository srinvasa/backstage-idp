{"version":3,"file":"plugin.esm.js","sources":["../src/plugin.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Entity } from '@backstage/catalog-model';\nimport {\n  configApiRef,\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nimport { JfrogArtifactoryApiClient, jfrogArtifactoryApiRef } from './api';\nimport { JFROG_ARTIFACTORY_ANNOTATION_IMAGE_NAME } from './components/useJfrogArtifactoryAppData';\nimport { rootRouteRef } from './routes';\n\n/**\n * @public\n */\nexport const jfrogArtifactoryPlugin = createPlugin({\n  id: 'jfrog-artifactory',\n  routes: {\n    root: rootRouteRef,\n  },\n  apis: [\n    createApiFactory({\n      api: jfrogArtifactoryApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        configApi: configApiRef,\n        identityApi: identityApiRef,\n      },\n      factory: ({ discoveryApi, configApi, identityApi }) =>\n        new JfrogArtifactoryApiClient({ discoveryApi, configApi, identityApi }),\n    }),\n  ],\n});\n\n/**\n * @public\n */\nexport const JfrogArtifactoryPage = jfrogArtifactoryPlugin.provide(\n  createComponentExtension({\n    name: 'JfrogArtifactoryPage',\n    component: {\n      lazy: () =>\n        import('./components/JfrogArtifactoryDashboardPage').then(\n          m => m.JfrogArtifactoryDashboardPage,\n        ),\n    },\n  }),\n);\n\n/**\n * @public\n */\nexport const isJfrogArtifactoryAvailable = (entity: Entity) =>\n  Boolean(\n    entity?.metadata.annotations?.[JFROG_ARTIFACTORY_ANNOTATION_IMAGE_NAME],\n  );\n"],"names":[],"mappings":";;;;;AAgCO,MAAM,yBAAyB,YAAa,CAAA;AAAA,EACjD,EAAI,EAAA,mBAAA;AAAA,EACJ,MAAQ,EAAA;AAAA,IACN,IAAM,EAAA;AAAA,GACR;AAAA,EACA,IAAM,EAAA;AAAA,IACJ,gBAAiB,CAAA;AAAA,MACf,GAAK,EAAA,sBAAA;AAAA,MACL,IAAM,EAAA;AAAA,QACJ,YAAc,EAAA,eAAA;AAAA,QACd,SAAW,EAAA,YAAA;AAAA,QACX,WAAa,EAAA;AAAA,OACf;AAAA,MACA,OAAS,EAAA,CAAC,EAAE,YAAA,EAAc,SAAW,EAAA,WAAA,EACnC,KAAA,IAAI,yBAA0B,CAAA,EAAE,YAAc,EAAA,SAAA,EAAW,aAAa;AAAA,KACzE;AAAA;AAEL,CAAC;AAKM,MAAM,uBAAuB,sBAAuB,CAAA,OAAA;AAAA,EACzD,wBAAyB,CAAA;AAAA,IACvB,IAAM,EAAA,sBAAA;AAAA,IACN,SAAW,EAAA;AAAA,MACT,IAAM,EAAA,MACJ,OAAO,yDAA4C,CAAE,CAAA,IAAA;AAAA,QACnD,OAAK,CAAE,CAAA;AAAA;AACT;AACJ,GACD;AACH;AAKa,MAAA,2BAAA,GAA8B,CAAC,MAC1C,KAAA,OAAA;AAAA,EACE,MAAA,EAAQ,QAAS,CAAA,WAAA,GAAc,uCAAuC;AACxE;;;;"}