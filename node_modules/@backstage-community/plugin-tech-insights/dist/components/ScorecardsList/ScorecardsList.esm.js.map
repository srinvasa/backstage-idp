{"version":3,"file":"ScorecardsList.esm.js","sources":["../../../src/components/ScorecardsList/ScorecardsList.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CheckResult } from '@backstage-community/plugin-tech-insights-common';\nimport { MarkdownContent } from '@backstage/core-components';\nimport { Entity } from '@backstage/catalog-model';\nimport {\n  ResultCheckIcon,\n  techInsightsApiRef,\n} from '@backstage-community/plugin-tech-insights-react';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst useStyles = makeStyles(theme => ({\n  listItemText: {\n    paddingRight: theme.spacing(0.5),\n  },\n}));\nconst itemTooltip = (\n  children: React.ReactElement,\n  title: string | NonNullable<React.ReactNode>,\n  enabled?: boolean,\n) => (enabled ? <Tooltip title={title}>{children}</Tooltip> : children);\n\nexport const ScorecardsList = (props: {\n  checkResults: CheckResult[];\n  entity?: Entity;\n  dense?: boolean;\n  hideDescription?: boolean;\n}) => {\n  const { checkResults, entity, dense, hideDescription } = props;\n\n  const classes = useStyles();\n  const api = useApi(techInsightsApiRef);\n\n  const types = [...new Set(checkResults.map(({ check }) => check.type))];\n  const checkResultRenderers = api.getCheckResultRenderers(types);\n\n  return (\n    <List dense={dense} disablePadding>\n      {checkResults.map((result, index) => {\n        const checkResultRenderer = checkResultRenderers.find(\n          renderer => renderer.type === result.check.type,\n        );\n        const renderer = checkResultRenderer?.description;\n        const description = renderer ? (\n          renderer(result)\n        ) : (\n          <MarkdownContent content={result.check.description} />\n        );\n\n        return itemTooltip(\n          <ListItem key={result.check.id} disableGutters>\n            <ListItemText\n              key={index}\n              primary={result.check.name}\n              {...(!props.hideDescription\n                ? {\n                    secondary: description,\n                  }\n                : {})}\n              className={classes.listItemText}\n            />\n            <ResultCheckIcon\n              result={result}\n              entity={entity}\n              checkResultRenderer={checkResultRenderer}\n            />\n          </ListItem>,\n          description,\n          hideDescription,\n        );\n      })}\n    </List>\n  );\n};\n"],"names":["renderer"],"mappings":";;;;;;;;;;AA8BA,MAAM,SAAA,GAAY,WAAW,CAAU,KAAA,MAAA;AAAA,EACrC,YAAc,EAAA;AAAA,IACZ,YAAA,EAAc,KAAM,CAAA,OAAA,CAAQ,GAAG;AAAA;AAEnC,CAAE,CAAA,CAAA;AACF,MAAM,WAAA,GAAc,CAClB,QAAA,EACA,KACA,EAAA,OAAA,KACI,0BAAW,GAAA,CAAA,OAAA,EAAA,EAAQ,KAAe,EAAA,QAAA,EAAS,CAAa,GAAA,QAAA;AAEjD,MAAA,cAAA,GAAiB,CAAC,KAKzB,KAAA;AACJ,EAAA,MAAM,EAAE,YAAA,EAAc,MAAQ,EAAA,KAAA,EAAO,iBAAoB,GAAA,KAAA;AAEzD,EAAA,MAAM,UAAU,SAAU,EAAA;AAC1B,EAAM,MAAA,GAAA,GAAM,OAAO,kBAAkB,CAAA;AAErC,EAAA,MAAM,KAAQ,GAAA,CAAC,GAAG,IAAI,IAAI,YAAa,CAAA,GAAA,CAAI,CAAC,EAAE,KAAM,EAAA,KAAM,KAAM,CAAA,IAAI,CAAC,CAAC,CAAA;AACtE,EAAM,MAAA,oBAAA,GAAuB,GAAI,CAAA,uBAAA,CAAwB,KAAK,CAAA;AAE9D,EACE,uBAAA,GAAA,CAAC,QAAK,KAAc,EAAA,cAAA,EAAc,MAC/B,QAAa,EAAA,YAAA,CAAA,GAAA,CAAI,CAAC,MAAA,EAAQ,KAAU,KAAA;AACnC,IAAA,MAAM,sBAAsB,oBAAqB,CAAA,IAAA;AAAA,MAC/C,CAAAA,SAAAA,KAAYA,SAAS,CAAA,IAAA,KAAS,OAAO,KAAM,CAAA;AAAA,KAC7C;AACA,IAAA,MAAM,WAAW,mBAAqB,EAAA,WAAA;AACtC,IAAM,MAAA,WAAA,GAAc,QAClB,GAAA,QAAA,CAAS,MAAM,CAAA,uBAEd,eAAgB,EAAA,EAAA,OAAA,EAAS,MAAO,CAAA,KAAA,CAAM,WAAa,EAAA,CAAA;AAGtD,IAAO,OAAA,WAAA;AAAA,sBACL,IAAA,CAAC,QAA+B,EAAA,EAAA,cAAA,EAAc,IAC5C,EAAA,QAAA,EAAA;AAAA,wBAAA,GAAA;AAAA,UAAC,YAAA;AAAA,UAAA;AAAA,YAEC,OAAA,EAAS,OAAO,KAAM,CAAA,IAAA;AAAA,YACrB,GAAI,CAAC,KAAA,CAAM,eACR,GAAA;AAAA,cACE,SAAW,EAAA;AAAA,gBAEb,EAAC;AAAA,YACL,WAAW,OAAQ,CAAA;AAAA,WAAA;AAAA,UAPd;AAAA,SAQP;AAAA,wBACA,GAAA;AAAA,UAAC,eAAA;AAAA,UAAA;AAAA,YACC,MAAA;AAAA,YACA,MAAA;AAAA,YACA;AAAA;AAAA;AACF,OAfa,EAAA,EAAA,MAAA,CAAO,MAAM,EAgB5B,CAAA;AAAA,MACA,WAAA;AAAA,MACA;AAAA,KACF;AAAA,GACD,CACH,EAAA,CAAA;AAEJ;;;;"}