{"version":3,"file":"Filters.esm.js","sources":["../../../src/components/ScorecardsPage/Filters.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Check } from '@backstage-community/plugin-tech-insights-common';\nimport Typography from '@material-ui/core/Typography';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport TextField from '@material-ui/core/TextField';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { ErrorPanel } from '@backstage/core-components';\nimport { techInsightsApiRef } from '@backstage-community/plugin-tech-insights-react';\n\nconst useStyles = makeStyles({\n  fullWidth: { width: '100%' },\n  boxLabel: {\n    width: '100%',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n  },\n});\n\nconst FixedWidthFormControlLabel = withStyles(_theme => ({\n  label: {\n    width: '100%',\n  },\n  root: {\n    width: '90%',\n  },\n}))(FormControlLabel);\n\nconst icon = <CheckBoxOutlineBlankIcon fontSize=\"small\" />;\nconst checkedIcon = <CheckBoxIcon fontSize=\"small\" />;\n\nfunction RenderOptionLabel(props: { check: Check; isSelected: boolean }) {\n  const classes = useStyles();\n  const { check, isSelected } = props;\n  return (\n    <Box className={classes.fullWidth}>\n      <FixedWidthFormControlLabel\n        className={classes.fullWidth}\n        control={\n          <Checkbox\n            icon={icon}\n            checkedIcon={checkedIcon}\n            checked={isSelected}\n          />\n        }\n        onClick={event => event.preventDefault()}\n        label={\n          <Tooltip title={check.id}>\n            <Box display=\"flex\" alignItems=\"center\">\n              <Box className={classes.boxLabel}>\n                <Typography noWrap>{check.name}</Typography>\n              </Box>\n            </Box>\n          </Tooltip>\n        }\n      />\n    </Box>\n  );\n}\n\nconst withResultsOptions = [\n  { label: 'Yes', value: true },\n  { label: 'No', value: false },\n];\n\n/** public **/\nexport type FiltersProps = {\n  checksChanged: (checks: Check[]) => void;\n  withResultsChanged: (withResults: boolean) => void;\n};\n\nexport const Filters = (props: FiltersProps) => {\n  const { checksChanged, withResultsChanged } = props;\n  const api = useApi(techInsightsApiRef);\n\n  const { value, loading, error } = useAsync(async () => {\n    return api.getAllChecks();\n  }, [api]);\n\n  if (error) {\n    return <ErrorPanel error={error} />;\n  }\n\n  return (\n    <>\n      <Box pb={1} pt={1}>\n        <Typography variant=\"button\" component=\"label\">\n          Checks\n          <Autocomplete\n            multiple\n            disableCloseOnSelect\n            options={value ?? []}\n            loading={loading}\n            getOptionLabel={o => o.name}\n            onChange={(_: object, changedChecks) => {\n              checksChanged(changedChecks);\n            }}\n            filterOptions={x => x}\n            renderOption={(check, { selected }) => {\n              return <RenderOptionLabel check={check} isSelected={selected} />;\n            }}\n            size=\"small\"\n            popupIcon={<ExpandMoreIcon />}\n            renderInput={params => <TextField {...params} variant=\"outlined\" />}\n          />\n        </Typography>\n      </Box>\n      <Box pb={1} pt={1}>\n        <Typography variant=\"button\" component=\"label\">\n          Only with results\n          <Autocomplete\n            defaultValue={withResultsOptions[0]}\n            options={withResultsOptions}\n            getOptionLabel={o => o.label}\n            onChange={(_: object, selectedItem) => {\n              if (selectedItem) {\n                withResultsChanged(selectedItem.value);\n              }\n            }}\n            disableClearable\n            size=\"small\"\n            popupIcon={<ExpandMoreIcon />}\n            renderInput={params => <TextField {...params} variant=\"outlined\" />}\n          />\n        </Typography>\n      </Box>\n    </>\n  );\n};\n"],"names":[],"mappings":"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"}