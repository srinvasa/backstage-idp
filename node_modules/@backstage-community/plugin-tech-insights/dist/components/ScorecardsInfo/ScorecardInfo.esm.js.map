{"version":3,"file":"ScorecardInfo.esm.js","sources":["../../../src/components/ScorecardsInfo/ScorecardInfo.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ReactElement, ReactNode } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CheckResult } from '@backstage-community/plugin-tech-insights-common';\nimport Alert from '@material-ui/lab/Alert';\nimport { ScorecardsList } from '../ScorecardsList';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { Entity } from '@backstage/catalog-model';\nimport { MarkdownContent } from '@backstage/core-components';\nimport { techInsightsApiRef } from '@backstage-community/plugin-tech-insights-react';\n\nconst useStyles = makeStyles(theme => ({\n  subheader: {\n    paddingLeft: theme.spacing(0.5),\n  },\n  accordionHeader: {\n    borderBottom: `1px solid ${theme.palette.border}`,\n  },\n  accordionHeaderContent: {\n    margin: `${theme.spacing(2)}px 0 !important`,\n  },\n  accordionDetails: {\n    margin: 0,\n    paddingBottom: 0,\n  },\n}));\n\nconst infoAccordion = (\n  title: ReactNode,\n  children: ReactNode,\n  classes: ReturnType<typeof useStyles>,\n  expanded: boolean,\n  summary?: string,\n) => (\n  <Accordion defaultExpanded={expanded}>\n    <AccordionSummary\n      expandIcon={<ExpandMoreIcon />}\n      className={classes.accordionHeader}\n      classes={{\n        content: classes.accordionHeaderContent,\n      }}\n    >\n      <Grid container justifyContent=\"space-between\" alignItems=\"center\">\n        <Grid item>\n          <Typography variant=\"h5\">{title}</Typography>\n        </Grid>\n        <Grid item>\n          <Typography>{summary}</Typography>\n        </Grid>\n      </Grid>\n    </AccordionSummary>\n    <AccordionDetails classes={{ root: classes.accordionDetails }}>\n      {children}\n    </AccordionDetails>\n  </Accordion>\n);\n\nconst infoDetails = (\n  description: string | undefined,\n  classes: ReturnType<typeof useStyles>,\n  element: ReactElement,\n) => {\n  return (\n    <Grid container>\n      {description && (\n        <Grid item xs={12}>\n          <Typography\n            className={classes.subheader}\n            variant=\"body1\"\n            gutterBottom\n          >\n            <MarkdownContent content={description} />\n          </Typography>\n        </Grid>\n      )}\n      <Grid item xs={12}>\n        {element}\n      </Grid>\n    </Grid>\n  );\n};\n\nconst infoCard = (\n  title: ReactNode,\n  description: string | undefined,\n  classes: ReturnType<typeof useStyles>,\n  element: ReactElement,\n  expanded: boolean,\n  summary?: string,\n) => (\n  <Grid item xs={12}>\n    {infoAccordion(\n      title,\n      infoDetails(description, classes, element),\n      classes,\n      expanded,\n      summary,\n    )}\n  </Grid>\n);\n\nexport const ScorecardInfo = (props: {\n  checkResults: CheckResult[];\n  title: ReactNode;\n  entity?: Entity;\n  description?: string;\n  noWarning?: boolean;\n  expanded?: boolean;\n  dense?: boolean;\n  hideDescription?: boolean;\n}) => {\n  const {\n    checkResults,\n    title,\n    entity,\n    description,\n    noWarning,\n    expanded = true,\n    dense,\n    hideDescription = dense,\n  } = props;\n  const classes = useStyles();\n  const api = useApi(techInsightsApiRef);\n\n  if (!checkResults.length) {\n    if (noWarning) {\n      return infoCard(\n        title,\n        description,\n        classes,\n        <Alert severity=\"info\">\n          All checks passed, or no checks have been performed yet\n        </Alert>,\n        expanded,\n      );\n    }\n    return infoCard(\n      title,\n      description,\n      classes,\n      <Alert severity=\"warning\">No checks have any data yet.</Alert>,\n      expanded,\n    );\n  }\n\n  return infoCard(\n    title,\n    description,\n    classes,\n    <ScorecardsList\n      checkResults={checkResults}\n      entity={entity}\n      dense={dense}\n      hideDescription={hideDescription}\n    />,\n    expanded,\n    `${\n      checkResults.filter(checkResult => !api.isCheckResultFailed(checkResult))\n        .length\n    }/${checkResults.length}`,\n  );\n};\n"],"names":[],"mappings":"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"}