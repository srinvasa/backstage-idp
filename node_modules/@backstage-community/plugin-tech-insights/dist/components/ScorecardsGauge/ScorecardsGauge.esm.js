import { jsxs, jsx } from 'react/jsx-runtime';
import { useApi } from '@backstage/core-plugin-api';
import { techInsightsApiRef } from '@backstage-community/plugin-tech-insights-react';
import { InfoCard, Gauge } from '@backstage/core-components';
import { ScorecardInfo } from '../ScorecardsInfo/ScorecardInfo.esm.js';
import Typography from '@material-ui/core/Typography';
import Grid from '@material-ui/core/Grid';

const ScorecardsGauge = (props) => {
  const {
    checkResults,
    entity,
    title,
    description,
    noWarning,
    expanded,
    dense = true,
    hideDescription
  } = props;
  const api = useApi(techInsightsApiRef);
  const types = [...new Set(checkResults.map(({ check }) => check.type))];
  const checkResultRenderers = api.getCheckResultRenderers(types);
  const checkResultsWithRenderer = checkResults.map((result) => ({
    result,
    renderer: checkResultRenderers.find(
      (renderer) => renderer.type === result.check.type
    )
  }));
  const succeeded = checkResultsWithRenderer.filter(
    ({ result, renderer }) => !renderer?.isFailed?.(result)
  ).length;
  const progress = succeeded / checkResults.length;
  return /* @__PURE__ */ jsxs(InfoCard, { title, subheader: description, children: [
    /* @__PURE__ */ jsx(Grid, { container: true, justifyContent: "center", children: /* @__PURE__ */ jsx(Grid, { item: true, style: { width: "160px", marginBottom: "1em" }, children: /* @__PURE__ */ jsx(Gauge, { value: progress, size: "small" }) }) }),
    /* @__PURE__ */ jsx(
      ScorecardInfo,
      {
        title: /* @__PURE__ */ jsx(Typography, { variant: "h6", children: "Checks" }),
        checkResults,
        entity,
        noWarning,
        expanded,
        dense,
        hideDescription
      }
    )
  ] });
};

export { ScorecardsGauge };
//# sourceMappingURL=ScorecardsGauge.esm.js.map
