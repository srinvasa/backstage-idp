{"version":3,"file":"ScorecardsGauge.esm.js","sources":["../../../src/components/ScorecardsGauge/ScorecardsGauge.tsx"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CheckResult } from '@backstage-community/plugin-tech-insights-common';\nimport { Entity } from '@backstage/catalog-model';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { techInsightsApiRef } from '@backstage-community/plugin-tech-insights-react';\nimport { Gauge, InfoCard } from '@backstage/core-components';\nimport { ScorecardInfo } from '../ScorecardsInfo';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\n\nexport const ScorecardsGauge = (props: {\n  checkResults: CheckResult[];\n  entity?: Entity;\n  title: string;\n  description?: string;\n  noWarning?: boolean;\n  expanded?: boolean;\n  dense?: boolean;\n  hideDescription?: boolean;\n}) => {\n  const {\n    checkResults,\n    entity,\n    title,\n    description,\n    noWarning,\n    expanded,\n    dense = true,\n    hideDescription,\n  } = props;\n\n  const api = useApi(techInsightsApiRef);\n\n  const types = [...new Set(checkResults.map(({ check }) => check.type))];\n  const checkResultRenderers = api.getCheckResultRenderers(types);\n  const checkResultsWithRenderer = checkResults.map(result => ({\n    result,\n    renderer: checkResultRenderers.find(\n      renderer => renderer.type === result.check.type,\n    ),\n  }));\n\n  const succeeded = checkResultsWithRenderer.filter(\n    ({ result, renderer }) => !renderer?.isFailed?.(result),\n  ).length;\n  const progress = succeeded / checkResults.length;\n\n  return (\n    <InfoCard title={title} subheader={description}>\n      <Grid container justifyContent=\"center\">\n        <Grid item style={{ width: '160px', marginBottom: '1em' }}>\n          <Gauge value={progress} size=\"small\" />\n        </Grid>\n      </Grid>\n      <ScorecardInfo\n        title={<Typography variant=\"h6\">Checks</Typography>}\n        checkResults={checkResults}\n        entity={entity}\n        noWarning={noWarning}\n        expanded={expanded}\n        dense={dense}\n        hideDescription={hideDescription}\n      />\n    </InfoCard>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;AAyBa,MAAA,eAAA,GAAkB,CAAC,KAS1B,KAAA;AACJ,EAAM,MAAA;AAAA,IACJ,YAAA;AAAA,IACA,MAAA;AAAA,IACA,KAAA;AAAA,IACA,WAAA;AAAA,IACA,SAAA;AAAA,IACA,QAAA;AAAA,IACA,KAAQ,GAAA,IAAA;AAAA,IACR;AAAA,GACE,GAAA,KAAA;AAEJ,EAAM,MAAA,GAAA,GAAM,OAAO,kBAAkB,CAAA;AAErC,EAAA,MAAM,KAAQ,GAAA,CAAC,GAAG,IAAI,IAAI,YAAa,CAAA,GAAA,CAAI,CAAC,EAAE,KAAM,EAAA,KAAM,KAAM,CAAA,IAAI,CAAC,CAAC,CAAA;AACtE,EAAM,MAAA,oBAAA,GAAuB,GAAI,CAAA,uBAAA,CAAwB,KAAK,CAAA;AAC9D,EAAM,MAAA,wBAAA,GAA2B,YAAa,CAAA,GAAA,CAAI,CAAW,MAAA,MAAA;AAAA,IAC3D,MAAA;AAAA,IACA,UAAU,oBAAqB,CAAA,IAAA;AAAA,MAC7B,CAAY,QAAA,KAAA,QAAA,CAAS,IAAS,KAAA,MAAA,CAAO,KAAM,CAAA;AAAA;AAC7C,GACA,CAAA,CAAA;AAEF,EAAA,MAAM,YAAY,wBAAyB,CAAA,MAAA;AAAA,IACzC,CAAC,EAAE,MAAQ,EAAA,QAAA,OAAe,CAAC,QAAA,EAAU,WAAW,MAAM;AAAA,GACtD,CAAA,MAAA;AACF,EAAM,MAAA,QAAA,GAAW,YAAY,YAAa,CAAA,MAAA;AAE1C,EAAA,uBACG,IAAA,CAAA,QAAA,EAAA,EAAS,KAAc,EAAA,SAAA,EAAW,WACjC,EAAA,QAAA,EAAA;AAAA,oBAAC,GAAA,CAAA,IAAA,EAAA,EAAK,WAAS,IAAC,EAAA,cAAA,EAAe,UAC7B,QAAC,kBAAA,GAAA,CAAA,IAAA,EAAA,EAAK,IAAI,EAAA,IAAA,EAAC,KAAO,EAAA,EAAE,OAAO,OAAS,EAAA,YAAA,EAAc,KAAM,EAAA,EACtD,QAAC,kBAAA,GAAA,CAAA,KAAA,EAAA,EAAM,OAAO,QAAU,EAAA,IAAA,EAAK,OAAQ,EAAA,CAAA,EACvC,CACF,EAAA,CAAA;AAAA,oBACA,GAAA;AAAA,MAAC,aAAA;AAAA,MAAA;AAAA,QACC,KAAO,kBAAA,GAAA,CAAC,UAAW,EAAA,EAAA,OAAA,EAAQ,MAAK,QAAM,EAAA,QAAA,EAAA,CAAA;AAAA,QACtC,YAAA;AAAA,QACA,MAAA;AAAA,QACA,SAAA;AAAA,QACA,QAAA;AAAA,QACA,KAAA;AAAA,QACA;AAAA;AAAA;AACF,GACF,EAAA,CAAA;AAEJ;;;;"}