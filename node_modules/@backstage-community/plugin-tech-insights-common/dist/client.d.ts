import { InsightFacts as InsightFacts$1, Check as Check$1, FactSchema, CheckResult, BulkCheckResponse } from '@backstage-community/plugin-tech-insights-common';
import { DiscoveryApi, IdentityApi } from '@backstage/core-plugin-api';
import { CompoundEntityRef } from '@backstage/catalog-model';
import { AuthService } from '@backstage/backend-plugin-api';
import { JsonValue } from '@backstage/types';

/**
 * Client to fetch data from tech-insights backend
 *
 * @public */
declare class TechInsightsClient {
    private readonly discoveryApi;
    private readonly identityApi;
    private readonly apiCache;
    private readonly chunkSize;
    constructor(options: {
        discoveryApi: DiscoveryApi;
        identityApi: IdentityApi | AuthService;
    });
    /**
     * Get facts for a specific entity
     * @param entity - a component reference
     * @param facts - a list fact ids to fetch
     * @public
     */
    getFacts(entity: CompoundEntityRef, facts: string[]): Promise<InsightFacts$1>;
    /**
     * Get all checks.
     * This will not return the actual status, but only metadata. To get the status use the /run endpoint
     * @public
     */
    getAllChecks(): Promise<Check$1[]>;
    /**
     * Get schemas of facts.
     * Use this for example to understand what the return values will be
     * @public
     */
    getFactSchemas(): Promise<FactSchema[]>;
    /**
     * Run checks for a specific entity
     * @param entityParams - reference to an entity
     * @param checks - IDs of checks to run
     * @public
     */
    runChecks(entityParams: CompoundEntityRef, checks?: string[]): Promise<CheckResult[]>;
    /**
     * Return checks for multiple entities
     * @param entities - list of entity references
     * @param checks - list of check IDs
     * @public
     */
    runBulkChecks(entities: CompoundEntityRef[], checks?: Check$1[]): Promise<BulkCheckResponse>;
    private getCacheKey;
    private api;
    private getToken;
}

/**
 * Represents a single check defined on the TechInsights backend.
 *
 * @public
 * @deprecated
 *
 * Use the Check interface from `@backstage-community/plugin-tech-insights-common` instead
 */
type Check = {
    /**
     * Unique identifier of the check
     *
     * Used to identify which checks to use when running checks.
     */
    id: string;
    /**
     * Type identifier for the check.
     * Can be used to determine storage options, logical routing to correct FactChecker implementation
     * or to help frontend render correct component types based on this
     */
    type: string;
    /**
     * Human readable name of the check, may be displayed in the UI
     */
    name: string;
    /**
     * Human readable description of the check, may be displayed in the UI
     */
    description: string;
    /**
     * A collection of strings referencing fact rows that a check will be run against.
     *
     * References the fact container, aka fact retriever itself which may or may not contain multiple individual facts and values
     */
    factIds: string[];
    /**
     * General Metadata to be returned
     * Can contain links, description texts or other actionable items
     */
    metadata?: Record<string, any>;
    /**
     * Metadata to be returned in case a check has been successfully evaluated
     * Can contain links, description texts or other actionable items
     */
    successMetadata?: Record<string, unknown>;
    /**
     * Metadata to be returned in case a check evaluation has ended in failure
     * Can contain links, description texts or other actionable items
     */
    failureMetadata?: Record<string, unknown>;
};
/**
 * Represents a Fact defined on the TechInsights backend.
 *
 * @public
 * @deprecated
 *
 * Use InsightFacts directly from `@backstage-community/plugin-tech-insights-common` instead
 */
interface InsightFacts {
    /**
     * a single fact in the backend
     */
    [factId: string]: {
        timestamp: string;
        version: string;
        facts: Record<string, JsonValue>;
    };
}

export { type Check, type InsightFacts, TechInsightsClient };
