{"version":3,"file":"apis.esm.js","sources":["../../src/alpha/apis.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  configApiRef,\n  ApiBlueprint,\n  discoveryApiRef,\n  fetchApiRef,\n  identityApiRef,\n} from '@backstage/frontend-plugin-api';\nimport {\n  GrafanaApiClient,\n  grafanaApiRef,\n  UnifiedAlertingGrafanaApiClient,\n} from '../api';\n\n/**\n * @alpha\n */\nexport const grafanaApiExtension = ApiBlueprint.make({\n  params: defineParams =>\n    defineParams({\n      api: grafanaApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        configApi: configApiRef,\n        fetchApi: fetchApiRef,\n      },\n      factory: ({ discoveryApi, configApi, fetchApi }) => {\n        const unifiedAlertingEnabled =\n          configApi.getOptionalBoolean('grafana.unifiedAlerting') || false;\n\n        if (!unifiedAlertingEnabled) {\n          return new GrafanaApiClient({\n            fetchApi,\n            discoveryApi,\n            domain: configApi.getString('grafana.domain'),\n            proxyPath: configApi.getOptionalString('grafana.proxyPath'),\n          });\n        }\n\n        return new UnifiedAlertingGrafanaApiClient({\n          fetchApi,\n          discoveryApi,\n          domain: configApi.getString('grafana.domain'),\n          proxyPath: configApi.getOptionalString('grafana.proxyPath'),\n        });\n      },\n    }),\n});\n"],"names":[],"mappings":";;;AA+Ba,MAAA,mBAAA,GAAsB,aAAa,IAAK,CAAA;AAAA,EACnD,MAAA,EAAQ,kBACN,YAAa,CAAA;AAAA,IACX,GAAK,EAAA,aAAA;AAAA,IACL,IAAM,EAAA;AAAA,MACJ,YAAc,EAAA,eAAA;AAAA,MACd,WAAa,EAAA,cAAA;AAAA,MACb,SAAW,EAAA,YAAA;AAAA,MACX,QAAU,EAAA;AAAA,KACZ;AAAA,IACA,SAAS,CAAC,EAAE,YAAc,EAAA,SAAA,EAAW,UAAe,KAAA;AAClD,MAAA,MAAM,sBACJ,GAAA,SAAA,CAAU,kBAAmB,CAAA,yBAAyB,CAAK,IAAA,KAAA;AAE7D,MAAA,IAAI,CAAC,sBAAwB,EAAA;AAC3B,QAAA,OAAO,IAAI,gBAAiB,CAAA;AAAA,UAC1B,QAAA;AAAA,UACA,YAAA;AAAA,UACA,MAAA,EAAQ,SAAU,CAAA,SAAA,CAAU,gBAAgB,CAAA;AAAA,UAC5C,SAAA,EAAW,SAAU,CAAA,iBAAA,CAAkB,mBAAmB;AAAA,SAC3D,CAAA;AAAA;AAGH,MAAA,OAAO,IAAI,+BAAgC,CAAA;AAAA,QACzC,QAAA;AAAA,QACA,YAAA;AAAA,QACA,MAAA,EAAQ,SAAU,CAAA,SAAA,CAAU,gBAAgB,CAAA;AAAA,QAC5C,SAAA,EAAW,SAAU,CAAA,iBAAA,CAAkB,mBAAmB;AAAA,OAC3D,CAAA;AAAA;AACH,GACD;AACL,CAAC;;;;"}