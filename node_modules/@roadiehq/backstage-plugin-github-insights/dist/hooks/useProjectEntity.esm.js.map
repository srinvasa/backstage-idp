{"version":3,"file":"useProjectEntity.esm.js","sources":["../../src/hooks/useProjectEntity.ts"],"sourcesContent":["/*\n * Copyright 2021 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\n\nconst GITHUB_PROJECT_ANNOTATION = 'github.com/project-slug';\nconst GITHUB_README_ANNOTATION = 'github.com/project-readme-path';\n\nexport const useProjectEntity = (entity: Entity) => {\n  const projectSlug = entity.metadata?.annotations?.[\n    GITHUB_PROJECT_ANNOTATION\n  ] as string;\n\n  const readmePath = entity.metadata?.annotations?.[\n    GITHUB_README_ANNOTATION\n  ] as string;\n\n  if (!projectSlug && projectSlug === '') {\n    throw new Error(\n      `No \"${GITHUB_PROJECT_ANNOTATION}\" annotation found for your entity ${entity.metadata.name}`,\n    );\n  }\n\n  return {\n    owner: projectSlug?.split('/')[0] || '',\n    repo: projectSlug?.split('/')[1] || '',\n    readmePath,\n  };\n};\n"],"names":[],"mappings":"AAkBA,MAAM,yBAA4B,GAAA,yBAAA;AAClC,MAAM,wBAA2B,GAAA,gCAAA;AAEpB,MAAA,gBAAA,GAAmB,CAAC,MAAmB,KAAA;AAClD,EAAA,MAAM,WAAc,GAAA,MAAA,CAAO,QAAU,EAAA,WAAA,GACnC,yBACF,CAAA;AAEA,EAAA,MAAM,UAAa,GAAA,MAAA,CAAO,QAAU,EAAA,WAAA,GAClC,wBACF,CAAA;AAEA,EAAI,IAAA,CAAC,WAAe,IAAA,WAAA,KAAgB,EAAI,EAAA;AACtC,IAAA,MAAM,IAAI,KAAA;AAAA,MACR,CAAO,IAAA,EAAA,yBAAyB,CAAsC,mCAAA,EAAA,MAAA,CAAO,SAAS,IAAI,CAAA;AAAA,KAC5F;AAAA;AAGF,EAAO,OAAA;AAAA,IACL,OAAO,WAAa,EAAA,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAK,IAAA,EAAA;AAAA,IACrC,MAAM,WAAa,EAAA,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAK,IAAA,EAAA;AAAA,IACpC;AAAA,GACF;AACF;;;;"}