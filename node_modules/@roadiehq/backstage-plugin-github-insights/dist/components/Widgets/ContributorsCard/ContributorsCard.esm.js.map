{"version":3,"file":"ContributorsCard.esm.js","sources":["../../../../src/components/Widgets/ContributorsCard/ContributorsCard.tsx"],"sourcesContent":["/*\n * Copyright 2025 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Alert from '@material-ui/lab/Alert';\nimport {\n  InfoCard,\n  MissingAnnotationEmptyState,\n  Progress,\n} from '@backstage/core-components';\nimport ContributorsList from './components/ContributorsList';\nimport { useRequest } from '../../../hooks/useRequest';\nimport { useEntityGithubScmIntegration } from '../../../hooks/useEntityGithubScmIntegration';\nimport { useProjectEntity } from '../../../hooks/useProjectEntity';\nimport {\n  GITHUB_INSIGHTS_ANNOTATION,\n  isGithubInsightsAvailable,\n} from '../../utils/isGithubInsightsAvailable';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getHostname } from '../../utils/githubUtils';\nimport { GitHubAuthorizationWrapper } from '@roadiehq/github-auth-utils-react';\n\nconst useStyles = makeStyles(theme => ({\n  infoCard: {\n    marginBottom: '10px',\n    '& + .MuiAlert-root': {\n      marginTop: theme.spacing(3),\n    },\n  },\n}));\n\nconst ContributorsCardContent = () => {\n  const { entity } = useEntity();\n  const classes = useStyles();\n  const { value, loading, error } = useRequest(entity, 'contributors', 10);\n  const { hostname } = useEntityGithubScmIntegration(entity);\n  const projectAlert = isGithubInsightsAvailable(entity);\n  const { owner, repo } = useProjectEntity(entity);\n  if (!projectAlert) {\n    return (\n      <MissingAnnotationEmptyState annotation={GITHUB_INSIGHTS_ANNOTATION} />\n    );\n  }\n\n  if (loading) {\n    return <Progress />;\n  } else if (error) {\n    return (\n      <Alert severity=\"error\" className={classes.infoCard}>\n        {error.message}\n      </Alert>\n    );\n  }\n\n  return (\n    <InfoCard\n      title=\"Contributors\"\n      deepLink={{\n        link: `https://${hostname}/${owner}/${repo}/graphs/contributors`,\n        title: 'People',\n        onClick: e => {\n          e.preventDefault();\n          window.open(\n            `https://${hostname}/${owner}/${repo}/graphs/contributors`,\n          );\n        },\n      }}\n      className={classes.infoCard}\n    >\n      <ContributorsList contributors={value || []} />\n    </InfoCard>\n  );\n};\n\nconst ContributorsCard = () => {\n  const { entity } = useEntity();\n  const hostname = getHostname(entity);\n\n  return (\n    <GitHubAuthorizationWrapper title=\"Contributors\" hostname={hostname}>\n      <ContributorsCardContent />\n    </GitHubAuthorizationWrapper>\n  );\n};\n\nexport default ContributorsCard;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAmCA,MAAM,SAAA,GAAY,WAAW,CAAU,KAAA,MAAA;AAAA,EACrC,QAAU,EAAA;AAAA,IACR,YAAc,EAAA,MAAA;AAAA,IACd,oBAAsB,EAAA;AAAA,MACpB,SAAA,EAAW,KAAM,CAAA,OAAA,CAAQ,CAAC;AAAA;AAC5B;AAEJ,CAAE,CAAA,CAAA;AAEF,MAAM,0BAA0B,MAAM;AACpC,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA;AAC7B,EAAA,MAAM,UAAU,SAAU,EAAA;AAC1B,EAAM,MAAA,EAAE,OAAO,OAAS,EAAA,KAAA,KAAU,UAAW,CAAA,MAAA,EAAQ,gBAAgB,EAAE,CAAA;AACvE,EAAA,MAAM,EAAE,QAAA,EAAa,GAAA,6BAAA,CAA8B,MAAM,CAAA;AACzD,EAAM,MAAA,YAAA,GAAe,0BAA0B,MAAM,CAAA;AACrD,EAAA,MAAM,EAAE,KAAA,EAAO,IAAK,EAAA,GAAI,iBAAiB,MAAM,CAAA;AAC/C,EAAA,IAAI,CAAC,YAAc,EAAA;AACjB,IACE,uBAAA,GAAA,CAAC,2BAA4B,EAAA,EAAA,UAAA,EAAY,0BAA4B,EAAA,CAAA;AAAA;AAIzE,EAAA,IAAI,OAAS,EAAA;AACX,IAAA,2BAAQ,QAAS,EAAA,EAAA,CAAA;AAAA,aACR,KAAO,EAAA;AAChB,IACE,uBAAA,GAAA,CAAC,SAAM,QAAS,EAAA,OAAA,EAAQ,WAAW,OAAQ,CAAA,QAAA,EACxC,gBAAM,OACT,EAAA,CAAA;AAAA;AAIJ,EACE,uBAAA,GAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,KAAM,EAAA,cAAA;AAAA,MACN,QAAU,EAAA;AAAA,QACR,MAAM,CAAW,QAAA,EAAA,QAAQ,CAAI,CAAA,EAAA,KAAK,IAAI,IAAI,CAAA,oBAAA,CAAA;AAAA,QAC1C,KAAO,EAAA,QAAA;AAAA,QACP,SAAS,CAAK,CAAA,KAAA;AACZ,UAAA,CAAA,CAAE,cAAe,EAAA;AACjB,UAAO,MAAA,CAAA,IAAA;AAAA,YACL,CAAW,QAAA,EAAA,QAAQ,CAAI,CAAA,EAAA,KAAK,IAAI,IAAI,CAAA,oBAAA;AAAA,WACtC;AAAA;AACF,OACF;AAAA,MACA,WAAW,OAAQ,CAAA,QAAA;AAAA,MAEnB,QAAC,kBAAA,GAAA,CAAA,gBAAA,EAAA,EAAiB,YAAc,EAAA,KAAA,IAAS,EAAI,EAAA;AAAA;AAAA,GAC/C;AAEJ,CAAA;AAEA,MAAM,mBAAmB,MAAM;AAC7B,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA;AAC7B,EAAM,MAAA,QAAA,GAAW,YAAY,MAAM,CAAA;AAEnC,EAAA,2BACG,0BAA2B,EAAA,EAAA,KAAA,EAAM,gBAAe,QAC/C,EAAA,QAAA,kBAAA,GAAA,CAAC,2BAAwB,CAC3B,EAAA,CAAA;AAEJ;;;;"}