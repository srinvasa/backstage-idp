{"version":3,"file":"ReadMeCard.esm.js","sources":["../../../../src/components/Widgets/ReadMeCard/ReadMeCard.tsx"],"sourcesContent":["/*\n * Copyright 2021 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useProjectEntity } from '../../../hooks/useProjectEntity';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { MarkdownContent } from '../index';\nimport { InfoCard } from '@backstage/core-components';\nimport { makeStyles } from '@material-ui/core';\nimport { useEntityGithubScmIntegration } from '../../../hooks/useEntityGithubScmIntegration';\n\nconst useStyles = makeStyles(theme => ({\n  infoCard: {\n    marginBottom: '10px',\n    '& + .MuiAlert-root': {\n      marginTop: theme.spacing(3),\n    },\n    '& .MuiCardContent-root': {\n      padding: theme.spacing(2, 1, 2, 2),\n    },\n  },\n  readMe: {\n    overflowY: 'auto',\n    paddingRight: theme.spacing(1),\n    '&::-webkit-scrollbar-track': {\n      backgroundColor: '#F5F5F5',\n      borderRadius: '5px',\n    },\n    '&::-webkit-scrollbar': {\n      width: '5px',\n      backgroundColor: '#F5F5F5',\n      borderRadius: '5px',\n    },\n    '&::-webkit-scrollbar-thumb': {\n      border: '1px solid #555555',\n      backgroundColor: '#555',\n      borderRadius: '4px',\n    },\n  },\n}));\n\ntype ReadMeCardProps = {\n  maxHeight?: number;\n  title?: string;\n};\n\nconst ReadMeCard = (props: ReadMeCardProps) => {\n  const { entity } = useEntity();\n  const { owner, repo, readmePath } = useProjectEntity(entity);\n  const { hostname } = useEntityGithubScmIntegration(entity);\n  const classes = useStyles();\n\n  const linkPath = readmePath || 'README.md';\n\n  return (\n    <InfoCard\n      title={props.title || 'Readme'}\n      className={classes.infoCard}\n      deepLink={{\n        link: `https://${hostname}/${owner}/${repo}/blob/HEAD/${linkPath}`,\n        title: 'Readme',\n        onClick: e => {\n          e.preventDefault();\n          window.open(\n            `https://${hostname}/${owner}/${repo}/blob/HEAD/${linkPath}`,\n          );\n        },\n      }}\n    >\n      <div\n        className={classes.readMe}\n        style={{\n          maxHeight: `${props.maxHeight}px`,\n        }}\n      >\n        <MarkdownContent\n          hostname={hostname}\n          owner={owner}\n          repo={repo}\n          path={readmePath}\n        />\n      </div>\n    </InfoCard>\n  );\n};\n\nexport default ReadMeCard;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA,MAAM,SAAA,GAAY,WAAW,CAAU,KAAA,MAAA;AAAA,EACrC,QAAU,EAAA;AAAA,IACR,YAAc,EAAA,MAAA;AAAA,IACd,oBAAsB,EAAA;AAAA,MACpB,SAAA,EAAW,KAAM,CAAA,OAAA,CAAQ,CAAC;AAAA,KAC5B;AAAA,IACA,wBAA0B,EAAA;AAAA,MACxB,SAAS,KAAM,CAAA,OAAA,CAAQ,CAAG,EAAA,CAAA,EAAG,GAAG,CAAC;AAAA;AACnC,GACF;AAAA,EACA,MAAQ,EAAA;AAAA,IACN,SAAW,EAAA,MAAA;AAAA,IACX,YAAA,EAAc,KAAM,CAAA,OAAA,CAAQ,CAAC,CAAA;AAAA,IAC7B,4BAA8B,EAAA;AAAA,MAC5B,eAAiB,EAAA,SAAA;AAAA,MACjB,YAAc,EAAA;AAAA,KAChB;AAAA,IACA,sBAAwB,EAAA;AAAA,MACtB,KAAO,EAAA,KAAA;AAAA,MACP,eAAiB,EAAA,SAAA;AAAA,MACjB,YAAc,EAAA;AAAA,KAChB;AAAA,IACA,4BAA8B,EAAA;AAAA,MAC5B,MAAQ,EAAA,mBAAA;AAAA,MACR,eAAiB,EAAA,MAAA;AAAA,MACjB,YAAc,EAAA;AAAA;AAChB;AAEJ,CAAE,CAAA,CAAA;AAOI,MAAA,UAAA,GAAa,CAAC,KAA2B,KAAA;AAC7C,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA;AAC7B,EAAA,MAAM,EAAE,KAAO,EAAA,IAAA,EAAM,UAAW,EAAA,GAAI,iBAAiB,MAAM,CAAA;AAC3D,EAAA,MAAM,EAAE,QAAA,EAAa,GAAA,6BAAA,CAA8B,MAAM,CAAA;AACzD,EAAA,MAAM,UAAU,SAAU,EAAA;AAE1B,EAAA,MAAM,WAAW,UAAc,IAAA,WAAA;AAE/B,EACE,uBAAA,GAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,KAAA,EAAO,MAAM,KAAS,IAAA,QAAA;AAAA,MACtB,WAAW,OAAQ,CAAA,QAAA;AAAA,MACnB,QAAU,EAAA;AAAA,QACR,IAAA,EAAM,WAAW,QAAQ,CAAA,CAAA,EAAI,KAAK,CAAI,CAAA,EAAA,IAAI,cAAc,QAAQ,CAAA,CAAA;AAAA,QAChE,KAAO,EAAA,QAAA;AAAA,QACP,SAAS,CAAK,CAAA,KAAA;AACZ,UAAA,CAAA,CAAE,cAAe,EAAA;AACjB,UAAO,MAAA,CAAA,IAAA;AAAA,YACL,WAAW,QAAQ,CAAA,CAAA,EAAI,KAAK,CAAI,CAAA,EAAA,IAAI,cAAc,QAAQ,CAAA;AAAA,WAC5D;AAAA;AACF,OACF;AAAA,MAEA,QAAA,kBAAA,GAAA;AAAA,QAAC,KAAA;AAAA,QAAA;AAAA,UACC,WAAW,OAAQ,CAAA,MAAA;AAAA,UACnB,KAAO,EAAA;AAAA,YACL,SAAA,EAAW,CAAG,EAAA,KAAA,CAAM,SAAS,CAAA,EAAA;AAAA,WAC/B;AAAA,UAEA,QAAA,kBAAA,GAAA;AAAA,YAAC,eAAA;AAAA,YAAA;AAAA,cACC,QAAA;AAAA,cACA,KAAA;AAAA,cACA,IAAA;AAAA,cACA,IAAM,EAAA;AAAA;AAAA;AACR;AAAA;AACF;AAAA,GACF;AAEJ;;;;"}