{"version":3,"file":"GitHubNotAuthorized.esm.js","sources":["../../src/components/GitHubNotAuthorized.tsx"],"sourcesContent":["/*\n * Copyright 2025 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { scmAuthApiRef } from '@backstage/integration-react';\nimport { Button, Grid, Tooltip, Typography } from '@material-ui/core';\nimport { useCallback } from 'react';\n\nexport const GithubNotAuthorized = ({\n  hostname = 'github.com',\n  addLoginStatus,\n}: {\n  hostname?: string;\n  addLoginStatus: () => void;\n}) => {\n  const scmAuth = useApi(scmAuthApiRef);\n\n  const signIn = useCallback(async () => {\n    const credentials = await scmAuth.getCredentials({\n      url: `https://${hostname}/`,\n      additionalScope: {\n        customScopes: {\n          github: ['repo'],\n        },\n      },\n    });\n    if (credentials.token) {\n      addLoginStatus();\n    }\n  }, [scmAuth, hostname, addLoginStatus]);\n\n  return (\n    <Grid container>\n      <Grid item xs={8}>\n        <Typography>\n          You are not logged into GitHub. You need to be signed in to see the\n          content of this card.\n        </Typography>\n      </Grid>\n      <Grid item xs={4} container justifyContent=\"flex-end\">\n        <Tooltip placement=\"top\" arrow title=\"Sign in to Github\">\n          <Button variant=\"outlined\" color=\"primary\" onClick={signIn}>\n            Sign in\n          </Button>\n        </Tooltip>\n      </Grid>\n    </Grid>\n  );\n};\n"],"names":[],"mappings":";;;;;;AAqBO,MAAM,sBAAsB,CAAC;AAAA,EAClC,QAAW,GAAA,YAAA;AAAA,EACX;AACF,CAGM,KAAA;AACJ,EAAM,MAAA,OAAA,GAAU,OAAO,aAAa,CAAA;AAEpC,EAAM,MAAA,MAAA,GAAS,YAAY,YAAY;AACrC,IAAM,MAAA,WAAA,GAAc,MAAM,OAAA,CAAQ,cAAe,CAAA;AAAA,MAC/C,GAAA,EAAK,WAAW,QAAQ,CAAA,CAAA,CAAA;AAAA,MACxB,eAAiB,EAAA;AAAA,QACf,YAAc,EAAA;AAAA,UACZ,MAAA,EAAQ,CAAC,MAAM;AAAA;AACjB;AACF,KACD,CAAA;AACD,IAAA,IAAI,YAAY,KAAO,EAAA;AACrB,MAAe,cAAA,EAAA;AAAA;AACjB,GACC,EAAA,CAAC,OAAS,EAAA,QAAA,EAAU,cAAc,CAAC,CAAA;AAEtC,EACE,uBAAA,IAAA,CAAC,IAAK,EAAA,EAAA,SAAA,EAAS,IACb,EAAA,QAAA,EAAA;AAAA,oBAAC,GAAA,CAAA,IAAA,EAAA,EAAK,MAAI,IAAC,EAAA,EAAA,EAAI,GACb,QAAC,kBAAA,GAAA,CAAA,UAAA,EAAA,EAAW,uGAGZ,CACF,EAAA,CAAA;AAAA,oBACC,GAAA,CAAA,IAAA,EAAA,EAAK,IAAI,EAAA,IAAA,EAAC,EAAI,EAAA,CAAA,EAAG,SAAS,EAAA,IAAA,EAAC,cAAe,EAAA,UAAA,EACzC,QAAC,kBAAA,GAAA,CAAA,OAAA,EAAA,EAAQ,SAAU,EAAA,KAAA,EAAM,KAAK,EAAA,IAAA,EAAC,KAAM,EAAA,mBAAA,EACnC,QAAC,kBAAA,GAAA,CAAA,MAAA,EAAA,EAAO,OAAQ,EAAA,UAAA,EAAW,KAAM,EAAA,SAAA,EAAU,OAAS,EAAA,MAAA,EAAQ,QAE5D,EAAA,SAAA,EAAA,CAAA,EACF,CACF,EAAA;AAAA,GACF,EAAA,CAAA;AAEJ;;;;"}