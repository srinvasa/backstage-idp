{"version":3,"file":"Content.esm.js","sources":["../../../src/components/GroupPullRequestsCard/Content.tsx"],"sourcesContent":["/*\n * Copyright 2025 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\nimport {\n  PullRequestsListView,\n  SkeletonPullRequestsListView,\n} from '../PullRequestsListView';\nimport { useGithubSearchPullRequest } from '../useGithubSearchPullRequest';\nimport {\n  GITHUB_PULL_REQUESTS_TEAM_ANNOTATION,\n  isGithubTeamSlugSet,\n} from '../../utils/isGithubSlugSet';\nimport Alert from '@material-ui/lab/Alert';\nimport { Entity, isGroupEntity } from '@backstage/catalog-model';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getHostname } from '../../utils/githubUtils';\nimport { GitHubAuthorizationWrapper } from '@roadiehq/github-auth-utils-react';\n\nexport const getPullRequestsQueryForGroup = (entity: Entity) => {\n  const githubTeamName = isGithubTeamSlugSet(entity);\n\n  return `is:open is:pr team-review-requested:${githubTeamName} archived:false`;\n};\n\nconst PullRequestsCard = () => {\n  const { entity } = useEntity();\n  const hostname = getHostname(entity);\n  const query = getPullRequestsQueryForGroup(entity);\n  const { loading, error, value } = useGithubSearchPullRequest(query, hostname);\n\n  if (loading) return <SkeletonPullRequestsListView />;\n  if (error) return <Alert severity=\"error\">{error.message}</Alert>;\n\n  return (\n    <PullRequestsListView data={value} emptyStateText=\"No requested reviews.\" />\n  );\n};\n\nexport const Content = () => {\n  const { entity } = useEntity();\n  const hostname = getHostname(entity);\n  const githubTeamName = isGithubTeamSlugSet(entity);\n  if (!githubTeamName || githubTeamName === '') {\n    return (\n      <MissingAnnotationEmptyState\n        annotation={GITHUB_PULL_REQUESTS_TEAM_ANNOTATION}\n      />\n    );\n  }\n  if (!isGroupEntity(entity)) {\n    return (\n      <Alert severity=\"error\">\n        This card can only be used on Group Entities\n      </Alert>\n    );\n  }\n\n  return (\n    <GitHubAuthorizationWrapper\n      title=\"GitHub Pull Requests Statistics\"\n      hostname={hostname}\n    >\n      <PullRequestsCard />\n    </GitHubAuthorizationWrapper>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;;AAgCa,MAAA,4BAAA,GAA+B,CAAC,MAAmB,KAAA;AAC9D,EAAM,MAAA,cAAA,GAAiB,oBAAoB,MAAM,CAAA;AAEjD,EAAA,OAAO,uCAAuC,cAAc,CAAA,eAAA,CAAA;AAC9D;AAEA,MAAM,mBAAmB,MAAM;AAC7B,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA;AAC7B,EAAM,MAAA,QAAA,GAAW,YAAY,MAAM,CAAA;AACnC,EAAM,MAAA,KAAA,GAAQ,6BAA6B,MAAM,CAAA;AACjD,EAAA,MAAM,EAAE,OAAS,EAAA,KAAA,EAAO,OAAU,GAAA,0BAAA,CAA2B,OAAO,QAAQ,CAAA;AAE5E,EAAI,IAAA,OAAA,EAAgB,uBAAA,GAAA,CAAC,4BAA6B,EAAA,EAAA,CAAA;AAClD,EAAA,IAAI,OAAc,uBAAA,GAAA,CAAC,SAAM,QAAS,EAAA,OAAA,EAAS,gBAAM,OAAQ,EAAA,CAAA;AAEzD,EAAA,uBACG,GAAA,CAAA,oBAAA,EAAA,EAAqB,IAAM,EAAA,KAAA,EAAO,gBAAe,uBAAwB,EAAA,CAAA;AAE9E,CAAA;AAEO,MAAM,UAAU,MAAM;AAC3B,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA;AAC7B,EAAM,MAAA,QAAA,GAAW,YAAY,MAAM,CAAA;AACnC,EAAM,MAAA,cAAA,GAAiB,oBAAoB,MAAM,CAAA;AACjD,EAAI,IAAA,CAAC,cAAkB,IAAA,cAAA,KAAmB,EAAI,EAAA;AAC5C,IACE,uBAAA,GAAA;AAAA,MAAC,2BAAA;AAAA,MAAA;AAAA,QACC,UAAY,EAAA;AAAA;AAAA,KACd;AAAA;AAGJ,EAAI,IAAA,CAAC,aAAc,CAAA,MAAM,CAAG,EAAA;AAC1B,IAAA,uBACG,GAAA,CAAA,KAAA,EAAA,EAAM,QAAS,EAAA,OAAA,EAAQ,QAExB,EAAA,8CAAA,EAAA,CAAA;AAAA;AAIJ,EACE,uBAAA,GAAA;AAAA,IAAC,0BAAA;AAAA,IAAA;AAAA,MACC,KAAM,EAAA,iCAAA;AAAA,MACN,QAAA;AAAA,MAEA,8BAAC,gBAAiB,EAAA,EAAA;AAAA;AAAA,GACpB;AAEJ;;;;"}