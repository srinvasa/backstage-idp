{"version":3,"file":"plugin.esm.js","sources":["../src/plugin.ts"],"sourcesContent":["/*\n * Copyright 2021 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPlugin,\n  createApiFactory,\n  createRouteRef,\n  createRoutableExtension,\n  createComponentExtension,\n  configApiRef,\n} from '@backstage/core-plugin-api';\nimport { createCardExtension } from '@backstage/plugin-home-react';\n\nimport { githubPullRequestsApiRef, GithubPullRequestsClient } from './api';\nimport { scmAuthApiRef } from '@backstage/integration-react';\n\nexport const entityContentRouteRef = createRouteRef({\n  id: 'github-pull-requests',\n});\n\nexport const githubPullRequestsPlugin = createPlugin({\n  id: 'github-pull-requests',\n\n  apis: [\n    createApiFactory({\n      api: githubPullRequestsApiRef,\n      deps: { configApi: configApiRef, scmAuthApi: scmAuthApiRef },\n      factory: ({ configApi, scmAuthApi }) =>\n        new GithubPullRequestsClient({ configApi, scmAuthApi }),\n    }),\n  ],\n  routes: {\n    entityContent: entityContentRouteRef,\n  },\n});\n\nexport const EntityGithubPullRequestsContent = githubPullRequestsPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityGithubPullRequestsContent',\n    component: () => import('./components/Router').then(m => m.Router),\n    mountPoint: entityContentRouteRef,\n  }),\n);\n\nexport const EntityGithubPullRequestsOverviewCard =\n  githubPullRequestsPlugin.provide(\n    createComponentExtension({\n      name: 'EntityGithubPullRequestsOverviewCard',\n      component: {\n        lazy: () =>\n          import('./components/PullRequestsStatsCard').then(\n            m => m.PullRequestsStatsCard,\n          ),\n      },\n    }),\n  );\n\nexport const EntityGithubPullRequestsTable = githubPullRequestsPlugin.provide(\n  createComponentExtension({\n    name: 'EntityGithubPullRequestsTable',\n    component: {\n      lazy: () =>\n        import('./components/PullRequestsTable').then(m => m.PullRequestsTable),\n    },\n  }),\n);\n\nexport const HomePageRequestedReviewsCard = githubPullRequestsPlugin.provide(\n  createCardExtension<{ query?: string; hostname?: string }>({\n    name: 'HomePageRequestedReviewsCard',\n    title: 'Review requests',\n    components: () => import('./components/Home/RequestedReviewsCard'),\n  }),\n);\n\nexport const HomePageYourOpenPullRequestsCard =\n  githubPullRequestsPlugin.provide(\n    createCardExtension<{ query?: string; hostname?: string }>({\n      name: 'YourOpenPullRequestsCard',\n      title: 'Your open pull requests',\n      components: () => import('./components/Home/YourOpenPullRequestsCard'),\n    }),\n  );\n\nexport const EntityGithubGroupPullRequestsCard =\n  githubPullRequestsPlugin.provide(\n    createCardExtension({\n      name: 'EntityGithubGroupPullRequestsCard',\n      title: 'Team Assigned Review requests',\n      components: () => import('./components/GroupPullRequestsCard'),\n    }),\n  );\n"],"names":[],"mappings":";;;;;;AA6BO,MAAM,wBAAwB,cAAe,CAAA;AAAA,EAClD,EAAI,EAAA;AACN,CAAC;AAEM,MAAM,2BAA2B,YAAa,CAAA;AAAA,EACnD,EAAI,EAAA,sBAAA;AAAA,EAEJ,IAAM,EAAA;AAAA,IACJ,gBAAiB,CAAA;AAAA,MACf,GAAK,EAAA,wBAAA;AAAA,MACL,IAAM,EAAA,EAAE,SAAW,EAAA,YAAA,EAAc,YAAY,aAAc,EAAA;AAAA,MAC3D,OAAA,EAAS,CAAC,EAAE,SAAW,EAAA,UAAA,EACrB,KAAA,IAAI,wBAAyB,CAAA,EAAE,SAAW,EAAA,UAAA,EAAY;AAAA,KACzD;AAAA,GACH;AAAA,EACA,MAAQ,EAAA;AAAA,IACN,aAAe,EAAA;AAAA;AAEnB,CAAC;AAEM,MAAM,kCAAkC,wBAAyB,CAAA,OAAA;AAAA,EACtE,uBAAwB,CAAA;AAAA,IACtB,IAAM,EAAA,iCAAA;AAAA,IACN,SAAA,EAAW,MAAM,OAAO,4BAAqB,EAAE,IAAK,CAAA,CAAA,CAAA,KAAK,EAAE,MAAM,CAAA;AAAA,IACjE,UAAY,EAAA;AAAA,GACb;AACH;AAEO,MAAM,uCACX,wBAAyB,CAAA,OAAA;AAAA,EACvB,wBAAyB,CAAA;AAAA,IACvB,IAAM,EAAA,sCAAA;AAAA,IACN,SAAW,EAAA;AAAA,MACT,IAAM,EAAA,MACJ,OAAO,iDAAoC,CAAE,CAAA,IAAA;AAAA,QAC3C,OAAK,CAAE,CAAA;AAAA;AACT;AACJ,GACD;AACH;AAEK,MAAM,gCAAgC,wBAAyB,CAAA,OAAA;AAAA,EACpE,wBAAyB,CAAA;AAAA,IACvB,IAAM,EAAA,+BAAA;AAAA,IACN,SAAW,EAAA;AAAA,MACT,IAAA,EAAM,MACJ,OAAO,6CAAgC,EAAE,IAAK,CAAA,CAAA,CAAA,KAAK,EAAE,iBAAiB;AAAA;AAC1E,GACD;AACH;AAEO,MAAM,+BAA+B,wBAAyB,CAAA,OAAA;AAAA,EACnE,mBAA2D,CAAA;AAAA,IACzD,IAAM,EAAA,8BAAA;AAAA,IACN,KAAO,EAAA,iBAAA;AAAA,IACP,UAAA,EAAY,MAAM,OAAO,qDAAwC;AAAA,GAClE;AACH;AAEO,MAAM,mCACX,wBAAyB,CAAA,OAAA;AAAA,EACvB,mBAA2D,CAAA;AAAA,IACzD,IAAM,EAAA,0BAAA;AAAA,IACN,KAAO,EAAA,yBAAA;AAAA,IACP,UAAA,EAAY,MAAM,OAAO,yDAA4C;AAAA,GACtE;AACH;AAEK,MAAM,oCACX,wBAAyB,CAAA,OAAA;AAAA,EACvB,mBAAoB,CAAA;AAAA,IAClB,IAAM,EAAA,mCAAA;AAAA,IACN,KAAO,EAAA,+BAAA;AAAA,IACP,UAAA,EAAY,MAAM,OAAO,iDAAoC;AAAA,GAC9D;AACH;;;;"}