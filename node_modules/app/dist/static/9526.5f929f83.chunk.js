"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["9526"],{90150:function(e,t,n){n.d(t,{l:()=>c});var a=n(31085),l=n(64947),i=n(29365),r=n(5893),o=n(73657),s=n(25534);function c(e){let{title:t,to:n}=e,c=(0,r.A)(e=>e.breakpoints.down("xs"));return n?c?(0,a.jsx)(i.A,{component:o.N_,color:"primary",title:t,size:"small",to:n,children:(0,a.jsx)(s.default,{})}):(0,a.jsx)(l.A,{component:o.N_,variant:"contained",color:"primary",to:n,children:t}):null}},54748:function(e,t,n){n.d(t,{M:()=>s});var a=n(31085),l=n(58837),i=n(71677),r=n(72501);let o=(0,l.A)({container:{overflow:"visible !important"},typo:{fontSize:"inherit",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":({line:e})=>e||1,"-webkit-box-orient":"vertical"}},{name:"BackstageOverflowTooltip"});function s(e){let t=o(e);return(0,a.jsx)(i.Ay,{title:e.title??(e.text||""),placement:e.placement,children:(0,a.jsx)(r.A,{className:t.typo,variant:"inherit",children:e.text})})}},92303:function(e,t,n){n.d(t,{d:()=>r});var a=n(31085),l=n(79182),i=n(82326);function r(e){let{themeId:t,children:n,...r}=e;return(0,a.jsxs)(i.Y,{themeId:t,children:[(0,a.jsx)(l.Y,{...r}),n]})}},13977:function(e,t,n){n.d(t,{m:()=>g});var a=n(31085),l=n(79089),i=n(18139),r=n(34477),o=n(77125),s=n(14041),c=n(49724),u=n(18453);n(46343),n(40074),n(46123),n(96403);var d=n(73466),p=n(30043),f=n(80084),m=n(10265);let g=e=>{let t,n,{allowedKinds:g,hidden:y,initialFilter:h="component"}=e,{t:x}=(0,m.i)(f.j),v=(0,i.gf)(r.k),{error:j,allKinds:C,selectedKind:S,setSelectedKind:w}=function(e){let{filters:t,queryParameters:{kind:n},updateFilters:a}=(0,u.nK)(),l=(0,s.useMemo)(()=>[n].flat()[0],[n]),[r,o]=(0,s.useState)(l??t.kind?.value??e.initialFilter);(0,s.useEffect)(()=>{l&&o(l)},[l]),(0,s.useEffect)(()=>{t.kind?.value&&o(t.kind?.value)},[t.kind]);let{allKinds:f,loading:m,error:g}=function(){let e=(0,i.gf)(p.v),{error:t,loading:n,value:a}=(0,d.A)(async()=>{let{facets:t}=await e.getEntityFacets({facets:["kind"]});return new Map((t.kind??[]).map(e=>e.value).map(e=>[e.toLocaleLowerCase("en-US"),e]))},[e]);return{loading:n,error:t,allKinds:a??new Map}}(),y=f.get(r)||r;return(0,s.useEffect)(()=>{a({kind:r?new c.gM(r,y):void 0})},[r,y,a]),{loading:m,error:g,allKinds:f,selectedKind:r,setSelectedKind:o}}({initialFilter:h});if((0,s.useEffect)(()=>{j&&v.post({message:x("entityKindPicker.errorMessage"),severity:"error"})},[j,v,x]),j)return null;let b=[...(t=Array.from(C.keys()),g&&(t=g.map(e=>e.toLocaleLowerCase("en-US")).filter(e=>C.has(e))),n=new Map(t.map(e=>[e,C.get(e)||e])),S&&!n.has(S)&&n.set(S.toLocaleLowerCase("en-US"),S),n).entries()].map(([e,t])=>({label:t,value:e}));return y?null:(0,a.jsx)(o.A,{pb:1,pt:1,children:(0,a.jsx)(l.w,{label:x("entityKindPicker.title"),items:b,selected:S.toLocaleLowerCase("en-US"),onChange:e=>w(String(e))})})}},75925:function(e,t,n){n.d(t,{W:()=>u});var a=n(31085),l=n(58837),i=n(49724),r=n(84817),o=n(80084),s=n(10265);let c=(0,l.A)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),u=e=>{let{initialFilter:t=[]}=e,n=c(),{t:l}=(0,s.i)(o.j);return(0,a.jsx)(r.y,{label:l("entityLifecyclePicker.title"),name:"lifecycles",path:"spec.lifecycle",Filter:i.I5,InputProps:{className:n.input},initialSelectedOptions:t})}},79533:function(e,t,n){n.d(t,{l:()=>v});var a=n(31085),l=n(95061),i=n(29365),r=n(63301),o=n(34839),s=n(75173),c=n(58837),u=n(64704),d=n(45917),p=n(14041),f=n(16983),m=n(18453),g=n(49724),y=n(80084),h=n(10265);let x=(0,c.A)(e=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),v=()=>{let e=x(),{t}=(0,h.i)(y.j),{updateFilters:n,queryParameters:{text:c}}=(0,m.nK)(),v=(0,p.useMemo)(()=>[c].flat()[0],[c]),[j,C]=(0,p.useState)(v??"");return(0,f.default)(()=>{n({text:j.length?new g.V3(j):void 0})},250,[j,n]),(0,p.useEffect)(()=>{v&&C(v)},[v]),(0,a.jsx)(s.A,{className:e.searchToolbar,children:(0,a.jsx)(l.A,{children:(0,a.jsx)(r.A,{"aria-label":"search",id:"input-with-icon-adornment",className:e.input,placeholder:t("entitySearchBar.placeholder"),autoComplete:"off",onChange:e=>C(e.target.value),value:j,startAdornment:(0,a.jsx)(o.A,{position:"start",children:(0,a.jsx)(d.default,{})}),endAdornment:(0,a.jsx)(o.A,{position:"end",children:(0,a.jsx)(i.A,{"aria-label":"clear search",onClick:()=>C(""),edge:"end",disabled:0===j.length,children:(0,a.jsx)(u.default,{})})})})})})}},10500:function(e,t,n){n.d(t,{g:()=>i});var a=n(10265),l=n(80084);let i=({translationKey:e})=>{let{t}=(0,a.i)(l.j);return t(`entityTableColumnTitle.${e}`)}},15897:function(e,t,n){n.d(t,{Q:()=>p});var a=n(31085),l=n(14041),i=n(77125),r=n(57278),o=n(18139),s=n(34477),c=n(79089),u=n(80084),d=n(10265);let p=e=>{let{hidden:t,initialFilter:n}=e,p=(0,o.gf)(s.k),{error:f,availableTypes:m,selectedTypes:g,setSelectedTypes:y}=(0,r.j)(),{t:h}=(0,d.i)(u.j);if((0,l.useEffect)(()=>{f&&p.post({message:h("entityTypePicker.errorMessage"),severity:"error"}),n&&y([n])},[f,p,n,y,h]),0===m.length||f)return null;m.sort((e,t)=>e.toLocaleLowerCase("en-US").localeCompare(t.toLocaleLowerCase("en-US")));let x=[{value:"all",label:h("entityTypePicker.optionAllTitle")},...m.map(e=>({value:e,label:e}))];return t?null:(0,a.jsx)(i.A,{pb:1,pt:1,children:(0,a.jsx)(c.w,{label:h("entityTypePicker.title"),items:x,selected:(x.length>1?g[0]:void 0)??"all",onChange:e=>y("all"===e?[]:[String(e)])})})}},57278:function(e,t,n){n.d(t,{j:()=>f});var a=n(14041),l=n(73466),i=n(46343),r=n.n(i),o=n(40074),s=n.n(o),c=n(18139),u=n(30043),d=n(18453),p=n(49724);function f(){let e=(0,c.gf)(u.v),{filters:{kind:t,type:n},queryParameters:{type:i},updateFilters:o}=(0,d.nK)(),f=(0,a.useMemo)(()=>[i].flat().filter(Boolean),[i]),[m,g]=(0,a.useState)(f.length?f:n?.getTypes()??[]);(0,a.useEffect)(()=>{f.length&&g(f)},[f]);let[y,h]=(0,a.useState)([]),x=(0,a.useMemo)(()=>t?.value,[t]),{error:v,loading:j,value:C}=(0,l.A)(async()=>x?await e.getEntityFacets({filter:{kind:x},facets:["spec.type"]}).then(e=>e.facets["spec.type"]||[]):[],[x,e]),S=(0,a.useRef)(C);return(0,a.useEffect)(()=>{let e=S.current;if(S.current=C,j||!x||e===C||!C)return;let t=[...new Set(s()(C,e=>-e.count).map(e=>e.value.toLocaleLowerCase("en-US")))];h(t);let n=m.filter(e=>t.includes(e));r()(m,n)||g(n)},[j,x,m,g,C]),(0,a.useEffect)(()=>{o({type:m.length?new p.qA(m):void 0})},[m,o]),{loading:j,error:v,availableTypes:y,selectedTypes:m,setSelectedTypes:g}}},81878:function(e,t,n){n.d(t,{G:()=>_});var a=n(31085),l=n(55488),i=n(97214),r=n(78560),o=n(99338),s=n(62112),c=n(23730),u=n(3571),d=n(53318),p=n(44861),f=n(18453),m=n(699),g=n(72501);let y={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var h=n(75625),x=n(39330),v=n(45250),j=n(65398),C=n.n(j),S=n(14041),w=n(37281),b=n(14158),T=n(94390),A=n(54748),k=n(10500);let L=Object.freeze({createNameColumn(e){function t(t){return t.metadata?.title||(0,d.S)(t,{defaultKind:e?.defaultKind})}return{title:(0,a.jsx)(k.g,{translationKey:"name"}),field:"resolved.entityRef",highlight:!0,customSort:({entity:e},{entity:n})=>t(e).localeCompare(t(n)),render:({entity:t})=>(0,a.jsx)(w.z,{entityRef:t,defaultKind:e?.defaultKind||"Component"})}},createSystemColumn:()=>({title:(0,a.jsx)(k.g,{translationKey:"system"}),field:"resolved.partOfSystemRelationTitle",customFilterAndSearch:(e,t)=>!!t.resolved.partOfSystemRelations&&t.resolved.partOfSystemRelations.map(e=>e.name).join(", ").toLocaleUpperCase("en-US").includes(e.toLocaleUpperCase("en-US")),render:({resolved:e})=>(0,a.jsx)(b.i,{entityRefs:e.partOfSystemRelations,defaultKind:"system"})}),createOwnerColumn:()=>({title:(0,a.jsx)(k.g,{translationKey:"owner"}),field:"resolved.ownedByRelationsTitle",render:({resolved:e})=>(0,a.jsx)(b.i,{entityRefs:e.ownedByRelations,defaultKind:"group"})}),createSpecTargetsColumn:()=>({title:(0,a.jsx)(k.g,{translationKey:"targets"}),field:"entity.spec.targets",customFilterAndSearch:(e,t)=>{let n=[];return t.entity?.spec?.targets&&Array.isArray(t.entity?.spec?.targets)?n=t.entity?.spec?.targets:t.entity?.spec?.target&&(n=[t.entity?.spec?.target]),n.join(", ").toLocaleUpperCase("en-US").includes(e.toLocaleUpperCase("en-US"))},render:({entity:e})=>(0,a.jsx)(a.Fragment,{children:(e?.spec?.targets||e?.spec?.target)&&(0,a.jsx)(A.M,{text:(e.spec.targets||[e.spec.target]).join(", "),placement:"bottom-start"})})}),createSpecTypeColumn:(e={hidden:!1})=>({title:(0,a.jsx)(k.g,{translationKey:"type"}),field:"entity.spec.type",hidden:e.hidden,width:"auto"}),createSpecLifecycleColumn:()=>({title:(0,a.jsx)(k.g,{translationKey:"lifecycle"}),field:"entity.spec.lifecycle"}),createMetadataDescriptionColumn:()=>({title:(0,a.jsx)(k.g,{translationKey:"description"}),field:"entity.metadata.description",render:({entity:e})=>(0,a.jsx)(A.M,{text:e.metadata.description,placement:"bottom-start"}),width:"auto"}),createTagsColumn:()=>({title:(0,a.jsx)(k.g,{translationKey:"tags"}),field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:e})=>(0,a.jsx)(a.Fragment,{children:e.metadata.tags&&e.metadata.tags.map(e=>(0,a.jsx)(T.A,{label:e,size:"small",variant:"outlined",style:{marginBottom:"0px"}},e))}),width:"auto"}),createTitleColumn:e=>({title:(0,a.jsx)(k.g,{translationKey:"title"}),field:"entity.metadata.title",hidden:e?.hidden,searchable:!0}),createLabelColumn(e,t){function n(e,t){let n=t.metadata?.labels;return n&&n[e]||""}return{title:t?.title||(0,a.jsx)(k.g,{translationKey:"label"}),field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},customSort:({entity:t},{entity:a})=>n(e,t).localeCompare(n(e,a)),render:({entity:n})=>{let l=n.metadata?.labels,i=l&&l[e]||t?.defaultValue;return(0,a.jsx)(a.Fragment,{children:i&&(0,a.jsx)(T.A,{label:i,size:"small",variant:"outlined"},i)})},width:"auto"}},createNamespaceColumn:()=>({title:(0,a.jsx)(k.g,{translationKey:"namespace"}),field:"entity.metadata.namespace",width:"auto"})});var K=n(79533),R=n(75173);let E=(0,n(58837).A)(e=>({root:{paddingTop:e.spacing(1.25),paddingLeft:e.spacing(2.5),paddingBottom:e.spacing(.75),display:"flex",justifyContent:"space-between"},text:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),{name:"PluginCatalogTableToolbar"});function M(e){let t=E();return(0,a.jsxs)(R.A,{className:t.root,children:[(0,a.jsx)(g.A,{variant:"h5",className:t.text,children:e.title}),(0,a.jsx)(K.l,{})]})}function P(e){let{columns:t,data:n,options:l,...i}=e,{setLimit:r,setOffset:o,limit:s,totalItems:c,offset:d}=(0,f.nK)(),[p,m]=(0,S.useState)(d&&s?Math.floor(d/s):0);return(0,S.useEffect)(()=>{c&&p*s>=c?o(Math.max(0,c-s)):o(Math.max(0,p*s))},[o,p,s,c]),(0,a.jsx)(u.X,{columns:t,data:n,options:{pageSizeOptions:[5,10,20,50,100],pageSize:s,emptyRowsWhenPaging:!1,...l},components:{Toolbar:M},page:p,onPageChange:m,onRowsPerPageChange:r,totalCount:c,...i})}function z(e){let{columns:t,data:n,next:l,prev:i,options:r,...o}=e;return(0,a.jsx)(u.X,{columns:t,data:n,options:{...r,pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onPageChange:e=>{e>0?l?.():i?.()},components:{Toolbar:M},page:+!!i,totalCount:l?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}},...o})}let N=({filters:e,entities:t})=>{let n=void 0===e.type;return[L.createTitleColumn({hidden:!0}),L.createNameColumn({defaultKind:e.kind?.value}),...function(){let a=[L.createMetadataDescriptionColumn(),L.createTagsColumn()],l=[L.createSystemColumn(),L.createOwnerColumn(),L.createSpecTypeColumn({hidden:!n}),L.createSpecLifecycleColumn()];switch(e.kind?.value){case"user":return[...a];case"domain":case"system":return[L.createOwnerColumn(),...a];case"group":case"template":return[L.createSpecTypeColumn({hidden:!n}),...a];case"location":return[L.createSpecTypeColumn({hidden:!n}),L.createSpecTargetsColumn()];default:return t.every(e=>"default"===e.metadata.namespace)?[...l,...a]:[...l,L.createNamespaceColumn(),...a]}}()]};var O=n(10265),U=n(58045);let F=(e,t)=>{let n=e=>e.metadata.title||(0,d.S)(e,{defaultKind:"Component"});return n(e).localeCompare(n(t))},_=e=>{let{columns:t=N,tableOptions:n,subtitle:i,emptyContent:r}=e,{isStarredEntity:d,toggleStarredEntity:m}=(0,p.I)(),j=(0,f.nK)(),{loading:w,error:b,entities:T,filters:A,pageInfo:k,totalItems:L,paginationMode:K}=j,R=(0,S.useMemo)(()=>"function"==typeof t?t(j):t,[t,j]),{t:E}=(0,O.i)(U.W);if(b)return(0,a.jsx)("div",{children:(0,a.jsx)(o.B,{severity:"error",title:E("catalogTable.warningPanelTitle"),children:(0,a.jsx)(s.z,{language:"text",text:b.toString()})})});let M=[({entity:e})=>{let t=e.metadata.annotations?.[l._P],n=E("catalogTable.viewActionTitle");return{icon:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{style:y,children:n}),(0,a.jsx)(x.default,{fontSize:"small"})]}),tooltip:n,disabled:!t,onClick:()=>{t&&window.open(t,"_blank")}}},({entity:e})=>{let t=e.metadata.annotations?.[l.P],n=E("catalogTable.editActionTitle");return{icon:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{style:y,children:n}),(0,a.jsx)(h.default,{fontSize:"small"})]}),tooltip:n,disabled:!t,onClick:()=>{t&&window.open(t,"_blank")}}},({entity:e})=>{let t=d(e);return{cellStyle:{paddingLeft:"1em"},icon:()=>(0,a.jsx)(c.m,{isFavorite:t}),tooltip:t?E("catalogTable.unStarActionTitle"):E("catalogTable.starActionTitle"),onClick:()=>m(e)}}],_=A.kind?.label||"",I=A.type?.value||"",X="number"==typeof L?`(${L})`:"",D=(0,v.capitalize)(A.user?.value??"all"),q=e.title||[D,I,C()(_),X].filter(e=>e).join(" "),W=e.actions||M,G={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!w,padding:"dense",...n};if("cursor"===K)return(0,a.jsx)(z,{columns:R,emptyContent:r,isLoading:w,title:q,actions:W,subtitle:i,options:G,data:T.map(B),next:k?.next,prev:k?.prev});if("offset"===K)return(0,a.jsx)(P,{columns:R,emptyContent:r,isLoading:w,title:q,actions:W,subtitle:i,options:G,data:T.map(B)});let V=T.sort(F).map(B),Y=V.length>20;return(0,a.jsx)(u.X,{isLoading:w,columns:R,options:{paging:Y,pageSize:20,pageSizeOptions:[20,50,100],...G},title:q,data:V,actions:W,subtitle:i,emptyContent:r})};function B(e){let t=(0,m.t)(e,i.jn,{kind:"system"}),n=(0,m.t)(e,i.vv);return{entity:e,resolved:{name:(0,d.S)(e,{defaultKind:"Component"}),entityRef:(0,r.U2)(e),ownedByRelationsTitle:n.map(e=>(0,d.S)(e,{defaultKind:"group"})).join(", "),ownedByRelations:n,partOfSystemRelationTitle:t.map(e=>(0,d.S)(e,{defaultKind:"system"})).join(", "),partOfSystemRelations:t}}}_.columns=L,_.defaultColumnsFunc=N},16983:function(e,t,n){var a=n(85608),l=n(14041),i=a.__importDefault(n(49069));t.default=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var a=i.default(e,t),r=a[0],o=a[1],s=a[2];return l.useEffect(s,n),[r,o]}},49069:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(14041);t.default=function(e,t){void 0===t&&(t=0);var n=a.useRef(!1),l=a.useRef(),i=a.useRef(e),r=a.useCallback(function(){return n.current},[]),o=a.useCallback(function(){n.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){n.current=!0,i.current()},t)},[t]),s=a.useCallback(function(){n.current=null,l.current&&clearTimeout(l.current)},[]);return a.useEffect(function(){i.current=e},[e]),a.useEffect(function(){return o(),s},[t]),[r,s,o]}}}]);
//# sourceMappingURL=9526.5f929f83.chunk.js.map