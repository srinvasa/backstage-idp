(self.webpackChunkapp=self.webpackChunkapp||[]).push([["7367"],{54748:function(e,t,a){"use strict";a.d(t,{M:()=>s});var i=a(31085),r=a(58837),n=a(71677),o=a(72501);let l=(0,r.A)({container:{overflow:"visible !important"},typo:{fontSize:"inherit",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":({line:e})=>e||1,"-webkit-box-orient":"vertical"}},{name:"BackstageOverflowTooltip"});function s(e){let t=l(e);return(0,i.jsx)(n.Ay,{title:e.title??(e.text||""),placement:e.placement,children:(0,i.jsx)(o.A,{className:t.typo,variant:"inherit",children:e.text})})}},14314:function(e,t,a){"use strict";a.d(t,{GroupProfileCard:()=>eM,UserProfileCard:()=>e_,OwnershipCard:()=>e7,MembersListCard:()=>en});var i=a(31085),r=a(55488),n=a(78560),o=a(37281),l=a(16400),s=a(30043),d=a(77125),c=a(42899),u=a(73643),p=a(72501),m=a(58837),g=a(99703),h=a(89575),f=a(39850),x=a(14041),b=a(9546),y=a(7031),v=a(62064),A=a(1400),j=a(45065),C=a(268),w=a(54917),k=a(20098),P=a(38483);let N=(0,P.A)(x.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),T=(0,P.A)(x.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),z=(0,P.A)(x.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),L=(0,P.A)(x.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var M=a(11192),S=x.forwardRef(function(e,t){var a=e.classes,i=e.className,r=e.color,n=void 0===r?"standard":r,o=e.component,l=e.disabled,s=void 0!==l&&l,d=e.page,c=e.selected,u=e.shape,p=e.size,m=void 0===p?"medium":p,g=e.type,y=void 0===g?"page":g,v=e.variant,A=void 0===v?"text":v,j=(0,f.A)(e,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),C=("rtl"===(0,w.A)().direction?{previous:L,next:z,last:N,first:T}:{previous:z,next:L,first:N,last:T})[y];return"start-ellipsis"===y||"end-ellipsis"===y?x.createElement("div",{ref:t,className:(0,b.A)(a.root,a.ellipsis,s&&a.disabled,"medium"!==m&&a["size".concat((0,M.A)(m))])},"â€¦"):x.createElement(k.A,(0,h.A)({ref:t,component:o,disabled:s,focusVisibleClassName:a.focusVisible,className:(0,b.A)(a.root,a.page,a[A],a[void 0===u?"round":u],i,"standard"!==n&&a["".concat(A).concat((0,M.A)(n))],s&&a.disabled,void 0!==c&&c&&a.selected,"medium"!==m&&a["size".concat((0,M.A)(m))])},j),"page"===y&&d,C?x.createElement(C,{className:a.icon}):null)});let B=(0,y.A)(function(e){return{root:(0,h.A)({},e.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:e.palette.text.primary}),page:{transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:e.palette.action.focus},"&$selected":{backgroundColor:e.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:(0,C.X4)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:1,color:e.palette.action.disabled,backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:e.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:e.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:e.typography.pxToRem(15),"& $icon":{fontSize:e.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}},"&$disabled":{color:e.palette.action.disabled}}},textSecondary:{"&$selected":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}},"&$disabled":{color:e.palette.action.disabled}}},outlined:{border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:e.palette.primary.main,border:"1px solid ".concat((0,C.X4)(e.palette.primary.main,.5)),backgroundColor:(0,C.X4)(e.palette.primary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,C.X4)(e.palette.primary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:e.palette.secondary.main,border:"1px solid ".concat((0,C.X4)(e.palette.secondary.main,.5)),backgroundColor:(0,C.X4)(e.palette.secondary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,C.X4)(e.palette.secondary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},rounded:{borderRadius:e.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:e.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:e.typography.pxToRem(20),margin:"0 -8px"}}},{name:"MuiPaginationItem"})(S);function I(e,t,a){return"page"===e?"".concat(a?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}var R=x.forwardRef(function(e,t){e.boundaryCount;var a=e.classes,i=e.className,r=e.color,n=void 0===r?"standard":r,o=(e.count,e.defaultPage,e.disabled,e.getItemAriaLabel),l=void 0===o?I:o,s=(e.hideNextButton,e.hidePrevButton,e.onChange,e.page,e.renderItem),d=void 0===s?function(e){return x.createElement(B,e)}:s,c=e.shape,u=void 0===c?"round":c,p=(e.showFirstButton,e.showLastButton,e.siblingCount,e.size),m=void 0===p?"medium":p,g=e.variant,y=void 0===g?"text":g,C=(0,f.A)(e,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.boundaryCount,a=void 0===t?1:t,i=e.componentName,r=e.count,n=void 0===r?1:r,o=e.defaultPage,l=e.disabled,s=void 0!==l&&l,d=e.hideNextButton,c=e.hidePrevButton,u=e.onChange,p=e.page,m=e.showFirstButton,g=e.showLastButton,x=e.siblingCount,b=void 0===x?1:x,y=(0,f.A)(e,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),C=(0,j.A)({controlled:p,default:void 0===o?1:o,name:void 0===i?"usePagination":i,state:"page"}),w=(0,A.A)(C,2),k=w[0],P=w[1],N=function(e,t){p||P(t),u&&u(e,t)},T=function(e,t){return Array.from({length:t-e+1},function(t,a){return e+a})},z=T(1,Math.min(a,n)),L=T(Math.max(n-a+1,a+1),n),M=Math.max(Math.min(k-b,n-a-2*b-1),a+2),S=Math.min(Math.max(k+b,a+2*b+2),L[0]-2),B=[].concat((0,v.A)(void 0!==m&&m?["first"]:[]),(0,v.A)(void 0!==c&&c?[]:["previous"]),(0,v.A)(z),(0,v.A)(M>a+2?["start-ellipsis"]:a+1<n-a?[a+1]:[]),(0,v.A)(T(M,S)),(0,v.A)(S<n-a-1?["end-ellipsis"]:n-a>a?[n-a]:[]),(0,v.A)(L),(0,v.A)(void 0!==d&&d?[]:["next"]),(0,v.A)(void 0!==g&&g?["last"]:[])),I=function(e){switch(e){case"first":return 1;case"previous":return k-1;case"next":return k+1;case"last":return n;default:return null}},R=B.map(function(e){return"number"==typeof e?{onClick:function(t){N(t,e)},type:"page",page:e,selected:e===k,disabled:s,"aria-current":e===k?"true":void 0}:{onClick:function(t){N(t,I(e))},type:e,page:I(e),selected:!1,disabled:s||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?k>=n:k<=1)}});return(0,h.A)({items:R},y)}((0,h.A)({},e,{componentName:"Pagination"})).items;return x.createElement("nav",(0,h.A)({"aria-label":"pagination navigation",className:(0,b.A)(a.root,i),ref:t},C),x.createElement("ul",{className:a.ul},w.map(function(e,t){return x.createElement("li",{key:t},d((0,h.A)({},e,{color:n,"aria-label":l(e.type,e.page,e.selected),shape:u,size:m,variant:y})))})))});let $=(0,y.A)({root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}},{name:"MuiPagination"})(R);var U=a(73466),E=a(20221),G=a(53373),O=a.n(G);let _=(0,m.A)(e=>({avatar:{width:"4rem",height:"4rem",color:e.palette.common.white,backgroundColor:e=>e.backgroundColor},avatarText:{fontWeight:e.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function F(e){let t,a,r,{displayName:n,picture:o,customStyles:l}=e,s={...l},d={fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight},c=_(o?{}:{backgroundColor:function(e){let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);let a="#";for(let e=0;e<3;e++){let i=t>>8*e&255;a+=`00${i.toString(16)}`.slice(-2)}return a}(n||"")}),u=O()(e.classes?.avatar,c.avatar),m=O()(e.classes?.avatarText,c.avatarText);return(0,i.jsx)(E.A,{alt:n,src:o,className:u,style:s,children:n&&(0,i.jsx)(p.A,{variant:"h6",component:"span",className:m,style:d,children:(a=(t=n.replace(/\([^)]{0,1000}\)/g,"").replace(/\[[^\]]{0,1000}\]/g,"").trim().split(/\s+/).map(e=>e.replace(/[^A-Za-z\u00C0-\u017F]/g,"")).filter(Boolean))[0]??"",r=t.length>1?t[t.length-1]:"",a&&r?`${a.charAt(0)}${r.charAt(0)}`:a.charAt(0))})})}var V=a(75202),W=a(54748),H=a(96872),D=a(99424),q=a(21332),K=a(18139),X=a(97214),Q=a(699);let Y=async(e,t,a="memberof")=>(0===e.length?{items:[]}:await t.getEntities({filter:{kind:"User",[`relations.${a.toLocaleLowerCase("en-US")}`]:e.map(e=>(0,n.U2)({kind:"group",namespace:e.namespace.toLocaleLowerCase("en-US"),name:e.name.toLocaleLowerCase("en-US")}))}})).items,Z=async(e,t)=>{let a=new Map,i=[{kind:e.kind,namespace:e.metadata.namespace??r.oQ,name:e.metadata.name}],o=[];for(;i.length>0;){let e=i.shift(),r=await t.getEntityByRef(e);a.set((0,n.U2)(e),!0);let l=(0,Q.t)(r,X.Kx,{kind:"Group"}).filter(e=>!a.has((0,n.U2)(e)));l.forEach(e=>a.set((0,n.U2)(e),!0)),i.push(...l),o.push(...l)}return o},J=async(e,t,a="memberof")=>Y(await Z(e,t),t,a);var ee=a(10265);let et=(0,a(48870).h)({id:"org",messages:{groupProfileCard:{groupNotFound:"Group not found",editIconButtonTitle:"Edit Metadata",refreshIconButtonTitle:"Schedule entity refresh",refreshIconButtonAriaLabel:"Refresh",listItemTitle:{entityRef:"Entity Ref",email:"Email",parentGroup:"Parent Group",childGroups:"Child Groups"}},membersListCard:{title:"Members",subtitle:"of {{groupName}}",paginationLabel:", page {{page}} of {{nbPages}}",noMembersDescription:"This group has no members.",aggregateMembersToggle:{directMembers:"Direct Members",aggregatedMembers:"Aggregated Members",ariaLabel:"Users Type Switch"}},ownershipCard:{title:"Ownership",aggregateRelationsToggle:{directRelations:"Direct Relations",aggregatedRelations:"Aggregated Relations",ariaLabel:"Ownership Type Switch"}},userProfileCard:{userNotFound:"User not found",editIconButtonTitle:"Edit Metadata",listItemTitle:{email:"Email",memberOf:"Member of"},moreGroupButtonTitle:"...More ({{number}})",allGroupDialog:{title:"All {{name}}'s groups:",closeButtonTitle:"Close"}}}}),ea=(0,m.A)(e=>(0,g.A)({card:{border:`1px solid ${e.palette.divider}`,boxShadow:e.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:e.spacing(4,1,1),flex:"1",minWidth:"0px"},avatar:{position:"absolute",top:"-2rem"}}),{name:"PluginOrgMemberComponent"}),ei=e=>{let t=ea(),{metadata:{name:a,description:r},spec:{profile:n}}=e.member,l=n?.displayName??a;return(0,i.jsx)(d.A,{className:t.card,children:(0,i.jsxs)(d.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(F,{displayName:l,picture:n?.picture,classes:t}),(0,i.jsxs)(d.A,{pt:2,sx:{width:"100%"},textAlign:"center",children:[(0,i.jsx)(p.A,{variant:"h6",children:(0,i.jsx)(o.z,{"data-testid":"user-link",entityRef:e.member,title:l})}),n?.email&&(0,i.jsx)(V.N_,{to:`mailto:${n.email}`,children:(0,i.jsx)(W.M,{text:n.email})}),r&&(0,i.jsx)(p.A,{variant:"subtitle2",children:(0,i.jsx)(W.M,{text:r,line:5})})]})]})})},er=(0,m.A)(e=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:e.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${e.spacing(34)}px))`}}),{name:"PluginOrgMembersListCardComponent"}),en=e=>{var t;let a,o,{t:m}=(0,ee.i)(et),{memberDisplayTitle:g=m("membersListCard.title"),pageSize:h=50,showAggregateMembersToggle:f,relationType:b="memberof"}=e,y=e.relationAggregation??e.relationsType??"direct",v=er(),{entity:A}=(0,l.tN)(),{metadata:{name:j,namespace:C},spec:{profile:w}}=A,k=(0,K.gf)(s.v),P=w?.displayName??j,N=C||r.oQ,[T,z]=(0,x.useState)(1),[L,M]=(0,x.useState)("aggregated"===y),{loading:S,value:B}=(0,U.A)(async()=>L?await J(A,k,b):[],[k,A,L]),{loading:I,error:R,value:E}=(0,U.A)(async()=>(await k.getEntities({filter:{kind:"User",[`relations.${b.toLocaleLowerCase("en-US")}`]:[(0,n.U2)({kind:"group",namespace:N.toLocaleLowerCase("en-US"),name:j.toLocaleLowerCase("en-US")})]}})).items,[k,A]),G=(t=[...E??[],...B&&L?B:[]].sort((e,t)=>(0,n.U2)(e).localeCompare((0,n.U2)(t))),o=new Map,t.filter(e=>{let t=(0,n.U2)(e),a=o.has(t);return o.set(t,!0),!a}));if(I)return(0,i.jsx)(H.k,{});if(R)return(0,i.jsx)(D._,{error:R});let O=Math.ceil((G?.length||0)/h),_=O<2?"":m("membersListCard.paginationLabel",{page:String(T),nbPages:String(O)}),F=(0,i.jsx)($,{count:O,page:T,onChange:(e,t)=>{z(t)},showFirstButton:!0,showLastButton:!0});return a=G&&G.length>0?(0,i.jsx)(d.A,{className:v.memberList,children:G.slice(h*(T-1),h*T).map(e=>(0,i.jsx)(ei,{member:e},(0,n.U2)(e)))}):(0,i.jsx)(d.A,{p:2,children:(0,i.jsx)(p.A,{children:m("membersListCard.noMembersDescription")})}),(0,i.jsx)(c.A,{item:!0,className:v.root,children:(0,i.jsxs)(q.n,{title:`${g} (${G?.length||0}${_})`,subheader:m("membersListCard.subtitle",{groupName:P}),...O<=1?{}:{actions:F},className:v.root,cardClassName:v.cardContent,children:[f&&(0,i.jsxs)(i.Fragment,{children:[m("membersListCard.aggregateMembersToggle.directMembers"),(0,i.jsx)(u.A,{color:"primary",checked:L,onChange:()=>{M(!L)},inputProps:{"aria-label":m("membersListCard.aggregateMembersToggle.ariaLabel")}}),m("membersListCard.aggregateMembersToggle.aggregatedMembers")]}),L&&S?(0,i.jsx)(H.k,{}):a]})})};var eo=a(98890),el=a(29365),es=a(58007),ed=a(8109),ec=a(68804),eu=a(5951),ep=a(71677),em=a(14158),eg=a(34477),eh=a(86486),ef=a(48209),ex=a(74011),eb=a(75625),ey=a(85121),ev=a(47966),eA=a(35641),ej=a(95208),eC=a(23127),ew=a(37197);let ek=({href:e,Icon:t,text:a})=>(0,i.jsxs)(ed.A,{children:[(0,i.jsx)(ec.A,{children:t?(0,i.jsx)(t,{}):(0,i.jsx)(eC.default,{})}),(0,i.jsx)(eu.A,{children:(0,i.jsx)(V.N_,{to:e,children:a})})]},e),eP=({links:e})=>{let t=(0,ej.n)();return void 0===e?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ew.A,{}),e.map(e=>{let a;return(0,i.jsx)(ek,{href:e.url,text:e.title,Icon:(a=e.icon)?t.getSystemIcon(a)??eC.default:eC.default},e.url)})]})};var eN=a(56299),eT=a(71913);let ez=(0,m.A)(e=>({container:{display:"flex",flexWrap:"wrap",gap:e.spacing(1),padding:e.spacing(1)},list:{padding:0,marginLeft:e.spacing(.5)}})),eL=e=>(0,i.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,i.jsx)(ev.default,{fontSize:"inherit"}),(0,i.jsx)(d.A,{ml:1,children:e.title})]}),eM=e=>{let t=(0,K.gf)(s.v),a=(0,K.gf)(eg.k),{entity:o}=(0,l.tN)(),{allowed:c}=(0,eN.A)(eT.tS),{t:u}=(0,ee.i)(et),p=ez(),m=(0,x.useCallback)(async()=>{await t.refreshEntity((0,n.U2)(o)),a.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[t,a,o]);if(!o)return(0,i.jsx)(ef.A,{severity:"error",children:u("groupProfileCard.groupNotFound")});let{metadata:{name:g,description:h,title:f,annotations:b,links:y},spec:{profile:v}}=o,A=(0,Q.t)(o,X.Kx,{kind:"Group"}),j=(0,Q.t)(o,X.Qz,{kind:"group"}),C=b?.[eo.Eo],w=C?.startsWith("url:")||C?.startsWith("file:"),k=o.metadata.annotations?.[r.P],P=v?.displayName??f??g,N=v?.email?`mailto:${v.email}`:"#",T=k?(0,i.jsx)(el.A,{"aria-label":u("groupProfileCard.editIconButtonTitle"),title:u("groupProfileCard.editIconButtonTitle"),component:V.N_,to:k,children:(0,i.jsx)(eb.default,{})}):(0,i.jsx)(el.A,{"aria-label":u("groupProfileCard.editIconButtonTitle"),disabled:!0,title:u("groupProfileCard.editIconButtonTitle"),children:(0,i.jsx)(eb.default,{})});return(0,i.jsx)(q.n,{title:(0,i.jsx)(eL,{title:P}),subheader:h,variant:e.variant,action:(0,i.jsxs)(i.Fragment,{children:[w&&c&&(0,i.jsx)(el.A,{"aria-label":u("groupProfileCard.refreshIconButtonAriaLabel"),title:u("groupProfileCard.refreshIconButtonTitle"),onClick:m,children:(0,i.jsx)(ex.default,{})}),T]}),children:(0,i.jsxs)(d.A,{className:p.container,children:[(0,i.jsx)(F,{displayName:P,picture:v?.picture}),(0,i.jsxs)(es.A,{className:p.list,children:[(0,i.jsxs)(ed.A,{children:[(0,i.jsx)(ec.A,{children:(0,i.jsx)(ep.Ay,{title:u("groupProfileCard.listItemTitle.entityRef"),children:(0,i.jsx)(eA.default,{})})}),(0,i.jsx)(eu.A,{primary:(0,n.U2)(o),secondary:u("groupProfileCard.listItemTitle.entityRef")})]}),v?.email&&(0,i.jsxs)(ed.A,{children:[(0,i.jsx)(ec.A,{children:(0,i.jsx)(ep.Ay,{title:u("groupProfileCard.listItemTitle.email"),children:(0,i.jsx)(ey.default,{})})}),(0,i.jsx)(eu.A,{primary:(0,i.jsx)(V.N_,{to:N,children:v.email}),secondary:u("groupProfileCard.listItemTitle.email")})]}),(0,i.jsxs)(ed.A,{children:[(0,i.jsx)(ec.A,{children:(0,i.jsx)(ep.Ay,{title:u("groupProfileCard.listItemTitle.parentGroup"),children:(0,i.jsx)(eh.default,{})})}),(0,i.jsx)(eu.A,{primary:j.length?(0,i.jsx)(em.i,{entityRefs:j,defaultKind:"Group"}):"N/A",secondary:u("groupProfileCard.listItemTitle.parentGroup")})]}),(0,i.jsxs)(ed.A,{children:[(0,i.jsx)(ec.A,{children:(0,i.jsx)(ep.Ay,{title:u("groupProfileCard.listItemTitle.childGroups"),children:(0,i.jsx)(ev.default,{})})}),(0,i.jsx)(eu.A,{primary:A.length?(0,i.jsx)(em.i,{entityRefs:A,defaultKind:"Group"}):"N/A",secondary:u("groupProfileCard.listItemTitle.childGroups")})]}),e?.showLinks&&(0,i.jsx)(eP,{links:y})]})]})})};var eS=a(64947),eB=a(76891),eI=a(61477),eR=a(46805),e$=a(93453),eU=a(32881),eE=a(48108);let eG=(0,m.A)(e=>(0,g.A)({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},moreButton:{display:"contents",color:e.palette.primary.main},dialogPaper:{minHeight:400}}),{name:"PluginOrgUserProfileCard"}),eO=e=>e.title?(0,i.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,i.jsx)(eE.default,{fontSize:"inherit"}),(0,i.jsx)(d.A,{ml:1,children:e.title})]}):null,e_=e=>{let{maxRelations:t,hideIcons:a}=e,n=eG(),{entity:o}=(0,l.tN)(),[s,d]=(0,x.useState)(!1),{t:u}=(0,ee.i)(et),p=(0,x.useCallback)(()=>d(e=>!e),[]);if(!o)return(0,i.jsx)(ef.A,{severity:"error",children:u("userProfileCard.userNotFound")});let m=o.metadata.annotations?.[r.P],{metadata:{name:g,description:h,links:f},spec:{profile:b}}=o,y=b?.displayName??g,v=b?.email?`mailto:${b.email}`:void 0,A=(0,Q.t)(o,X.u0,{kind:"Group"});return(0,i.jsxs)(q.n,{title:(0,i.jsx)(eO,{title:y}),subheader:h,variant:e.variant,action:(0,i.jsx)(i.Fragment,{children:m&&(0,i.jsx)(el.A,{"aria-label":u("userProfileCard.editIconButtonTitle"),title:u("userProfileCard.editIconButtonTitle"),component:V.N_,to:m,children:(0,i.jsx)(eb.default,{})})}),children:[(0,i.jsxs)(c.A,{container:!0,spacing:3,alignItems:"flex-start",children:[(0,i.jsx)(c.A,{item:!0,xs:12,sm:2,xl:1,children:(0,i.jsx)(F,{displayName:y,picture:b?.picture})}),(0,i.jsx)(c.A,{item:!0,md:10,xl:11,children:(0,i.jsxs)(es.A,{children:[b?.email&&(0,i.jsxs)(ed.A,{children:[(0,i.jsx)(ec.A,{children:(0,i.jsx)(ep.Ay,{title:u("userProfileCard.listItemTitle.email"),children:(0,i.jsx)(ey.default,{})})}),(0,i.jsx)(eu.A,{children:(0,i.jsx)(V.N_,{to:v??"",children:b.email})})]}),void 0===t||t>0?(0,i.jsxs)(ed.A,{children:[(0,i.jsx)(ec.A,{children:(0,i.jsx)(ep.Ay,{title:u("userProfileCard.listItemTitle.memberOf"),children:(0,i.jsx)(ev.default,{})})}),(0,i.jsxs)(eu.A,{children:[(0,i.jsx)(em.i,{entityRefs:A.slice(0,t),defaultKind:"Group",hideIcons:a}),t&&A.length>t?(0,i.jsxs)(i.Fragment,{children:[",",(0,i.jsx)(k.A,{className:n.moreButton,onClick:p,disableRipple:!0,children:u("userProfileCard.moreGroupButtonTitle",{number:String(A.length-t)})})]}):null]})]}):null,e?.showLinks&&(0,i.jsx)(eP,{links:f})]})})]}),(0,i.jsxs)(eB.A,{classes:{paper:n.dialogPaper},open:s,onClose:p,scroll:"paper","aria-labelledby":"view-all-groups-dialog-title",maxWidth:"md",fullWidth:!0,children:[(0,i.jsxs)(eI.A,{id:"view-all-groups-dialog-title",children:[u("userProfileCard.allGroupDialog.title",{name:o.metadata.name}),(0,i.jsx)(el.A,{className:n.closeButton,"aria-label":u("userProfileCard.allGroupDialog.closeButtonTitle"),onClick:p,children:(0,i.jsx)(eU.default,{})})]}),(0,i.jsx)(eR.A,{dividers:!0,children:(0,i.jsx)(em.i,{entityRefs:A,defaultKind:"Group"})}),(0,i.jsx)(e$.A,{children:(0,i.jsx)(eS.A,{onClick:p,children:u("userProfileCard.allGroupDialog.closeButtonTitle")})})]})]})};var eF=a(65569),eV=a(72814),eW=a(65398),eH=a.n(eW),eD=a(14920),eq=a(53318),eK=a(50308),eX=a.n(eK),eQ=a(45810),eY=a.n(eQ),eZ=a(45250);let eJ=eX()(5),e0=e=>void 0!==e,e1=async(e,t,a=[])=>{let i=(0,Q.t)(e,X.Kx,{kind:"Group"}),r=i.length>0,o=(0,n.U2)(e);if(r){let e=i.map(e=>(0,n.U2)(e)),r=(await eJ(()=>t.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:e}))).items.filter(e0).filter(e=>!a.includes((0,n.U2)(e))),l=(await Promise.all(r.map(e=>e1(e,t,[...a,o])))).flatMap(e=>e);return(0,eZ.uniq)([...l,o])}return[o]},e2=async(e,t,a)=>{let i="Group"===e.kind,r="aggregated"===t,o="User"===e.kind;if(r&&i)return e1(e,a);if(r&&o)return[...(0,Q.t)(e,X.u0,{kind:"Group"}).map(({kind:e,namespace:t,name:a})=>(0,n.U2)({kind:e,namespace:t,name:a})),(0,n.U2)(e)];return[(0,n.U2)(e)]},e4=e=>new Promise(t=>setTimeout(t,e)),e6=async(e,t,a,i=100,r=100)=>{let o=[];for(let n=0;n<e.length;n+=i){let l=e.slice(n,n+i),s=await a.getEntities({filter:[{kind:t,"relations.ownedBy":l}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});o.push(...s.items),n+i<e.length&&await e4(r)}return(0,eZ.uniqBy)(o,n.U2)},e3=(0,m.A)(e=>(0,g.A)({card:{border:`1px solid ${e.palette.divider}`,boxShadow:e.shadows[2],borderRadius:"4px",padding:e.spacing(2),transition:`${e.transitions.duration.standard}ms`,"&:hover":{boxShadow:e.shadows[4]},height:"100%"},bold:{fontWeight:e.typography.fontWeightBold},smallFont:{fontSize:e.typography.body2.fontSize},entityTypeBox:{background:t=>e.getPageTheme({themeId:t.type}).backgroundImage,color:t=>e.getPageTheme({themeId:t.type}).fontColor}}),{name:"PluginOrgComponentsGrid"}),e5=({counter:e,type:t,kind:a,url:r})=>{let n=e3({type:t??a}),o=t??a,l=o.length>10,s=(0,i.jsxs)(d.A,{className:`${n.card} ${n.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center",children:[(0,i.jsx)(p.A,{className:n.bold,variant:"h6",children:e}),(0,i.jsx)(d.A,{sx:{width:"100%",textAlign:"center"},children:(0,i.jsx)(p.A,{className:`${n.bold} ${l&&n.smallFont}`,variant:"h6",children:(0,i.jsx)(W.M,{text:eH()(o.toLocaleUpperCase("en-US"),e)})})}),t&&(0,i.jsx)(p.A,{variant:"subtitle1",children:a})]});return r?(0,i.jsx)(V.N_,{to:r,variant:"body2",children:s}):s},e9=({className:e,entity:t,relationsType:a,relationAggregation:r,entityFilterKind:o,entityLimit:l=6})=>{let d=(0,eV.S)(eD.E);if(!a&&!r)throw Error("The relationAggregation property must be set as an EntityRelationAggregation type.");let{componentsWithCounters:u,loading:p,error:m}=function(e,t,a,i=6){let r=(0,K.gf)(s.v),o=a??["Component","API","System"],{loading:l,error:d,value:c}=(0,U.A)(async()=>{let a=await e2(e,t,r);return(await e6(a,o,r)).reduce((e,t)=>{let a=e.find(e=>e.kind===t.kind&&e.type===t.spec?.type);return a?a.count+=1:e.push({kind:t.kind,type:t.spec?.type?.toString(),count:1}),e},[]).sort((e,t)=>t.count-e.count).slice(0,i).map(e=>({counter:e.count,type:e.type,kind:e.kind,queryParams:((e,t)=>{let{kind:a,type:i}=t,r=e.map(e=>(0,eq.S)((0,n.KU)(e),{defaultKind:"group"})),o={kind:a.toLocaleLowerCase("en-US"),type:i,owners:r,user:"all"};return eY().stringify({filters:o},{arrayFormat:"repeat"})})(a,e)}))},[r,e,t]);return{componentsWithCounters:c,loading:l,error:d}}(t,r??a,o,l);return p?(0,i.jsx)(H.k,{}):m?(0,i.jsx)(D._,{error:m}):(0,i.jsx)(c.A,{container:!0,className:e,children:u?.map(e=>(0,i.jsx)(c.A,{item:!0,xs:6,md:6,lg:4,children:(0,i.jsx)(e5,{counter:e.counter,kind:e.kind,type:e.type,url:d&&`${d()}?${e.queryParams}`})},e.type??e.kind))})},e8=(0,m.A)(e=>(0,g.A)({card:{maxHeight:"100%"},cardContent:{display:"flex",flexDirection:"column",overflow:"hidden"},list:{[e.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[e.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[e.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}},grid:{overflowY:"auto",marginTop:0},box:{overflowY:"auto",padding:e.spacing(0,1,1),margin:e.spacing(0,-1)}}),{name:"PluginOrgOwnershipCard"}),e7=e=>{let{variant:t,entityFilterKind:a,hideRelationsToggle:r,entityLimit:n=6,maxScrollHeight:o}=e,s=e.relationAggregation??e.relationsType,c=e8(),{entity:p}=(0,l.tN)(),{t:m}=(0,ee.i)(et),g="User"===p.kind?"aggregated":"direct",[h,f]=(0,x.useState)(s??g);return(0,x.useEffect)(()=>{s||f(g)},[f,g,s]),(0,i.jsxs)(q.n,{title:m("ownershipCard.title"),variant:t,className:c.card,cardClassName:c.cardContent,children:[!(void 0!==r&&r)&&(0,i.jsx)(es.A,{dense:!0,children:(0,i.jsxs)(ed.A,{className:c.list,children:[(0,i.jsx)(eu.A,{className:c.listItemText}),(0,i.jsxs)(eF.A,{className:c.listItemSecondaryAction,children:[m("ownershipCard.aggregateRelationsToggle.directRelations"),(0,i.jsx)(ep.Ay,{placement:"top",arrow:!0,title:m("direct"===h?"ownershipCard.aggregateRelationsToggle.directRelations":"ownershipCard.aggregateRelationsToggle.aggregatedRelations"),children:(0,i.jsx)(u.A,{color:"primary",checked:"direct"!==h,onChange:()=>{f("direct"===h?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":m("ownershipCard.aggregateRelationsToggle.ariaLabel")}})}),m("ownershipCard.aggregateRelationsToggle.aggregatedRelations")]})]})}),(0,i.jsx)(d.A,{maxHeight:"fullHeight"!==t?o:void 0,className:c.box,children:(0,i.jsx)(e9,{className:c.grid,entity:p,entityLimit:n,relationAggregation:h,entityFilterKind:a})})]})}},86486:function(e,t,a){"use strict";var i=a(4293),r=a(78920);t.default=void 0;var n=r(a(14041));t.default=(0,i(a(74044)).default)(n.createElement("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree")},74011:function(e,t,a){"use strict";var i=a(4293),r=a(78920);t.default=void 0;var n=r(a(14041));t.default=(0,i(a(74044)).default)(n.createElement("path",{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached")},47966:function(e,t,a){"use strict";var i=a(4293),r=a(78920);t.default=void 0;var n=r(a(14041));t.default=(0,i(a(74044)).default)(n.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group")},23127:function(e,t,a){"use strict";var i=a(4293),r=a(78920);t.default=void 0;var n=r(a(14041));t.default=(0,i(a(74044)).default)(n.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"Language")},35641:function(e,t,a){"use strict";var i=a(4293),r=a(78920);t.default=void 0;var n=r(a(14041));t.default=(0,i(a(74044)).default)(n.createElement("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}),"PermIdentity")},50308:function(e,t,a){"use strict";let i=a(25192);e.exports=e=>{if(!((Number.isInteger(e)||e===1/0)&&e>0))throw TypeError("Expected `concurrency` to be a number from 1 and up");let t=new i,a=0,r=async(e,i,...r)=>{a++;let n=(async()=>e(...r))();i(n);try{await n}catch{}a--,t.size>0&&t.dequeue()()},n=(i,...n)=>new Promise(o=>{((i,n,...o)=>{t.enqueue(r.bind(null,i,n,...o)),(async()=>{await Promise.resolve(),a<e&&t.size>0&&t.dequeue()()})()})(i,o,...n)});return Object.defineProperties(n,{activeCount:{get:()=>a},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),n}},25192:function(e){class t{constructor(e){this.value=e,this.next=void 0}}class a{constructor(){this.clear()}enqueue(e){let a=new t(e);this._head?this._tail.next=a:this._head=a,this._tail=a,this._size++}dequeue(){let e=this._head;if(e)return this._head=this._head.next,this._size--,e.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let e=this._head;for(;e;)yield e.value,e=e.next}}e.exports=a}}]);
//# sourceMappingURL=7367.d42dd79b.chunk.js.map