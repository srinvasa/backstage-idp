{"version":3,"file":"static/8338.4f968096.chunk.js","sources":["webpack://app/../../node_modules/@backstage/plugin-catalog-graph/dist/components/CatalogGraphCard/CatalogGraphCard.esm.js"],"sourcesContent":["import { jsx } from 'react/jsx-runtime';\nimport { getCompoundEntityRef, parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { InfoCard } from '@backstage/core-components';\nimport { useRouteRef, useAnalytics } from '@backstage/core-plugin-api';\nimport { useEntity, entityRouteRef, humanizeEntityRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport qs from 'qs';\nimport { useMemo, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { catalogGraphRouteRef } from '../../routes.esm.js';\nimport { EntityRelationsGraph } from '../EntityRelationsGraph/EntityRelationsGraph.esm.js';\nimport { useTranslationRef } from '@backstage/frontend-plugin-api';\nimport { catalogGraphTranslationRef } from '../../translation.esm.js';\nimport { Direction } from '../../lib/types/graph.esm.js';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles(\n  {\n    card: ({ height }) => ({\n      display: \"flex\",\n      flexDirection: \"column\",\n      ...height && {\n        height,\n        maxHeight: height,\n        minHeight: height\n      }\n    }),\n    graph: ({ height }) => ({\n      flex: height ? \"0 0 auto\" : 1,\n      minHeight: 0,\n      ...height && { height }\n    })\n  },\n  { name: \"PluginCatalogGraphCatalogGraphCard\" }\n);\nconst CatalogGraphCard = (props) => {\n  const { t } = useTranslationRef(catalogGraphTranslationRef);\n  const {\n    variant = \"gridItem\",\n    relationPairs,\n    maxDepth = 1,\n    unidirectional = true,\n    mergeRelations = true,\n    direction = Direction.LEFT_RIGHT,\n    kinds,\n    relations,\n    entityFilter,\n    height,\n    className,\n    action,\n    rootEntityNames,\n    onNodeClick,\n    title = t(\"catalogGraphCard.title\"),\n    zoom = \"enable-on-click\"\n  } = props;\n  const { entity } = useEntity();\n  const entityName = useMemo(() => getCompoundEntityRef(entity), [entity]);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const catalogGraphRoute = useRouteRef(catalogGraphRouteRef);\n  const navigate = useNavigate();\n  const classes = useStyles({ height });\n  const analytics = useAnalytics();\n  const defaultOnNodeClick = useCallback(\n    (node, _) => {\n      const nodeEntityName = parseEntityRef(node.id);\n      const path = catalogEntityRoute({\n        kind: nodeEntityName.kind.toLocaleLowerCase(\"en-US\"),\n        namespace: nodeEntityName.namespace.toLocaleLowerCase(\"en-US\"),\n        name: nodeEntityName.name\n      });\n      analytics.captureEvent(\n        \"click\",\n        node.entity.metadata.title ?? humanizeEntityRef(nodeEntityName),\n        { attributes: { to: path } }\n      );\n      navigate(path);\n    },\n    [catalogEntityRoute, navigate, analytics]\n  );\n  const catalogGraphParams = qs.stringify(\n    {\n      rootEntityRefs: [stringifyEntityRef(entity)],\n      maxDepth,\n      unidirectional,\n      mergeRelations,\n      selectedKinds: kinds,\n      selectedRelations: relations,\n      direction\n    },\n    { arrayFormat: \"brackets\", addQueryPrefix: true }\n  );\n  const catalogGraphUrl = `${catalogGraphRoute()}${catalogGraphParams}`;\n  return /* @__PURE__ */ jsx(\n    InfoCard,\n    {\n      title,\n      action,\n      cardClassName: classes.card,\n      variant,\n      noPadding: true,\n      deepLink: {\n        title: t(\"catalogGraphCard.deepLinkTitle\"),\n        link: catalogGraphUrl\n      },\n      children: /* @__PURE__ */ jsx(\n        EntityRelationsGraph,\n        {\n          ...props,\n          rootEntityNames: rootEntityNames || entityName,\n          onNodeClick: onNodeClick || defaultOnNodeClick,\n          className: classNames(classes.graph, className),\n          maxDepth,\n          unidirectional,\n          mergeRelations,\n          direction,\n          relationPairs,\n          entityFilter,\n          zoom\n        }\n      )\n    }\n  );\n};\n\nexport { CatalogGraphCard };\n//# sourceMappingURL=CatalogGraphCard.esm.js.map\n"],"names":["m"],"mappings":"8VAgBA,IAAM,EAAY,QAChB,CACE,KAAM,CAAC,CAAE,QAAM,CAAE,GAAM,EACrB,QAAS,OACT,cAAe,SACf,GAAG,GAAU,CACX,SACA,UAAW,EACX,UAAW,CACb,CAAC,AACH,GACA,MAAO,CAAC,CAAE,QAAM,CAAE,GAAM,EACtB,KAAM,EAAS,WAAa,EAC5B,UAAW,EACX,GAAG,GAAU,CAAE,QAAO,CAAC,AACzB,EACF,EACA,CAAE,KAAM,oCAAqC,GAEzC,EAAmB,AAAC,IACxB,GAAM,CAAE,GAAC,CAAE,CAAG,QAAkB,GAA0B,EACpD,CACJ,UAAU,UAAU,CACpB,eAAa,CACbA,SAAAA,EAAW,CAAC,CACZ,iBAAiB,EAAI,CACrB,iBAAiB,EAAI,CACrB,YAAY,cAAoB,CAChC,OAAK,CACL,WAAS,CACT,cAAY,CACZ,QAAM,CACN,WAAS,CACT,QAAM,CACN,iBAAe,CACf,aAAW,CACX,QAAQ,EAAE,yBAAyB,CACnC,OAAO,iBAAiB,CACzB,CAAG,EACE,CAAE,QAAM,CAAE,CAAG,WACb,EAAa,cAAQ,IAAM,SAAqB,GAAS,CAAC,EAAO,EACjE,EAAqB,QAAY,GAAc,EAC/C,EAAoB,QAAY,GAAoB,EACpD,EAAW,WACX,EAAU,EAAU,CAAE,QAAO,GAC7B,EAAY,UACZ,EAAqB,kBACzB,CAAC,EAAM,KACL,IAAM,EAAiB,SAAe,EAAK,EAAE,EACvC,EAAO,EAAmB,CAC9B,KAAM,EAAe,IAAI,CAAC,iBAAiB,CAAC,SAC5C,UAAW,EAAe,SAAS,CAAC,iBAAiB,CAAC,SACtD,KAAM,EAAe,IAAI,AAC3B,GACA,EAAU,YAAY,CACpB,QACA,EAAK,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAI,QAAkB,GAChD,CAAE,WAAY,CAAE,GAAI,CAAK,CAAE,GAE7B,EAAS,EACX,EACA,CAAC,EAAoB,EAAU,EAAU,EAErC,EAAqB,aAAY,CACrC,CACE,eAAgB,CAAC,SAAmB,GAAQ,CAC5CA,SAAAA,EACA,iBACA,iBACA,cAAe,EACf,kBAAmB,EACnB,WACF,EACA,CAAE,YAAa,WAAY,eAAgB,EAAK,GAE5C,EAAkB,CAAC,EAAE,IAAoB,EAAE,EAAmB,CAAC,CACrE,MAAuB,UACrB,GAAQ,CACR,CACE,QACA,SACA,cAAe,EAAQ,IAAI,CAC3B,UACA,UAAW,GACX,SAAU,CACR,MAAO,EAAE,kCACT,KAAM,CACR,EACA,SAA0B,UACxB,GAAoB,CACpB,CACE,GAAG,CAAK,CACR,gBAAiB,GAAmB,EACpC,YAAa,GAAe,EAC5B,UAAW,IAAW,EAAQ,KAAK,CAAE,GACrCA,SAAAA,EACA,iBACA,iBACA,YACA,gBACA,eACA,MACF,EAEJ,EAEJ,C"}